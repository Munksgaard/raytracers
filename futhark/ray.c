/*
 * Headers
*/

#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#define CL_USE_DEPRECATED_OPENCL_1_2_APIS
#ifdef __APPLE__
#define CL_SILENCE_DEPRECATION
#include <OpenCL/cl.h>
#else
#include <CL/cl.h>
#endif


/*
 * Initialisation
*/

int futhark_get_num_sizes(void);
const char *futhark_get_size_name(int);
const char *futhark_get_size_class(int);
struct futhark_context_config ;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_add_build_option(struct futhark_context_config *cfg,
                                             const char *opt);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
void futhark_context_config_set_device(struct futhark_context_config *cfg, const
                                       char *s);
void futhark_context_config_set_platform(struct futhark_context_config *cfg,
                                         const char *s);
void
futhark_context_config_select_device_interactively(struct futhark_context_config *cfg);
void futhark_context_config_dump_program_to(struct futhark_context_config *cfg,
                                            const char *path);
void
futhark_context_config_load_program_from(struct futhark_context_config *cfg,
                                         const char *path);
void futhark_context_config_dump_binary_to(struct futhark_context_config *cfg,
                                           const char *path);
void futhark_context_config_load_binary_from(struct futhark_context_config *cfg,
                                             const char *path);
void
futhark_context_config_set_default_group_size(struct futhark_context_config *cfg,
                                              int size);
void
futhark_context_config_set_default_num_groups(struct futhark_context_config *cfg,
                                              int num);
void
futhark_context_config_set_default_tile_size(struct futhark_context_config *cfg,
                                             int num);
void
futhark_context_config_set_default_threshold(struct futhark_context_config *cfg,
                                             int num);
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value);
struct futhark_context ;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
struct futhark_context
*futhark_context_new_with_command_queue(struct futhark_context_config *cfg,
                                        cl_command_queue queue);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_sync(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
cl_command_queue futhark_context_get_command_queue(struct futhark_context *ctx);

/*
 * Arrays
*/

struct futhark_f32_1d ;
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx,
                                          float *data, int64_t dim0);
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx,
                                              cl_mem data, int offset,
                                              int64_t dim0);
int futhark_free_f32_1d(struct futhark_context *ctx,
                        struct futhark_f32_1d *arr);
int futhark_values_f32_1d(struct futhark_context *ctx,
                          struct futhark_f32_1d *arr, float *data);
cl_mem futhark_values_raw_f32_1d(struct futhark_context *ctx,
                                 struct futhark_f32_1d *arr);
int64_t *futhark_shape_f32_1d(struct futhark_context *ctx,
                              struct futhark_f32_1d *arr);
struct futhark_i32_1d ;
struct futhark_i32_1d *futhark_new_i32_1d(struct futhark_context *ctx,
                                          int32_t *data, int64_t dim0);
struct futhark_i32_1d *futhark_new_raw_i32_1d(struct futhark_context *ctx,
                                              cl_mem data, int offset,
                                              int64_t dim0);
int futhark_free_i32_1d(struct futhark_context *ctx,
                        struct futhark_i32_1d *arr);
int futhark_values_i32_1d(struct futhark_context *ctx,
                          struct futhark_i32_1d *arr, int32_t *data);
cl_mem futhark_values_raw_i32_1d(struct futhark_context *ctx,
                                 struct futhark_i32_1d *arr);
int64_t *futhark_shape_i32_1d(struct futhark_context *ctx,
                              struct futhark_i32_1d *arr);
struct futhark_i32_2d ;
struct futhark_i32_2d *futhark_new_i32_2d(struct futhark_context *ctx,
                                          int32_t *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_i32_2d *futhark_new_raw_i32_2d(struct futhark_context *ctx,
                                              cl_mem data, int offset,
                                              int64_t dim0, int64_t dim1);
int futhark_free_i32_2d(struct futhark_context *ctx,
                        struct futhark_i32_2d *arr);
int futhark_values_i32_2d(struct futhark_context *ctx,
                          struct futhark_i32_2d *arr, int32_t *data);
cl_mem futhark_values_raw_i32_2d(struct futhark_context *ctx,
                                 struct futhark_i32_2d *arr);
int64_t *futhark_shape_i32_2d(struct futhark_context *ctx,
                              struct futhark_i32_2d *arr);
struct futhark_i8_1d ;
struct futhark_i8_1d *futhark_new_i8_1d(struct futhark_context *ctx,
                                        int8_t *data, int64_t dim0);
struct futhark_i8_1d *futhark_new_raw_i8_1d(struct futhark_context *ctx,
                                            cl_mem data, int offset,
                                            int64_t dim0);
int futhark_free_i8_1d(struct futhark_context *ctx, struct futhark_i8_1d *arr);
int futhark_values_i8_1d(struct futhark_context *ctx, struct futhark_i8_1d *arr,
                         int8_t *data);
cl_mem futhark_values_raw_i8_1d(struct futhark_context *ctx,
                                struct futhark_i8_1d *arr);
int64_t *futhark_shape_i8_1d(struct futhark_context *ctx,
                             struct futhark_i8_1d *arr);

/*
 * Opaque values
*/

struct futhark_opaque_74b00dd0 ;
int futhark_free_opaque_74b00dd0(struct futhark_context *ctx,
                                 struct futhark_opaque_74b00dd0 *obj);
struct futhark_opaque_4bbff2b2 ;
int futhark_free_opaque_4bbff2b2(struct futhark_context *ctx,
                                 struct futhark_opaque_4bbff2b2 *obj);

/*
 * Entry points
*/

int futhark_entry_render_irreg(struct futhark_context *ctx,
                               struct futhark_i32_2d **out0, const int32_t in0,
                               const int32_t in1);
int futhark_entry_render_rgbbox(struct futhark_context *ctx,
                                struct futhark_i32_2d **out0, const int32_t in0,
                                const int32_t in1);
int futhark_entry_bvh_irreg(struct futhark_context *ctx,
                            struct futhark_opaque_74b00dd0 **out0,
                            struct futhark_opaque_4bbff2b2 **out1, const
                            int32_t in0, const int32_t in1);
int futhark_entry_bvh_rgbbox(struct futhark_context *ctx,
                             struct futhark_opaque_74b00dd0 **out0,
                             struct futhark_opaque_4bbff2b2 **out1, const
                             int32_t in0, const int32_t in1);

/*
 * Miscellaneous
*/

void futhark_debugging_report(struct futhark_context *ctx);
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
#undef NDEBUG
#include <assert.h>
// Start of panic.h.

#include <stdarg.h>

static const char *fut_progname;

static void panic(int eval, const char *fmt, ...)
{
	va_list ap;

	va_start(ap, fmt);
        fprintf(stderr, "%s: ", fut_progname);
	vfprintf(stderr, fmt, ap);
	va_end(ap);
        exit(eval);
}

/* For generating arbitrary-sized error messages.  It is the callers
   responsibility to free the buffer at some point. */
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); /* Must re-init. */
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}

// End of panic.h.

// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
/* Assuming POSIX */

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

#endif

// End of timing.h.

#include <string.h>
#include <inttypes.h>
#include <errno.h>
#include <ctype.h>
#include <errno.h>
#include <getopt.h>
// Start of values.h.

//// Text I/O

typedef int (*writer)(FILE*, void*);
typedef int (*bin_reader)(void*);
typedef int (*str_reader)(const char *, void*);

struct array_reader {
  char* elems;
  int64_t n_elems_space;
  int64_t elem_size;
  int64_t n_elems_used;
  int64_t *shape;
  str_reader elem_reader;
};

static void skipspaces() {
  int c;
  do {
    c = getchar();
  } while (isspace(c));

  if (c != EOF) {
    ungetc(c, stdin);
  }
}

static int constituent(char c) {
  return isalnum(c) || c == '.' || c == '-' || c == '+' || c == '_';
}

// Produces an empty token only on EOF.
static void next_token(char *buf, int bufsize) {
 start:
  skipspaces();

  int i = 0;
  while (i < bufsize) {
    int c = getchar();
    buf[i] = (char)c;

    if (c == EOF) {
      buf[i] = 0;
      return;
    } else if (c == '-' && i == 1 && buf[0] == '-') {
      // Line comment, so skip to end of line and start over.
      for (; c != '\n' && c != EOF; c = getchar());
      goto start;
    } else if (!constituent((char)c)) {
      if (i == 0) {
        // We permit single-character tokens that are not
        // constituents; this lets things like ']' and ',' be
        // tokens.
        buf[i+1] = 0;
        return;
      } else {
        ungetc(c, stdin);
        buf[i] = 0;
        return;
      }
    }

    i++;
  }

  buf[bufsize-1] = 0;
}

static int next_token_is(char *buf, int bufsize, const char* expected) {
  next_token(buf, bufsize);
  return strcmp(buf, expected) == 0;
}

static void remove_underscores(char *buf) {
  char *w = buf;

  for (char *r = buf; *r; r++) {
    if (*r != '_') {
      *w++ = *r;
    }
  }

  *w++ = 0;
}

static int read_str_elem(char *buf, struct array_reader *reader) {
  int ret;
  if (reader->n_elems_used == reader->n_elems_space) {
    reader->n_elems_space *= 2;
    reader->elems = (char*) realloc(reader->elems,
                                    (size_t)(reader->n_elems_space * reader->elem_size));
  }

  ret = reader->elem_reader(buf, reader->elems + reader->n_elems_used * reader->elem_size);

  if (ret == 0) {
    reader->n_elems_used++;
  }

  return ret;
}

static int read_str_array_elems(char *buf, int bufsize,
                                struct array_reader *reader, int64_t dims) {
  int ret;
  int first = 1;
  char *knows_dimsize = (char*) calloc((size_t)dims, sizeof(char));
  int cur_dim = dims-1;
  int64_t *elems_read_in_dim = (int64_t*) calloc((size_t)dims, sizeof(int64_t));

  while (1) {
    next_token(buf, bufsize);

    if (strcmp(buf, "]") == 0) {
      if (knows_dimsize[cur_dim]) {
        if (reader->shape[cur_dim] != elems_read_in_dim[cur_dim]) {
          ret = 1;
          break;
        }
      } else {
        knows_dimsize[cur_dim] = 1;
        reader->shape[cur_dim] = elems_read_in_dim[cur_dim];
      }
      if (cur_dim == 0) {
        ret = 0;
        break;
      } else {
        cur_dim--;
        elems_read_in_dim[cur_dim]++;
      }
    } else if (strcmp(buf, ",") == 0) {
      next_token(buf, bufsize);
      if (strcmp(buf, "[") == 0) {
        if (cur_dim == dims - 1) {
          ret = 1;
          break;
        }
        first = 1;
        cur_dim++;
        elems_read_in_dim[cur_dim] = 0;
      } else if (cur_dim == dims - 1) {
        ret = read_str_elem(buf, reader);
        if (ret != 0) {
          break;
        }
        elems_read_in_dim[cur_dim]++;
      } else {
        ret = 1;
        break;
      }
    } else if (strlen(buf) == 0) {
      // EOF
      ret = 1;
      break;
    } else if (first) {
      if (strcmp(buf, "[") == 0) {
        if (cur_dim == dims - 1) {
          ret = 1;
          break;
        }
        cur_dim++;
        elems_read_in_dim[cur_dim] = 0;
      } else {
        ret = read_str_elem(buf, reader);
        if (ret != 0) {
          break;
        }
        elems_read_in_dim[cur_dim]++;
        first = 0;
      }
    } else {
      ret = 1;
      break;
    }
  }

  free(knows_dimsize);
  free(elems_read_in_dim);
  return ret;
}

static int read_str_empty_array(char *buf, int bufsize,
                                const char *type_name, int64_t *shape, int64_t dims) {
  if (strlen(buf) == 0) {
    // EOF
    return 1;
  }

  if (strcmp(buf, "empty") != 0) {
    return 1;
  }

  if (!next_token_is(buf, bufsize, "(")) {
    return 1;
  }

  for (int i = 0; i < dims; i++) {
    if (!next_token_is(buf, bufsize, "[")) {
      return 1;
    }

    next_token(buf, bufsize);

    if (sscanf(buf, "%"SCNu64, &shape[i]) != 1) {
      return 1;
    }

    if (!next_token_is(buf, bufsize, "]")) {
      return 1;
    }
  }

  if (!next_token_is(buf, bufsize, type_name)) {
    return 1;
  }


  if (!next_token_is(buf, bufsize, ")")) {
    return 1;
  }

  // Check whether the array really is empty.
  for (int i = 0; i < dims; i++) {
    if (shape[i] == 0) {
      return 0;
    }
  }

  // Not an empty array!
  return 1;
}

static int read_str_array(int64_t elem_size, str_reader elem_reader,
                          const char *type_name,
                          void **data, int64_t *shape, int64_t dims) {
  int ret;
  struct array_reader reader;
  char buf[100];

  int dims_seen;
  for (dims_seen = 0; dims_seen < dims; dims_seen++) {
    if (!next_token_is(buf, sizeof(buf), "[")) {
      break;
    }
  }

  if (dims_seen == 0) {
    return read_str_empty_array(buf, sizeof(buf), type_name, shape, dims);
  }

  if (dims_seen != dims) {
    return 1;
  }

  reader.shape = shape;
  reader.n_elems_used = 0;
  reader.elem_size = elem_size;
  reader.n_elems_space = 16;
  reader.elems = (char*) realloc(*data, (size_t)(elem_size*reader.n_elems_space));
  reader.elem_reader = elem_reader;

  ret = read_str_array_elems(buf, sizeof(buf), &reader, dims);

  *data = reader.elems;

  return ret;
}

#define READ_STR(MACRO, PTR, SUFFIX)                                   \
  remove_underscores(buf);                                              \
  int j;                                                                \
  if (sscanf(buf, "%"MACRO"%n", (PTR*)dest, &j) == 1) {                 \
    return !(strcmp(buf+j, "") == 0 || strcmp(buf+j, SUFFIX) == 0);     \
  } else {                                                              \
    return 1;                                                           \
  }

static int read_str_i8(char *buf, void* dest) {
  /* Some platforms (WINDOWS) does not support scanf %hhd or its
     cousin, %SCNi8.  Read into int first to avoid corrupting
     memory.

     https://gcc.gnu.org/bugzilla/show_bug.cgi?id=63417  */
  remove_underscores(buf);
  int j, x;
  if (sscanf(buf, "%i%n", &x, &j) == 1) {
    *(int8_t*)dest = (int8_t)x;
    return !(strcmp(buf+j, "") == 0 || strcmp(buf+j, "i8") == 0);
  } else {
    return 1;
  }
}

static int read_str_u8(char *buf, void* dest) {
  /* Some platforms (WINDOWS) does not support scanf %hhd or its
     cousin, %SCNu8.  Read into int first to avoid corrupting
     memory.

     https://gcc.gnu.org/bugzilla/show_bug.cgi?id=63417  */
  remove_underscores(buf);
  int j, x;
  if (sscanf(buf, "%i%n", &x, &j) == 1) {
    *(uint8_t*)dest = (uint8_t)x;
    return !(strcmp(buf+j, "") == 0 || strcmp(buf+j, "u8") == 0);
  } else {
    return 1;
  }
}

static int read_str_i16(char *buf, void* dest) {
  READ_STR(SCNi16, int16_t, "i16");
}

static int read_str_u16(char *buf, void* dest) {
  READ_STR(SCNi16, int16_t, "u16");
}

static int read_str_i32(char *buf, void* dest) {
  READ_STR(SCNi32, int32_t, "i32");
}

static int read_str_u32(char *buf, void* dest) {
  READ_STR(SCNi32, int32_t, "u32");
}

static int read_str_i64(char *buf, void* dest) {
  READ_STR(SCNi64, int64_t, "i64");
}

static int read_str_u64(char *buf, void* dest) {
  // FIXME: This is not correct, as SCNu64 only permits decimal
  // literals.  However, SCNi64 does not handle very large numbers
  // correctly (it's really for signed numbers, so that's fair).
  READ_STR(SCNu64, uint64_t, "u64");
}

static int read_str_f32(char *buf, void* dest) {
  remove_underscores(buf);
  if (strcmp(buf, "f32.nan") == 0) {
    *(float*)dest = NAN;
    return 0;
  } else if (strcmp(buf, "f32.inf") == 0) {
    *(float*)dest = INFINITY;
    return 0;
  } else if (strcmp(buf, "-f32.inf") == 0) {
    *(float*)dest = -INFINITY;
    return 0;
  } else {
    READ_STR("f", float, "f32");
  }
}

static int read_str_f64(char *buf, void* dest) {
  remove_underscores(buf);
  if (strcmp(buf, "f64.nan") == 0) {
    *(double*)dest = NAN;
    return 0;
  } else if (strcmp(buf, "f64.inf") == 0) {
    *(double*)dest = INFINITY;
    return 0;
  } else if (strcmp(buf, "-f64.inf") == 0) {
    *(double*)dest = -INFINITY;
    return 0;
  } else {
    READ_STR("lf", double, "f64");
  }
}

static int read_str_bool(char *buf, void* dest) {
  if (strcmp(buf, "true") == 0) {
    *(char*)dest = 1;
    return 0;
  } else if (strcmp(buf, "false") == 0) {
    *(char*)dest = 0;
    return 0;
  } else {
    return 1;
  }
}

static int write_str_i8(FILE *out, int8_t *src) {
  return fprintf(out, "%hhdi8", *src);
}

static int write_str_u8(FILE *out, uint8_t *src) {
  return fprintf(out, "%hhuu8", *src);
}

static int write_str_i16(FILE *out, int16_t *src) {
  return fprintf(out, "%hdi16", *src);
}

static int write_str_u16(FILE *out, uint16_t *src) {
  return fprintf(out, "%huu16", *src);
}

static int write_str_i32(FILE *out, int32_t *src) {
  return fprintf(out, "%di32", *src);
}

static int write_str_u32(FILE *out, uint32_t *src) {
  return fprintf(out, "%uu32", *src);
}

static int write_str_i64(FILE *out, int64_t *src) {
  return fprintf(out, "%"PRIi64"i64", *src);
}

static int write_str_u64(FILE *out, uint64_t *src) {
  return fprintf(out, "%"PRIu64"u64", *src);
}

static int write_str_f32(FILE *out, float *src) {
  float x = *src;
  if (isnan(x)) {
    return fprintf(out, "f32.nan");
  } else if (isinf(x) && x >= 0) {
    return fprintf(out, "f32.inf");
  } else if (isinf(x)) {
    return fprintf(out, "-f32.inf");
  } else {
    return fprintf(out, "%.6ff32", x);
  }
}

static int write_str_f64(FILE *out, double *src) {
  double x = *src;
  if (isnan(x)) {
    return fprintf(out, "f64.nan");
  } else if (isinf(x) && x >= 0) {
    return fprintf(out, "f64.inf");
  } else if (isinf(x)) {
    return fprintf(out, "-f64.inf");
  } else {
    return fprintf(out, "%.6ff64", *src);
  }
}

static int write_str_bool(FILE *out, void *src) {
  return fprintf(out, *(char*)src ? "true" : "false");
}

//// Binary I/O

#define BINARY_FORMAT_VERSION 2
#define IS_BIG_ENDIAN (!*(unsigned char *)&(uint16_t){1})

static void flip_bytes(int elem_size, unsigned char *elem) {
  for (int j=0; j<elem_size/2; j++) {
    unsigned char head = elem[j];
    int tail_index = elem_size-1-j;
    elem[j] = elem[tail_index];
    elem[tail_index] = head;
  }
}

// On Windows we need to explicitly set the file mode to not mangle
// newline characters.  On *nix there is no difference.
#ifdef _WIN32
#include <io.h>
#include <fcntl.h>
static void set_binary_mode(FILE *f) {
  setmode(fileno(f), O_BINARY);
}
#else
static void set_binary_mode(FILE *f) {
  (void)f;
}
#endif

static int read_byte(void* dest) {
  int num_elems_read = fread(dest, 1, 1, stdin);
  return num_elems_read == 1 ? 0 : 1;
}

//// Types

struct primtype_info_t {
  const char binname[4]; // Used for parsing binary data.
  const char* type_name; // Same name as in Futhark.
  const int64_t size; // in bytes
  const writer write_str; // Write in text format.
  const str_reader read_str; // Read in text format.
};

static const struct primtype_info_t i8_info =
  {.binname = "  i8", .type_name = "i8",   .size = 1,
   .write_str = (writer)write_str_i8, .read_str = (str_reader)read_str_i8};
static const struct primtype_info_t i16_info =
  {.binname = " i16", .type_name = "i16",  .size = 2,
   .write_str = (writer)write_str_i16, .read_str = (str_reader)read_str_i16};
static const struct primtype_info_t i32_info =
  {.binname = " i32", .type_name = "i32",  .size = 4,
   .write_str = (writer)write_str_i32, .read_str = (str_reader)read_str_i32};
static const struct primtype_info_t i64_info =
  {.binname = " i64", .type_name = "i64",  .size = 8,
   .write_str = (writer)write_str_i64, .read_str = (str_reader)read_str_i64};
static const struct primtype_info_t u8_info =
  {.binname = "  u8", .type_name = "u8",   .size = 1,
   .write_str = (writer)write_str_u8, .read_str = (str_reader)read_str_u8};
static const struct primtype_info_t u16_info =
  {.binname = " u16", .type_name = "u16",  .size = 2,
   .write_str = (writer)write_str_u16, .read_str = (str_reader)read_str_u16};
static const struct primtype_info_t u32_info =
  {.binname = " u32", .type_name = "u32",  .size = 4,
   .write_str = (writer)write_str_u32, .read_str = (str_reader)read_str_u32};
static const struct primtype_info_t u64_info =
  {.binname = " u64", .type_name = "u64",  .size = 8,
   .write_str = (writer)write_str_u64, .read_str = (str_reader)read_str_u64};
static const struct primtype_info_t f32_info =
  {.binname = " f32", .type_name = "f32",  .size = 4,
   .write_str = (writer)write_str_f32, .read_str = (str_reader)read_str_f32};
static const struct primtype_info_t f64_info =
  {.binname = " f64", .type_name = "f64",  .size = 8,
   .write_str = (writer)write_str_f64, .read_str = (str_reader)read_str_f64};
static const struct primtype_info_t bool_info =
  {.binname = "bool", .type_name = "bool", .size = 1,
   .write_str = (writer)write_str_bool, .read_str = (str_reader)read_str_bool};

static const struct primtype_info_t* primtypes[] = {
  &i8_info, &i16_info, &i32_info, &i64_info,
  &u8_info, &u16_info, &u32_info, &u64_info,
  &f32_info, &f64_info,
  &bool_info,
  NULL // NULL-terminated
};

// General value interface.  All endian business taken care of at
// lower layers.

static int read_is_binary() {
  skipspaces();
  int c = getchar();
  if (c == 'b') {
    int8_t bin_version;
    int ret = read_byte(&bin_version);

    if (ret != 0) { panic(1, "binary-input: could not read version.\n"); }

    if (bin_version != BINARY_FORMAT_VERSION) {
      panic(1, "binary-input: File uses version %i, but I only understand version %i.\n",
            bin_version, BINARY_FORMAT_VERSION);
    }

    return 1;
  }
  ungetc(c, stdin);
  return 0;
}

static const struct primtype_info_t* read_bin_read_type_enum() {
  char read_binname[4];

  int num_matched = scanf("%4c", read_binname);
  if (num_matched != 1) { panic(1, "binary-input: Couldn't read element type.\n"); }

  const struct primtype_info_t **type = primtypes;

  for (; *type != NULL; type++) {
    // I compare the 4 characters manually instead of using strncmp because
    // this allows any value to be used, also NULL bytes
    if (memcmp(read_binname, (*type)->binname, 4) == 0) {
      return *type;
    }
  }
  panic(1, "binary-input: Did not recognize the type '%s'.\n", read_binname);
  return NULL;
}

static void read_bin_ensure_scalar(const struct primtype_info_t *expected_type) {
  int8_t bin_dims;
  int ret = read_byte(&bin_dims);
  if (ret != 0) { panic(1, "binary-input: Couldn't get dims.\n"); }

  if (bin_dims != 0) {
    panic(1, "binary-input: Expected scalar (0 dimensions), but got array with %i dimensions.\n",
          bin_dims);
  }

  const struct primtype_info_t *bin_type = read_bin_read_type_enum();
  if (bin_type != expected_type) {
    panic(1, "binary-input: Expected scalar of type %s but got scalar of type %s.\n",
          expected_type->type_name,
          bin_type->type_name);
  }
}

//// High-level interface

static int read_bin_array(const struct primtype_info_t *expected_type, void **data, int64_t *shape, int64_t dims) {
  int ret;

  int8_t bin_dims;
  ret = read_byte(&bin_dims);
  if (ret != 0) { panic(1, "binary-input: Couldn't get dims.\n"); }

  if (bin_dims != dims) {
    panic(1, "binary-input: Expected %i dimensions, but got array with %i dimensions.\n",
          dims, bin_dims);
  }

  const struct primtype_info_t *bin_primtype = read_bin_read_type_enum();
  if (expected_type != bin_primtype) {
    panic(1, "binary-input: Expected %iD-array with element type '%s' but got %iD-array with element type '%s'.\n",
          dims, expected_type->type_name, dims, bin_primtype->type_name);
  }

  int64_t elem_count = 1;
  for (int i=0; i<dims; i++) {
    int64_t bin_shape;
    ret = fread(&bin_shape, sizeof(bin_shape), 1, stdin);
    if (ret != 1) {
      panic(1, "binary-input: Couldn't read size for dimension %i of array.\n", i);
    }
    if (IS_BIG_ENDIAN) {
      flip_bytes(sizeof(bin_shape), (unsigned char*) &bin_shape);
    }
    elem_count *= bin_shape;
    shape[i] = bin_shape;
  }

  int64_t elem_size = expected_type->size;
  void* tmp = realloc(*data, (size_t)(elem_count * elem_size));
  if (tmp == NULL) {
    panic(1, "binary-input: Failed to allocate array of size %i.\n",
          elem_count * elem_size);
  }
  *data = tmp;

  int64_t num_elems_read = (int64_t)fread(*data, (size_t)elem_size, (size_t)elem_count, stdin);
  if (num_elems_read != elem_count) {
    panic(1, "binary-input: tried to read %i elements of an array, but only got %i elements.\n",
          elem_count, num_elems_read);
  }

  // If we're on big endian platform we must change all multibyte elements
  // from using little endian to big endian
  if (IS_BIG_ENDIAN && elem_size != 1) {
    flip_bytes(elem_size, (unsigned char*) *data);
  }

  return 0;
}

static int read_array(const struct primtype_info_t *expected_type, void **data, int64_t *shape, int64_t dims) {
  if (!read_is_binary()) {
    return read_str_array(expected_type->size, (str_reader)expected_type->read_str, expected_type->type_name, data, shape, dims);
  } else {
    return read_bin_array(expected_type, data, shape, dims);
  }
}

static int write_str_array(FILE *out, const struct primtype_info_t *elem_type, unsigned char *data, int64_t *shape, int8_t rank) {
  if (rank==0) {
    elem_type->write_str(out, (void*)data);
  } else {
    int64_t len = (int64_t)shape[0];
    int64_t slice_size = 1;

    int64_t elem_size = elem_type->size;
    for (int8_t i = 1; i < rank; i++) {
      slice_size *= shape[i];
    }

    if (len*slice_size == 0) {
      printf("empty(");
      for (int64_t i = 0; i < rank; i++) {
        printf("[%"PRIi64"]", shape[i]);
      }
      printf("%s", elem_type->type_name);
      printf(")");
    } else if (rank==1) {
      putchar('[');
      for (int64_t i = 0; i < len; i++) {
        elem_type->write_str(out, (void*) (data + i * elem_size));
        if (i != len-1) {
          printf(", ");
        }
      }
      putchar(']');
    } else {
      putchar('[');
      for (int64_t i = 0; i < len; i++) {
        write_str_array(out, elem_type, data + i * slice_size * elem_size, shape+1, rank-1);
        if (i != len-1) {
          printf(", ");
        }
      }
      putchar(']');
    }
  }
  return 0;
}

static int write_bin_array(FILE *out, const struct primtype_info_t *elem_type, unsigned char *data, int64_t *shape, int8_t rank) {
  int64_t num_elems = 1;
  for (int64_t i = 0; i < rank; i++) {
    num_elems *= shape[i];
  }

  fputc('b', out);
  fputc((char)BINARY_FORMAT_VERSION, out);
  fwrite(&rank, sizeof(int8_t), 1, out);
  fputs(elem_type->binname, out);
  if (shape != NULL) {
    fwrite(shape, sizeof(int64_t), (size_t)rank, out);
  }

  if (IS_BIG_ENDIAN) {
    for (int64_t i = 0; i < num_elems; i++) {
      unsigned char *elem = data+i*elem_type->size;
      for (int64_t j = 0; j < elem_type->size; j++) {
        fwrite(&elem[elem_type->size-j], 1, 1, out);
      }
    }
  } else {
    fwrite(data, (size_t)elem_type->size, (size_t)num_elems, out);
  }

  return 0;
}

static int write_array(FILE *out, int write_binary,
                       const struct primtype_info_t *elem_type, void *data, int64_t *shape, int8_t rank) {
  if (write_binary) {
    return write_bin_array(out, elem_type, data, shape, rank);
  } else {
    return write_str_array(out, elem_type, data, shape, rank);
  }
}

static int read_scalar(const struct primtype_info_t *expected_type, void *dest) {
  if (!read_is_binary()) {
    char buf[100];
    next_token(buf, sizeof(buf));
    return expected_type->read_str(buf, dest);
  } else {
    read_bin_ensure_scalar(expected_type);
    int64_t elem_size = expected_type->size;
    int num_elems_read = fread(dest, (size_t)elem_size, 1, stdin);
    if (IS_BIG_ENDIAN) {
      flip_bytes(elem_size, (unsigned char*) dest);
    }
    return num_elems_read == 1 ? 0 : 1;
  }
}

static int write_scalar(FILE *out, int write_binary, const struct primtype_info_t *type, void *src) {
  if (write_binary) {
    return write_bin_array(out, type, src, NULL, 0);
  } else {
    return type->write_str(out, src);
  }
}

// End of values.h.

static int binary_output = 0;
static FILE *runtime_file;
static int perform_warmup = 0;
static int num_runs = 1;
static const char *entry_point = "main";
// Start of tuning.h.

static char* load_tuning_file(const char *fname,
                              void *cfg,
                              int (*set_size)(void*, const char*, size_t)) {
  const int max_line_len = 1024;
  char* line = (char*) malloc(max_line_len);

  FILE *f = fopen(fname, "r");

  if (f == NULL) {
    snprintf(line, max_line_len, "Cannot open file: %s", strerror(errno));
    return line;
  }

  int lineno = 0;
  while (fgets(line, max_line_len, f) != NULL) {
    lineno++;
    char *eql = strstr(line, "=");
    if (eql) {
      *eql = 0;
      int value = atoi(eql+1);
      if (set_size(cfg, line, value) != 0) {
        strncpy(eql+1, line, max_line_len-strlen(line)-1);
        snprintf(line, max_line_len, "Unknown name '%s' on line %d.", eql+1, lineno);
        return line;
      }
    } else {
      snprintf(line, max_line_len, "Invalid line %d (must be of form 'name=int').",
               lineno);
      return line;
    }
  }

  free(line);

  return NULL;
}

// End of tuning.h.

int parse_options(struct futhark_context_config *cfg, int argc,
                  char *const argv[])
{
    int ch;
    static struct option long_options[] = {{"write-runtime-to",
                                            required_argument, NULL, 1},
                                           {"runs", required_argument, NULL, 2},
                                           {"debugging", no_argument, NULL, 3},
                                           {"log", no_argument, NULL, 4},
                                           {"entry-point", required_argument,
                                            NULL, 5}, {"binary-output",
                                                       no_argument, NULL, 6},
                                           {"default-group-size",
                                            required_argument, NULL, 7},
                                           {"default-num-groups",
                                            required_argument, NULL, 8},
                                           {"default-tile-size",
                                            required_argument, NULL, 9},
                                           {"default-threshold",
                                            required_argument, NULL, 10},
                                           {"print-sizes", no_argument, NULL,
                                            11}, {"size", required_argument,
                                                  NULL, 12}, {"tuning",
                                                              required_argument,
                                                              NULL, 13},
                                           {"platform", required_argument, NULL,
                                            14}, {"device", required_argument,
                                                  NULL, 15}, {"dump-opencl",
                                                              required_argument,
                                                              NULL, 16},
                                           {"load-opencl", required_argument,
                                            NULL, 17}, {"dump-opencl-binary",
                                                        required_argument, NULL,
                                                        18},
                                           {"load-opencl-binary",
                                            required_argument, NULL, 19},
                                           {"build-option", required_argument,
                                            NULL, 20}, {"profile", no_argument,
                                                        NULL, 21}, {0, 0, 0,
                                                                    0}};
    
    while ((ch = getopt_long(argc, argv, ":t:r:DLe:bp:d:P", long_options,
                             NULL)) != -1) {
        if (ch == 1 || ch == 't') {
            runtime_file = fopen(optarg, "w");
            if (runtime_file == NULL)
                panic(1, "Cannot open %s: %s\n", optarg, strerror(errno));
        }
        if (ch == 2 || ch == 'r') {
            num_runs = atoi(optarg);
            perform_warmup = 1;
            if (num_runs <= 0)
                panic(1, "Need a positive number of runs, not %s\n", optarg);
        }
        if (ch == 3 || ch == 'D')
            futhark_context_config_set_debugging(cfg, 1);
        if (ch == 4 || ch == 'L')
            futhark_context_config_set_logging(cfg, 1);
        if (ch == 5 || ch == 'e') {
            if (entry_point != NULL)
                entry_point = optarg;
        }
        if (ch == 6 || ch == 'b')
            binary_output = 1;
        if (ch == 7)
            futhark_context_config_set_default_group_size(cfg, atoi(optarg));
        if (ch == 8)
            futhark_context_config_set_default_num_groups(cfg, atoi(optarg));
        if (ch == 9)
            futhark_context_config_set_default_tile_size(cfg, atoi(optarg));
        if (ch == 10)
            futhark_context_config_set_default_threshold(cfg, atoi(optarg));
        if (ch == 11) {
            int n = futhark_get_num_sizes();
            
            for (int i = 0; i < n; i++)
                printf("%s (%s)\n", futhark_get_size_name(i),
                       futhark_get_size_class(i));
            exit(0);
        }
        if (ch == 12) {
            char *name = optarg;
            char *equals = strstr(optarg, "=");
            char *value_str = equals != NULL ? equals + 1 : optarg;
            int value = atoi(value_str);
            
            if (equals != NULL) {
                *equals = 0;
                if (futhark_context_config_set_size(cfg, name, value) != 0)
                    panic(1, "Unknown size: %s\n", name);
            } else
                panic(1, "Invalid argument for size option: %s\n", optarg);
        }
        if (ch == 13) {
            char *ret = load_tuning_file(optarg, cfg, (int (*)(void *, const
                                                               char *,
                                                               size_t)) futhark_context_config_set_size);
            
            if (ret != NULL)
                panic(1, "When loading tuning from '%s': %s\n", optarg, ret);
        }
        if (ch == 14 || ch == 'p')
            futhark_context_config_set_platform(cfg, optarg);
        if (ch == 15 || ch == 'd')
            futhark_context_config_set_device(cfg, optarg);
        if (ch == 16) {
            futhark_context_config_dump_program_to(cfg, optarg);
            entry_point = NULL;
        }
        if (ch == 17)
            futhark_context_config_load_program_from(cfg, optarg);
        if (ch == 18) {
            futhark_context_config_dump_binary_to(cfg, optarg);
            entry_point = NULL;
        }
        if (ch == 19)
            futhark_context_config_load_binary_from(cfg, optarg);
        if (ch == 20)
            futhark_context_config_add_build_option(cfg, optarg);
        if (ch == 21 || ch == 'P')
            futhark_context_config_set_profiling(cfg, 1);
        if (ch == ':')
            panic(-1, "Missing argument for option %s\n", argv[optind - 1]);
        if (ch == '?') {
            fprintf(stderr, "Usage: %s: %s\n", fut_progname,
                    "[-t/--write-runtime-to FILE] [-r/--runs INT] [-D/--debugging] [-L/--log] [-e/--entry-point NAME] [-b/--binary-output] [--default-group-size INT] [--default-num-groups INT] [--default-tile-size INT] [--default-threshold INT] [--print-sizes] [--size NAME=INT] [--tuning FILE] [-p/--platform NAME] [-d/--device NAME] [--dump-opencl FILE] [--load-opencl FILE] [--dump-opencl-binary FILE] [--load-opencl-binary FILE] [--build-option OPT] [-P/--profile]");
            panic(1, "Unknown option: %s\n", argv[optind - 1]);
        }
    }
    return optind;
}
static void futrts_cli_entry_render_irreg(struct futhark_context *ctx)
{
    int64_t t_start, t_end;
    int time_runs = 0, profile_run = 0;
    
    // We do not want to profile all the initialisation.
    futhark_context_pause_profiling(ctx);
    /* Declare and read input. */
    set_binary_mode(stdin);
    
    int32_t read_value_77635;
    
    if (read_scalar(&i32_info, &read_value_77635) != 0)
        panic(1, "Error when reading input #%d of type %s (errno: %s).\n", 0,
              i32_info.type_name, strerror(errno));
    
    int32_t read_value_77636;
    
    if (read_scalar(&i32_info, &read_value_77636) != 0)
        panic(1, "Error when reading input #%d of type %s (errno: %s).\n", 1,
              i32_info.type_name, strerror(errno));
    
    struct futhark_i32_2d *result_77637;
    
    if (perform_warmup) {
        int r;
        
        ;
        ;
        if (futhark_context_sync(ctx) != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_render_irreg(ctx, &result_77637, read_value_77635,
                                       read_value_77636);
        if (r != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL)
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
        ;
        ;
        assert(futhark_free_i32_2d(ctx, result_77637) == 0);
    }
    time_runs = 1;
    /* Proper run. */
    for (int run = 0; run < num_runs; run++) {
        // Only profile last run.
        profile_run = run == num_runs - 1;
        
        int r;
        
        ;
        ;
        if (futhark_context_sync(ctx) != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_render_irreg(ctx, &result_77637, read_value_77635,
                                       read_value_77636);
        if (r != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL)
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
        ;
        ;
        if (run < num_runs - 1) {
            assert(futhark_free_i32_2d(ctx, result_77637) == 0);
        }
    }
    ;
    ;
    if (binary_output)
        set_binary_mode(stdout);
    {
        int32_t *arr = calloc(sizeof(int32_t), futhark_shape_i32_2d(ctx,
                                                                    result_77637)[0] *
                              futhark_shape_i32_2d(ctx, result_77637)[1]);
        
        assert(arr != NULL);
        assert(futhark_values_i32_2d(ctx, result_77637, arr) == 0);
        write_array(stdout, binary_output, &i32_info, arr,
                    futhark_shape_i32_2d(ctx, result_77637), 2);
        free(arr);
    }
    printf("\n");
    assert(futhark_free_i32_2d(ctx, result_77637) == 0);
}
static void futrts_cli_entry_render_rgbbox(struct futhark_context *ctx)
{
    int64_t t_start, t_end;
    int time_runs = 0, profile_run = 0;
    
    // We do not want to profile all the initialisation.
    futhark_context_pause_profiling(ctx);
    /* Declare and read input. */
    set_binary_mode(stdin);
    
    int32_t read_value_77638;
    
    if (read_scalar(&i32_info, &read_value_77638) != 0)
        panic(1, "Error when reading input #%d of type %s (errno: %s).\n", 0,
              i32_info.type_name, strerror(errno));
    
    int32_t read_value_77639;
    
    if (read_scalar(&i32_info, &read_value_77639) != 0)
        panic(1, "Error when reading input #%d of type %s (errno: %s).\n", 1,
              i32_info.type_name, strerror(errno));
    
    struct futhark_i32_2d *result_77640;
    
    if (perform_warmup) {
        int r;
        
        ;
        ;
        if (futhark_context_sync(ctx) != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_render_rgbbox(ctx, &result_77640, read_value_77638,
                                        read_value_77639);
        if (r != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL)
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
        ;
        ;
        assert(futhark_free_i32_2d(ctx, result_77640) == 0);
    }
    time_runs = 1;
    /* Proper run. */
    for (int run = 0; run < num_runs; run++) {
        // Only profile last run.
        profile_run = run == num_runs - 1;
        
        int r;
        
        ;
        ;
        if (futhark_context_sync(ctx) != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_render_rgbbox(ctx, &result_77640, read_value_77638,
                                        read_value_77639);
        if (r != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL)
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
        ;
        ;
        if (run < num_runs - 1) {
            assert(futhark_free_i32_2d(ctx, result_77640) == 0);
        }
    }
    ;
    ;
    if (binary_output)
        set_binary_mode(stdout);
    {
        int32_t *arr = calloc(sizeof(int32_t), futhark_shape_i32_2d(ctx,
                                                                    result_77640)[0] *
                              futhark_shape_i32_2d(ctx, result_77640)[1]);
        
        assert(arr != NULL);
        assert(futhark_values_i32_2d(ctx, result_77640, arr) == 0);
        write_array(stdout, binary_output, &i32_info, arr,
                    futhark_shape_i32_2d(ctx, result_77640), 2);
        free(arr);
    }
    printf("\n");
    assert(futhark_free_i32_2d(ctx, result_77640) == 0);
}
static void futrts_cli_entry_bvh_irreg(struct futhark_context *ctx)
{
    int64_t t_start, t_end;
    int time_runs = 0, profile_run = 0;
    
    // We do not want to profile all the initialisation.
    futhark_context_pause_profiling(ctx);
    /* Declare and read input. */
    set_binary_mode(stdin);
    
    int32_t read_value_77641;
    
    if (read_scalar(&i32_info, &read_value_77641) != 0)
        panic(1, "Error when reading input #%d of type %s (errno: %s).\n", 0,
              i32_info.type_name, strerror(errno));
    
    int32_t read_value_77642;
    
    if (read_scalar(&i32_info, &read_value_77642) != 0)
        panic(1, "Error when reading input #%d of type %s (errno: %s).\n", 1,
              i32_info.type_name, strerror(errno));
    
    struct futhark_opaque_74b00dd0 *result_77643;
    struct futhark_opaque_4bbff2b2 *result_77644;
    
    if (perform_warmup) {
        int r;
        
        ;
        ;
        if (futhark_context_sync(ctx) != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_bvh_irreg(ctx, &result_77643, &result_77644,
                                    read_value_77641, read_value_77642);
        if (r != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL)
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
        ;
        ;
        assert(futhark_free_opaque_74b00dd0(ctx, result_77643) == 0);
        assert(futhark_free_opaque_4bbff2b2(ctx, result_77644) == 0);
    }
    time_runs = 1;
    /* Proper run. */
    for (int run = 0; run < num_runs; run++) {
        // Only profile last run.
        profile_run = run == num_runs - 1;
        
        int r;
        
        ;
        ;
        if (futhark_context_sync(ctx) != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_bvh_irreg(ctx, &result_77643, &result_77644,
                                    read_value_77641, read_value_77642);
        if (r != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL)
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
        ;
        ;
        if (run < num_runs - 1) {
            assert(futhark_free_opaque_74b00dd0(ctx, result_77643) == 0);
            assert(futhark_free_opaque_4bbff2b2(ctx, result_77644) == 0);
        }
    }
    ;
    ;
    if (binary_output)
        set_binary_mode(stdout);
    printf("#<opaque %s>",
           "{I: []{aabb: {max: {x: f32, y: f32, z: f32}, min: {x: f32, y: f32, z: f32}},\n       left: #inner i32 | #leaf i32,\n       parent: i32,\n       right: #inner i32 | #leaf i32},\n L: []{colour: {x: f32, y: f32, z: f32},\n       pos: {x: f32, y: f32, z: f32},\n       radius: f32}}");
    printf("\n");
    printf("#<opaque %s>",
           "{horizontal: {x: f32, y: f32, z: f32},\n llc: {x: f32, y: f32, z: f32},\n origin: {x: f32, y: f32, z: f32},\n vertical: {x: f32, y: f32, z: f32}}");
    printf("\n");
    assert(futhark_free_opaque_74b00dd0(ctx, result_77643) == 0);
    assert(futhark_free_opaque_4bbff2b2(ctx, result_77644) == 0);
}
static void futrts_cli_entry_bvh_rgbbox(struct futhark_context *ctx)
{
    int64_t t_start, t_end;
    int time_runs = 0, profile_run = 0;
    
    // We do not want to profile all the initialisation.
    futhark_context_pause_profiling(ctx);
    /* Declare and read input. */
    set_binary_mode(stdin);
    
    int32_t read_value_77645;
    
    if (read_scalar(&i32_info, &read_value_77645) != 0)
        panic(1, "Error when reading input #%d of type %s (errno: %s).\n", 0,
              i32_info.type_name, strerror(errno));
    
    int32_t read_value_77646;
    
    if (read_scalar(&i32_info, &read_value_77646) != 0)
        panic(1, "Error when reading input #%d of type %s (errno: %s).\n", 1,
              i32_info.type_name, strerror(errno));
    
    struct futhark_opaque_74b00dd0 *result_77647;
    struct futhark_opaque_4bbff2b2 *result_77648;
    
    if (perform_warmup) {
        int r;
        
        ;
        ;
        if (futhark_context_sync(ctx) != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_bvh_rgbbox(ctx, &result_77647, &result_77648,
                                     read_value_77645, read_value_77646);
        if (r != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL)
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
        ;
        ;
        assert(futhark_free_opaque_74b00dd0(ctx, result_77647) == 0);
        assert(futhark_free_opaque_4bbff2b2(ctx, result_77648) == 0);
    }
    time_runs = 1;
    /* Proper run. */
    for (int run = 0; run < num_runs; run++) {
        // Only profile last run.
        profile_run = run == num_runs - 1;
        
        int r;
        
        ;
        ;
        if (futhark_context_sync(ctx) != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        ;
        // Only profile last run.
        if (profile_run)
            futhark_context_unpause_profiling(ctx);
        t_start = get_wall_time();
        r = futhark_entry_bvh_rgbbox(ctx, &result_77647, &result_77648,
                                     read_value_77645, read_value_77646);
        if (r != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        if (futhark_context_sync(ctx) != 0)
            panic(1, "%s", futhark_context_get_error(ctx));
        ;
        if (profile_run)
            futhark_context_pause_profiling(ctx);
        t_end = get_wall_time();
        
        long elapsed_usec = t_end - t_start;
        
        if (time_runs && runtime_file != NULL)
            fprintf(runtime_file, "%lld\n", (long long) elapsed_usec);
        ;
        ;
        if (run < num_runs - 1) {
            assert(futhark_free_opaque_74b00dd0(ctx, result_77647) == 0);
            assert(futhark_free_opaque_4bbff2b2(ctx, result_77648) == 0);
        }
    }
    ;
    ;
    if (binary_output)
        set_binary_mode(stdout);
    printf("#<opaque %s>",
           "{I: []{aabb: {max: {x: f32, y: f32, z: f32}, min: {x: f32, y: f32, z: f32}},\n       left: #inner i32 | #leaf i32,\n       parent: i32,\n       right: #inner i32 | #leaf i32},\n L: []{colour: {x: f32, y: f32, z: f32},\n       pos: {x: f32, y: f32, z: f32},\n       radius: f32}}");
    printf("\n");
    printf("#<opaque %s>",
           "{horizontal: {x: f32, y: f32, z: f32},\n llc: {x: f32, y: f32, z: f32},\n origin: {x: f32, y: f32, z: f32},\n vertical: {x: f32, y: f32, z: f32}}");
    printf("\n");
    assert(futhark_free_opaque_74b00dd0(ctx, result_77647) == 0);
    assert(futhark_free_opaque_4bbff2b2(ctx, result_77648) == 0);
}
typedef void entry_point_fun(struct futhark_context *);
struct entry_point_entry {
    const char *name;
    entry_point_fun *fun;
} ;
int main(int argc, char **argv)
{
    fut_progname = argv[0];
    
    struct entry_point_entry entry_points[] = {{.name ="render_irreg", .fun =
                                                futrts_cli_entry_render_irreg},
                                               {.name ="render_rgbbox", .fun =
                                                futrts_cli_entry_render_rgbbox},
                                               {.name ="bvh_irreg", .fun =
                                                futrts_cli_entry_bvh_irreg},
                                               {.name ="bvh_rgbbox", .fun =
                                                futrts_cli_entry_bvh_rgbbox}};
    struct futhark_context_config *cfg = futhark_context_config_new();
    
    assert(cfg != NULL);
    
    int parsed_options = parse_options(cfg, argc, argv);
    
    argc -= parsed_options;
    argv += parsed_options;
    if (argc != 0)
        panic(1, "Excess non-option: %s\n", argv[0]);
    
    struct futhark_context *ctx = futhark_context_new(cfg);
    
    assert(ctx != NULL);
    if (entry_point != NULL) {
        int num_entry_points = sizeof(entry_points) / sizeof(entry_points[0]);
        entry_point_fun *entry_point_fun = NULL;
        
        for (int i = 0; i < num_entry_points; i++) {
            if (strcmp(entry_points[i].name, entry_point) == 0) {
                entry_point_fun = entry_points[i].fun;
                break;
            }
        }
        if (entry_point_fun == NULL) {
            fprintf(stderr,
                    "No entry point '%s'.  Select another with --entry-point.  Options are:\n",
                    entry_point);
            for (int i = 0; i < num_entry_points; i++)
                fprintf(stderr, "%s\n", entry_points[i].name);
            return 1;
        }
        entry_point_fun(ctx);
        if (runtime_file != NULL)
            fclose(runtime_file);
        futhark_debugging_report(ctx);
    }
    futhark_context_free(ctx);
    futhark_context_config_free(cfg);
    return 0;
}
#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <inttypes.h>
#include <ctype.h>
#include <errno.h>
#include <assert.h>
// Start of lock.h.

/* A very simple cross-platform implementation of locks.  Uses
   pthreads on Unix and some Windows thing there.  Futhark's
   host-level code is not multithreaded, but user code may be, so we
   need some mechanism for ensuring atomic access to API functions.
   This is that mechanism.  It is not exposed to user code at all, so
   we do not have to worry about name collisions. */

#ifdef _WIN32

typedef HANDLE lock_t;

static lock_t create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  /* Default security attributes. */
                      FALSE, /* Initially unlocked. */
                      NULL); /* Unnamed. */
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
/* Assuming POSIX */

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  /* Nothing to do for pthreads. */
  (void)lock;
}

#endif

// End of lock.h.

#define CL_USE_DEPRECATED_OPENCL_1_2_APIS
#define CL_SILENCE_DEPRECATION // For macOS.
#ifdef __APPLE__
  #include <OpenCL/cl.h>
#else
  #include <CL/cl.h>
#endif
typedef cl_mem fl_mem_t;
// Start of free_list.h.

/* An entry in the free list.  May be invalid, to avoid having to
   deallocate entries as soon as they are removed.  There is also a
   tag, to help with memory reuse. */
struct free_list_entry {
  size_t size;
  fl_mem_t mem;
  const char *tag;
  unsigned char valid;
};

struct free_list {
  struct free_list_entry *entries;        // Pointer to entries.
  int capacity;                           // Number of entries.
  int used;                               // Number of valid entries.
};

static void free_list_init(struct free_list *l) {
  l->capacity = 30; // Picked arbitrarily.
  l->used = 0;
  l->entries = (struct free_list_entry*) malloc(sizeof(struct free_list_entry) * l->capacity);
  for (int i = 0; i < l->capacity; i++) {
    l->entries[i].valid = 0;
  }
}

/* Remove invalid entries from the free list. */
static void free_list_pack(struct free_list *l) {
  int p = 0;
  for (int i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid) {
      l->entries[p] = l->entries[i];
      p++;
    }
  }
  // Now p == l->used.
  l->entries = realloc(l->entries, l->used * sizeof(struct free_list_entry));
  l->capacity = l->used;
}

static void free_list_destroy(struct free_list *l) {
  assert(l->used == 0);
  free(l->entries);
}

static int free_list_find_invalid(struct free_list *l) {
  int i;
  for (i = 0; i < l->capacity; i++) {
    if (!l->entries[i].valid) {
      break;
    }
  }
  return i;
}

static void free_list_insert(struct free_list *l, size_t size, fl_mem_t mem, const char *tag) {
  int i = free_list_find_invalid(l);

  if (i == l->capacity) {
    // List is full; so we have to grow it.
    int new_capacity = l->capacity * 2 * sizeof(struct free_list_entry);
    l->entries = realloc(l->entries, new_capacity);
    for (int j = 0; j < l->capacity; j++) {
      l->entries[j+l->capacity].valid = 0;
    }
    l->capacity *= 2;
  }

  // Now 'i' points to the first invalid entry.
  l->entries[i].valid = 1;
  l->entries[i].size = size;
  l->entries[i].mem = mem;
  l->entries[i].tag = tag;

  l->used++;
}

/* Find and remove a memory block of at least the desired size and
   tag.  Returns 0 on success.  */
static int free_list_find(struct free_list *l, const char *tag, size_t *size_out, fl_mem_t *mem_out) {
  int i;
  for (i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid && l->entries[i].tag == tag) {
      l->entries[i].valid = 0;
      *size_out = l->entries[i].size;
      *mem_out = l->entries[i].mem;
      l->used--;
      return 0;
    }
  }

  return 1;
}

/* Remove the first block in the free list.  Returns 0 if a block was
   removed, and nonzero if the free list was already empty. */
static int free_list_first(struct free_list *l, fl_mem_t *mem_out) {
  for (int i = 0; i < l->capacity; i++) {
    if (l->entries[i].valid) {
      l->entries[i].valid = 0;
      *mem_out = l->entries[i].mem;
      l->used--;
      return 0;
    }
  }

  return 1;
}

// End of free_list.h.

// Start of opencl.h.

#define OPENCL_SUCCEED_FATAL(e) opencl_succeed_fatal(e, #e, __FILE__, __LINE__)
#define OPENCL_SUCCEED_NONFATAL(e) opencl_succeed_nonfatal(e, #e, __FILE__, __LINE__)
// Take care not to override an existing error.
#define OPENCL_SUCCEED_OR_RETURN(e) {             \
    char *serror = OPENCL_SUCCEED_NONFATAL(e);    \
    if (serror) {                                 \
      if (!ctx->error) {                          \
        ctx->error = serror;                      \
        return bad;                               \
      } else {                                    \
        free(serror);                             \
      }                                           \
    }                                             \
  }

// OPENCL_SUCCEED_OR_RETURN returns the value of the variable 'bad' in
// scope.  By default, it will be this one.  Create a local variable
// of some other type if needed.  This is a bit of a hack, but it
// saves effort in the code generator.
static const int bad = 1;

struct opencl_config {
  int debugging;
  int profiling;
  int logging;
  int preferred_device_num;
  const char *preferred_platform;
  const char *preferred_device;
  int ignore_blacklist;

  const char* dump_program_to;
  const char* load_program_from;
  const char* dump_binary_to;
  const char* load_binary_from;

  size_t default_group_size;
  size_t default_num_groups;
  size_t default_tile_size;
  size_t default_threshold;

  int default_group_size_changed;
  int default_tile_size_changed;

  int num_sizes;
  const char **size_names;
  const char **size_vars;
  size_t *size_values;
  const char **size_classes;
};

static void opencl_config_init(struct opencl_config *cfg,
                               int num_sizes,
                               const char *size_names[],
                               const char *size_vars[],
                               size_t *size_values,
                               const char *size_classes[]) {
  cfg->debugging = 0;
  cfg->logging = 0;
  cfg->profiling = 0;
  cfg->preferred_device_num = 0;
  cfg->preferred_platform = "";
  cfg->preferred_device = "";
  cfg->ignore_blacklist = 0;
  cfg->dump_program_to = NULL;
  cfg->load_program_from = NULL;
  cfg->dump_binary_to = NULL;
  cfg->load_binary_from = NULL;

  // The following are dummy sizes that mean the concrete defaults
  // will be set during initialisation via hardware-inspection-based
  // heuristics.
  cfg->default_group_size = 0;
  cfg->default_num_groups = 0;
  cfg->default_tile_size = 0;
  cfg->default_threshold = 0;

  cfg->default_group_size_changed = 0;
  cfg->default_tile_size_changed = 0;

  cfg->num_sizes = num_sizes;
  cfg->size_names = size_names;
  cfg->size_vars = size_vars;
  cfg->size_values = size_values;
  cfg->size_classes = size_classes;
}

// A record of something that happened.
struct profiling_record {
  cl_event *event;
  int *runs;
  int64_t *runtime;
};

struct opencl_context {
  cl_device_id device;
  cl_context ctx;
  cl_command_queue queue;

  struct opencl_config cfg;

  struct free_list free_list;

  size_t max_group_size;
  size_t max_num_groups;
  size_t max_tile_size;
  size_t max_threshold;
  size_t max_local_memory;

  size_t lockstep_width;

  struct profiling_record *profiling_records;
  int profiling_records_capacity;
  int profiling_records_used;
};

struct opencl_device_option {
  cl_platform_id platform;
  cl_device_id device;
  cl_device_type device_type;
  char *platform_name;
  char *device_name;
};

/* This function must be defined by the user.  It is invoked by
   setup_opencl() after the platform and device has been found, but
   before the program is loaded.  Its intended use is to tune
   constants based on the selected platform and device. */
static void post_opencl_setup(struct opencl_context*, struct opencl_device_option*);

static char *strclone(const char *str) {
  size_t size = strlen(str) + 1;
  char *copy = (char*) malloc(size);
  if (copy == NULL) {
    return NULL;
  }

  memcpy(copy, str, size);
  return copy;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static char* slurp_file(const char *filename, size_t *size) {
  char *s;
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  fseek(f, 0, SEEK_END);
  size_t src_size = ftell(f);
  fseek(f, 0, SEEK_SET);
  s = (char*) malloc(src_size + 1);
  if (fread(s, 1, src_size, f) != src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }
  fclose(f);

  if (size) {
    *size = src_size;
  }

  return s;
}

static const char* opencl_error_string(cl_int err)
{
    switch (err) {
        case CL_SUCCESS:                            return "Success!";
        case CL_DEVICE_NOT_FOUND:                   return "Device not found.";
        case CL_DEVICE_NOT_AVAILABLE:               return "Device not available";
        case CL_COMPILER_NOT_AVAILABLE:             return "Compiler not available";
        case CL_MEM_OBJECT_ALLOCATION_FAILURE:      return "Memory object allocation failure";
        case CL_OUT_OF_RESOURCES:                   return "Out of resources";
        case CL_OUT_OF_HOST_MEMORY:                 return "Out of host memory";
        case CL_PROFILING_INFO_NOT_AVAILABLE:       return "Profiling information not available";
        case CL_MEM_COPY_OVERLAP:                   return "Memory copy overlap";
        case CL_IMAGE_FORMAT_MISMATCH:              return "Image format mismatch";
        case CL_IMAGE_FORMAT_NOT_SUPPORTED:         return "Image format not supported";
        case CL_BUILD_PROGRAM_FAILURE:              return "Program build failure";
        case CL_MAP_FAILURE:                        return "Map failure";
        case CL_INVALID_VALUE:                      return "Invalid value";
        case CL_INVALID_DEVICE_TYPE:                return "Invalid device type";
        case CL_INVALID_PLATFORM:                   return "Invalid platform";
        case CL_INVALID_DEVICE:                     return "Invalid device";
        case CL_INVALID_CONTEXT:                    return "Invalid context";
        case CL_INVALID_QUEUE_PROPERTIES:           return "Invalid queue properties";
        case CL_INVALID_COMMAND_QUEUE:              return "Invalid command queue";
        case CL_INVALID_HOST_PTR:                   return "Invalid host pointer";
        case CL_INVALID_MEM_OBJECT:                 return "Invalid memory object";
        case CL_INVALID_IMAGE_FORMAT_DESCRIPTOR:    return "Invalid image format descriptor";
        case CL_INVALID_IMAGE_SIZE:                 return "Invalid image size";
        case CL_INVALID_SAMPLER:                    return "Invalid sampler";
        case CL_INVALID_BINARY:                     return "Invalid binary";
        case CL_INVALID_BUILD_OPTIONS:              return "Invalid build options";
        case CL_INVALID_PROGRAM:                    return "Invalid program";
        case CL_INVALID_PROGRAM_EXECUTABLE:         return "Invalid program executable";
        case CL_INVALID_KERNEL_NAME:                return "Invalid kernel name";
        case CL_INVALID_KERNEL_DEFINITION:          return "Invalid kernel definition";
        case CL_INVALID_KERNEL:                     return "Invalid kernel";
        case CL_INVALID_ARG_INDEX:                  return "Invalid argument index";
        case CL_INVALID_ARG_VALUE:                  return "Invalid argument value";
        case CL_INVALID_ARG_SIZE:                   return "Invalid argument size";
        case CL_INVALID_KERNEL_ARGS:                return "Invalid kernel arguments";
        case CL_INVALID_WORK_DIMENSION:             return "Invalid work dimension";
        case CL_INVALID_WORK_GROUP_SIZE:            return "Invalid work group size";
        case CL_INVALID_WORK_ITEM_SIZE:             return "Invalid work item size";
        case CL_INVALID_GLOBAL_OFFSET:              return "Invalid global offset";
        case CL_INVALID_EVENT_WAIT_LIST:            return "Invalid event wait list";
        case CL_INVALID_EVENT:                      return "Invalid event";
        case CL_INVALID_OPERATION:                  return "Invalid operation";
        case CL_INVALID_GL_OBJECT:                  return "Invalid OpenGL object";
        case CL_INVALID_BUFFER_SIZE:                return "Invalid buffer size";
        case CL_INVALID_MIP_LEVEL:                  return "Invalid mip-map level";
        default:                                    return "Unknown";
    }
}

static void opencl_succeed_fatal(unsigned int ret,
                                 const char *call,
                                 const char *file,
                                 int line) {
  if (ret != CL_SUCCESS) {
    panic(-1, "%s:%d: OpenCL call\n  %s\nfailed with error code %d (%s)\n",
          file, line, call, ret, opencl_error_string(ret));
  }
}

static char* opencl_succeed_nonfatal(unsigned int ret,
                                     const char *call,
                                     const char *file,
                                     int line) {
  if (ret != CL_SUCCESS) {
    return msgprintf("%s:%d: OpenCL call\n  %s\nfailed with error code %d (%s)\n",
                     file, line, call, ret, opencl_error_string(ret));
  } else {
    return NULL;
  }
}

static void set_preferred_platform(struct opencl_config *cfg, const char *s) {
  cfg->preferred_platform = s;
  cfg->ignore_blacklist = 1;
}

static void set_preferred_device(struct opencl_config *cfg, const char *s) {
  int x = 0;
  if (*s == '#') {
    s++;
    while (isdigit(*s)) {
      x = x * 10 + (*s++)-'0';
    }
    // Skip trailing spaces.
    while (isspace(*s)) {
      s++;
    }
  }
  cfg->preferred_device = s;
  cfg->preferred_device_num = x;
  cfg->ignore_blacklist = 1;
}

static char* opencl_platform_info(cl_platform_id platform,
                                  cl_platform_info param) {
  size_t req_bytes;
  char *info;

  OPENCL_SUCCEED_FATAL(clGetPlatformInfo(platform, param, 0, NULL, &req_bytes));

  info = (char*) malloc(req_bytes);

  OPENCL_SUCCEED_FATAL(clGetPlatformInfo(platform, param, req_bytes, info, NULL));

  return info;
}

static char* opencl_device_info(cl_device_id device,
                                cl_device_info param) {
  size_t req_bytes;
  char *info;

  OPENCL_SUCCEED_FATAL(clGetDeviceInfo(device, param, 0, NULL, &req_bytes));

  info = (char*) malloc(req_bytes);

  OPENCL_SUCCEED_FATAL(clGetDeviceInfo(device, param, req_bytes, info, NULL));

  return info;
}

static void opencl_all_device_options(struct opencl_device_option **devices_out,
                                      size_t *num_devices_out) {
  size_t num_devices = 0, num_devices_added = 0;

  cl_platform_id *all_platforms;
  cl_uint *platform_num_devices;

  cl_uint num_platforms;

  // Find the number of platforms.
  OPENCL_SUCCEED_FATAL(clGetPlatformIDs(0, NULL, &num_platforms));

  // Make room for them.
  all_platforms = calloc(num_platforms, sizeof(cl_platform_id));
  platform_num_devices = calloc(num_platforms, sizeof(cl_uint));

  // Fetch all the platforms.
  OPENCL_SUCCEED_FATAL(clGetPlatformIDs(num_platforms, all_platforms, NULL));

  // Count the number of devices for each platform, as well as the
  // total number of devices.
  for (cl_uint i = 0; i < num_platforms; i++) {
    if (clGetDeviceIDs(all_platforms[i], CL_DEVICE_TYPE_ALL,
                       0, NULL, &platform_num_devices[i]) == CL_SUCCESS) {
      num_devices += platform_num_devices[i];
    } else {
      platform_num_devices[i] = 0;
    }
  }

  // Make room for all the device options.
  struct opencl_device_option *devices =
    calloc(num_devices, sizeof(struct opencl_device_option));

  // Loop through the platforms, getting information about their devices.
  for (cl_uint i = 0; i < num_platforms; i++) {
    cl_platform_id platform = all_platforms[i];
    cl_uint num_platform_devices = platform_num_devices[i];

    if (num_platform_devices == 0) {
      continue;
    }

    char *platform_name = opencl_platform_info(platform, CL_PLATFORM_NAME);
    cl_device_id *platform_devices =
      calloc(num_platform_devices, sizeof(cl_device_id));

    // Fetch all the devices.
    OPENCL_SUCCEED_FATAL(clGetDeviceIDs(platform, CL_DEVICE_TYPE_ALL,
                                  num_platform_devices, platform_devices, NULL));

    // Loop through the devices, adding them to the devices array.
    for (cl_uint i = 0; i < num_platform_devices; i++) {
      char *device_name = opencl_device_info(platform_devices[i], CL_DEVICE_NAME);
      devices[num_devices_added].platform = platform;
      devices[num_devices_added].device = platform_devices[i];
      OPENCL_SUCCEED_FATAL(clGetDeviceInfo(platform_devices[i], CL_DEVICE_TYPE,
                                     sizeof(cl_device_type),
                                     &devices[num_devices_added].device_type,
                                     NULL));
      // We don't want the structs to share memory, so copy the platform name.
      // Each device name is already unique.
      devices[num_devices_added].platform_name = strclone(platform_name);
      devices[num_devices_added].device_name = device_name;
      num_devices_added++;
    }
    free(platform_devices);
    free(platform_name);
  }
  free(all_platforms);
  free(platform_num_devices);

  *devices_out = devices;
  *num_devices_out = num_devices;
}

// Returns 0 on success.
static int select_device_interactively(struct opencl_config *cfg) {
  struct opencl_device_option *devices;
  size_t num_devices;
  int ret = 1;

  opencl_all_device_options(&devices, &num_devices);

  printf("Choose OpenCL device:\n");
  const char *cur_platform = "";
  for (size_t i = 0; i < num_devices; i++) {
    struct opencl_device_option device = devices[i];
    if (strcmp(cur_platform, device.platform_name) != 0) {
      printf("Platform: %s\n", device.platform_name);
      cur_platform = device.platform_name;
    }
    printf("[%d] %s\n", (int)i, device.device_name);
  }

  int selection;
  printf("Choice: ");
  if (scanf("%d", &selection) == 1) {
    ret = 0;
    cfg->preferred_platform = "";
    cfg->preferred_device = "";
    cfg->preferred_device_num = selection;
    cfg->ignore_blacklist = 1;
  }

  // Free all the platform and device names.
  for (size_t j = 0; j < num_devices; j++) {
    free(devices[j].platform_name);
    free(devices[j].device_name);
  }
  free(devices);

  return ret;
}

static int is_blacklisted(const char *platform_name, const char *device_name,
                          const struct opencl_config *cfg) {
  if (strcmp(cfg->preferred_platform, "") != 0 ||
      strcmp(cfg->preferred_device, "") != 0) {
    return 0;
  } else if (strstr(platform_name, "Apple") != NULL &&
             strstr(device_name, "Intel(R) Core(TM)") != NULL) {
    return 1;
  } else {
    return 0;
  }
}

static struct opencl_device_option get_preferred_device(const struct opencl_config *cfg) {
  struct opencl_device_option *devices;
  size_t num_devices;

  opencl_all_device_options(&devices, &num_devices);

  int num_device_matches = 0;

  for (size_t i = 0; i < num_devices; i++) {
    struct opencl_device_option device = devices[i];
    if (strstr(device.platform_name, cfg->preferred_platform) != NULL &&
        strstr(device.device_name, cfg->preferred_device) != NULL &&
        (cfg->ignore_blacklist ||
         !is_blacklisted(device.platform_name, device.device_name, cfg)) &&
        num_device_matches++ == cfg->preferred_device_num) {
      // Free all the platform and device names, except the ones we have chosen.
      for (size_t j = 0; j < num_devices; j++) {
        if (j != i) {
          free(devices[j].platform_name);
          free(devices[j].device_name);
        }
      }
      free(devices);
      return device;
    }
  }

  panic(1, "Could not find acceptable OpenCL device.\n");
  exit(1); // Never reached
}

static void describe_device_option(struct opencl_device_option device) {
  fprintf(stderr, "Using platform: %s\n", device.platform_name);
  fprintf(stderr, "Using device: %s\n", device.device_name);
}

static cl_build_status build_opencl_program(cl_program program, cl_device_id device, const char* options) {
  cl_int clBuildProgram_error = clBuildProgram(program, 1, &device, options, NULL, NULL);

  // Avoid termination due to CL_BUILD_PROGRAM_FAILURE
  if (clBuildProgram_error != CL_SUCCESS &&
      clBuildProgram_error != CL_BUILD_PROGRAM_FAILURE) {
    OPENCL_SUCCEED_FATAL(clBuildProgram_error);
  }

  cl_build_status build_status;
  OPENCL_SUCCEED_FATAL(clGetProgramBuildInfo(program,
                                             device,
                                             CL_PROGRAM_BUILD_STATUS,
                                             sizeof(cl_build_status),
                                             &build_status,
                                             NULL));

  if (build_status != CL_SUCCESS) {
    char *build_log;
    size_t ret_val_size;
    OPENCL_SUCCEED_FATAL(clGetProgramBuildInfo(program, device, CL_PROGRAM_BUILD_LOG, 0, NULL, &ret_val_size));

    build_log = (char*) malloc(ret_val_size+1);
    OPENCL_SUCCEED_FATAL(clGetProgramBuildInfo(program, device, CL_PROGRAM_BUILD_LOG, ret_val_size, build_log, NULL));

    // The spec technically does not say whether the build log is zero-terminated, so let's be careful.
    build_log[ret_val_size] = '\0';

    fprintf(stderr, "Build log:\n%s\n", build_log);

    free(build_log);
  }

  return build_status;
}

/* Fields in a bitmask indicating which types we must be sure are
   available. */
enum opencl_required_type { OPENCL_F64 = 1 };

// We take as input several strings representing the program, because
// C does not guarantee that the compiler supports particularly large
// literals.  Notably, Visual C has a limit of 2048 characters.  The
// array must be NULL-terminated.
static cl_program setup_opencl_with_command_queue(struct opencl_context *ctx,
                                                  cl_command_queue queue,
                                                  const char *srcs[],
                                                  int required_types,
                                                  const char *extra_build_opts[]) {
  int error;

  free_list_init(&ctx->free_list);
  ctx->queue = queue;

  OPENCL_SUCCEED_FATAL(clGetCommandQueueInfo(ctx->queue, CL_QUEUE_CONTEXT, sizeof(cl_context), &ctx->ctx, NULL));

  // Fill out the device info.  This is redundant work if we are
  // called from setup_opencl() (which is the common case), but I
  // doubt it matters much.
  struct opencl_device_option device_option;
  OPENCL_SUCCEED_FATAL(clGetCommandQueueInfo(ctx->queue, CL_QUEUE_DEVICE,
                                       sizeof(cl_device_id),
                                       &device_option.device,
                                       NULL));
  OPENCL_SUCCEED_FATAL(clGetDeviceInfo(device_option.device, CL_DEVICE_PLATFORM,
                                 sizeof(cl_platform_id),
                                 &device_option.platform,
                                 NULL));
  OPENCL_SUCCEED_FATAL(clGetDeviceInfo(device_option.device, CL_DEVICE_TYPE,
                                 sizeof(cl_device_type),
                                 &device_option.device_type,
                                 NULL));
  device_option.platform_name = opencl_platform_info(device_option.platform, CL_PLATFORM_NAME);
  device_option.device_name = opencl_device_info(device_option.device, CL_DEVICE_NAME);

  ctx->device = device_option.device;

  if (required_types & OPENCL_F64) {
    cl_uint supported;
    OPENCL_SUCCEED_FATAL(clGetDeviceInfo(device_option.device, CL_DEVICE_PREFERRED_VECTOR_WIDTH_DOUBLE,
                                   sizeof(cl_uint), &supported, NULL));
    if (!supported) {
      panic(1, "Program uses double-precision floats, but this is not supported on the chosen device: %s\n",
            device_option.device_name);
    }
  }

  size_t max_group_size;
  OPENCL_SUCCEED_FATAL(clGetDeviceInfo(device_option.device, CL_DEVICE_MAX_WORK_GROUP_SIZE,
                                 sizeof(size_t), &max_group_size, NULL));

  size_t max_tile_size = sqrt(max_group_size);

  cl_ulong max_local_memory;
  OPENCL_SUCCEED_FATAL(clGetDeviceInfo(device_option.device, CL_DEVICE_LOCAL_MEM_SIZE,
                                       sizeof(size_t), &max_local_memory, NULL));

  // Make sure this function is defined.
  post_opencl_setup(ctx, &device_option);

  if (max_group_size < ctx->cfg.default_group_size) {
    if (ctx->cfg.default_group_size_changed) {
      fprintf(stderr, "Note: Device limits default group size to %zu (down from %zu).\n",
              max_group_size, ctx->cfg.default_group_size);
    }
    ctx->cfg.default_group_size = max_group_size;
  }

  if (max_tile_size < ctx->cfg.default_tile_size) {
    if (ctx->cfg.default_tile_size_changed) {
      fprintf(stderr, "Note: Device limits default tile size to %zu (down from %zu).\n",
              max_tile_size, ctx->cfg.default_tile_size);
    }
    ctx->cfg.default_tile_size = max_tile_size;
  }

  ctx->max_group_size = max_group_size;
  ctx->max_tile_size = max_tile_size; // No limit.
  ctx->max_threshold = ctx->max_num_groups = 0; // No limit.
  ctx->max_local_memory = max_local_memory;

  // Now we go through all the sizes, clamp them to the valid range,
  // or set them to the default.
  for (int i = 0; i < ctx->cfg.num_sizes; i++) {
    const char *size_class = ctx->cfg.size_classes[i];
    size_t *size_value = &ctx->cfg.size_values[i];
    const char* size_name = ctx->cfg.size_names[i];
    size_t max_value, default_value;
    if (strstr(size_class, "group_size") == size_class) {
      max_value = max_group_size;
      default_value = ctx->cfg.default_group_size;
    } else if (strstr(size_class, "num_groups") == size_class) {
      max_value = max_group_size; // Futhark assumes this constraint.
      default_value = ctx->cfg.default_num_groups;
    } else if (strstr(size_class, "tile_size") == size_class) {
      max_value = sqrt(max_group_size);
      default_value = ctx->cfg.default_tile_size;
    } else if (strstr(size_class, "threshold") == size_class) {
      max_value = 0; // No limit.
      default_value = ctx->cfg.default_threshold;
    } else {
      // Bespoke sizes have no limit or default.
      max_value = 0;
    }
    if (*size_value == 0) {
      *size_value = default_value;
    } else if (max_value > 0 && *size_value > max_value) {
      fprintf(stderr, "Note: Device limits %s to %d (down from %d)\n",
              size_name, (int)max_value, (int)*size_value);
      *size_value = max_value;
    }
  }

  if (ctx->lockstep_width == 0) {
    ctx->lockstep_width = 1;
  }

  if (ctx->cfg.logging) {
    fprintf(stderr, "Lockstep width: %d\n", (int)ctx->lockstep_width);
    fprintf(stderr, "Default group size: %d\n", (int)ctx->cfg.default_group_size);
    fprintf(stderr, "Default number of groups: %d\n", (int)ctx->cfg.default_num_groups);
  }

  char *fut_opencl_src = NULL;
  size_t src_size = 0;

  // Maybe we have to read OpenCL source from somewhere else (used for debugging).
  if (ctx->cfg.load_program_from != NULL) {
    fut_opencl_src = slurp_file(ctx->cfg.load_program_from, NULL);
    assert(fut_opencl_src != NULL);
  } else {
    // Build the OpenCL program.  First we have to concatenate all the fragments.
    for (const char **src = srcs; src && *src; src++) {
      src_size += strlen(*src);
    }

    fut_opencl_src = (char*) malloc(src_size + 1);

    size_t n, i;
    for (i = 0, n = 0; srcs && srcs[i]; i++) {
      strncpy(fut_opencl_src+n, srcs[i], src_size-n);
      n += strlen(srcs[i]);
    }
    fut_opencl_src[src_size] = 0;

  }

  cl_program prog;
  error = CL_SUCCESS;
  const char* src_ptr[] = {fut_opencl_src};

  if (ctx->cfg.dump_program_to != NULL) {
    FILE *f = fopen(ctx->cfg.dump_program_to, "w");
    assert(f != NULL);
    fputs(fut_opencl_src, f);
    fclose(f);
  }

  if (ctx->cfg.load_binary_from == NULL) {
    prog = clCreateProgramWithSource(ctx->ctx, 1, src_ptr, &src_size, &error);
    OPENCL_SUCCEED_FATAL(error);

    int compile_opts_size = 1024;

    for (int i = 0; i < ctx->cfg.num_sizes; i++) {
      compile_opts_size += strlen(ctx->cfg.size_names[i]) + 20;
    }

    for (int i = 0; extra_build_opts[i] != NULL; i++) {
      compile_opts_size += strlen(extra_build_opts[i] + 1);
    }

    char *compile_opts = (char*) malloc(compile_opts_size);

    int w = snprintf(compile_opts, compile_opts_size,
                     "-DLOCKSTEP_WIDTH=%d ",
                     (int)ctx->lockstep_width);

    for (int i = 0; i < ctx->cfg.num_sizes; i++) {
      w += snprintf(compile_opts+w, compile_opts_size-w,
                    "-D%s=%d ",
                    ctx->cfg.size_vars[i],
                    (int)ctx->cfg.size_values[i]);
    }

    for (int i = 0; extra_build_opts[i] != NULL; i++) {
      w += snprintf(compile_opts+w, compile_opts_size-w,
                    "%s ", extra_build_opts[i]);
    }

    OPENCL_SUCCEED_FATAL(build_opencl_program(prog, device_option.device, compile_opts));

    free(compile_opts);
  } else {
    size_t binary_size;
    unsigned char *fut_opencl_bin =
      (unsigned char*) slurp_file(ctx->cfg.load_binary_from, &binary_size);
    assert(fut_opencl_src != NULL);
    const unsigned char *binaries[1] = { fut_opencl_bin };
    cl_int status = 0;

    prog = clCreateProgramWithBinary(ctx->ctx, 1, &device_option.device,
                                     &binary_size, binaries,
                                     &status, &error);

    OPENCL_SUCCEED_FATAL(status);
    OPENCL_SUCCEED_FATAL(error);
  }

  free(fut_opencl_src);

  if (ctx->cfg.dump_binary_to != NULL) {
    size_t binary_size;
    OPENCL_SUCCEED_FATAL(clGetProgramInfo(prog, CL_PROGRAM_BINARY_SIZES,
                                          sizeof(size_t), &binary_size, NULL));
    unsigned char *binary = (unsigned char*) malloc(binary_size);
    unsigned char *binaries[1] = { binary };
    OPENCL_SUCCEED_FATAL(clGetProgramInfo(prog, CL_PROGRAM_BINARIES,
                                          sizeof(unsigned char*), binaries, NULL));

    FILE *f = fopen(ctx->cfg.dump_binary_to, "w");
    assert(f != NULL);
    fwrite(binary, sizeof(char), binary_size, f);
    fclose(f);
  }

  return prog;
}

static cl_program setup_opencl(struct opencl_context *ctx,
                               const char *srcs[],
                               int required_types,
                               const char *extra_build_opts[]) {

  ctx->lockstep_width = 0; // Real value set later.

  struct opencl_device_option device_option = get_preferred_device(&ctx->cfg);

  if (ctx->cfg.logging) {
    describe_device_option(device_option);
  }

  // Note that NVIDIA's OpenCL requires the platform property
  cl_context_properties properties[] = {
    CL_CONTEXT_PLATFORM,
    (cl_context_properties)device_option.platform,
    0
  };

  cl_int clCreateContext_error;
  ctx->ctx = clCreateContext(properties, 1, &device_option.device, NULL, NULL, &clCreateContext_error);
  OPENCL_SUCCEED_FATAL(clCreateContext_error);

  cl_int clCreateCommandQueue_error;
  cl_command_queue queue =
    clCreateCommandQueue(ctx->ctx,
                         device_option.device,
                         ctx->cfg.profiling ? CL_QUEUE_PROFILING_ENABLE : 0,
                         &clCreateCommandQueue_error);
  OPENCL_SUCCEED_FATAL(clCreateCommandQueue_error);

  return setup_opencl_with_command_queue(ctx, queue, srcs, required_types, extra_build_opts);
}

// Count up the runtime all the profiling_records that occured during execution.
// Also clears the buffer of profiling_records.
static cl_int opencl_tally_profiling_records(struct opencl_context *ctx) {
  cl_int err;
  for (int i = 0; i < ctx->profiling_records_used; i++) {
    struct profiling_record record = ctx->profiling_records[i];

    cl_ulong start_t, end_t;

    if ((err = clGetEventProfilingInfo(*record.event,
                                       CL_PROFILING_COMMAND_START,
                                       sizeof(start_t),
                                       &start_t,
                                       NULL)) != CL_SUCCESS) {
      return err;
    }

    if ((err = clGetEventProfilingInfo(*record.event,
                                       CL_PROFILING_COMMAND_END,
                                       sizeof(end_t),
                                       &end_t,
                                       NULL)) != CL_SUCCESS) {
      return err;
    }

    // OpenCL provides nanosecond resolution, but we want
    // microseconds.
    *record.runs += 1;
    *record.runtime += (end_t - start_t)/1000;

    if ((err = clReleaseEvent(*record.event)) != CL_SUCCESS) {
      return err;
    }
    free(record.event);
  }

  ctx->profiling_records_used = 0;

  return CL_SUCCESS;
}

// If profiling, produce an event associated with a profiling record.
static cl_event* opencl_get_event(struct opencl_context *ctx, int *runs, int64_t *runtime) {
    if (ctx->profiling_records_used == ctx->profiling_records_capacity) {
      ctx->profiling_records_capacity *= 2;
      ctx->profiling_records =
        realloc(ctx->profiling_records,
                ctx->profiling_records_capacity *
                sizeof(struct profiling_record));
    }
    cl_event *event = malloc(sizeof(cl_event));
    ctx->profiling_records[ctx->profiling_records_used].event = event;
    ctx->profiling_records[ctx->profiling_records_used].runs = runs;
    ctx->profiling_records[ctx->profiling_records_used].runtime = runtime;
    ctx->profiling_records_used++;
    return event;
}

// Allocate memory from driver. The problem is that OpenCL may perform
// lazy allocation, so we cannot know whether an allocation succeeded
// until the first time we try to use it.  Hence we immediately
// perform a write to see if the allocation succeeded.  This is slow,
// but the assumption is that this operation will be rare (most things
// will go through the free list).
static int opencl_alloc_actual(struct opencl_context *ctx, size_t size, cl_mem *mem_out) {
  int error;
  *mem_out = clCreateBuffer(ctx->ctx, CL_MEM_READ_WRITE, size, NULL, &error);

  if (error != CL_SUCCESS) {
    return error;
  }

  int x = 2;
  error = clEnqueueWriteBuffer(ctx->queue, *mem_out, 1, 0, sizeof(x), &x, 0, NULL, NULL);

  // No need to wait for completion here. clWaitForEvents() cannot
  // return mem object allocation failures. This implies that the
  // buffer is faulted onto the device on enqueue. (Observation by
  // Andreas Kloeckner.)

  return error;
}

static int opencl_alloc(struct opencl_context *ctx, size_t min_size, const char *tag, cl_mem *mem_out) {
  if (min_size < sizeof(int)) {
    min_size = sizeof(int);
  }

  size_t size;

  if (free_list_find(&ctx->free_list, tag, &size, mem_out) == 0) {
    // Successfully found a free block.  Is it big enough?
    //
    // FIXME: we might also want to check whether the block is *too
    // big*, to avoid internal fragmentation.  However, this can
    // sharply impact performance on programs where arrays change size
    // frequently.  Fortunately, such allocations are usually fairly
    // short-lived, as they are necessarily within a loop, so the risk
    // of internal fragmentation resulting in an OOM situation is
    // limited.  However, it would be preferable if we could go back
    // and *shrink* oversize allocations when we encounter an OOM
    // condition.  That is technically feasible, since we do not
    // expose OpenCL pointer values directly to the application, but
    // instead rely on a level of indirection.
    if (size >= min_size) {
      return CL_SUCCESS;
    } else {
      // Not just right - free it.
      int error = clReleaseMemObject(*mem_out);
      if (error != CL_SUCCESS) {
        return error;
      }
    }
  }

  // We have to allocate a new block from the driver.  If the
  // allocation does not succeed, then we might be in an out-of-memory
  // situation.  We now start freeing things from the free list until
  // we think we have freed enough that the allocation will succeed.
  // Since we don't know how far the allocation is from fitting, we
  // have to check after every deallocation.  This might be pretty
  // expensive.  Let's hope that this case is hit rarely.

  int error = opencl_alloc_actual(ctx, min_size, mem_out);

  while (error == CL_MEM_OBJECT_ALLOCATION_FAILURE) {
    if (ctx->cfg.debugging) {
      fprintf(stderr, "Out of OpenCL memory: releasing entry from the free list...\n");
    }
    cl_mem mem;
    if (free_list_first(&ctx->free_list, &mem) == 0) {
      error = clReleaseMemObject(mem);
      if (error != CL_SUCCESS) {
        return error;
      }
    } else {
      break;
    }
    error = opencl_alloc_actual(ctx, min_size, mem_out);
  }

  return error;
}

static int opencl_free(struct opencl_context *ctx, cl_mem mem, const char *tag) {
  size_t size;
  cl_mem existing_mem;

  // If there is already a block with this tag, then remove it.
  if (free_list_find(&ctx->free_list, tag, &size, &existing_mem) == 0) {
    int error = clReleaseMemObject(existing_mem);
    if (error != CL_SUCCESS) {
      return error;
    }
  }

  int error = clGetMemObjectInfo(mem, CL_MEM_SIZE, sizeof(size_t), &size, NULL);

  if (error == CL_SUCCESS) {
    free_list_insert(&ctx->free_list, size, mem, tag);
  }

  return error;
}

static int opencl_free_all(struct opencl_context *ctx) {
  cl_mem mem;
  free_list_pack(&ctx->free_list);
  while (free_list_first(&ctx->free_list, &mem) == 0) {
    int error = clReleaseMemObject(mem);
    if (error != CL_SUCCESS) {
      return error;
    }
  }

  return CL_SUCCESS;
}

// End of opencl.h.

static const char *opencl_program[] =
                  {"#ifdef cl_clang_storage_class_specifiers\n#pragma OPENCL EXTENSION cl_clang_storage_class_specifiers : enable\n#endif\n#pragma OPENCL EXTENSION cl_khr_byte_addressable_store : enable\n__kernel void dummy_kernel(__global unsigned char *dummy, int n)\n{\n    const int thread_gid = get_global_id(0);\n    \n    if (thread_gid >= n)\n        return;\n}\ntypedef char int8_t;\ntypedef short int16_t;\ntypedef int int32_t;\ntypedef long int64_t;\ntypedef uchar uint8_t;\ntypedef ushort uint16_t;\ntypedef uint uint32_t;\ntypedef ulong uint64_t;\n#ifdef cl_nv_pragma_unroll\nstatic inline void mem_fence_global()\n{\n    asm(\"membar.gl;\");\n}\n#else\nstatic inline void mem_fence_global()\n{\n    mem_fence(CLK_LOCAL_MEM_FENCE | CLK_GLOBAL_MEM_FENCE);\n}\n#endif\nstatic inline void mem_fence_local()\n{\n    mem_fence(CLK_LOCAL_MEM_FENCE);\n}\nstatic inline uint8_t add8(uint8_t x, uint8_t y)\n{\n    return x + y;\n}\nstatic inline uint16_t add16(uint16_t x, uint16_t y)\n{\n    return x + y;\n}\nstatic inline uint32_t add32(uint32_t x, uint32_t y)\n{\n    return x + y;\n}\nstatic inline uint64_t add64(uint64_t x, uint64_t y)\n{\n    return x + y;\n}\nstatic inline uint8_t sub8(uint8_t x, uint8_t y)\n{\n    return x - y;\n}\nstatic inline uint16_t sub16(uint16_t x, uint16_t y)\n{\n    return x - y;\n}\nstatic inline uint32_t sub32(uint32_t x, uint32_t y)\n{\n    return x - y;\n}\nstatic inline uint64_t sub64(uint64_t x, uint64_t y)\n{\n    return x - y;\n}\nstatic inline uint8_t mul8(uint8_t x, uint8_t y)\n{\n    return x * y;\n}\nstatic inline uint16_t mul16(uint16_t x, uint16_t y)\n{\n    return x * y;\n}\nstatic inline uint32_t mul32(uint32_t x, uint32_t y)\n{\n    return x * y;\n}\nstatic inline uint64_t mul64(uint64_t x, uint64_t y)\n{\n    return x * y;\n}\nstatic inline uint8_t udiv8(uint8_t x, uint8_t y)\n{\n    return x / y;\n}\nstatic inline uint16_t udiv16(uint16_t x, uint16_t y)\n{\n    return x / y;\n}\nstatic inline uint32_t udiv32(uint32_t x, uint32_t y)\n{\n    return x / y;\n}\nstatic inline uint64_t udiv64(uint64_t x, uint64_t y)\n{\n    return x / y;\n}\nstatic ",
                   "inline uint8_t umod8(uint8_t x, uint8_t y)\n{\n    return x % y;\n}\nstatic inline uint16_t umod16(uint16_t x, uint16_t y)\n{\n    return x % y;\n}\nstatic inline uint32_t umod32(uint32_t x, uint32_t y)\n{\n    return x % y;\n}\nstatic inline uint64_t umod64(uint64_t x, uint64_t y)\n{\n    return x % y;\n}\nstatic inline int8_t sdiv8(int8_t x, int8_t y)\n{\n    int8_t q = x / y;\n    int8_t r = x % y;\n    \n    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\nstatic inline int16_t sdiv16(int16_t x, int16_t y)\n{\n    int16_t q = x / y;\n    int16_t r = x % y;\n    \n    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\nstatic inline int32_t sdiv32(int32_t x, int32_t y)\n{\n    int32_t q = x / y;\n    int32_t r = x % y;\n    \n    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\nstatic inline int64_t sdiv64(int64_t x, int64_t y)\n{\n    int64_t q = x / y;\n    int64_t r = x % y;\n    \n    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);\n}\nstatic inline int8_t smod8(int8_t x, int8_t y)\n{\n    int8_t r = x % y;\n    \n    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\nstatic inline int16_t smod16(int16_t x, int16_t y)\n{\n    int16_t r = x % y;\n    \n    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\nstatic inline int32_t smod32(int32_t x, int32_t y)\n{\n    int32_t r = x % y;\n    \n    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\nstatic inline int64_t smod64(int64_t x, int64_t y)\n{\n    int64_t r = x % y;\n    \n    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);\n}\nstatic inline int8_t squot8(int8_t x, int8_t y)\n{\n    return x / y;\n}\nstatic inline int16_t squot16(int16_t x, int16_t y)\n{\n    return x / y;\n}\nstatic inline int32_t squot32(int32_t x, int32_t y)\n{\n    return x / y;\n}\nstatic inline int64_t squot64(int64_t x, int64_t y)\n{\n    return x / y;\n}\nstatic inline int8_t srem8(int8_t x, int8_t y)\n{\n    return x % y;\n}\nstatic inline int16_t srem16(int16_t x, int16_t y)\n{\n    return x % y;\n}\nstatic inline int32_t sr",
                   "em32(int32_t x, int32_t y)\n{\n    return x % y;\n}\nstatic inline int64_t srem64(int64_t x, int64_t y)\n{\n    return x % y;\n}\nstatic inline int8_t smin8(int8_t x, int8_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline int16_t smin16(int16_t x, int16_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline int32_t smin32(int32_t x, int32_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline int64_t smin64(int64_t x, int64_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline uint8_t umin8(uint8_t x, uint8_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline uint16_t umin16(uint16_t x, uint16_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline uint32_t umin32(uint32_t x, uint32_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline uint64_t umin64(uint64_t x, uint64_t y)\n{\n    return x < y ? x : y;\n}\nstatic inline int8_t smax8(int8_t x, int8_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline int16_t smax16(int16_t x, int16_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline int32_t smax32(int32_t x, int32_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline int64_t smax64(int64_t x, int64_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline uint8_t umax8(uint8_t x, uint8_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline uint16_t umax16(uint16_t x, uint16_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline uint32_t umax32(uint32_t x, uint32_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline uint64_t umax64(uint64_t x, uint64_t y)\n{\n    return x < y ? y : x;\n}\nstatic inline uint8_t shl8(uint8_t x, uint8_t y)\n{\n    return x << y;\n}\nstatic inline uint16_t shl16(uint16_t x, uint16_t y)\n{\n    return x << y;\n}\nstatic inline uint32_t shl32(uint32_t x, uint32_t y)\n{\n    return x << y;\n}\nstatic inline uint64_t shl64(uint64_t x, uint64_t y)\n{\n    return x << y;\n}\nstatic inline uint8_t lshr8(uint8_t x, uint8_t y)\n{\n    return x >> y;\n}\nstatic inline uint16_t lshr16(uint16_t x, uint16_t y)\n{\n    return x >> y;\n}\nstatic inline uint32_t lshr32(uint32_t x, uint32_t y)\n{\n    return x >> y;\n}\nstatic inline uint64_t lshr64(uint64_t x, uint6",
                   "4_t y)\n{\n    return x >> y;\n}\nstatic inline int8_t ashr8(int8_t x, int8_t y)\n{\n    return x >> y;\n}\nstatic inline int16_t ashr16(int16_t x, int16_t y)\n{\n    return x >> y;\n}\nstatic inline int32_t ashr32(int32_t x, int32_t y)\n{\n    return x >> y;\n}\nstatic inline int64_t ashr64(int64_t x, int64_t y)\n{\n    return x >> y;\n}\nstatic inline uint8_t and8(uint8_t x, uint8_t y)\n{\n    return x & y;\n}\nstatic inline uint16_t and16(uint16_t x, uint16_t y)\n{\n    return x & y;\n}\nstatic inline uint32_t and32(uint32_t x, uint32_t y)\n{\n    return x & y;\n}\nstatic inline uint64_t and64(uint64_t x, uint64_t y)\n{\n    return x & y;\n}\nstatic inline uint8_t or8(uint8_t x, uint8_t y)\n{\n    return x | y;\n}\nstatic inline uint16_t or16(uint16_t x, uint16_t y)\n{\n    return x | y;\n}\nstatic inline uint32_t or32(uint32_t x, uint32_t y)\n{\n    return x | y;\n}\nstatic inline uint64_t or64(uint64_t x, uint64_t y)\n{\n    return x | y;\n}\nstatic inline uint8_t xor8(uint8_t x, uint8_t y)\n{\n    return x ^ y;\n}\nstatic inline uint16_t xor16(uint16_t x, uint16_t y)\n{\n    return x ^ y;\n}\nstatic inline uint32_t xor32(uint32_t x, uint32_t y)\n{\n    return x ^ y;\n}\nstatic inline uint64_t xor64(uint64_t x, uint64_t y)\n{\n    return x ^ y;\n}\nstatic inline bool ult8(uint8_t x, uint8_t y)\n{\n    return x < y;\n}\nstatic inline bool ult16(uint16_t x, uint16_t y)\n{\n    return x < y;\n}\nstatic inline bool ult32(uint32_t x, uint32_t y)\n{\n    return x < y;\n}\nstatic inline bool ult64(uint64_t x, uint64_t y)\n{\n    return x < y;\n}\nstatic inline bool ule8(uint8_t x, uint8_t y)\n{\n    return x <= y;\n}\nstatic inline bool ule16(uint16_t x, uint16_t y)\n{\n    return x <= y;\n}\nstatic inline bool ule32(uint32_t x, uint32_t y)\n{\n    return x <= y;\n}\nstatic inline bool ule64(uint64_t x, uint64_t y)\n{\n    return x <= y;\n}\nstatic inline bool slt8(int8_t x, int8_t y)\n{\n    return x < y;\n}\nstatic inline bool slt16(int16_t x, int16_t y)\n{\n    return x < y;\n}\nstatic inline bool slt32(int32_t x, int32_t y)\n{\n    return x < y;\n}\nstatic inline bool slt64",
                   "(int64_t x, int64_t y)\n{\n    return x < y;\n}\nstatic inline bool sle8(int8_t x, int8_t y)\n{\n    return x <= y;\n}\nstatic inline bool sle16(int16_t x, int16_t y)\n{\n    return x <= y;\n}\nstatic inline bool sle32(int32_t x, int32_t y)\n{\n    return x <= y;\n}\nstatic inline bool sle64(int64_t x, int64_t y)\n{\n    return x <= y;\n}\nstatic inline int8_t pow8(int8_t x, int8_t y)\n{\n    int8_t res = 1, rem = y;\n    \n    while (rem != 0) {\n        if (rem & 1)\n            res *= x;\n        rem >>= 1;\n        x *= x;\n    }\n    return res;\n}\nstatic inline int16_t pow16(int16_t x, int16_t y)\n{\n    int16_t res = 1, rem = y;\n    \n    while (rem != 0) {\n        if (rem & 1)\n            res *= x;\n        rem >>= 1;\n        x *= x;\n    }\n    return res;\n}\nstatic inline int32_t pow32(int32_t x, int32_t y)\n{\n    int32_t res = 1, rem = y;\n    \n    while (rem != 0) {\n        if (rem & 1)\n            res *= x;\n        rem >>= 1;\n        x *= x;\n    }\n    return res;\n}\nstatic inline int64_t pow64(int64_t x, int64_t y)\n{\n    int64_t res = 1, rem = y;\n    \n    while (rem != 0) {\n        if (rem & 1)\n            res *= x;\n        rem >>= 1;\n        x *= x;\n    }\n    return res;\n}\nstatic inline bool itob_i8_bool(int8_t x)\n{\n    return x;\n}\nstatic inline bool itob_i16_bool(int16_t x)\n{\n    return x;\n}\nstatic inline bool itob_i32_bool(int32_t x)\n{\n    return x;\n}\nstatic inline bool itob_i64_bool(int64_t x)\n{\n    return x;\n}\nstatic inline int8_t btoi_bool_i8(bool x)\n{\n    return x;\n}\nstatic inline int16_t btoi_bool_i16(bool x)\n{\n    return x;\n}\nstatic inline int32_t btoi_bool_i32(bool x)\n{\n    return x;\n}\nstatic inline int64_t btoi_bool_i64(bool x)\n{\n    return x;\n}\n#define sext_i8_i8(x) ((int8_t) (int8_t) x)\n#define sext_i8_i16(x) ((int16_t) (int8_t) x)\n#define sext_i8_i32(x) ((int32_t) (int8_t) x)\n#define sext_i8_i64(x) ((int64_t) (int8_t) x)\n#define sext_i16_i8(x) ((int8_t) (int16_t) x)\n#define sext_i16_i16(x) ((int16_t) (int16_t) x)\n#define sext_i16_i32(x) ((int32_t) (int16_t) x)\n#define sext_i16_i6",
                   "4(x) ((int64_t) (int16_t) x)\n#define sext_i32_i8(x) ((int8_t) (int32_t) x)\n#define sext_i32_i16(x) ((int16_t) (int32_t) x)\n#define sext_i32_i32(x) ((int32_t) (int32_t) x)\n#define sext_i32_i64(x) ((int64_t) (int32_t) x)\n#define sext_i64_i8(x) ((int8_t) (int64_t) x)\n#define sext_i64_i16(x) ((int16_t) (int64_t) x)\n#define sext_i64_i32(x) ((int32_t) (int64_t) x)\n#define sext_i64_i64(x) ((int64_t) (int64_t) x)\n#define zext_i8_i8(x) ((uint8_t) (uint8_t) x)\n#define zext_i8_i16(x) ((uint16_t) (uint8_t) x)\n#define zext_i8_i32(x) ((uint32_t) (uint8_t) x)\n#define zext_i8_i64(x) ((uint64_t) (uint8_t) x)\n#define zext_i16_i8(x) ((uint8_t) (uint16_t) x)\n#define zext_i16_i16(x) ((uint16_t) (uint16_t) x)\n#define zext_i16_i32(x) ((uint32_t) (uint16_t) x)\n#define zext_i16_i64(x) ((uint64_t) (uint16_t) x)\n#define zext_i32_i8(x) ((uint8_t) (uint32_t) x)\n#define zext_i32_i16(x) ((uint16_t) (uint32_t) x)\n#define zext_i32_i32(x) ((uint32_t) (uint32_t) x)\n#define zext_i32_i64(x) ((uint64_t) (uint32_t) x)\n#define zext_i64_i8(x) ((uint8_t) (uint64_t) x)\n#define zext_i64_i16(x) ((uint16_t) (uint64_t) x)\n#define zext_i64_i32(x) ((uint32_t) (uint64_t) x)\n#define zext_i64_i64(x) ((uint64_t) (uint64_t) x)\n#if defined(__OPENCL_VERSION__)\nstatic int32_t futrts_popc8(int8_t x)\n{\n    return popcount(x);\n}\nstatic int32_t futrts_popc16(int16_t x)\n{\n    return popcount(x);\n}\nstatic int32_t futrts_popc32(int32_t x)\n{\n    return popcount(x);\n}\nstatic int32_t futrts_popc64(int64_t x)\n{\n    return popcount(x);\n}\n#elif defined(__CUDA_ARCH__)\nstatic int32_t futrts_popc8(int8_t x)\n{\n    return __popc(zext_i8_i32(x));\n}\nstatic int32_t futrts_popc16(int16_t x)\n{\n    return __popc(zext_i16_i32(x));\n}\nstatic int32_t futrts_popc32(int32_t x)\n{\n    return __popc(x);\n}\nstatic int32_t futrts_popc64(int64_t x)\n{\n    return __popcll(x);\n}\n#else\nstatic int32_t futrts_popc8(int8_t x)\n{\n    int c = 0;\n    \n    for (; x; ++c)\n        x &= x - 1;\n    return c;\n}\nstatic int32_t futrts_popc16(int16_t x)\n{\n    int c = 0;\n    \n  ",
                   "  for (; x; ++c)\n        x &= x - 1;\n    return c;\n}\nstatic int32_t futrts_popc32(int32_t x)\n{\n    int c = 0;\n    \n    for (; x; ++c)\n        x &= x - 1;\n    return c;\n}\nstatic int32_t futrts_popc64(int64_t x)\n{\n    int c = 0;\n    \n    for (; x; ++c)\n        x &= x - 1;\n    return c;\n}\n#endif\n#if defined(__OPENCL_VERSION__)\nstatic int32_t futrts_clzz8(int8_t x)\n{\n    return clz(x);\n}\nstatic int32_t futrts_clzz16(int16_t x)\n{\n    return clz(x);\n}\nstatic int32_t futrts_clzz32(int32_t x)\n{\n    return clz(x);\n}\nstatic int32_t futrts_clzz64(int64_t x)\n{\n    return clz(x);\n}\n#elif defined(__CUDA_ARCH__)\nstatic int32_t futrts_clzz8(int8_t x)\n{\n    return __clz(zext_i8_i32(x)) - 24;\n}\nstatic int32_t futrts_clzz16(int16_t x)\n{\n    return __clz(zext_i16_i32(x)) - 16;\n}\nstatic int32_t futrts_clzz32(int32_t x)\n{\n    return __clz(x);\n}\nstatic int32_t futrts_clzz64(int64_t x)\n{\n    return __clzll(x);\n}\n#else\nstatic int32_t futrts_clzz8(int8_t x)\n{\n    int n = 0;\n    int bits = sizeof(x) * 8;\n    \n    for (int i = 0; i < bits; i++) {\n        if (x < 0)\n            break;\n        n++;\n        x <<= 1;\n    }\n    return n;\n}\nstatic int32_t futrts_clzz16(int16_t x)\n{\n    int n = 0;\n    int bits = sizeof(x) * 8;\n    \n    for (int i = 0; i < bits; i++) {\n        if (x < 0)\n            break;\n        n++;\n        x <<= 1;\n    }\n    return n;\n}\nstatic int32_t futrts_clzz32(int32_t x)\n{\n    int n = 0;\n    int bits = sizeof(x) * 8;\n    \n    for (int i = 0; i < bits; i++) {\n        if (x < 0)\n            break;\n        n++;\n        x <<= 1;\n    }\n    return n;\n}\nstatic int32_t futrts_clzz64(int64_t x)\n{\n    int n = 0;\n    int bits = sizeof(x) * 8;\n    \n    for (int i = 0; i < bits; i++) {\n        if (x < 0)\n            break;\n        n++;\n        x <<= 1;\n    }\n    return n;\n}\n#endif\nstatic inline float fdiv32(float x, float y)\n{\n    return x / y;\n}\nstatic inline float fadd32(float x, float y)\n{\n    return x + y;\n}\nstatic inline float fsub32(float x, float y)\n{\n    return x - y;\n}\nstatic inl",
                   "ine float fmul32(float x, float y)\n{\n    return x * y;\n}\nstatic inline float fmin32(float x, float y)\n{\n    return fmin(x, y);\n}\nstatic inline float fmax32(float x, float y)\n{\n    return fmax(x, y);\n}\nstatic inline float fpow32(float x, float y)\n{\n    return pow(x, y);\n}\nstatic inline bool cmplt32(float x, float y)\n{\n    return x < y;\n}\nstatic inline bool cmple32(float x, float y)\n{\n    return x <= y;\n}\nstatic inline float sitofp_i8_f32(int8_t x)\n{\n    return (float) x;\n}\nstatic inline float sitofp_i16_f32(int16_t x)\n{\n    return (float) x;\n}\nstatic inline float sitofp_i32_f32(int32_t x)\n{\n    return (float) x;\n}\nstatic inline float sitofp_i64_f32(int64_t x)\n{\n    return (float) x;\n}\nstatic inline float uitofp_i8_f32(uint8_t x)\n{\n    return (float) x;\n}\nstatic inline float uitofp_i16_f32(uint16_t x)\n{\n    return (float) x;\n}\nstatic inline float uitofp_i32_f32(uint32_t x)\n{\n    return (float) x;\n}\nstatic inline float uitofp_i64_f32(uint64_t x)\n{\n    return (float) x;\n}\nstatic inline int8_t fptosi_f32_i8(float x)\n{\n    return (int8_t) x;\n}\nstatic inline int16_t fptosi_f32_i16(float x)\n{\n    return (int16_t) x;\n}\nstatic inline int32_t fptosi_f32_i32(float x)\n{\n    return (int32_t) x;\n}\nstatic inline int64_t fptosi_f32_i64(float x)\n{\n    return (int64_t) x;\n}\nstatic inline uint8_t fptoui_f32_i8(float x)\n{\n    return (uint8_t) x;\n}\nstatic inline uint16_t fptoui_f32_i16(float x)\n{\n    return (uint16_t) x;\n}\nstatic inline uint32_t fptoui_f32_i32(float x)\n{\n    return (uint32_t) x;\n}\nstatic inline uint64_t fptoui_f32_i64(float x)\n{\n    return (uint64_t) x;\n}\nstatic inline float futrts_log32(float x)\n{\n    return log(x);\n}\nstatic inline float futrts_log2_32(float x)\n{\n    return log2(x);\n}\nstatic inline float futrts_log10_32(float x)\n{\n    return log10(x);\n}\nstatic inline float futrts_sqrt32(float x)\n{\n    return sqrt(x);\n}\nstatic inline float futrts_exp32(float x)\n{\n    return exp(x);\n}\nstatic inline float futrts_cos32(float x)\n{\n    return cos(x);\n}\nstatic inline float fut",
                   "rts_sin32(float x)\n{\n    return sin(x);\n}\nstatic inline float futrts_tan32(float x)\n{\n    return tan(x);\n}\nstatic inline float futrts_acos32(float x)\n{\n    return acos(x);\n}\nstatic inline float futrts_asin32(float x)\n{\n    return asin(x);\n}\nstatic inline float futrts_atan32(float x)\n{\n    return atan(x);\n}\nstatic inline float futrts_atan2_32(float x, float y)\n{\n    return atan2(x, y);\n}\nstatic inline float futrts_gamma32(float x)\n{\n    return tgamma(x);\n}\nstatic inline float futrts_lgamma32(float x)\n{\n    return lgamma(x);\n}\nstatic inline bool futrts_isnan32(float x)\n{\n    return isnan(x);\n}\nstatic inline bool futrts_isinf32(float x)\n{\n    return isinf(x);\n}\nstatic inline int32_t futrts_to_bits32(float x)\n{\n    union {\n        float f;\n        int32_t t;\n    } p;\n    \n    p.f = x;\n    return p.t;\n}\nstatic inline float futrts_from_bits32(int32_t x)\n{\n    union {\n        int32_t f;\n        float t;\n    } p;\n    \n    p.f = x;\n    return p.t;\n}\n#ifdef __OPENCL_VERSION__\nstatic inline float fmod32(float x, float y)\n{\n    return fmod(x, y);\n}\nstatic inline float futrts_round32(float x)\n{\n    return rint(x);\n}\nstatic inline float futrts_floor32(float x)\n{\n    return floor(x);\n}\nstatic inline float futrts_ceil32(float x)\n{\n    return ceil(x);\n}\nstatic inline float futrts_lerp32(float v0, float v1, float t)\n{\n    return mix(v0, v1, t);\n}\n#else\nstatic inline float fmod32(float x, float y)\n{\n    return fmodf(x, y);\n}\nstatic inline float futrts_round32(float x)\n{\n    return rintf(x);\n}\nstatic inline float futrts_floor32(float x)\n{\n    return floorf(x);\n}\nstatic inline float futrts_ceil32(float x)\n{\n    return ceilf(x);\n}\nstatic inline float futrts_lerp32(float v0, float v1, float t)\n{\n    return v0 + (v1 - v0) * t;\n}\n#endif\n__kernel void iota_76309(__global unsigned char *mem_75995)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t iota_gtid_76309;\n    int32_t iota_ltid_76310;\n    int32_t iota_gid_76311;\n    \n    iota_gtid_7",
                   "6309 = get_global_id(0);\n    iota_ltid_76310 = get_local_id(0);\n    iota_gid_76311 = get_group_id(0);\n    if (slt32(iota_gtid_76309, 400)) {\n        ((__global int32_t *) mem_75995)[iota_gtid_76309] =\n            sext_i32_i32(iota_gtid_76309);\n    }\n    \n  error_0:\n    return;\n}\n__kernel void iota_76582(__global unsigned char *mem_75995)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t iota_gtid_76582;\n    int32_t iota_ltid_76583;\n    int32_t iota_gid_76584;\n    \n    iota_gtid_76582 = get_global_id(0);\n    iota_ltid_76583 = get_local_id(0);\n    iota_gid_76584 = get_group_id(0);\n    if (slt32(iota_gtid_76582, 10000)) {\n        ((__global int32_t *) mem_75995)[iota_gtid_76582] =\n            sext_i32_i32(iota_gtid_76582);\n    }\n    \n  error_0:\n    return;\n}\n__kernel void iota_76808(__global unsigned char *mem_75995)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t iota_gtid_76808;\n    int32_t iota_ltid_76809;\n    int32_t iota_gid_76810;\n    \n    iota_gtid_76808 = get_global_id(0);\n    iota_ltid_76809 = get_local_id(0);\n    iota_gid_76810 = get_group_id(0);\n    if (slt32(iota_gtid_76808, 400)) {\n        ((__global int32_t *) mem_75995)[iota_gtid_76808] =\n            sext_i32_i32(iota_gtid_76808);\n    }\n    \n  error_0:\n    return;\n}\n__kernel void iota_77059(__global unsigned char *mem_75995)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t iota_gtid_77059;\n    int32_t iota_ltid_77060;\n    int32_t iota_gid_77061;\n    \n    iota_gtid_77059 = get_global_id(0);\n    iota_ltid_77060 = get_local_id(0);\n    iota_gid_77061 = get_group_id(0);\n    if (slt32(iota_gtid_77059, 10000)) {\n        ((__global int32_t *) mem_75995)[iota_gtid_77059] =\n            sext_i32_i32(iota_gtid_77059);\n    }\n    \n  error_0:\n    return;\n}\n__kernel void replicate_76424(__global unsigned char *mem_76420,\n                              int32_t",
                   " num_elems_76421, float val_76422)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t replicate_gtid_76424;\n    int32_t replicate_ltid_76425;\n    int32_t replicate_gid_76426;\n    \n    replicate_gtid_76424 = get_global_id(0);\n    replicate_ltid_76425 = get_local_id(0);\n    replicate_gid_76426 = get_group_id(0);\n    if (slt32(replicate_gtid_76424, num_elems_76421)) {\n        ((__global float *) mem_76420)[replicate_gtid_76424] = val_76422;\n    }\n    \n  error_0:\n    return;\n}\n__kernel void replicate_76451(__global unsigned char *mem_76447,\n                              int32_t num_elems_76448, int32_t val_76449)\n{\n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    int32_t replicate_gtid_76451;\n    int32_t replicate_ltid_76452;\n    int32_t replicate_gid_76453;\n    \n    replicate_gtid_76451 = get_global_id(0);\n    replicate_ltid_76452 = get_local_id(0);\n    replicate_gid_76453 = get_group_id(0);\n    if (slt32(replicate_gtid_76451, num_elems_76448)) {\n        ((__global int32_t *) mem_76447)[replicate_gtid_76451] = val_76449;\n    }\n    \n  error_0:\n    return;\n}\n__kernel void scan_stage1_72711(__global int *global_failure, __local volatile\n                                int64_t *scan_arr_mem_76339_backing_aligned_0,\n                                __local volatile\n                                int64_t *scan_arr_mem_76337_backing_aligned_1,\n                                __global unsigned char *mem_76000, __global\n                                unsigned char *mem_76004, __global\n                                unsigned char *mem_76007, __global\n                                unsigned char *mem_76010,\n                                int32_t num_threads_76325)\n{\n    #define segscan_group_sizze_72706 (bvh_rgbboxzisegscan_group_sizze_72705)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict scan_arr",
                   "_mem_76339_backing_1 =\n                          (__local volatile\n                           char *) scan_arr_mem_76339_backing_aligned_0;\n    __local volatile char *restrict scan_arr_mem_76337_backing_0 =\n                          (__local volatile\n                           char *) scan_arr_mem_76337_backing_aligned_1;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76332;\n    int32_t local_tid_76333;\n    int32_t group_sizze_76336;\n    int32_t wave_sizze_76335;\n    int32_t group_tid_76334;\n    \n    global_tid_76332 = get_global_id(0);\n    local_tid_76333 = get_local_id(0);\n    group_sizze_76336 = get_local_size(0);\n    wave_sizze_76335 = LOCKSTEP_WIDTH;\n    group_tid_76334 = get_group_id(0);\n    \n    int32_t phys_tid_72711 = global_tid_76332;\n    __local char *scan_arr_mem_76337;\n    \n    scan_arr_mem_76337 = (__local char *) scan_arr_mem_76337_backing_0;\n    \n    __local char *scan_arr_mem_76339;\n    \n    scan_arr_mem_76339 = (__local char *) scan_arr_mem_76339_backing_1;\n    \n    int32_t x_69543;\n    int32_t x_69544;\n    int32_t x_69545;\n    int32_t x_69546;\n    \n    x_69543 = 0;\n    x_69544 = 0;\n    for (int32_t j_76341 = 0; j_76341 < squot32(sub32(add32(400,\n                                                            num_threads_76325),\n                                                      1), num_threads_76325);\n         j_76341++) {\n        int32_t chunk_offset_76342 = add32(mul32(segscan_group_sizze_72706,\n                                                 j_76341),\n                                           mul32(group_tid_76334,\n                                                 mul32(segscan_group_sizze_72706,\n                                                       squot32(sub32(add32(400,\n                                                                           num_threads_76325),\n                                                                     1),\n                                                               num_threads",
                   "_76325))));\n        int32_t flat_idx_76343 = add32(chunk_offset_76342, local_tid_76333);\n        int32_t gtid_72710 = flat_idx_76343;\n        \n        // threads in bounds read input; others get neutral element\n        {\n            if (slt32(gtid_72710, 400)) {\n                int32_t x_69549 = ((__global int32_t *) mem_76000)[gtid_72710];\n                int32_t res_69550 = sub32(1, x_69549);\n                \n                // write to-scan values to parameters\n                {\n                    x_69545 = res_69550;\n                    x_69546 = x_69549;\n                }\n                // write mapped values results to global memory\n                {\n                    ((__global int32_t *) mem_76010)[gtid_72710] = res_69550;\n                }\n            } else {\n                x_69545 = 0;\n                x_69546 = 0;\n            }\n        }\n        // combine with carry and write to local memory\n        {\n            int32_t res_69547 = add32(x_69543, x_69545);\n            int32_t res_69548 = add32(x_69544, x_69546);\n            \n            ((__local int32_t *) scan_arr_mem_76337)[local_tid_76333] =\n                res_69547;\n            ((__local int32_t *) scan_arr_mem_76339)[local_tid_76333] =\n                res_69548;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t x_76326;\n        int32_t x_76327;\n        int32_t x_76328;\n        int32_t x_76329;\n        int32_t x_76344;\n        int32_t x_76345;\n        int32_t x_76346;\n        int32_t x_76347;\n        int32_t skip_threads_76350;\n        \n        if (slt32(local_tid_76333, segscan_group_sizze_72706)) {\n            x_76328 = ((volatile __local\n                        int32_t *) scan_arr_mem_76337)[local_tid_76333];\n            x_76329 = ((volatile __local\n                        int32_t *) scan_arr_mem_76339)[local_tid_76333];\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_76350 = 1;\n            while (slt32(skip_thread",
                   "s_76350, 32)) {\n                if (sle32(skip_threads_76350, sub32(local_tid_76333,\n                                                    mul32(squot32(local_tid_76333,\n                                                                  32), 32))) &&\n                    slt32(local_tid_76333, segscan_group_sizze_72706)) {\n                    // read operands\n                    {\n                        x_76326 = ((volatile __local\n                                    int32_t *) scan_arr_mem_76337)[sub32(local_tid_76333,\n                                                                         skip_threads_76350)];\n                        x_76327 = ((volatile __local\n                                    int32_t *) scan_arr_mem_76339)[sub32(local_tid_76333,\n                                                                         skip_threads_76350)];\n                    }\n                    // perform operation\n                    {\n                        int32_t res_76330 = add32(x_76326, x_76328);\n                        int32_t res_76331 = add32(x_76327, x_76329);\n                        \n                        x_76328 = res_76330;\n                        x_76329 = res_76331;\n                    }\n                }\n                if (sle32(wave_sizze_76335, skip_threads_76350)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_76350, sub32(local_tid_76333,\n                                                    mul32(squot32(local_tid_76333,\n                                                                  32), 32))) &&\n                    slt32(local_tid_76333, segscan_group_sizze_72706)) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int32_t *) scan_arr_mem_76337)[local_tid_76333] =\n                            x_76328;\n                        ((volatile __local\n                          int32_t *) scan_arr_mem_76339)[local_tid_76",
                   "333] =\n                            x_76329;\n                    }\n                }\n                if (sle32(wave_sizze_76335, skip_threads_76350)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_76350 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if (sub32(local_tid_76333, mul32(squot32(local_tid_76333, 32),\n                                             32)) == 31 &&\n                slt32(local_tid_76333, segscan_group_sizze_72706)) {\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76337)[squot32(local_tid_76333, 32)] =\n                    x_76328;\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76339)[squot32(local_tid_76333, 32)] =\n                    x_76329;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for warp 'i+1'\n        {\n            int32_t skip_threads_76351;\n            \n            if (squot32(local_tid_76333, 32) == 0 && slt32(local_tid_76333,\n                                                           segscan_group_sizze_72706)) {\n                x_76346 = ((volatile __local\n                            int32_t *) scan_arr_mem_76337)[local_tid_76333];\n                x_76347 = ((volatile __local\n                            int32_t *) scan_arr_mem_76339)[local_tid_76333];\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_76351 = 1;\n                while (slt32(skip_threads_76351, 32)) {\n                    if (sle32(skip_threads_76351, sub32(local_tid_76333,\n                                                        mul32(squot32(local_tid_76333,\n                                                                      32),\n                                                              32)",
                   ")) &&\n                        (squot32(local_tid_76333, 32) == 0 &&\n                         slt32(local_tid_76333, segscan_group_sizze_72706))) {\n                        // read operands\n                        {\n                            x_76344 = ((volatile __local\n                                        int32_t *) scan_arr_mem_76337)[sub32(local_tid_76333,\n                                                                             skip_threads_76351)];\n                            x_76345 = ((volatile __local\n                                        int32_t *) scan_arr_mem_76339)[sub32(local_tid_76333,\n                                                                             skip_threads_76351)];\n                        }\n                        // perform operation\n                        {\n                            int32_t res_76348 = add32(x_76344, x_76346);\n                            int32_t res_76349 = add32(x_76345, x_76347);\n                            \n                            x_76346 = res_76348;\n                            x_76347 = res_76349;\n                        }\n                    }\n                    if (sle32(wave_sizze_76335, skip_threads_76351)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_76351, sub32(local_tid_76333,\n                                                        mul32(squot32(local_tid_76333,\n                                                                      32),\n                                                              32))) &&\n                        (squot32(local_tid_76333, 32) == 0 &&\n                         slt32(local_tid_76333, segscan_group_sizze_72706))) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int32_t *) scan_arr_mem_76337)[local_tid_76333] =\n                                x_76346;\n                            ((volatile _",
                   "_local\n                              int32_t *) scan_arr_mem_76339)[local_tid_76333] =\n                                x_76347;\n                        }\n                    }\n                    if (sle32(wave_sizze_76335, skip_threads_76351)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_76351 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_76333, 32) == 0 || !slt32(local_tid_76333,\n                                                              segscan_group_sizze_72706))) {\n                // read operands\n                {\n                    x_76326 = ((volatile __local\n                                int32_t *) scan_arr_mem_76337)[sub32(squot32(local_tid_76333,\n                                                                             32),\n                                                                     1)];\n                    x_76327 = ((volatile __local\n                                int32_t *) scan_arr_mem_76339)[sub32(squot32(local_tid_76333,\n                                                                             32),\n                                                                     1)];\n                }\n                // perform operation\n                {\n                    int32_t res_76330 = add32(x_76326, x_76328);\n                    int32_t res_76331 = add32(x_76327, x_76329);\n                    \n                    x_76328 = res_76330;\n                    x_76329 = res_76331;\n                }\n                // write final result\n                {\n                    ((volatile __local\n                      int32_t *) scan_arr_mem_76337)[local_tid_76333] = x_76328;\n                    ((volatile __local\n                      int32_t *) scan_arr_mem_76339)[local_tid_76333] = x_76329;\n                }\n            }\n        }\n      ",
                   "  barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_76333, 32) == 0) {\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76337)[local_tid_76333] = x_76328;\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76339)[local_tid_76333] = x_76329;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // threads in bounds write partial scan result\n        {\n            if (slt32(gtid_72710, 400)) {\n                ((__global int32_t *) mem_76004)[gtid_72710] = ((__local\n                                                                 int32_t *) scan_arr_mem_76337)[local_tid_76333];\n                ((__global int32_t *) mem_76007)[gtid_72710] = ((__local\n                                                                 int32_t *) scan_arr_mem_76339)[local_tid_76333];\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // first thread reads last element as carry-in for next iteration\n        {\n            if (local_tid_76333 == 0) {\n                x_69543 = ((__local\n                            int32_t *) scan_arr_mem_76337)[sub32(segscan_group_sizze_72706,\n                                                                 1)];\n                x_69544 = ((__local\n                            int32_t *) scan_arr_mem_76339)[sub32(segscan_group_sizze_72706,\n                                                                 1)];\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segscan_group_sizze_72706\n}\n__kernel void scan_stage1_73274(__global int *global_failure, __local volatile\n                                int64_t *scan_arr_mem_76612_backing_aligned_0,\n                                __local volatile\n                                int64_t *scan_arr_mem_76610_backing_aligned_1,\n                                __global unsigned char *mem_76000, __global\n         ",
                   "                       unsigned char *mem_76004, __global\n                                unsigned char *mem_76007, __global\n                                unsigned char *mem_76010,\n                                int32_t num_threads_76598)\n{\n    #define segscan_group_sizze_73269 (bvh_irregzisegscan_group_sizze_73268)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict scan_arr_mem_76612_backing_1 =\n                          (__local volatile\n                           char *) scan_arr_mem_76612_backing_aligned_0;\n    __local volatile char *restrict scan_arr_mem_76610_backing_0 =\n                          (__local volatile\n                           char *) scan_arr_mem_76610_backing_aligned_1;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76605;\n    int32_t local_tid_76606;\n    int32_t group_sizze_76609;\n    int32_t wave_sizze_76608;\n    int32_t group_tid_76607;\n    \n    global_tid_76605 = get_global_id(0);\n    local_tid_76606 = get_local_id(0);\n    group_sizze_76609 = get_local_size(0);\n    wave_sizze_76608 = LOCKSTEP_WIDTH;\n    group_tid_76607 = get_group_id(0);\n    \n    int32_t phys_tid_73274 = global_tid_76605;\n    __local char *scan_arr_mem_76610;\n    \n    scan_arr_mem_76610 = (__local char *) scan_arr_mem_76610_backing_0;\n    \n    __local char *scan_arr_mem_76612;\n    \n    scan_arr_mem_76612 = (__local char *) scan_arr_mem_76612_backing_1;\n    \n    int32_t x_70120;\n    int32_t x_70121;\n    int32_t x_70122;\n    int32_t x_70123;\n    \n    x_70120 = 0;\n    x_70121 = 0;\n    for (int32_t j_76614 = 0; j_76614 < squot32(sub32(add32(10000,\n                                                            num_threads_76598),\n                                                      1), num_threads_76598);\n         j_76614++) {\n        int32_t chunk_offset_76615 = add32(mul32(segscan_group_sizze_73269,\n                                                 j_76614),\n        ",
                   "                                   mul32(group_tid_76607,\n                                                 mul32(segscan_group_sizze_73269,\n                                                       squot32(sub32(add32(10000,\n                                                                           num_threads_76598),\n                                                                     1),\n                                                               num_threads_76598))));\n        int32_t flat_idx_76616 = add32(chunk_offset_76615, local_tid_76606);\n        int32_t gtid_73273 = flat_idx_76616;\n        \n        // threads in bounds read input; others get neutral element\n        {\n            if (slt32(gtid_73273, 10000)) {\n                int32_t x_70126 = ((__global int32_t *) mem_76000)[gtid_73273];\n                int32_t res_70127 = sub32(1, x_70126);\n                \n                // write to-scan values to parameters\n                {\n                    x_70122 = res_70127;\n                    x_70123 = x_70126;\n                }\n                // write mapped values results to global memory\n                {\n                    ((__global int32_t *) mem_76010)[gtid_73273] = res_70127;\n                }\n            } else {\n                x_70122 = 0;\n                x_70123 = 0;\n            }\n        }\n        // combine with carry and write to local memory\n        {\n            int32_t res_70124 = add32(x_70120, x_70122);\n            int32_t res_70125 = add32(x_70121, x_70123);\n            \n            ((__local int32_t *) scan_arr_mem_76610)[local_tid_76606] =\n                res_70124;\n            ((__local int32_t *) scan_arr_mem_76612)[local_tid_76606] =\n                res_70125;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t x_76599;\n        int32_t x_76600;\n        int32_t x_76601;\n        int32_t x_76602;\n        int32_t x_76617;\n        int32_t x_76618;\n        int32_t x_76619;\n        int32_t x_76620;\n        int32_t skip",
                   "_threads_76623;\n        \n        if (slt32(local_tid_76606, segscan_group_sizze_73269)) {\n            x_76601 = ((volatile __local\n                        int32_t *) scan_arr_mem_76610)[local_tid_76606];\n            x_76602 = ((volatile __local\n                        int32_t *) scan_arr_mem_76612)[local_tid_76606];\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_76623 = 1;\n            while (slt32(skip_threads_76623, 32)) {\n                if (sle32(skip_threads_76623, sub32(local_tid_76606,\n                                                    mul32(squot32(local_tid_76606,\n                                                                  32), 32))) &&\n                    slt32(local_tid_76606, segscan_group_sizze_73269)) {\n                    // read operands\n                    {\n                        x_76599 = ((volatile __local\n                                    int32_t *) scan_arr_mem_76610)[sub32(local_tid_76606,\n                                                                         skip_threads_76623)];\n                        x_76600 = ((volatile __local\n                                    int32_t *) scan_arr_mem_76612)[sub32(local_tid_76606,\n                                                                         skip_threads_76623)];\n                    }\n                    // perform operation\n                    {\n                        int32_t res_76603 = add32(x_76599, x_76601);\n                        int32_t res_76604 = add32(x_76600, x_76602);\n                        \n                        x_76601 = res_76603;\n                        x_76602 = res_76604;\n                    }\n                }\n                if (sle32(wave_sizze_76608, skip_threads_76623)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_76623, sub32(local_tid_76606,\n                                                    mul32(squot32(local_tid_76606,\n             ",
                   "                                                     32), 32))) &&\n                    slt32(local_tid_76606, segscan_group_sizze_73269)) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int32_t *) scan_arr_mem_76610)[local_tid_76606] =\n                            x_76601;\n                        ((volatile __local\n                          int32_t *) scan_arr_mem_76612)[local_tid_76606] =\n                            x_76602;\n                    }\n                }\n                if (sle32(wave_sizze_76608, skip_threads_76623)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_76623 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if (sub32(local_tid_76606, mul32(squot32(local_tid_76606, 32),\n                                             32)) == 31 &&\n                slt32(local_tid_76606, segscan_group_sizze_73269)) {\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76610)[squot32(local_tid_76606, 32)] =\n                    x_76601;\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76612)[squot32(local_tid_76606, 32)] =\n                    x_76602;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for warp 'i+1'\n        {\n            int32_t skip_threads_76624;\n            \n            if (squot32(local_tid_76606, 32) == 0 && slt32(local_tid_76606,\n                                                           segscan_group_sizze_73269)) {\n                x_76619 = ((volatile __local\n                            int32_t *) scan_arr_mem_76610)[local_tid_76606];\n                x_76620 = ((volatile __local\n                            int32_t *) scan_arr_mem_76612)[local_tid_76606];\n            }\n    ",
                   "        // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_76624 = 1;\n                while (slt32(skip_threads_76624, 32)) {\n                    if (sle32(skip_threads_76624, sub32(local_tid_76606,\n                                                        mul32(squot32(local_tid_76606,\n                                                                      32),\n                                                              32))) &&\n                        (squot32(local_tid_76606, 32) == 0 &&\n                         slt32(local_tid_76606, segscan_group_sizze_73269))) {\n                        // read operands\n                        {\n                            x_76617 = ((volatile __local\n                                        int32_t *) scan_arr_mem_76610)[sub32(local_tid_76606,\n                                                                             skip_threads_76624)];\n                            x_76618 = ((volatile __local\n                                        int32_t *) scan_arr_mem_76612)[sub32(local_tid_76606,\n                                                                             skip_threads_76624)];\n                        }\n                        // perform operation\n                        {\n                            int32_t res_76621 = add32(x_76617, x_76619);\n                            int32_t res_76622 = add32(x_76618, x_76620);\n                            \n                            x_76619 = res_76621;\n                            x_76620 = res_76622;\n                        }\n                    }\n                    if (sle32(wave_sizze_76608, skip_threads_76624)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_76624, sub32(local_tid_76606,\n                                                        mul32(squot32(local_tid_76606,\n                                                                      32),\n                    ",
                   "                                          32))) &&\n                        (squot32(local_tid_76606, 32) == 0 &&\n                         slt32(local_tid_76606, segscan_group_sizze_73269))) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int32_t *) scan_arr_mem_76610)[local_tid_76606] =\n                                x_76619;\n                            ((volatile __local\n                              int32_t *) scan_arr_mem_76612)[local_tid_76606] =\n                                x_76620;\n                        }\n                    }\n                    if (sle32(wave_sizze_76608, skip_threads_76624)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_76624 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_76606, 32) == 0 || !slt32(local_tid_76606,\n                                                              segscan_group_sizze_73269))) {\n                // read operands\n                {\n                    x_76599 = ((volatile __local\n                                int32_t *) scan_arr_mem_76610)[sub32(squot32(local_tid_76606,\n                                                                             32),\n                                                                     1)];\n                    x_76600 = ((volatile __local\n                                int32_t *) scan_arr_mem_76612)[sub32(squot32(local_tid_76606,\n                                                                             32),\n                                                                     1)];\n                }\n                // perform operation\n                {\n                    int32_t res_76603 = add32(x_76599, x_76601);\n                    int32_t res_76604 = add32(x_76600, x_76602);",
                   "\n                    \n                    x_76601 = res_76603;\n                    x_76602 = res_76604;\n                }\n                // write final result\n                {\n                    ((volatile __local\n                      int32_t *) scan_arr_mem_76610)[local_tid_76606] = x_76601;\n                    ((volatile __local\n                      int32_t *) scan_arr_mem_76612)[local_tid_76606] = x_76602;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_76606, 32) == 0) {\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76610)[local_tid_76606] = x_76601;\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76612)[local_tid_76606] = x_76602;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // threads in bounds write partial scan result\n        {\n            if (slt32(gtid_73273, 10000)) {\n                ((__global int32_t *) mem_76004)[gtid_73273] = ((__local\n                                                                 int32_t *) scan_arr_mem_76610)[local_tid_76606];\n                ((__global int32_t *) mem_76007)[gtid_73273] = ((__local\n                                                                 int32_t *) scan_arr_mem_76612)[local_tid_76606];\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // first thread reads last element as carry-in for next iteration\n        {\n            if (local_tid_76606 == 0) {\n                x_70120 = ((__local\n                            int32_t *) scan_arr_mem_76610)[sub32(segscan_group_sizze_73269,\n                                                                 1)];\n                x_70121 = ((__local\n                            int32_t *) scan_arr_mem_76612)[sub32(segscan_group_sizze_73269,\n                                                                 1)];\n            }\n        }\n        barrie",
                   "r(CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segscan_group_sizze_73269\n}\n__kernel void scan_stage1_73920(__global int *global_failure, __local volatile\n                                int64_t *scan_arr_mem_76838_backing_aligned_0,\n                                __local volatile\n                                int64_t *scan_arr_mem_76836_backing_aligned_1,\n                                __global unsigned char *mem_76000, __global\n                                unsigned char *mem_76004, __global\n                                unsigned char *mem_76007, __global\n                                unsigned char *mem_76010,\n                                int32_t num_threads_76824)\n{\n    #define segscan_group_sizze_73915 (render_rgbboxzisegscan_group_sizze_73914)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict scan_arr_mem_76838_backing_1 =\n                          (__local volatile\n                           char *) scan_arr_mem_76838_backing_aligned_0;\n    __local volatile char *restrict scan_arr_mem_76836_backing_0 =\n                          (__local volatile\n                           char *) scan_arr_mem_76836_backing_aligned_1;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76831;\n    int32_t local_tid_76832;\n    int32_t group_sizze_76835;\n    int32_t wave_sizze_76834;\n    int32_t group_tid_76833;\n    \n    global_tid_76831 = get_global_id(0);\n    local_tid_76832 = get_local_id(0);\n    group_sizze_76835 = get_local_size(0);\n    wave_sizze_76834 = LOCKSTEP_WIDTH;\n    group_tid_76833 = get_group_id(0);\n    \n    int32_t phys_tid_73920 = global_tid_76831;\n    __local char *scan_arr_mem_76836;\n    \n    scan_arr_mem_76836 = (__local char *) scan_arr_mem_76836_backing_0;\n    \n    __local char *scan_arr_mem_76838;\n    \n    scan_arr_mem_76838 = (__local char *) scan_arr_mem_76838_backing_1;\n    \n    int32_t x_70663;\n    int32_t x_70664;",
                   "\n    int32_t x_70665;\n    int32_t x_70666;\n    \n    x_70663 = 0;\n    x_70664 = 0;\n    for (int32_t j_76840 = 0; j_76840 < squot32(sub32(add32(400,\n                                                            num_threads_76824),\n                                                      1), num_threads_76824);\n         j_76840++) {\n        int32_t chunk_offset_76841 = add32(mul32(segscan_group_sizze_73915,\n                                                 j_76840),\n                                           mul32(group_tid_76833,\n                                                 mul32(segscan_group_sizze_73915,\n                                                       squot32(sub32(add32(400,\n                                                                           num_threads_76824),\n                                                                     1),\n                                                               num_threads_76824))));\n        int32_t flat_idx_76842 = add32(chunk_offset_76841, local_tid_76832);\n        int32_t gtid_73919 = flat_idx_76842;\n        \n        // threads in bounds read input; others get neutral element\n        {\n            if (slt32(gtid_73919, 400)) {\n                int32_t x_70669 = ((__global int32_t *) mem_76000)[gtid_73919];\n                int32_t res_70670 = sub32(1, x_70669);\n                \n                // write to-scan values to parameters\n                {\n                    x_70665 = res_70670;\n                    x_70666 = x_70669;\n                }\n                // write mapped values results to global memory\n                {\n                    ((__global int32_t *) mem_76010)[gtid_73919] = res_70670;\n                }\n            } else {\n                x_70665 = 0;\n                x_70666 = 0;\n            }\n        }\n        // combine with carry and write to local memory\n        {\n            int32_t res_70667 = add32(x_70663, x_70665);\n            int32_t res_70668 = add32(x_70664, x_70666);\n            \n         ",
                   "   ((__local int32_t *) scan_arr_mem_76836)[local_tid_76832] =\n                res_70667;\n            ((__local int32_t *) scan_arr_mem_76838)[local_tid_76832] =\n                res_70668;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t x_76825;\n        int32_t x_76826;\n        int32_t x_76827;\n        int32_t x_76828;\n        int32_t x_76843;\n        int32_t x_76844;\n        int32_t x_76845;\n        int32_t x_76846;\n        int32_t skip_threads_76849;\n        \n        if (slt32(local_tid_76832, segscan_group_sizze_73915)) {\n            x_76827 = ((volatile __local\n                        int32_t *) scan_arr_mem_76836)[local_tid_76832];\n            x_76828 = ((volatile __local\n                        int32_t *) scan_arr_mem_76838)[local_tid_76832];\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_76849 = 1;\n            while (slt32(skip_threads_76849, 32)) {\n                if (sle32(skip_threads_76849, sub32(local_tid_76832,\n                                                    mul32(squot32(local_tid_76832,\n                                                                  32), 32))) &&\n                    slt32(local_tid_76832, segscan_group_sizze_73915)) {\n                    // read operands\n                    {\n                        x_76825 = ((volatile __local\n                                    int32_t *) scan_arr_mem_76836)[sub32(local_tid_76832,\n                                                                         skip_threads_76849)];\n                        x_76826 = ((volatile __local\n                                    int32_t *) scan_arr_mem_76838)[sub32(local_tid_76832,\n                                                                         skip_threads_76849)];\n                    }\n                    // perform operation\n                    {\n                        int32_t res_76829 = add32(x_76825, x_76827);\n                        int32_t res_76830 = add32(x_76826,",
                   " x_76828);\n                        \n                        x_76827 = res_76829;\n                        x_76828 = res_76830;\n                    }\n                }\n                if (sle32(wave_sizze_76834, skip_threads_76849)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_76849, sub32(local_tid_76832,\n                                                    mul32(squot32(local_tid_76832,\n                                                                  32), 32))) &&\n                    slt32(local_tid_76832, segscan_group_sizze_73915)) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int32_t *) scan_arr_mem_76836)[local_tid_76832] =\n                            x_76827;\n                        ((volatile __local\n                          int32_t *) scan_arr_mem_76838)[local_tid_76832] =\n                            x_76828;\n                    }\n                }\n                if (sle32(wave_sizze_76834, skip_threads_76849)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_76849 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if (sub32(local_tid_76832, mul32(squot32(local_tid_76832, 32),\n                                             32)) == 31 &&\n                slt32(local_tid_76832, segscan_group_sizze_73915)) {\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76836)[squot32(local_tid_76832, 32)] =\n                    x_76827;\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76838)[squot32(local_tid_76832, 32)] =\n                    x_76828;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for warp 'i+1'\n        {\n            in",
                   "t32_t skip_threads_76850;\n            \n            if (squot32(local_tid_76832, 32) == 0 && slt32(local_tid_76832,\n                                                           segscan_group_sizze_73915)) {\n                x_76845 = ((volatile __local\n                            int32_t *) scan_arr_mem_76836)[local_tid_76832];\n                x_76846 = ((volatile __local\n                            int32_t *) scan_arr_mem_76838)[local_tid_76832];\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_76850 = 1;\n                while (slt32(skip_threads_76850, 32)) {\n                    if (sle32(skip_threads_76850, sub32(local_tid_76832,\n                                                        mul32(squot32(local_tid_76832,\n                                                                      32),\n                                                              32))) &&\n                        (squot32(local_tid_76832, 32) == 0 &&\n                         slt32(local_tid_76832, segscan_group_sizze_73915))) {\n                        // read operands\n                        {\n                            x_76843 = ((volatile __local\n                                        int32_t *) scan_arr_mem_76836)[sub32(local_tid_76832,\n                                                                             skip_threads_76850)];\n                            x_76844 = ((volatile __local\n                                        int32_t *) scan_arr_mem_76838)[sub32(local_tid_76832,\n                                                                             skip_threads_76850)];\n                        }\n                        // perform operation\n                        {\n                            int32_t res_76847 = add32(x_76843, x_76845);\n                            int32_t res_76848 = add32(x_76844, x_76846);\n                            \n                            x_76845 = res_76847;\n                            x_768",
                   "46 = res_76848;\n                        }\n                    }\n                    if (sle32(wave_sizze_76834, skip_threads_76850)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_76850, sub32(local_tid_76832,\n                                                        mul32(squot32(local_tid_76832,\n                                                                      32),\n                                                              32))) &&\n                        (squot32(local_tid_76832, 32) == 0 &&\n                         slt32(local_tid_76832, segscan_group_sizze_73915))) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int32_t *) scan_arr_mem_76836)[local_tid_76832] =\n                                x_76845;\n                            ((volatile __local\n                              int32_t *) scan_arr_mem_76838)[local_tid_76832] =\n                                x_76846;\n                        }\n                    }\n                    if (sle32(wave_sizze_76834, skip_threads_76850)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_76850 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_76832, 32) == 0 || !slt32(local_tid_76832,\n                                                              segscan_group_sizze_73915))) {\n                // read operands\n                {\n                    x_76825 = ((volatile __local\n                                int32_t *) scan_arr_mem_76836)[sub32(squot32(local_tid_76832,\n                                                                             32),\n                                                                     1)];\n                    x_76826 = ((vol",
                   "atile __local\n                                int32_t *) scan_arr_mem_76838)[sub32(squot32(local_tid_76832,\n                                                                             32),\n                                                                     1)];\n                }\n                // perform operation\n                {\n                    int32_t res_76829 = add32(x_76825, x_76827);\n                    int32_t res_76830 = add32(x_76826, x_76828);\n                    \n                    x_76827 = res_76829;\n                    x_76828 = res_76830;\n                }\n                // write final result\n                {\n                    ((volatile __local\n                      int32_t *) scan_arr_mem_76836)[local_tid_76832] = x_76827;\n                    ((volatile __local\n                      int32_t *) scan_arr_mem_76838)[local_tid_76832] = x_76828;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_76832, 32) == 0) {\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76836)[local_tid_76832] = x_76827;\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76838)[local_tid_76832] = x_76828;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // threads in bounds write partial scan result\n        {\n            if (slt32(gtid_73919, 400)) {\n                ((__global int32_t *) mem_76004)[gtid_73919] = ((__local\n                                                                 int32_t *) scan_arr_mem_76836)[local_tid_76832];\n                ((__global int32_t *) mem_76007)[gtid_73919] = ((__local\n                                                                 int32_t *) scan_arr_mem_76838)[local_tid_76832];\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // first thread reads last element as carry-in for next iteration\n        {\n          ",
                   "  if (local_tid_76832 == 0) {\n                x_70663 = ((__local\n                            int32_t *) scan_arr_mem_76836)[sub32(segscan_group_sizze_73915,\n                                                                 1)];\n                x_70664 = ((__local\n                            int32_t *) scan_arr_mem_76838)[sub32(segscan_group_sizze_73915,\n                                                                 1)];\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segscan_group_sizze_73915\n}\n__kernel void scan_stage1_74914(__global int *global_failure, __local volatile\n                                int64_t *scan_arr_mem_77089_backing_aligned_0,\n                                __local volatile\n                                int64_t *scan_arr_mem_77087_backing_aligned_1,\n                                __global unsigned char *mem_76000, __global\n                                unsigned char *mem_76004, __global\n                                unsigned char *mem_76007, __global\n                                unsigned char *mem_76010,\n                                int32_t num_threads_77075)\n{\n    #define segscan_group_sizze_74909 (render_irregzisegscan_group_sizze_74908)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict scan_arr_mem_77089_backing_1 =\n                          (__local volatile\n                           char *) scan_arr_mem_77089_backing_aligned_0;\n    __local volatile char *restrict scan_arr_mem_77087_backing_0 =\n                          (__local volatile\n                           char *) scan_arr_mem_77087_backing_aligned_1;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_77082;\n    int32_t local_tid_77083;\n    int32_t group_sizze_77086;\n    int32_t wave_sizze_77085;\n    int32_t group_tid_77084;\n    \n    global_tid_77082 = get_global_id(0);\n    local_tid_77083 = get_loca",
                   "l_id(0);\n    group_sizze_77086 = get_local_size(0);\n    wave_sizze_77085 = LOCKSTEP_WIDTH;\n    group_tid_77084 = get_group_id(0);\n    \n    int32_t phys_tid_74914 = global_tid_77082;\n    __local char *scan_arr_mem_77087;\n    \n    scan_arr_mem_77087 = (__local char *) scan_arr_mem_77087_backing_0;\n    \n    __local char *scan_arr_mem_77089;\n    \n    scan_arr_mem_77089 = (__local char *) scan_arr_mem_77089_backing_1;\n    \n    int32_t x_71650;\n    int32_t x_71651;\n    int32_t x_71652;\n    int32_t x_71653;\n    \n    x_71650 = 0;\n    x_71651 = 0;\n    for (int32_t j_77091 = 0; j_77091 < squot32(sub32(add32(10000,\n                                                            num_threads_77075),\n                                                      1), num_threads_77075);\n         j_77091++) {\n        int32_t chunk_offset_77092 = add32(mul32(segscan_group_sizze_74909,\n                                                 j_77091),\n                                           mul32(group_tid_77084,\n                                                 mul32(segscan_group_sizze_74909,\n                                                       squot32(sub32(add32(10000,\n                                                                           num_threads_77075),\n                                                                     1),\n                                                               num_threads_77075))));\n        int32_t flat_idx_77093 = add32(chunk_offset_77092, local_tid_77083);\n        int32_t gtid_74913 = flat_idx_77093;\n        \n        // threads in bounds read input; others get neutral element\n        {\n            if (slt32(gtid_74913, 10000)) {\n                int32_t x_71656 = ((__global int32_t *) mem_76000)[gtid_74913];\n                int32_t res_71657 = sub32(1, x_71656);\n                \n                // write to-scan values to parameters\n                {\n                    x_71652 = res_71657;\n                    x_71653 = x_71656;\n                }\n              ",
                   "  // write mapped values results to global memory\n                {\n                    ((__global int32_t *) mem_76010)[gtid_74913] = res_71657;\n                }\n            } else {\n                x_71652 = 0;\n                x_71653 = 0;\n            }\n        }\n        // combine with carry and write to local memory\n        {\n            int32_t res_71654 = add32(x_71650, x_71652);\n            int32_t res_71655 = add32(x_71651, x_71653);\n            \n            ((__local int32_t *) scan_arr_mem_77087)[local_tid_77083] =\n                res_71654;\n            ((__local int32_t *) scan_arr_mem_77089)[local_tid_77083] =\n                res_71655;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        \n        int32_t x_77076;\n        int32_t x_77077;\n        int32_t x_77078;\n        int32_t x_77079;\n        int32_t x_77094;\n        int32_t x_77095;\n        int32_t x_77096;\n        int32_t x_77097;\n        int32_t skip_threads_77100;\n        \n        if (slt32(local_tid_77083, segscan_group_sizze_74909)) {\n            x_77078 = ((volatile __local\n                        int32_t *) scan_arr_mem_77087)[local_tid_77083];\n            x_77079 = ((volatile __local\n                        int32_t *) scan_arr_mem_77089)[local_tid_77083];\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_77100 = 1;\n            while (slt32(skip_threads_77100, 32)) {\n                if (sle32(skip_threads_77100, sub32(local_tid_77083,\n                                                    mul32(squot32(local_tid_77083,\n                                                                  32), 32))) &&\n                    slt32(local_tid_77083, segscan_group_sizze_74909)) {\n                    // read operands\n                    {\n                        x_77076 = ((volatile __local\n                                    int32_t *) scan_arr_mem_77087)[sub32(local_tid_77083,\n                                                                         ski",
                   "p_threads_77100)];\n                        x_77077 = ((volatile __local\n                                    int32_t *) scan_arr_mem_77089)[sub32(local_tid_77083,\n                                                                         skip_threads_77100)];\n                    }\n                    // perform operation\n                    {\n                        int32_t res_77080 = add32(x_77076, x_77078);\n                        int32_t res_77081 = add32(x_77077, x_77079);\n                        \n                        x_77078 = res_77080;\n                        x_77079 = res_77081;\n                    }\n                }\n                if (sle32(wave_sizze_77085, skip_threads_77100)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_77100, sub32(local_tid_77083,\n                                                    mul32(squot32(local_tid_77083,\n                                                                  32), 32))) &&\n                    slt32(local_tid_77083, segscan_group_sizze_74909)) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int32_t *) scan_arr_mem_77087)[local_tid_77083] =\n                            x_77078;\n                        ((volatile __local\n                          int32_t *) scan_arr_mem_77089)[local_tid_77083] =\n                            x_77079;\n                    }\n                }\n                if (sle32(wave_sizze_77085, skip_threads_77100)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_77100 *= 2;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // last thread of block 'i' writes its result to offset 'i'\n        {\n            if (sub32(local_tid_77083, mul32(squot32(local_tid_77083, 32),\n                                             32)) == 31 &&\n                slt32(local_tid_77083, segscan_group_sizze_74909)",
                   ") {\n                ((volatile __local\n                  int32_t *) scan_arr_mem_77087)[squot32(local_tid_77083, 32)] =\n                    x_77078;\n                ((volatile __local\n                  int32_t *) scan_arr_mem_77089)[squot32(local_tid_77083, 32)] =\n                    x_77079;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // scan the first block, after which offset 'i' contains carry-in for warp 'i+1'\n        {\n            int32_t skip_threads_77101;\n            \n            if (squot32(local_tid_77083, 32) == 0 && slt32(local_tid_77083,\n                                                           segscan_group_sizze_74909)) {\n                x_77096 = ((volatile __local\n                            int32_t *) scan_arr_mem_77087)[local_tid_77083];\n                x_77097 = ((volatile __local\n                            int32_t *) scan_arr_mem_77089)[local_tid_77083];\n            }\n            // in-block scan (hopefully no barriers needed)\n            {\n                skip_threads_77101 = 1;\n                while (slt32(skip_threads_77101, 32)) {\n                    if (sle32(skip_threads_77101, sub32(local_tid_77083,\n                                                        mul32(squot32(local_tid_77083,\n                                                                      32),\n                                                              32))) &&\n                        (squot32(local_tid_77083, 32) == 0 &&\n                         slt32(local_tid_77083, segscan_group_sizze_74909))) {\n                        // read operands\n                        {\n                            x_77094 = ((volatile __local\n                                        int32_t *) scan_arr_mem_77087)[sub32(local_tid_77083,\n                                                                             skip_threads_77101)];\n                            x_77095 = ((volatile __local\n                                        int32_t *) scan_arr_mem_77089)[sub32(l",
                   "ocal_tid_77083,\n                                                                             skip_threads_77101)];\n                        }\n                        // perform operation\n                        {\n                            int32_t res_77098 = add32(x_77094, x_77096);\n                            int32_t res_77099 = add32(x_77095, x_77097);\n                            \n                            x_77096 = res_77098;\n                            x_77097 = res_77099;\n                        }\n                    }\n                    if (sle32(wave_sizze_77085, skip_threads_77101)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    if (sle32(skip_threads_77101, sub32(local_tid_77083,\n                                                        mul32(squot32(local_tid_77083,\n                                                                      32),\n                                                              32))) &&\n                        (squot32(local_tid_77083, 32) == 0 &&\n                         slt32(local_tid_77083, segscan_group_sizze_74909))) {\n                        // write result\n                        {\n                            ((volatile __local\n                              int32_t *) scan_arr_mem_77087)[local_tid_77083] =\n                                x_77096;\n                            ((volatile __local\n                              int32_t *) scan_arr_mem_77089)[local_tid_77083] =\n                                x_77097;\n                        }\n                    }\n                    if (sle32(wave_sizze_77085, skip_threads_77101)) {\n                        barrier(CLK_LOCAL_MEM_FENCE);\n                    }\n                    skip_threads_77101 *= 2;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // carry-in for every block except the first\n        {\n            if (!(squot32(local_tid_77083, 32) == 0 || !slt32(local_tid_77083,\n         ",
                   "                                                     segscan_group_sizze_74909))) {\n                // read operands\n                {\n                    x_77076 = ((volatile __local\n                                int32_t *) scan_arr_mem_77087)[sub32(squot32(local_tid_77083,\n                                                                             32),\n                                                                     1)];\n                    x_77077 = ((volatile __local\n                                int32_t *) scan_arr_mem_77089)[sub32(squot32(local_tid_77083,\n                                                                             32),\n                                                                     1)];\n                }\n                // perform operation\n                {\n                    int32_t res_77080 = add32(x_77076, x_77078);\n                    int32_t res_77081 = add32(x_77077, x_77079);\n                    \n                    x_77078 = res_77080;\n                    x_77079 = res_77081;\n                }\n                // write final result\n                {\n                    ((volatile __local\n                      int32_t *) scan_arr_mem_77087)[local_tid_77083] = x_77078;\n                    ((volatile __local\n                      int32_t *) scan_arr_mem_77089)[local_tid_77083] = x_77079;\n                }\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // restore correct values for first block\n        {\n            if (squot32(local_tid_77083, 32) == 0) {\n                ((volatile __local\n                  int32_t *) scan_arr_mem_77087)[local_tid_77083] = x_77078;\n                ((volatile __local\n                  int32_t *) scan_arr_mem_77089)[local_tid_77083] = x_77079;\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // threads in bounds write partial scan result\n        {\n            if (slt32(gtid_74913, 10000)) {\n                ((__global int32_t *) mem_76004)[gtid_74913",
                   "] = ((__local\n                                                                 int32_t *) scan_arr_mem_77087)[local_tid_77083];\n                ((__global int32_t *) mem_76007)[gtid_74913] = ((__local\n                                                                 int32_t *) scan_arr_mem_77089)[local_tid_77083];\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // first thread reads last element as carry-in for next iteration\n        {\n            if (local_tid_77083 == 0) {\n                x_71650 = ((__local\n                            int32_t *) scan_arr_mem_77087)[sub32(segscan_group_sizze_74909,\n                                                                 1)];\n                x_71651 = ((__local\n                            int32_t *) scan_arr_mem_77089)[sub32(segscan_group_sizze_74909,\n                                                                 1)];\n            }\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n    }\n    \n  error_1:\n    return;\n    #undef segscan_group_sizze_74909\n}\n__kernel void scan_stage2_72711(__global int *global_failure, __local volatile\n                                int64_t *scan_arr_mem_76371_backing_aligned_0,\n                                __local volatile\n                                int64_t *scan_arr_mem_76369_backing_aligned_1,\n                                int32_t num_groups_72708, __global\n                                unsigned char *mem_76004, __global\n                                unsigned char *mem_76007,\n                                int32_t num_threads_76325)\n{\n    #define segscan_group_sizze_72706 (bvh_rgbboxzisegscan_group_sizze_72705)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict scan_arr_mem_76371_backing_1 =\n                          (__local volatile\n                           char *) scan_arr_mem_76371_backing_aligned_0;\n    __local volatile char *restrict scan_arr_mem_76369_backing_0 =\n     ",
                   "                     (__local volatile\n                           char *) scan_arr_mem_76369_backing_aligned_1;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76364;\n    int32_t local_tid_76365;\n    int32_t group_sizze_76368;\n    int32_t wave_sizze_76367;\n    int32_t group_tid_76366;\n    \n    global_tid_76364 = get_global_id(0);\n    local_tid_76365 = get_local_id(0);\n    group_sizze_76368 = get_local_size(0);\n    wave_sizze_76367 = LOCKSTEP_WIDTH;\n    group_tid_76366 = get_group_id(0);\n    \n    int32_t phys_tid_72711 = global_tid_76364;\n    __local char *scan_arr_mem_76369;\n    \n    scan_arr_mem_76369 = (__local char *) scan_arr_mem_76369_backing_0;\n    \n    __local char *scan_arr_mem_76371;\n    \n    scan_arr_mem_76371 = (__local char *) scan_arr_mem_76371_backing_1;\n    \n    int32_t flat_idx_76373 = sub32(mul32(add32(local_tid_76365, 1),\n                                         mul32(segscan_group_sizze_72706,\n                                               squot32(sub32(add32(400,\n                                                                   num_threads_76325),\n                                                             1),\n                                                       num_threads_76325))), 1);\n    int32_t gtid_72710 = flat_idx_76373;\n    \n    // threads in bound read carries; others get neutral element\n    {\n        if (slt32(gtid_72710, 400)) {\n            ((__local int32_t *) scan_arr_mem_76369)[local_tid_76365] =\n                ((__global int32_t *) mem_76004)[gtid_72710];\n            ((__local int32_t *) scan_arr_mem_76371)[local_tid_76365] =\n                ((__global int32_t *) mem_76007)[gtid_72710];\n        } else {\n            ((__local int32_t *) scan_arr_mem_76369)[local_tid_76365] = 0;\n            ((__local int32_t *) scan_arr_mem_76371)[local_tid_76365] = 0;\n        }\n    }\n    \n    int32_t x_76352;\n    int32_t x_76353;\n    int32_t x_76354;\n    int32_t x_76355;\n    int32_t x_76374;\n    int32_t x_76375;\n ",
                   "   int32_t x_76376;\n    int32_t x_76377;\n    int32_t skip_threads_76380;\n    \n    if (slt32(local_tid_76365, num_groups_72708)) {\n        x_76354 = ((volatile __local\n                    int32_t *) scan_arr_mem_76369)[local_tid_76365];\n        x_76355 = ((volatile __local\n                    int32_t *) scan_arr_mem_76371)[local_tid_76365];\n    }\n    // in-block scan (hopefully no barriers needed)\n    {\n        skip_threads_76380 = 1;\n        while (slt32(skip_threads_76380, 32)) {\n            if (sle32(skip_threads_76380, sub32(local_tid_76365,\n                                                mul32(squot32(local_tid_76365,\n                                                              32), 32))) &&\n                slt32(local_tid_76365, num_groups_72708)) {\n                // read operands\n                {\n                    x_76352 = ((volatile __local\n                                int32_t *) scan_arr_mem_76369)[sub32(local_tid_76365,\n                                                                     skip_threads_76380)];\n                    x_76353 = ((volatile __local\n                                int32_t *) scan_arr_mem_76371)[sub32(local_tid_76365,\n                                                                     skip_threads_76380)];\n                }\n                // perform operation\n                {\n                    int32_t res_76356 = add32(x_76352, x_76354);\n                    int32_t res_76357 = add32(x_76353, x_76355);\n                    \n                    x_76354 = res_76356;\n                    x_76355 = res_76357;\n                }\n            }\n            if (sle32(wave_sizze_76367, skip_threads_76380)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            if (sle32(skip_threads_76380, sub32(local_tid_76365,\n                                                mul32(squot32(local_tid_76365,\n                                                              32), 32))) &&\n                slt32(local_tid_76365, num_groups_",
                   "72708)) {\n                // write result\n                {\n                    ((volatile __local\n                      int32_t *) scan_arr_mem_76369)[local_tid_76365] = x_76354;\n                    ((volatile __local\n                      int32_t *) scan_arr_mem_76371)[local_tid_76365] = x_76355;\n                }\n            }\n            if (sle32(wave_sizze_76367, skip_threads_76380)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            skip_threads_76380 *= 2;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // last thread of block 'i' writes its result to offset 'i'\n    {\n        if (sub32(local_tid_76365, mul32(squot32(local_tid_76365, 32), 32)) ==\n            31 && slt32(local_tid_76365, num_groups_72708)) {\n            ((volatile __local\n              int32_t *) scan_arr_mem_76369)[squot32(local_tid_76365, 32)] =\n                x_76354;\n            ((volatile __local\n              int32_t *) scan_arr_mem_76371)[squot32(local_tid_76365, 32)] =\n                x_76355;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // scan the first block, after which offset 'i' contains carry-in for warp 'i+1'\n    {\n        int32_t skip_threads_76381;\n        \n        if (squot32(local_tid_76365, 32) == 0 && slt32(local_tid_76365,\n                                                       num_groups_72708)) {\n            x_76376 = ((volatile __local\n                        int32_t *) scan_arr_mem_76369)[local_tid_76365];\n            x_76377 = ((volatile __local\n                        int32_t *) scan_arr_mem_76371)[local_tid_76365];\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_76381 = 1;\n            while (slt32(skip_threads_76381, 32)) {\n                if (sle32(skip_threads_76381, sub32(local_tid_76365,\n                                                    mul32(squot32(local_tid_76365,\n                                                                  32), 32))) &&\n                    (sq",
                   "uot32(local_tid_76365, 32) == 0 && slt32(local_tid_76365,\n                                                                num_groups_72708))) {\n                    // read operands\n                    {\n                        x_76374 = ((volatile __local\n                                    int32_t *) scan_arr_mem_76369)[sub32(local_tid_76365,\n                                                                         skip_threads_76381)];\n                        x_76375 = ((volatile __local\n                                    int32_t *) scan_arr_mem_76371)[sub32(local_tid_76365,\n                                                                         skip_threads_76381)];\n                    }\n                    // perform operation\n                    {\n                        int32_t res_76378 = add32(x_76374, x_76376);\n                        int32_t res_76379 = add32(x_76375, x_76377);\n                        \n                        x_76376 = res_76378;\n                        x_76377 = res_76379;\n                    }\n                }\n                if (sle32(wave_sizze_76367, skip_threads_76381)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_76381, sub32(local_tid_76365,\n                                                    mul32(squot32(local_tid_76365,\n                                                                  32), 32))) &&\n                    (squot32(local_tid_76365, 32) == 0 && slt32(local_tid_76365,\n                                                                num_groups_72708))) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int32_t *) scan_arr_mem_76369)[local_tid_76365] =\n                            x_76376;\n                        ((volatile __local\n                          int32_t *) scan_arr_mem_76371)[local_tid_76365] =\n                            x_76377;\n                    }\n                }",
                   "\n                if (sle32(wave_sizze_76367, skip_threads_76381)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_76381 *= 2;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // carry-in for every block except the first\n    {\n        if (!(squot32(local_tid_76365, 32) == 0 || !slt32(local_tid_76365,\n                                                          num_groups_72708))) {\n            // read operands\n            {\n                x_76352 = ((volatile __local\n                            int32_t *) scan_arr_mem_76369)[sub32(squot32(local_tid_76365,\n                                                                         32),\n                                                                 1)];\n                x_76353 = ((volatile __local\n                            int32_t *) scan_arr_mem_76371)[sub32(squot32(local_tid_76365,\n                                                                         32),\n                                                                 1)];\n            }\n            // perform operation\n            {\n                int32_t res_76356 = add32(x_76352, x_76354);\n                int32_t res_76357 = add32(x_76353, x_76355);\n                \n                x_76354 = res_76356;\n                x_76355 = res_76357;\n            }\n            // write final result\n            {\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76369)[local_tid_76365] = x_76354;\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76371)[local_tid_76365] = x_76355;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // restore correct values for first block\n    {\n        if (squot32(local_tid_76365, 32) == 0) {\n            ((volatile __local int32_t *) scan_arr_mem_76369)[local_tid_76365] =\n                x_76354;\n            ((volatile __local int32_t *) scan_arr_mem_76371)[local_tid_76365] =\n                x_76355;\n   ",
                   "     }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // threads in bounds write scanned carries\n    {\n        if (slt32(gtid_72710, 400)) {\n            ((__global int32_t *) mem_76004)[gtid_72710] = ((__local\n                                                             int32_t *) scan_arr_mem_76369)[local_tid_76365];\n            ((__global int32_t *) mem_76007)[gtid_72710] = ((__local\n                                                             int32_t *) scan_arr_mem_76371)[local_tid_76365];\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_72706\n}\n__kernel void scan_stage2_73274(__global int *global_failure, __local volatile\n                                int64_t *scan_arr_mem_76644_backing_aligned_0,\n                                __local volatile\n                                int64_t *scan_arr_mem_76642_backing_aligned_1,\n                                int32_t num_groups_73271, __global\n                                unsigned char *mem_76004, __global\n                                unsigned char *mem_76007,\n                                int32_t num_threads_76598)\n{\n    #define segscan_group_sizze_73269 (bvh_irregzisegscan_group_sizze_73268)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict scan_arr_mem_76644_backing_1 =\n                          (__local volatile\n                           char *) scan_arr_mem_76644_backing_aligned_0;\n    __local volatile char *restrict scan_arr_mem_76642_backing_0 =\n                          (__local volatile\n                           char *) scan_arr_mem_76642_backing_aligned_1;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76637;\n    int32_t local_tid_76638;\n    int32_t group_sizze_76641;\n    int32_t wave_sizze_76640;\n    int32_t group_tid_76639;\n    \n    global_tid_76637 = get_global_id(0);\n    local_tid_76638 = get_local_id(0);\n    group_sizze_76641 = get_local_size(0);\n    wave_",
                   "sizze_76640 = LOCKSTEP_WIDTH;\n    group_tid_76639 = get_group_id(0);\n    \n    int32_t phys_tid_73274 = global_tid_76637;\n    __local char *scan_arr_mem_76642;\n    \n    scan_arr_mem_76642 = (__local char *) scan_arr_mem_76642_backing_0;\n    \n    __local char *scan_arr_mem_76644;\n    \n    scan_arr_mem_76644 = (__local char *) scan_arr_mem_76644_backing_1;\n    \n    int32_t flat_idx_76646 = sub32(mul32(add32(local_tid_76638, 1),\n                                         mul32(segscan_group_sizze_73269,\n                                               squot32(sub32(add32(10000,\n                                                                   num_threads_76598),\n                                                             1),\n                                                       num_threads_76598))), 1);\n    int32_t gtid_73273 = flat_idx_76646;\n    \n    // threads in bound read carries; others get neutral element\n    {\n        if (slt32(gtid_73273, 10000)) {\n            ((__local int32_t *) scan_arr_mem_76642)[local_tid_76638] =\n                ((__global int32_t *) mem_76004)[gtid_73273];\n            ((__local int32_t *) scan_arr_mem_76644)[local_tid_76638] =\n                ((__global int32_t *) mem_76007)[gtid_73273];\n        } else {\n            ((__local int32_t *) scan_arr_mem_76642)[local_tid_76638] = 0;\n            ((__local int32_t *) scan_arr_mem_76644)[local_tid_76638] = 0;\n        }\n    }\n    \n    int32_t x_76625;\n    int32_t x_76626;\n    int32_t x_76627;\n    int32_t x_76628;\n    int32_t x_76647;\n    int32_t x_76648;\n    int32_t x_76649;\n    int32_t x_76650;\n    int32_t skip_threads_76653;\n    \n    if (slt32(local_tid_76638, num_groups_73271)) {\n        x_76627 = ((volatile __local\n                    int32_t *) scan_arr_mem_76642)[local_tid_76638];\n        x_76628 = ((volatile __local\n                    int32_t *) scan_arr_mem_76644)[local_tid_76638];\n    }\n    // in-block scan (hopefully no barriers needed)\n    {\n        skip_threads_76653 = 1;\n        whil",
                   "e (slt32(skip_threads_76653, 32)) {\n            if (sle32(skip_threads_76653, sub32(local_tid_76638,\n                                                mul32(squot32(local_tid_76638,\n                                                              32), 32))) &&\n                slt32(local_tid_76638, num_groups_73271)) {\n                // read operands\n                {\n                    x_76625 = ((volatile __local\n                                int32_t *) scan_arr_mem_76642)[sub32(local_tid_76638,\n                                                                     skip_threads_76653)];\n                    x_76626 = ((volatile __local\n                                int32_t *) scan_arr_mem_76644)[sub32(local_tid_76638,\n                                                                     skip_threads_76653)];\n                }\n                // perform operation\n                {\n                    int32_t res_76629 = add32(x_76625, x_76627);\n                    int32_t res_76630 = add32(x_76626, x_76628);\n                    \n                    x_76627 = res_76629;\n                    x_76628 = res_76630;\n                }\n            }\n            if (sle32(wave_sizze_76640, skip_threads_76653)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            if (sle32(skip_threads_76653, sub32(local_tid_76638,\n                                                mul32(squot32(local_tid_76638,\n                                                              32), 32))) &&\n                slt32(local_tid_76638, num_groups_73271)) {\n                // write result\n                {\n                    ((volatile __local\n                      int32_t *) scan_arr_mem_76642)[local_tid_76638] = x_76627;\n                    ((volatile __local\n                      int32_t *) scan_arr_mem_76644)[local_tid_76638] = x_76628;\n                }\n            }\n            if (sle32(wave_sizze_76640, skip_threads_76653)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n         ",
                   "   }\n            skip_threads_76653 *= 2;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // last thread of block 'i' writes its result to offset 'i'\n    {\n        if (sub32(local_tid_76638, mul32(squot32(local_tid_76638, 32), 32)) ==\n            31 && slt32(local_tid_76638, num_groups_73271)) {\n            ((volatile __local\n              int32_t *) scan_arr_mem_76642)[squot32(local_tid_76638, 32)] =\n                x_76627;\n            ((volatile __local\n              int32_t *) scan_arr_mem_76644)[squot32(local_tid_76638, 32)] =\n                x_76628;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // scan the first block, after which offset 'i' contains carry-in for warp 'i+1'\n    {\n        int32_t skip_threads_76654;\n        \n        if (squot32(local_tid_76638, 32) == 0 && slt32(local_tid_76638,\n                                                       num_groups_73271)) {\n            x_76649 = ((volatile __local\n                        int32_t *) scan_arr_mem_76642)[local_tid_76638];\n            x_76650 = ((volatile __local\n                        int32_t *) scan_arr_mem_76644)[local_tid_76638];\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_76654 = 1;\n            while (slt32(skip_threads_76654, 32)) {\n                if (sle32(skip_threads_76654, sub32(local_tid_76638,\n                                                    mul32(squot32(local_tid_76638,\n                                                                  32), 32))) &&\n                    (squot32(local_tid_76638, 32) == 0 && slt32(local_tid_76638,\n                                                                num_groups_73271))) {\n                    // read operands\n                    {\n                        x_76647 = ((volatile __local\n                                    int32_t *) scan_arr_mem_76642)[sub32(local_tid_76638,\n                                                                         skip_threads_76654)];\n         ",
                   "               x_76648 = ((volatile __local\n                                    int32_t *) scan_arr_mem_76644)[sub32(local_tid_76638,\n                                                                         skip_threads_76654)];\n                    }\n                    // perform operation\n                    {\n                        int32_t res_76651 = add32(x_76647, x_76649);\n                        int32_t res_76652 = add32(x_76648, x_76650);\n                        \n                        x_76649 = res_76651;\n                        x_76650 = res_76652;\n                    }\n                }\n                if (sle32(wave_sizze_76640, skip_threads_76654)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_76654, sub32(local_tid_76638,\n                                                    mul32(squot32(local_tid_76638,\n                                                                  32), 32))) &&\n                    (squot32(local_tid_76638, 32) == 0 && slt32(local_tid_76638,\n                                                                num_groups_73271))) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int32_t *) scan_arr_mem_76642)[local_tid_76638] =\n                            x_76649;\n                        ((volatile __local\n                          int32_t *) scan_arr_mem_76644)[local_tid_76638] =\n                            x_76650;\n                    }\n                }\n                if (sle32(wave_sizze_76640, skip_threads_76654)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_76654 *= 2;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // carry-in for every block except the first\n    {\n        if (!(squot32(local_tid_76638, 32) == 0 || !slt32(local_tid_76638,\n                                                          num_groups_73271))) {",
                   "\n            // read operands\n            {\n                x_76625 = ((volatile __local\n                            int32_t *) scan_arr_mem_76642)[sub32(squot32(local_tid_76638,\n                                                                         32),\n                                                                 1)];\n                x_76626 = ((volatile __local\n                            int32_t *) scan_arr_mem_76644)[sub32(squot32(local_tid_76638,\n                                                                         32),\n                                                                 1)];\n            }\n            // perform operation\n            {\n                int32_t res_76629 = add32(x_76625, x_76627);\n                int32_t res_76630 = add32(x_76626, x_76628);\n                \n                x_76627 = res_76629;\n                x_76628 = res_76630;\n            }\n            // write final result\n            {\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76642)[local_tid_76638] = x_76627;\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76644)[local_tid_76638] = x_76628;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // restore correct values for first block\n    {\n        if (squot32(local_tid_76638, 32) == 0) {\n            ((volatile __local int32_t *) scan_arr_mem_76642)[local_tid_76638] =\n                x_76627;\n            ((volatile __local int32_t *) scan_arr_mem_76644)[local_tid_76638] =\n                x_76628;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // threads in bounds write scanned carries\n    {\n        if (slt32(gtid_73273, 10000)) {\n            ((__global int32_t *) mem_76004)[gtid_73273] = ((__local\n                                                             int32_t *) scan_arr_mem_76642)[local_tid_76638];\n            ((__global int32_t *) mem_76007)[gtid_73273] = ((__local\n                                                             i",
                   "nt32_t *) scan_arr_mem_76644)[local_tid_76638];\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_73269\n}\n__kernel void scan_stage2_73920(__global int *global_failure, __local volatile\n                                int64_t *scan_arr_mem_76870_backing_aligned_0,\n                                __local volatile\n                                int64_t *scan_arr_mem_76868_backing_aligned_1,\n                                int32_t num_groups_73917, __global\n                                unsigned char *mem_76004, __global\n                                unsigned char *mem_76007,\n                                int32_t num_threads_76824)\n{\n    #define segscan_group_sizze_73915 (render_rgbboxzisegscan_group_sizze_73914)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict scan_arr_mem_76870_backing_1 =\n                          (__local volatile\n                           char *) scan_arr_mem_76870_backing_aligned_0;\n    __local volatile char *restrict scan_arr_mem_76868_backing_0 =\n                          (__local volatile\n                           char *) scan_arr_mem_76868_backing_aligned_1;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76863;\n    int32_t local_tid_76864;\n    int32_t group_sizze_76867;\n    int32_t wave_sizze_76866;\n    int32_t group_tid_76865;\n    \n    global_tid_76863 = get_global_id(0);\n    local_tid_76864 = get_local_id(0);\n    group_sizze_76867 = get_local_size(0);\n    wave_sizze_76866 = LOCKSTEP_WIDTH;\n    group_tid_76865 = get_group_id(0);\n    \n    int32_t phys_tid_73920 = global_tid_76863;\n    __local char *scan_arr_mem_76868;\n    \n    scan_arr_mem_76868 = (__local char *) scan_arr_mem_76868_backing_0;\n    \n    __local char *scan_arr_mem_76870;\n    \n    scan_arr_mem_76870 = (__local char *) scan_arr_mem_76870_backing_1;\n    \n    int32_t flat_idx_76872 = sub32(mul32(add32(local_tid_76864, 1),\n               ",
                   "                          mul32(segscan_group_sizze_73915,\n                                               squot32(sub32(add32(400,\n                                                                   num_threads_76824),\n                                                             1),\n                                                       num_threads_76824))), 1);\n    int32_t gtid_73919 = flat_idx_76872;\n    \n    // threads in bound read carries; others get neutral element\n    {\n        if (slt32(gtid_73919, 400)) {\n            ((__local int32_t *) scan_arr_mem_76868)[local_tid_76864] =\n                ((__global int32_t *) mem_76004)[gtid_73919];\n            ((__local int32_t *) scan_arr_mem_76870)[local_tid_76864] =\n                ((__global int32_t *) mem_76007)[gtid_73919];\n        } else {\n            ((__local int32_t *) scan_arr_mem_76868)[local_tid_76864] = 0;\n            ((__local int32_t *) scan_arr_mem_76870)[local_tid_76864] = 0;\n        }\n    }\n    \n    int32_t x_76851;\n    int32_t x_76852;\n    int32_t x_76853;\n    int32_t x_76854;\n    int32_t x_76873;\n    int32_t x_76874;\n    int32_t x_76875;\n    int32_t x_76876;\n    int32_t skip_threads_76879;\n    \n    if (slt32(local_tid_76864, num_groups_73917)) {\n        x_76853 = ((volatile __local\n                    int32_t *) scan_arr_mem_76868)[local_tid_76864];\n        x_76854 = ((volatile __local\n                    int32_t *) scan_arr_mem_76870)[local_tid_76864];\n    }\n    // in-block scan (hopefully no barriers needed)\n    {\n        skip_threads_76879 = 1;\n        while (slt32(skip_threads_76879, 32)) {\n            if (sle32(skip_threads_76879, sub32(local_tid_76864,\n                                                mul32(squot32(local_tid_76864,\n                                                              32), 32))) &&\n                slt32(local_tid_76864, num_groups_73917)) {\n                // read operands\n                {\n                    x_76851 = ((volatile __local\n                                ",
                   "int32_t *) scan_arr_mem_76868)[sub32(local_tid_76864,\n                                                                     skip_threads_76879)];\n                    x_76852 = ((volatile __local\n                                int32_t *) scan_arr_mem_76870)[sub32(local_tid_76864,\n                                                                     skip_threads_76879)];\n                }\n                // perform operation\n                {\n                    int32_t res_76855 = add32(x_76851, x_76853);\n                    int32_t res_76856 = add32(x_76852, x_76854);\n                    \n                    x_76853 = res_76855;\n                    x_76854 = res_76856;\n                }\n            }\n            if (sle32(wave_sizze_76866, skip_threads_76879)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            if (sle32(skip_threads_76879, sub32(local_tid_76864,\n                                                mul32(squot32(local_tid_76864,\n                                                              32), 32))) &&\n                slt32(local_tid_76864, num_groups_73917)) {\n                // write result\n                {\n                    ((volatile __local\n                      int32_t *) scan_arr_mem_76868)[local_tid_76864] = x_76853;\n                    ((volatile __local\n                      int32_t *) scan_arr_mem_76870)[local_tid_76864] = x_76854;\n                }\n            }\n            if (sle32(wave_sizze_76866, skip_threads_76879)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            skip_threads_76879 *= 2;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // last thread of block 'i' writes its result to offset 'i'\n    {\n        if (sub32(local_tid_76864, mul32(squot32(local_tid_76864, 32), 32)) ==\n            31 && slt32(local_tid_76864, num_groups_73917)) {\n            ((volatile __local\n              int32_t *) scan_arr_mem_76868)[squot32(local_tid_76864, 32)] =\n                x_76853;\n            ",
                   "((volatile __local\n              int32_t *) scan_arr_mem_76870)[squot32(local_tid_76864, 32)] =\n                x_76854;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // scan the first block, after which offset 'i' contains carry-in for warp 'i+1'\n    {\n        int32_t skip_threads_76880;\n        \n        if (squot32(local_tid_76864, 32) == 0 && slt32(local_tid_76864,\n                                                       num_groups_73917)) {\n            x_76875 = ((volatile __local\n                        int32_t *) scan_arr_mem_76868)[local_tid_76864];\n            x_76876 = ((volatile __local\n                        int32_t *) scan_arr_mem_76870)[local_tid_76864];\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_76880 = 1;\n            while (slt32(skip_threads_76880, 32)) {\n                if (sle32(skip_threads_76880, sub32(local_tid_76864,\n                                                    mul32(squot32(local_tid_76864,\n                                                                  32), 32))) &&\n                    (squot32(local_tid_76864, 32) == 0 && slt32(local_tid_76864,\n                                                                num_groups_73917))) {\n                    // read operands\n                    {\n                        x_76873 = ((volatile __local\n                                    int32_t *) scan_arr_mem_76868)[sub32(local_tid_76864,\n                                                                         skip_threads_76880)];\n                        x_76874 = ((volatile __local\n                                    int32_t *) scan_arr_mem_76870)[sub32(local_tid_76864,\n                                                                         skip_threads_76880)];\n                    }\n                    // perform operation\n                    {\n                        int32_t res_76877 = add32(x_76873, x_76875);\n                        int32_t res_76878 = add32(x_76874, x_7687",
                   "6);\n                        \n                        x_76875 = res_76877;\n                        x_76876 = res_76878;\n                    }\n                }\n                if (sle32(wave_sizze_76866, skip_threads_76880)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_76880, sub32(local_tid_76864,\n                                                    mul32(squot32(local_tid_76864,\n                                                                  32), 32))) &&\n                    (squot32(local_tid_76864, 32) == 0 && slt32(local_tid_76864,\n                                                                num_groups_73917))) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int32_t *) scan_arr_mem_76868)[local_tid_76864] =\n                            x_76875;\n                        ((volatile __local\n                          int32_t *) scan_arr_mem_76870)[local_tid_76864] =\n                            x_76876;\n                    }\n                }\n                if (sle32(wave_sizze_76866, skip_threads_76880)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_76880 *= 2;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // carry-in for every block except the first\n    {\n        if (!(squot32(local_tid_76864, 32) == 0 || !slt32(local_tid_76864,\n                                                          num_groups_73917))) {\n            // read operands\n            {\n                x_76851 = ((volatile __local\n                            int32_t *) scan_arr_mem_76868)[sub32(squot32(local_tid_76864,\n                                                                         32),\n                                                                 1)];\n                x_76852 = ((volatile __local\n                            int32_t *) scan_arr_mem_76870)[sub32(squot32(loc",
                   "al_tid_76864,\n                                                                         32),\n                                                                 1)];\n            }\n            // perform operation\n            {\n                int32_t res_76855 = add32(x_76851, x_76853);\n                int32_t res_76856 = add32(x_76852, x_76854);\n                \n                x_76853 = res_76855;\n                x_76854 = res_76856;\n            }\n            // write final result\n            {\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76868)[local_tid_76864] = x_76853;\n                ((volatile __local\n                  int32_t *) scan_arr_mem_76870)[local_tid_76864] = x_76854;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // restore correct values for first block\n    {\n        if (squot32(local_tid_76864, 32) == 0) {\n            ((volatile __local int32_t *) scan_arr_mem_76868)[local_tid_76864] =\n                x_76853;\n            ((volatile __local int32_t *) scan_arr_mem_76870)[local_tid_76864] =\n                x_76854;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // threads in bounds write scanned carries\n    {\n        if (slt32(gtid_73919, 400)) {\n            ((__global int32_t *) mem_76004)[gtid_73919] = ((__local\n                                                             int32_t *) scan_arr_mem_76868)[local_tid_76864];\n            ((__global int32_t *) mem_76007)[gtid_73919] = ((__local\n                                                             int32_t *) scan_arr_mem_76870)[local_tid_76864];\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_73915\n}\n__kernel void scan_stage2_74914(__global int *global_failure, __local volatile\n                                int64_t *scan_arr_mem_77121_backing_aligned_0,\n                                __local volatile\n                                int64_t *scan_arr_mem_77119_backing_aligned_1,\n                                i",
                   "nt32_t num_groups_74911, __global\n                                unsigned char *mem_76004, __global\n                                unsigned char *mem_76007,\n                                int32_t num_threads_77075)\n{\n    #define segscan_group_sizze_74909 (render_irregzisegscan_group_sizze_74908)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict scan_arr_mem_77121_backing_1 =\n                          (__local volatile\n                           char *) scan_arr_mem_77121_backing_aligned_0;\n    __local volatile char *restrict scan_arr_mem_77119_backing_0 =\n                          (__local volatile\n                           char *) scan_arr_mem_77119_backing_aligned_1;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_77114;\n    int32_t local_tid_77115;\n    int32_t group_sizze_77118;\n    int32_t wave_sizze_77117;\n    int32_t group_tid_77116;\n    \n    global_tid_77114 = get_global_id(0);\n    local_tid_77115 = get_local_id(0);\n    group_sizze_77118 = get_local_size(0);\n    wave_sizze_77117 = LOCKSTEP_WIDTH;\n    group_tid_77116 = get_group_id(0);\n    \n    int32_t phys_tid_74914 = global_tid_77114;\n    __local char *scan_arr_mem_77119;\n    \n    scan_arr_mem_77119 = (__local char *) scan_arr_mem_77119_backing_0;\n    \n    __local char *scan_arr_mem_77121;\n    \n    scan_arr_mem_77121 = (__local char *) scan_arr_mem_77121_backing_1;\n    \n    int32_t flat_idx_77123 = sub32(mul32(add32(local_tid_77115, 1),\n                                         mul32(segscan_group_sizze_74909,\n                                               squot32(sub32(add32(10000,\n                                                                   num_threads_77075),\n                                                             1),\n                                                       num_threads_77075))), 1);\n    int32_t gtid_74913 = flat_idx_77123;\n    \n    // threads in bound read carries; o",
                   "thers get neutral element\n    {\n        if (slt32(gtid_74913, 10000)) {\n            ((__local int32_t *) scan_arr_mem_77119)[local_tid_77115] =\n                ((__global int32_t *) mem_76004)[gtid_74913];\n            ((__local int32_t *) scan_arr_mem_77121)[local_tid_77115] =\n                ((__global int32_t *) mem_76007)[gtid_74913];\n        } else {\n            ((__local int32_t *) scan_arr_mem_77119)[local_tid_77115] = 0;\n            ((__local int32_t *) scan_arr_mem_77121)[local_tid_77115] = 0;\n        }\n    }\n    \n    int32_t x_77102;\n    int32_t x_77103;\n    int32_t x_77104;\n    int32_t x_77105;\n    int32_t x_77124;\n    int32_t x_77125;\n    int32_t x_77126;\n    int32_t x_77127;\n    int32_t skip_threads_77130;\n    \n    if (slt32(local_tid_77115, num_groups_74911)) {\n        x_77104 = ((volatile __local\n                    int32_t *) scan_arr_mem_77119)[local_tid_77115];\n        x_77105 = ((volatile __local\n                    int32_t *) scan_arr_mem_77121)[local_tid_77115];\n    }\n    // in-block scan (hopefully no barriers needed)\n    {\n        skip_threads_77130 = 1;\n        while (slt32(skip_threads_77130, 32)) {\n            if (sle32(skip_threads_77130, sub32(local_tid_77115,\n                                                mul32(squot32(local_tid_77115,\n                                                              32), 32))) &&\n                slt32(local_tid_77115, num_groups_74911)) {\n                // read operands\n                {\n                    x_77102 = ((volatile __local\n                                int32_t *) scan_arr_mem_77119)[sub32(local_tid_77115,\n                                                                     skip_threads_77130)];\n                    x_77103 = ((volatile __local\n                                int32_t *) scan_arr_mem_77121)[sub32(local_tid_77115,\n                                                                     skip_threads_77130)];\n                }\n                // perform operation\n                {\n   ",
                   "                 int32_t res_77106 = add32(x_77102, x_77104);\n                    int32_t res_77107 = add32(x_77103, x_77105);\n                    \n                    x_77104 = res_77106;\n                    x_77105 = res_77107;\n                }\n            }\n            if (sle32(wave_sizze_77117, skip_threads_77130)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            if (sle32(skip_threads_77130, sub32(local_tid_77115,\n                                                mul32(squot32(local_tid_77115,\n                                                              32), 32))) &&\n                slt32(local_tid_77115, num_groups_74911)) {\n                // write result\n                {\n                    ((volatile __local\n                      int32_t *) scan_arr_mem_77119)[local_tid_77115] = x_77104;\n                    ((volatile __local\n                      int32_t *) scan_arr_mem_77121)[local_tid_77115] = x_77105;\n                }\n            }\n            if (sle32(wave_sizze_77117, skip_threads_77130)) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n            }\n            skip_threads_77130 *= 2;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // last thread of block 'i' writes its result to offset 'i'\n    {\n        if (sub32(local_tid_77115, mul32(squot32(local_tid_77115, 32), 32)) ==\n            31 && slt32(local_tid_77115, num_groups_74911)) {\n            ((volatile __local\n              int32_t *) scan_arr_mem_77119)[squot32(local_tid_77115, 32)] =\n                x_77104;\n            ((volatile __local\n              int32_t *) scan_arr_mem_77121)[squot32(local_tid_77115, 32)] =\n                x_77105;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // scan the first block, after which offset 'i' contains carry-in for warp 'i+1'\n    {\n        int32_t skip_threads_77131;\n        \n        if (squot32(local_tid_77115, 32) == 0 && slt32(local_tid_77115,\n                                                       num_groups_74",
                   "911)) {\n            x_77126 = ((volatile __local\n                        int32_t *) scan_arr_mem_77119)[local_tid_77115];\n            x_77127 = ((volatile __local\n                        int32_t *) scan_arr_mem_77121)[local_tid_77115];\n        }\n        // in-block scan (hopefully no barriers needed)\n        {\n            skip_threads_77131 = 1;\n            while (slt32(skip_threads_77131, 32)) {\n                if (sle32(skip_threads_77131, sub32(local_tid_77115,\n                                                    mul32(squot32(local_tid_77115,\n                                                                  32), 32))) &&\n                    (squot32(local_tid_77115, 32) == 0 && slt32(local_tid_77115,\n                                                                num_groups_74911))) {\n                    // read operands\n                    {\n                        x_77124 = ((volatile __local\n                                    int32_t *) scan_arr_mem_77119)[sub32(local_tid_77115,\n                                                                         skip_threads_77131)];\n                        x_77125 = ((volatile __local\n                                    int32_t *) scan_arr_mem_77121)[sub32(local_tid_77115,\n                                                                         skip_threads_77131)];\n                    }\n                    // perform operation\n                    {\n                        int32_t res_77128 = add32(x_77124, x_77126);\n                        int32_t res_77129 = add32(x_77125, x_77127);\n                        \n                        x_77126 = res_77128;\n                        x_77127 = res_77129;\n                    }\n                }\n                if (sle32(wave_sizze_77117, skip_threads_77131)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                if (sle32(skip_threads_77131, sub32(local_tid_77115,\n                                                    mul32(squot32(local_tid_77115,\n ",
                   "                                                                 32), 32))) &&\n                    (squot32(local_tid_77115, 32) == 0 && slt32(local_tid_77115,\n                                                                num_groups_74911))) {\n                    // write result\n                    {\n                        ((volatile __local\n                          int32_t *) scan_arr_mem_77119)[local_tid_77115] =\n                            x_77126;\n                        ((volatile __local\n                          int32_t *) scan_arr_mem_77121)[local_tid_77115] =\n                            x_77127;\n                    }\n                }\n                if (sle32(wave_sizze_77117, skip_threads_77131)) {\n                    barrier(CLK_LOCAL_MEM_FENCE);\n                }\n                skip_threads_77131 *= 2;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // carry-in for every block except the first\n    {\n        if (!(squot32(local_tid_77115, 32) == 0 || !slt32(local_tid_77115,\n                                                          num_groups_74911))) {\n            // read operands\n            {\n                x_77102 = ((volatile __local\n                            int32_t *) scan_arr_mem_77119)[sub32(squot32(local_tid_77115,\n                                                                         32),\n                                                                 1)];\n                x_77103 = ((volatile __local\n                            int32_t *) scan_arr_mem_77121)[sub32(squot32(local_tid_77115,\n                                                                         32),\n                                                                 1)];\n            }\n            // perform operation\n            {\n                int32_t res_77106 = add32(x_77102, x_77104);\n                int32_t res_77107 = add32(x_77103, x_77105);\n                \n                x_77104 = res_77106;\n                x_77105 = res_77107;\n           ",
                   " }\n            // write final result\n            {\n                ((volatile __local\n                  int32_t *) scan_arr_mem_77119)[local_tid_77115] = x_77104;\n                ((volatile __local\n                  int32_t *) scan_arr_mem_77121)[local_tid_77115] = x_77105;\n            }\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // restore correct values for first block\n    {\n        if (squot32(local_tid_77115, 32) == 0) {\n            ((volatile __local int32_t *) scan_arr_mem_77119)[local_tid_77115] =\n                x_77104;\n            ((volatile __local int32_t *) scan_arr_mem_77121)[local_tid_77115] =\n                x_77105;\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // threads in bounds write scanned carries\n    {\n        if (slt32(gtid_74913, 10000)) {\n            ((__global int32_t *) mem_76004)[gtid_74913] = ((__local\n                                                             int32_t *) scan_arr_mem_77119)[local_tid_77115];\n            ((__global int32_t *) mem_76007)[gtid_74913] = ((__local\n                                                             int32_t *) scan_arr_mem_77121)[local_tid_77115];\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_74909\n}\n__kernel void scan_stage3_76382(__global int *global_failure, __global\n                                unsigned char *mem_76004, __global\n                                unsigned char *mem_76007,\n                                int32_t num_threads_76325)\n{\n    #define segscan_group_sizze_72706 (bvh_rgbboxzisegscan_group_sizze_72705)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t scan_stage3_gtid_76382;\n    int32_t scan_stage3_ltid_76383;\n    int32_t scan_stage3_gid_76384;\n    \n    scan_stage3_gtid_76382 = get_global_id(0);\n    scan_stage3_ltid_76383 = get_local_id(0);\n    scan_stage3_gid_76384 = get_group_id(0);\n    \n    int32_t phys_tid_72",
                   "711 = scan_stage3_gtid_76382;\n    int32_t gtid_72710 = scan_stage3_gtid_76382;\n    int32_t orig_group_76387 = squot32(scan_stage3_gtid_76382,\n                                       mul32(segscan_group_sizze_72706,\n                                             squot32(sub32(add32(400,\n                                                                 num_threads_76325),\n                                                           1),\n                                                     num_threads_76325)));\n    int32_t carry_in_flat_idx_76388 = sub32(mul32(orig_group_76387,\n                                                  mul32(segscan_group_sizze_72706,\n                                                        squot32(sub32(add32(400,\n                                                                            num_threads_76325),\n                                                                      1),\n                                                                num_threads_76325))),\n                                            1);\n    \n    if (slt32(scan_stage3_gtid_76382, 400)) {\n        if (!(orig_group_76387 == 0 || scan_stage3_gtid_76382 ==\n              sub32(mul32(add32(orig_group_76387, 1),\n                          mul32(segscan_group_sizze_72706,\n                                squot32(sub32(add32(400, num_threads_76325), 1),\n                                        num_threads_76325))), 1))) {\n            int32_t x_76358;\n            int32_t x_76359;\n            int32_t x_76360;\n            int32_t x_76361;\n            \n            x_76358 = ((__global int32_t *) mem_76004)[carry_in_flat_idx_76388];\n            x_76359 = ((__global int32_t *) mem_76007)[carry_in_flat_idx_76388];\n            x_76360 = ((__global int32_t *) mem_76004)[gtid_72710];\n            x_76361 = ((__global int32_t *) mem_76007)[gtid_72710];\n            \n            int32_t res_76362 = add32(x_76358, x_76360);\n            int32_t res_76363 = add32(x_76359, x_76361);\n            \n           ",
                   " x_76358 = res_76362;\n            x_76359 = res_76363;\n            ((__global int32_t *) mem_76004)[gtid_72710] = x_76358;\n            ((__global int32_t *) mem_76007)[gtid_72710] = x_76359;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_72706\n}\n__kernel void scan_stage3_76655(__global int *global_failure, __global\n                                unsigned char *mem_76004, __global\n                                unsigned char *mem_76007,\n                                int32_t num_threads_76598)\n{\n    #define segscan_group_sizze_73269 (bvh_irregzisegscan_group_sizze_73268)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t scan_stage3_gtid_76655;\n    int32_t scan_stage3_ltid_76656;\n    int32_t scan_stage3_gid_76657;\n    \n    scan_stage3_gtid_76655 = get_global_id(0);\n    scan_stage3_ltid_76656 = get_local_id(0);\n    scan_stage3_gid_76657 = get_group_id(0);\n    \n    int32_t phys_tid_73274 = scan_stage3_gtid_76655;\n    int32_t gtid_73273 = scan_stage3_gtid_76655;\n    int32_t orig_group_76660 = squot32(scan_stage3_gtid_76655,\n                                       mul32(segscan_group_sizze_73269,\n                                             squot32(sub32(add32(10000,\n                                                                 num_threads_76598),\n                                                           1),\n                                                     num_threads_76598)));\n    int32_t carry_in_flat_idx_76661 = sub32(mul32(orig_group_76660,\n                                                  mul32(segscan_group_sizze_73269,\n                                                        squot32(sub32(add32(10000,\n                                                                            num_threads_76598),\n                                                                      1),\n                                                  ",
                   "              num_threads_76598))),\n                                            1);\n    \n    if (slt32(scan_stage3_gtid_76655, 10000)) {\n        if (!(orig_group_76660 == 0 || scan_stage3_gtid_76655 ==\n              sub32(mul32(add32(orig_group_76660, 1),\n                          mul32(segscan_group_sizze_73269,\n                                squot32(sub32(add32(10000, num_threads_76598),\n                                              1), num_threads_76598))), 1))) {\n            int32_t x_76631;\n            int32_t x_76632;\n            int32_t x_76633;\n            int32_t x_76634;\n            \n            x_76631 = ((__global int32_t *) mem_76004)[carry_in_flat_idx_76661];\n            x_76632 = ((__global int32_t *) mem_76007)[carry_in_flat_idx_76661];\n            x_76633 = ((__global int32_t *) mem_76004)[gtid_73273];\n            x_76634 = ((__global int32_t *) mem_76007)[gtid_73273];\n            \n            int32_t res_76635 = add32(x_76631, x_76633);\n            int32_t res_76636 = add32(x_76632, x_76634);\n            \n            x_76631 = res_76635;\n            x_76632 = res_76636;\n            ((__global int32_t *) mem_76004)[gtid_73273] = x_76631;\n            ((__global int32_t *) mem_76007)[gtid_73273] = x_76632;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_73269\n}\n__kernel void scan_stage3_76881(__global int *global_failure, __global\n                                unsigned char *mem_76004, __global\n                                unsigned char *mem_76007,\n                                int32_t num_threads_76824)\n{\n    #define segscan_group_sizze_73915 (render_rgbboxzisegscan_group_sizze_73914)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t scan_stage3_gtid_76881;\n    int32_t scan_stage3_ltid_76882;\n    int32_t scan_stage3_gid_76883;\n    \n    scan_stage3_gtid_76881 = get_global_id(0);\n    scan_stage3_ltid_76882 ",
                   "= get_local_id(0);\n    scan_stage3_gid_76883 = get_group_id(0);\n    \n    int32_t phys_tid_73920 = scan_stage3_gtid_76881;\n    int32_t gtid_73919 = scan_stage3_gtid_76881;\n    int32_t orig_group_76886 = squot32(scan_stage3_gtid_76881,\n                                       mul32(segscan_group_sizze_73915,\n                                             squot32(sub32(add32(400,\n                                                                 num_threads_76824),\n                                                           1),\n                                                     num_threads_76824)));\n    int32_t carry_in_flat_idx_76887 = sub32(mul32(orig_group_76886,\n                                                  mul32(segscan_group_sizze_73915,\n                                                        squot32(sub32(add32(400,\n                                                                            num_threads_76824),\n                                                                      1),\n                                                                num_threads_76824))),\n                                            1);\n    \n    if (slt32(scan_stage3_gtid_76881, 400)) {\n        if (!(orig_group_76886 == 0 || scan_stage3_gtid_76881 ==\n              sub32(mul32(add32(orig_group_76886, 1),\n                          mul32(segscan_group_sizze_73915,\n                                squot32(sub32(add32(400, num_threads_76824), 1),\n                                        num_threads_76824))), 1))) {\n            int32_t x_76857;\n            int32_t x_76858;\n            int32_t x_76859;\n            int32_t x_76860;\n            \n            x_76857 = ((__global int32_t *) mem_76004)[carry_in_flat_idx_76887];\n            x_76858 = ((__global int32_t *) mem_76007)[carry_in_flat_idx_76887];\n            x_76859 = ((__global int32_t *) mem_76004)[gtid_73919];\n            x_76860 = ((__global int32_t *) mem_76007)[gtid_73919];\n            \n            int32_t res_76861 = add32(x_76857,",
                   " x_76859);\n            int32_t res_76862 = add32(x_76858, x_76860);\n            \n            x_76857 = res_76861;\n            x_76858 = res_76862;\n            ((__global int32_t *) mem_76004)[gtid_73919] = x_76857;\n            ((__global int32_t *) mem_76007)[gtid_73919] = x_76858;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_73915\n}\n__kernel void scan_stage3_77132(__global int *global_failure, __global\n                                unsigned char *mem_76004, __global\n                                unsigned char *mem_76007,\n                                int32_t num_threads_77075)\n{\n    #define segscan_group_sizze_74909 (render_irregzisegscan_group_sizze_74908)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t scan_stage3_gtid_77132;\n    int32_t scan_stage3_ltid_77133;\n    int32_t scan_stage3_gid_77134;\n    \n    scan_stage3_gtid_77132 = get_global_id(0);\n    scan_stage3_ltid_77133 = get_local_id(0);\n    scan_stage3_gid_77134 = get_group_id(0);\n    \n    int32_t phys_tid_74914 = scan_stage3_gtid_77132;\n    int32_t gtid_74913 = scan_stage3_gtid_77132;\n    int32_t orig_group_77137 = squot32(scan_stage3_gtid_77132,\n                                       mul32(segscan_group_sizze_74909,\n                                             squot32(sub32(add32(10000,\n                                                                 num_threads_77075),\n                                                           1),\n                                                     num_threads_77075)));\n    int32_t carry_in_flat_idx_77138 = sub32(mul32(orig_group_77137,\n                                                  mul32(segscan_group_sizze_74909,\n                                                        squot32(sub32(add32(10000,\n                                                                            num_threads_77075),\n                             ",
                   "                                         1),\n                                                                num_threads_77075))),\n                                            1);\n    \n    if (slt32(scan_stage3_gtid_77132, 10000)) {\n        if (!(orig_group_77137 == 0 || scan_stage3_gtid_77132 ==\n              sub32(mul32(add32(orig_group_77137, 1),\n                          mul32(segscan_group_sizze_74909,\n                                squot32(sub32(add32(10000, num_threads_77075),\n                                              1), num_threads_77075))), 1))) {\n            int32_t x_77108;\n            int32_t x_77109;\n            int32_t x_77110;\n            int32_t x_77111;\n            \n            x_77108 = ((__global int32_t *) mem_76004)[carry_in_flat_idx_77138];\n            x_77109 = ((__global int32_t *) mem_76007)[carry_in_flat_idx_77138];\n            x_77110 = ((__global int32_t *) mem_76004)[gtid_74913];\n            x_77111 = ((__global int32_t *) mem_76007)[gtid_74913];\n            \n            int32_t res_77112 = add32(x_77108, x_77110);\n            int32_t res_77113 = add32(x_77109, x_77111);\n            \n            x_77108 = res_77112;\n            x_77109 = res_77113;\n            ((__global int32_t *) mem_76004)[gtid_74913] = x_77108;\n            ((__global int32_t *) mem_76007)[gtid_74913] = x_77109;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segscan_group_sizze_74909\n}\n__kernel void segmap_72615(__global int *global_failure, float res_69420,\n                           float res_69421, float res_69422, float y_69457,\n                           float y_69458, float y_69459, __global\n                           unsigned char *mem_75992)\n{\n    #define segmap_group_sizze_72619 (bvh_rgbboxzisegmap_group_sizze_72618)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76304;\n    int32_t local_tid_76305;\n    int32_t group_sizze",
                   "_76308;\n    int32_t wave_sizze_76307;\n    int32_t group_tid_76306;\n    \n    global_tid_76304 = get_global_id(0);\n    local_tid_76305 = get_local_id(0);\n    group_sizze_76308 = get_local_size(0);\n    wave_sizze_76307 = LOCKSTEP_WIDTH;\n    group_tid_76306 = get_group_id(0);\n    \n    int32_t phys_tid_72615 = global_tid_76304;\n    int32_t gtid_72614 = add32(mul32(group_tid_76306, segmap_group_sizze_72619),\n                               local_tid_76305);\n    \n    if (slt32(gtid_72614, 400)) {\n        bool index_concat_cmp_75784 = sle32(300, gtid_72614);\n        float index_concat_branch_75796;\n        \n        if (index_concat_cmp_75784) {\n            int32_t index_concat_i_75785 = sub32(gtid_72614, 300);\n            int32_t new_index_75866 = squot32(index_concat_i_75785, 10);\n            float binop_y_75937 = sitofp_i32_f32(new_index_75866);\n            float binop_y_75938 = 6.0F * binop_y_75937;\n            float index_primexp_75939 = -30.0F + binop_y_75938;\n            \n            index_concat_branch_75796 = index_primexp_75939;\n        } else {\n            bool index_concat_cmp_75787 = sle32(200, gtid_72614);\n            float index_concat_branch_75795;\n            \n            if (index_concat_cmp_75787) {\n                index_concat_branch_75795 = 30.0F;\n            } else {\n                bool index_concat_cmp_75790 = sle32(100, gtid_72614);\n                float index_concat_branch_75794;\n                \n                if (index_concat_cmp_75790) {\n                    int32_t index_concat_i_75791 = sub32(gtid_72614, 100);\n                    int32_t new_index_75870 = squot32(index_concat_i_75791, 10);\n                    float binop_y_75934 = sitofp_i32_f32(new_index_75870);\n                    float binop_y_75935 = 6.0F * binop_y_75934;\n                    float index_primexp_75936 = -30.0F + binop_y_75935;\n                    \n                    index_concat_branch_75794 = index_primexp_75936;\n                } else {\n                    index_concat_bra",
                   "nch_75794 = -30.0F;\n                }\n                index_concat_branch_75795 = index_concat_branch_75794;\n            }\n            index_concat_branch_75796 = index_concat_branch_75795;\n        }\n        \n        float index_concat_branch_75780;\n        \n        if (index_concat_cmp_75784) {\n            index_concat_branch_75780 = -30.0F;\n        } else {\n            bool index_concat_cmp_75771 = sle32(200, gtid_72614);\n            float index_concat_branch_75779;\n            \n            if (index_concat_cmp_75771) {\n                int32_t index_concat_i_75772 = sub32(gtid_72614, 200);\n                int32_t new_index_75874 = squot32(index_concat_i_75772, 10);\n                float binop_y_75943 = sitofp_i32_f32(new_index_75874);\n                float binop_y_75944 = 6.0F * binop_y_75943;\n                float index_primexp_75945 = -30.0F + binop_y_75944;\n                \n                index_concat_branch_75779 = index_primexp_75945;\n            } else {\n                bool index_concat_cmp_75774 = sle32(100, gtid_72614);\n                float index_concat_branch_75778;\n                \n                if (index_concat_cmp_75774) {\n                    int32_t index_concat_i_75775 = sub32(gtid_72614, 100);\n                    int32_t binop_x_75879 = squot32(index_concat_i_75775, 10);\n                    int32_t binop_y_75880 = mul32(10, binop_x_75879);\n                    int32_t new_index_75881 = sub32(index_concat_i_75775,\n                                                    binop_y_75880);\n                    float binop_y_75886 = sitofp_i32_f32(new_index_75881);\n                    float binop_y_75887 = 6.0F * binop_y_75886;\n                    float index_primexp_75888 = -30.0F + binop_y_75887;\n                    \n                    index_concat_branch_75778 = index_primexp_75888;\n                } else {\n                    int32_t new_index_75882 = squot32(gtid_72614, 10);\n                    float binop_y_75940 = sitofp_i32_f32(new_index_75882);\n  ",
                   "                  float binop_y_75941 = 6.0F * binop_y_75940;\n                    float index_primexp_75942 = -30.0F + binop_y_75941;\n                    \n                    index_concat_branch_75778 = index_primexp_75942;\n                }\n                index_concat_branch_75779 = index_concat_branch_75778;\n            }\n            index_concat_branch_75780 = index_concat_branch_75779;\n        }\n        \n        float index_concat_branch_75764;\n        \n        if (index_concat_cmp_75784) {\n            int32_t index_concat_i_75753 = sub32(gtid_72614, 300);\n            int32_t binop_x_75890 = squot32(index_concat_i_75753, 10);\n            int32_t binop_y_75891 = mul32(10, binop_x_75890);\n            int32_t new_index_75892 = sub32(index_concat_i_75753,\n                                            binop_y_75891);\n            float binop_y_75907 = sitofp_i32_f32(new_index_75892);\n            float binop_y_75908 = 6.0F * binop_y_75907;\n            float index_primexp_75909 = -30.0F + binop_y_75908;\n            \n            index_concat_branch_75764 = index_primexp_75909;\n        } else {\n            bool index_concat_cmp_75755 = sle32(200, gtid_72614);\n            float index_concat_branch_75763;\n            \n            if (index_concat_cmp_75755) {\n                int32_t index_concat_i_75756 = sub32(gtid_72614, 200);\n                int32_t binop_x_75894 = squot32(index_concat_i_75756, 10);\n                int32_t binop_y_75895 = mul32(10, binop_x_75894);\n                int32_t new_index_75896 = sub32(index_concat_i_75756,\n                                                binop_y_75895);\n                float binop_y_75904 = sitofp_i32_f32(new_index_75896);\n                float binop_y_75905 = 6.0F * binop_y_75904;\n                float index_primexp_75906 = -30.0F + binop_y_75905;\n                \n                index_concat_branch_75763 = index_primexp_75906;\n            } else {\n                bool index_concat_cmp_75758 = sle32(100, gtid_72614);\n           ",
                   "     float index_concat_branch_75762;\n                \n                if (index_concat_cmp_75758) {\n                    index_concat_branch_75762 = -30.0F;\n                } else {\n                    int32_t binop_x_75898 = squot32(gtid_72614, 10);\n                    int32_t binop_y_75899 = mul32(10, binop_x_75898);\n                    int32_t new_index_75900 = sub32(gtid_72614, binop_y_75899);\n                    float binop_y_75901 = sitofp_i32_f32(new_index_75900);\n                    float binop_y_75902 = 6.0F * binop_y_75901;\n                    float index_primexp_75903 = -30.0F + binop_y_75902;\n                    \n                    index_concat_branch_75762 = index_primexp_75903;\n                }\n                index_concat_branch_75763 = index_concat_branch_75762;\n            }\n            index_concat_branch_75764 = index_concat_branch_75763;\n        }\n        \n        float res_72630 = index_concat_branch_75796 - 3.0F;\n        float res_72631 = index_concat_branch_75780 - 3.0F;\n        float res_72632 = index_concat_branch_75764 - 3.0F;\n        float res_72633 = 3.0F + index_concat_branch_75796;\n        float res_72634 = 3.0F + index_concat_branch_75780;\n        float res_72635 = 3.0F + index_concat_branch_75764;\n        float y_72636 = res_72633 - res_72630;\n        float res_72637 = res_72630 + y_72636;\n        float y_72638 = res_72634 - res_72631;\n        float res_72639 = res_72631 + y_72638;\n        float y_72640 = res_72635 - res_72632;\n        float res_72641 = res_72632 + y_72640;\n        float x_72642 = res_72637 - res_69420;\n        float res_72643 = x_72642 / y_69457;\n        float x_72644 = res_72639 - res_69421;\n        float res_72645 = x_72644 / y_69458;\n        float x_72646 = res_72641 - res_69422;\n        float res_72647 = x_72646 / y_69459;\n        float max_arg_72648 = 1024.0F * res_72643;\n        float res_72649 = fmax32(0.0F, max_arg_72648);\n        float res_72650 = fmin32(1023.0F, res_72649);\n        float max_arg_72651 = 1",
                   "024.0F * res_72645;\n        float res_72652 = fmax32(0.0F, max_arg_72651);\n        float res_72653 = fmin32(1023.0F, res_72652);\n        float max_arg_72654 = 1024.0F * res_72647;\n        float res_72655 = fmax32(0.0F, max_arg_72654);\n        float res_72656 = fmin32(1023.0F, res_72655);\n        int32_t unsign_arg_72657 = fptoui_f32_i32(res_72650);\n        int32_t x_72658 = mul32(65537, unsign_arg_72657);\n        int32_t v_72659 = -16776961 & x_72658;\n        int32_t x_72660 = mul32(257, v_72659);\n        int32_t v_72661 = 251719695 & x_72660;\n        int32_t x_72662 = mul32(17, v_72661);\n        int32_t v_72663 = -1022611261 & x_72662;\n        int32_t x_72664 = mul32(5, v_72663);\n        int32_t v_72665 = 1227133513 & x_72664;\n        int32_t unsign_arg_72666 = fptoui_f32_i32(res_72653);\n        int32_t x_72667 = mul32(65537, unsign_arg_72666);\n        int32_t v_72668 = -16776961 & x_72667;\n        int32_t x_72669 = mul32(257, v_72668);\n        int32_t v_72670 = 251719695 & x_72669;\n        int32_t x_72671 = mul32(17, v_72670);\n        int32_t v_72672 = -1022611261 & x_72671;\n        int32_t x_72673 = mul32(5, v_72672);\n        int32_t v_72674 = 1227133513 & x_72673;\n        int32_t unsign_arg_72675 = fptoui_f32_i32(res_72656);\n        int32_t x_72676 = mul32(65537, unsign_arg_72675);\n        int32_t v_72677 = -16776961 & x_72676;\n        int32_t x_72678 = mul32(257, v_72677);\n        int32_t v_72679 = 251719695 & x_72678;\n        int32_t x_72680 = mul32(17, v_72679);\n        int32_t v_72681 = -1022611261 & x_72680;\n        int32_t x_72682 = mul32(5, v_72681);\n        int32_t v_72683 = 1227133513 & x_72682;\n        int32_t x_72684 = mul32(4, v_72665);\n        int32_t y_72685 = mul32(2, v_72674);\n        int32_t x_72686 = add32(x_72684, y_72685);\n        int32_t res_72687 = add32(v_72683, x_72686);\n        \n        ((__global int32_t *) mem_75992)[gtid_72614] = res_72687;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_72619\n}\n__kernel void segmap_72",
                   "689(__global int *global_failure, int32_t i_69528,\n                           __global unsigned char *xs_mem_75996, __global\n                           unsigned char *mem_76000)\n{\n    #define segmap_group_sizze_72693 (bvh_rgbboxzisegmap_group_sizze_72692)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76320;\n    int32_t local_tid_76321;\n    int32_t group_sizze_76324;\n    int32_t wave_sizze_76323;\n    int32_t group_tid_76322;\n    \n    global_tid_76320 = get_global_id(0);\n    local_tid_76321 = get_local_id(0);\n    group_sizze_76324 = get_local_size(0);\n    wave_sizze_76323 = LOCKSTEP_WIDTH;\n    group_tid_76322 = get_group_id(0);\n    \n    int32_t phys_tid_72689 = global_tid_76320;\n    int32_t gtid_72688 = add32(mul32(group_tid_76322, segmap_group_sizze_72693),\n                               local_tid_76321);\n    \n    if (slt32(gtid_72688, 400)) {\n        int32_t x_72700 = ((__global int32_t *) xs_mem_75996)[gtid_72688];\n        int32_t unsign_arg_72701 = ashr32(x_72700, i_69528);\n        int32_t unsign_arg_72702 = 1 & unsign_arg_72701;\n        \n        ((__global int32_t *) mem_76000)[gtid_72688] = unsign_arg_72702;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_72693\n}\n__kernel void segmap_72726(__global int *global_failure, int32_t res_69560,\n                           __global unsigned char *xs_mem_75996, __global\n                           unsigned char *xs_mem_75997, __global\n                           unsigned char *mem_76000, __global\n                           unsigned char *mem_76004, __global\n                           unsigned char *mem_76007, __global\n                           unsigned char *mem_76010, __global\n                           unsigned char *mem_76019, __global\n                           unsigned char *mem_76024)\n{\n    #define segmap_group_sizze_72730 (bvh_rgbboxzisegmap_group_sizze_72729)\n    \n    const",
                   " int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76415;\n    int32_t local_tid_76416;\n    int32_t group_sizze_76419;\n    int32_t wave_sizze_76418;\n    int32_t group_tid_76417;\n    \n    global_tid_76415 = get_global_id(0);\n    local_tid_76416 = get_local_id(0);\n    group_sizze_76419 = get_local_size(0);\n    wave_sizze_76418 = LOCKSTEP_WIDTH;\n    group_tid_76417 = get_group_id(0);\n    \n    int32_t phys_tid_72726 = global_tid_76415;\n    int32_t write_i_72725 = add32(mul32(group_tid_76417,\n                                        segmap_group_sizze_72730),\n                                  local_tid_76416);\n    \n    if (slt32(write_i_72725, 400)) {\n        int32_t x_69574 = ((__global int32_t *) mem_76010)[write_i_72725];\n        int32_t x_69575 = ((__global int32_t *) mem_76004)[write_i_72725];\n        int32_t x_69576 = ((__global int32_t *) mem_76007)[write_i_72725];\n        int32_t x_69577 = ((__global int32_t *) mem_76000)[write_i_72725];\n        int32_t write_value_69578 = ((__global\n                                      int32_t *) xs_mem_75996)[write_i_72725];\n        int32_t write_value_69579 = ((__global\n                                      int32_t *) xs_mem_75997)[write_i_72725];\n        int32_t res_69580 = mul32(x_69574, x_69575);\n        int32_t res_69581 = add32(res_69560, x_69576);\n        int32_t res_69582 = mul32(x_69577, res_69581);\n        int32_t res_69583 = add32(res_69580, res_69582);\n        int32_t res_69584 = sub32(res_69583, 1);\n        \n        if (sle32(0, res_69584) && slt32(res_69584, 400)) {\n            ((__global int32_t *) mem_76024)[res_69584] = write_value_69578;\n        }\n        if (sle32(0, res_69584) && slt32(res_69584, 400)) {\n            ((__global int32_t *) mem_76019)[res_69584] = write_value_69579;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_72730\n}\n__kernel void segmap_72738(__global int *g",
                   "lobal_failure, float res_69420,\n                           float res_69421, float res_69422, float y_69457,\n                           float y_69458, float y_69459, __global\n                           unsigned char *res_mem_76034, __global\n                           unsigned char *mem_76040, __global\n                           unsigned char *mem_76043, __global\n                           unsigned char *mem_76046, __global\n                           unsigned char *mem_76049, __global\n                           unsigned char *mem_76052, __global\n                           unsigned char *mem_76055, __global\n                           unsigned char *mem_76058)\n{\n    #define segmap_group_sizze_72742 (bvh_rgbboxzisegmap_group_sizze_72741)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76429;\n    int32_t local_tid_76430;\n    int32_t group_sizze_76433;\n    int32_t wave_sizze_76432;\n    int32_t group_tid_76431;\n    \n    global_tid_76429 = get_global_id(0);\n    local_tid_76430 = get_local_id(0);\n    group_sizze_76433 = get_local_size(0);\n    wave_sizze_76432 = LOCKSTEP_WIDTH;\n    group_tid_76431 = get_group_id(0);\n    \n    int32_t phys_tid_72738 = global_tid_76429;\n    int32_t gtid_72737 = add32(mul32(group_tid_76431, segmap_group_sizze_72742),\n                               local_tid_76430);\n    \n    if (slt32(gtid_72737, 400)) {\n        int32_t x_72749 = ((__global int32_t *) res_mem_76034)[gtid_72737];\n        bool index_concat_cmp_72750 = sle32(300, x_72749);\n        float index_concat_branch_72751;\n        \n        if (index_concat_cmp_72750) {\n            index_concat_branch_72751 = 1.0F;\n        } else {\n            bool index_concat_cmp_72752 = sle32(200, x_72749);\n            float index_concat_branch_72753;\n            \n            if (index_concat_cmp_72752) {\n                index_concat_branch_72753 = 0.0F;\n            } else {\n          ",
                   "      index_concat_branch_72753 = 1.0F;\n            }\n            index_concat_branch_72751 = index_concat_branch_72753;\n        }\n        \n        float index_concat_branch_72754;\n        \n        if (index_concat_cmp_72750) {\n            index_concat_branch_72754 = 1.0F;\n        } else {\n            bool index_concat_cmp_72755 = sle32(200, x_72749);\n            float index_concat_branch_72756;\n            \n            if (index_concat_cmp_72755) {\n                index_concat_branch_72756 = 0.0F;\n            } else {\n                bool index_concat_cmp_72757 = sle32(100, x_72749);\n                float index_concat_branch_72758;\n                \n                if (index_concat_cmp_72757) {\n                    index_concat_branch_72758 = 1.0F;\n                } else {\n                    index_concat_branch_72758 = 0.0F;\n                }\n                index_concat_branch_72756 = index_concat_branch_72758;\n            }\n            index_concat_branch_72754 = index_concat_branch_72756;\n        }\n        \n        float index_concat_branch_72759;\n        \n        if (index_concat_cmp_72750) {\n            index_concat_branch_72759 = 1.0F;\n        } else {\n            bool index_concat_cmp_72760 = sle32(200, x_72749);\n            float index_concat_branch_72761;\n            \n            if (index_concat_cmp_72760) {\n                index_concat_branch_72761 = 1.0F;\n            } else {\n                index_concat_branch_72761 = 0.0F;\n            }\n            index_concat_branch_72759 = index_concat_branch_72761;\n        }\n        \n        float index_concat_branch_72762;\n        \n        if (index_concat_cmp_72750) {\n            int32_t index_concat_i_72763 = sub32(x_72749, 300);\n            int32_t new_index_72764 = squot32(index_concat_i_72763, 10);\n            float binop_y_75913 = sitofp_i32_f32(new_index_72764);\n            float binop_y_75914 = 6.0F * binop_y_75913;\n            float index_primexp_75915 = -30.0F + binop_y_75914;\n            \n            in",
                   "dex_concat_branch_72762 = index_primexp_75915;\n        } else {\n            bool index_concat_cmp_72768 = sle32(200, x_72749);\n            float index_concat_branch_72769;\n            \n            if (index_concat_cmp_72768) {\n                index_concat_branch_72769 = 30.0F;\n            } else {\n                bool index_concat_cmp_72770 = sle32(100, x_72749);\n                float index_concat_branch_72771;\n                \n                if (index_concat_cmp_72770) {\n                    int32_t index_concat_i_72772 = sub32(x_72749, 100);\n                    int32_t new_index_72773 = squot32(index_concat_i_72772, 10);\n                    float binop_y_75910 = sitofp_i32_f32(new_index_72773);\n                    float binop_y_75911 = 6.0F * binop_y_75910;\n                    float index_primexp_75912 = -30.0F + binop_y_75911;\n                    \n                    index_concat_branch_72771 = index_primexp_75912;\n                } else {\n                    index_concat_branch_72771 = -30.0F;\n                }\n                index_concat_branch_72769 = index_concat_branch_72771;\n            }\n            index_concat_branch_72762 = index_concat_branch_72769;\n        }\n        \n        float index_concat_branch_72777;\n        \n        if (index_concat_cmp_72750) {\n            index_concat_branch_72777 = -30.0F;\n        } else {\n            bool index_concat_cmp_72778 = sle32(200, x_72749);\n            float index_concat_branch_72779;\n            \n            if (index_concat_cmp_72778) {\n                int32_t index_concat_i_72780 = sub32(x_72749, 200);\n                int32_t new_index_72781 = squot32(index_concat_i_72780, 10);\n                float binop_y_75919 = sitofp_i32_f32(new_index_72781);\n                float binop_y_75920 = 6.0F * binop_y_75919;\n                float index_primexp_75921 = -30.0F + binop_y_75920;\n                \n                index_concat_branch_72779 = index_primexp_75921;\n            } else {\n                bool index_concat_c",
                   "mp_72785 = sle32(100, x_72749);\n                float index_concat_branch_72786;\n                \n                if (index_concat_cmp_72785) {\n                    int32_t index_concat_i_72787 = sub32(x_72749, 100);\n                    int32_t binop_x_72788 = squot32(index_concat_i_72787, 10);\n                    int32_t binop_y_72789 = mul32(10, binop_x_72788);\n                    int32_t new_index_72790 = sub32(index_concat_i_72787,\n                                                    binop_y_72789);\n                    float binop_y_72791 = sitofp_i32_f32(new_index_72790);\n                    float binop_y_72792 = 6.0F * binop_y_72791;\n                    float index_primexp_72793 = -30.0F + binop_y_72792;\n                    \n                    index_concat_branch_72786 = index_primexp_72793;\n                } else {\n                    int32_t new_index_72794 = squot32(x_72749, 10);\n                    float binop_y_75916 = sitofp_i32_f32(new_index_72794);\n                    float binop_y_75917 = 6.0F * binop_y_75916;\n                    float index_primexp_75918 = -30.0F + binop_y_75917;\n                    \n                    index_concat_branch_72786 = index_primexp_75918;\n                }\n                index_concat_branch_72779 = index_concat_branch_72786;\n            }\n            index_concat_branch_72777 = index_concat_branch_72779;\n        }\n        \n        float index_concat_branch_72798;\n        \n        if (index_concat_cmp_72750) {\n            int32_t index_concat_i_72799 = sub32(x_72749, 300);\n            int32_t binop_x_72800 = squot32(index_concat_i_72799, 10);\n            int32_t binop_y_72801 = mul32(10, binop_x_72800);\n            int32_t new_index_72802 = sub32(index_concat_i_72799,\n                                            binop_y_72801);\n            float binop_y_72803 = sitofp_i32_f32(new_index_72802);\n            float binop_y_72804 = 6.0F * binop_y_72803;\n            float index_primexp_72805 = -30.0F + binop_y_72804;\n           ",
                   " \n            index_concat_branch_72798 = index_primexp_72805;\n        } else {\n            bool index_concat_cmp_72806 = sle32(200, x_72749);\n            float index_concat_branch_72807;\n            \n            if (index_concat_cmp_72806) {\n                int32_t index_concat_i_72808 = sub32(x_72749, 200);\n                int32_t binop_x_72809 = squot32(index_concat_i_72808, 10);\n                int32_t binop_y_72810 = mul32(10, binop_x_72809);\n                int32_t new_index_72811 = sub32(index_concat_i_72808,\n                                                binop_y_72810);\n                float binop_y_72812 = sitofp_i32_f32(new_index_72811);\n                float binop_y_72813 = 6.0F * binop_y_72812;\n                float index_primexp_72814 = -30.0F + binop_y_72813;\n                \n                index_concat_branch_72807 = index_primexp_72814;\n            } else {\n                bool index_concat_cmp_72815 = sle32(100, x_72749);\n                float index_concat_branch_72816;\n                \n                if (index_concat_cmp_72815) {\n                    index_concat_branch_72816 = -30.0F;\n                } else {\n                    int32_t binop_x_72817 = squot32(x_72749, 10);\n                    int32_t binop_y_72818 = mul32(10, binop_x_72817);\n                    int32_t new_index_72819 = sub32(x_72749, binop_y_72818);\n                    float binop_y_72820 = sitofp_i32_f32(new_index_72819);\n                    float binop_y_72821 = 6.0F * binop_y_72820;\n                    float index_primexp_72822 = -30.0F + binop_y_72821;\n                    \n                    index_concat_branch_72816 = index_primexp_72822;\n                }\n                index_concat_branch_72807 = index_concat_branch_72816;\n            }\n            index_concat_branch_72798 = index_concat_branch_72807;\n        }\n        \n        float res_72823 = index_concat_branch_72762 - 3.0F;\n        float res_72824 = index_concat_branch_72777 - 3.0F;\n        float res_72825 = ind",
                   "ex_concat_branch_72798 - 3.0F;\n        float res_72826 = 3.0F + index_concat_branch_72762;\n        float res_72827 = 3.0F + index_concat_branch_72777;\n        float res_72828 = 3.0F + index_concat_branch_72798;\n        float y_72829 = res_72826 - res_72823;\n        float res_72830 = res_72823 + y_72829;\n        float y_72831 = res_72827 - res_72824;\n        float res_72832 = res_72824 + y_72831;\n        float y_72833 = res_72828 - res_72825;\n        float res_72834 = res_72825 + y_72833;\n        float x_72835 = res_72830 - res_69420;\n        float res_72836 = x_72835 / y_69457;\n        float x_72837 = res_72832 - res_69421;\n        float res_72838 = x_72837 / y_69458;\n        float x_72839 = res_72834 - res_69422;\n        float res_72840 = x_72839 / y_69459;\n        float max_arg_72841 = 1024.0F * res_72836;\n        float res_72842 = fmax32(0.0F, max_arg_72841);\n        float res_72843 = fmin32(1023.0F, res_72842);\n        float max_arg_72844 = 1024.0F * res_72838;\n        float res_72845 = fmax32(0.0F, max_arg_72844);\n        float res_72846 = fmin32(1023.0F, res_72845);\n        float max_arg_72847 = 1024.0F * res_72840;\n        float res_72848 = fmax32(0.0F, max_arg_72847);\n        float res_72849 = fmin32(1023.0F, res_72848);\n        int32_t unsign_arg_72850 = fptoui_f32_i32(res_72843);\n        int32_t x_72851 = mul32(65537, unsign_arg_72850);\n        int32_t v_72852 = -16776961 & x_72851;\n        int32_t x_72853 = mul32(257, v_72852);\n        int32_t v_72854 = 251719695 & x_72853;\n        int32_t x_72855 = mul32(17, v_72854);\n        int32_t v_72856 = -1022611261 & x_72855;\n        int32_t x_72857 = mul32(5, v_72856);\n        int32_t v_72858 = 1227133513 & x_72857;\n        int32_t unsign_arg_72859 = fptoui_f32_i32(res_72846);\n        int32_t x_72860 = mul32(65537, unsign_arg_72859);\n        int32_t v_72861 = -16776961 & x_72860;\n        int32_t x_72862 = mul32(257, v_72861);\n        int32_t v_72863 = 251719695 & x_72862;\n        int32_t x_72864 = mul32(17, v_728",
                   "63);\n        int32_t v_72865 = -1022611261 & x_72864;\n        int32_t x_72866 = mul32(5, v_72865);\n        int32_t v_72867 = 1227133513 & x_72866;\n        int32_t unsign_arg_72868 = fptoui_f32_i32(res_72849);\n        int32_t x_72869 = mul32(65537, unsign_arg_72868);\n        int32_t v_72870 = -16776961 & x_72869;\n        int32_t x_72871 = mul32(257, v_72870);\n        int32_t v_72872 = 251719695 & x_72871;\n        int32_t x_72873 = mul32(17, v_72872);\n        int32_t v_72874 = -1022611261 & x_72873;\n        int32_t x_72875 = mul32(5, v_72874);\n        int32_t v_72876 = 1227133513 & x_72875;\n        int32_t x_72877 = mul32(4, v_72858);\n        int32_t y_72878 = mul32(2, v_72867);\n        int32_t x_72879 = add32(x_72877, y_72878);\n        int32_t res_72880 = add32(v_72876, x_72879);\n        \n        ((__global int32_t *) mem_76040)[gtid_72737] = res_72880;\n        ((__global float *) mem_76043)[gtid_72737] = index_concat_branch_72751;\n        ((__global float *) mem_76046)[gtid_72737] = index_concat_branch_72754;\n        ((__global float *) mem_76049)[gtid_72737] = index_concat_branch_72759;\n        ((__global float *) mem_76052)[gtid_72737] = index_concat_branch_72762;\n        ((__global float *) mem_76055)[gtid_72737] = index_concat_branch_72777;\n        ((__global float *) mem_76058)[gtid_72737] = index_concat_branch_72798;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_72742\n}\n__kernel void segmap_72882(__global int *global_failure,\n                           int failure_is_an_option, __global\n                           int *global_failure_args, __global\n                           unsigned char *mem_76040, __global\n                           unsigned char *mem_76060, __global\n                           unsigned char *mem_76063, __global\n                           unsigned char *mem_76065, __global\n                           unsigned char *mem_76068, __global\n                           unsigned char *mem_76071, __global\n                           uns",
                   "igned char *mem_76074)\n{\n    #define segmap_group_sizze_72886 (bvh_rgbboxzisegmap_group_sizze_72885)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76434;\n    int32_t local_tid_76435;\n    int32_t group_sizze_76438;\n    int32_t wave_sizze_76437;\n    int32_t group_tid_76436;\n    \n    global_tid_76434 = get_global_id(0);\n    local_tid_76435 = get_local_id(0);\n    group_sizze_76438 = get_local_size(0);\n    wave_sizze_76437 = LOCKSTEP_WIDTH;\n    group_tid_76436 = get_group_id(0);\n    \n    int32_t phys_tid_72882 = global_tid_76434;\n    int32_t gtid_72881 = add32(mul32(group_tid_76436, segmap_group_sizze_72886),\n                               local_tid_76435);\n    \n    if (slt32(gtid_72881, 399)) {\n        int32_t res_elem_72894 = ((__global int32_t *) mem_76040)[gtid_72881];\n        int32_t lifted_0_delta_arg_72895 = add32(1, gtid_72881);\n        int32_t Lj_72896 = ((__global\n                             int32_t *) mem_76040)[lifted_0_delta_arg_72895];\n        bool cond_72897 = res_elem_72894 == Lj_72896;\n        int32_t res_72898;\n        \n        if (cond_72897) {\n            int32_t clzz_arg_72899 = gtid_72881 ^ lifted_0_delta_arg_72895;\n            int32_t res_72900;\n            \n            res_72900 = futrts_clzz32(clzz_arg_72899);\n            \n            int32_t res_72901 = add32(32, res_72900);\n            \n            res_72898 = res_72901;\n        } else {\n            int32_t clzz_arg_72902 = res_elem_72894 ^ Lj_72896;\n            int32_t res_72903;\n            \n            res_72903 = futrts_clzz32(clzz_arg_72902);\n            res_72898 = res_72903;\n        }\n        \n        int32_t lifted_0_delta_arg_72904 = sub32(gtid_72881, 1);\n        bool cond_72905 = sle32(0, lifted_0_delta_arg_72904);\n        int32_t res_72906;\n        \n        if (cond_72905) {\n            int32_t Lj_72907 = ((__global\n                                 int32_t ",
                   "*) mem_76040)[lifted_0_delta_arg_72904];\n            bool cond_72908 = res_elem_72894 == Lj_72907;\n            int32_t res_72909;\n            \n            if (cond_72908) {\n                int32_t clzz_arg_72910 = gtid_72881 ^ lifted_0_delta_arg_72904;\n                int32_t res_72911;\n                \n                res_72911 = futrts_clzz32(clzz_arg_72910);\n                \n                int32_t res_72912 = add32(32, res_72911);\n                \n                res_72909 = res_72912;\n            } else {\n                int32_t clzz_arg_72913 = res_elem_72894 ^ Lj_72907;\n                int32_t res_72914;\n                \n                res_72914 = futrts_clzz32(clzz_arg_72913);\n                res_72909 = res_72914;\n            }\n            res_72906 = res_72909;\n        } else {\n            res_72906 = -1;\n        }\n        \n        int32_t sgn_arg_72915 = sub32(res_72898, res_72906);\n        int32_t res_72916 = (sgn_arg_72915 > 0) - (sgn_arg_72915 < 0);\n        int32_t lifted_0_delta_arg_72917 = sub32(gtid_72881, res_72916);\n        bool cond_72918 = sle32(0, lifted_0_delta_arg_72917);\n        bool res_72919 = slt32(lifted_0_delta_arg_72917, 400);\n        bool x_72920 = cond_72918 && res_72919;\n        int32_t res_72921;\n        \n        if (x_72920) {\n            int32_t Lj_72922 = ((__global\n                                 int32_t *) mem_76040)[lifted_0_delta_arg_72917];\n            bool cond_72923 = res_elem_72894 == Lj_72922;\n            int32_t res_72924;\n            \n            if (cond_72923) {\n                int32_t clzz_arg_72925 = gtid_72881 ^ lifted_0_delta_arg_72917;\n                int32_t res_72926;\n                \n                res_72926 = futrts_clzz32(clzz_arg_72925);\n                \n                int32_t res_72927 = add32(32, res_72926);\n                \n                res_72924 = res_72927;\n            } else {\n                int32_t clzz_arg_72928 = res_elem_72894 ^ Lj_72922;\n                int32_t res_72929;\n              ",
                   "  \n                res_72929 = futrts_clzz32(clzz_arg_72928);\n                res_72924 = res_72929;\n            }\n            res_72921 = res_72924;\n        } else {\n            res_72921 = -1;\n        }\n        \n        int32_t y_72930 = mul32(2, res_72916);\n        int32_t lifted_0_delta_arg_72931 = add32(gtid_72881, y_72930);\n        bool cond_72932 = sle32(0, lifted_0_delta_arg_72931);\n        bool res_72933 = slt32(lifted_0_delta_arg_72931, 400);\n        bool x_72934 = cond_72932 && res_72933;\n        int32_t res_72935;\n        \n        if (x_72934) {\n            int32_t Lj_72936 = ((__global\n                                 int32_t *) mem_76040)[lifted_0_delta_arg_72931];\n            bool cond_72937 = res_elem_72894 == Lj_72936;\n            int32_t res_72938;\n            \n            if (cond_72937) {\n                int32_t clzz_arg_72939 = gtid_72881 ^ lifted_0_delta_arg_72931;\n                int32_t res_72940;\n                \n                res_72940 = futrts_clzz32(clzz_arg_72939);\n                \n                int32_t res_72941 = add32(32, res_72940);\n                \n                res_72938 = res_72941;\n            } else {\n                int32_t clzz_arg_72942 = res_elem_72894 ^ Lj_72936;\n                int32_t res_72943;\n                \n                res_72943 = futrts_clzz32(clzz_arg_72942);\n                res_72938 = res_72943;\n            }\n            res_72935 = res_72938;\n        } else {\n            res_72935 = -1;\n        }\n        \n        bool loop_cond_72944 = slt32(res_72921, res_72935);\n        bool l_max_72945;\n        int32_t l_max_72946;\n        bool loop_while_72947;\n        int32_t l_max_72948;\n        \n        loop_while_72947 = loop_cond_72944;\n        l_max_72948 = 2;\n        while (loop_while_72947) {\n            int32_t loopres_72949 = mul32(2, l_max_72948);\n            int32_t y_72950 = mul32(res_72916, loopres_72949);\n            int32_t lifted_0_delta_arg_72951 = add32(gtid_72881, y_72950);\n            bool cond",
                   "_72952 = sle32(0, lifted_0_delta_arg_72951);\n            bool res_72953 = slt32(lifted_0_delta_arg_72951, 400);\n            bool x_72954 = cond_72952 && res_72953;\n            int32_t res_72955;\n            \n            if (x_72954) {\n                int32_t Lj_72956 = ((__global\n                                     int32_t *) mem_76040)[lifted_0_delta_arg_72951];\n                bool cond_72957 = res_elem_72894 == Lj_72956;\n                int32_t res_72958;\n                \n                if (cond_72957) {\n                    int32_t clzz_arg_72959 = gtid_72881 ^\n                            lifted_0_delta_arg_72951;\n                    int32_t res_72960;\n                    \n                    res_72960 = futrts_clzz32(clzz_arg_72959);\n                    \n                    int32_t res_72961 = add32(32, res_72960);\n                    \n                    res_72958 = res_72961;\n                } else {\n                    int32_t clzz_arg_72962 = res_elem_72894 ^ Lj_72956;\n                    int32_t res_72963;\n                    \n                    res_72963 = futrts_clzz32(clzz_arg_72962);\n                    res_72958 = res_72963;\n                }\n                res_72955 = res_72958;\n            } else {\n                res_72955 = -1;\n            }\n            \n            bool loop_cond_72964 = slt32(res_72921, res_72955);\n            bool loop_while_tmp_76439 = loop_cond_72964;\n            int32_t l_max_tmp_76440;\n            \n            l_max_tmp_76440 = loopres_72949;\n            loop_while_72947 = loop_while_tmp_76439;\n            l_max_72948 = l_max_tmp_76440;\n        }\n        l_max_72945 = loop_while_72947;\n        l_max_72946 = l_max_72948;\n        \n        int32_t loop_init_72965 = sdiv32(l_max_72946, 2);\n        bool loop_cond_72966 = slt32(0, loop_init_72965);\n        bool l_72967;\n        int32_t l_72968;\n        int32_t l_72969;\n        bool loop_while_72970;\n        int32_t l_72971;\n        int32_t t_72972;\n        \n        loop_while_",
                   "72970 = loop_cond_72966;\n        l_72971 = 0;\n        t_72972 = loop_init_72965;\n        while (loop_while_72970) {\n            int32_t x_72973 = add32(l_72971, t_72972);\n            int32_t y_72974 = mul32(res_72916, x_72973);\n            int32_t lifted_0_delta_arg_72975 = add32(gtid_72881, y_72974);\n            bool cond_72976 = sle32(0, lifted_0_delta_arg_72975);\n            bool res_72977 = slt32(lifted_0_delta_arg_72975, 400);\n            bool x_72978 = cond_72976 && res_72977;\n            int32_t res_72979;\n            \n            if (x_72978) {\n                int32_t Lj_72980 = ((__global\n                                     int32_t *) mem_76040)[lifted_0_delta_arg_72975];\n                bool cond_72981 = res_elem_72894 == Lj_72980;\n                int32_t res_72982;\n                \n                if (cond_72981) {\n                    int32_t clzz_arg_72983 = gtid_72881 ^\n                            lifted_0_delta_arg_72975;\n                    int32_t res_72984;\n                    \n                    res_72984 = futrts_clzz32(clzz_arg_72983);\n                    \n                    int32_t res_72985 = add32(32, res_72984);\n                    \n                    res_72982 = res_72985;\n                } else {\n                    int32_t clzz_arg_72986 = res_elem_72894 ^ Lj_72980;\n                    int32_t res_72987;\n                    \n                    res_72987 = futrts_clzz32(clzz_arg_72986);\n                    res_72982 = res_72987;\n                }\n                res_72979 = res_72982;\n            } else {\n                res_72979 = -1;\n            }\n            \n            bool cond_72988 = slt32(res_72921, res_72979);\n            int32_t loopres_72989;\n            \n            if (cond_72988) {\n                loopres_72989 = x_72973;\n            } else {\n                loopres_72989 = l_72971;\n            }\n            \n            int32_t loopres_72990;\n            \n            if (cond_72988) {\n                int32_t res_72991 ",
                   "= sdiv32(t_72972, 2);\n                \n                loopres_72990 = res_72991;\n            } else {\n                int32_t res_72992 = sdiv32(t_72972, 2);\n                \n                loopres_72990 = res_72992;\n            }\n            \n            bool loop_cond_72993 = slt32(0, loopres_72990);\n            bool loop_while_tmp_76441 = loop_cond_72993;\n            int32_t l_tmp_76442 = loopres_72989;\n            int32_t t_tmp_76443;\n            \n            t_tmp_76443 = loopres_72990;\n            loop_while_72970 = loop_while_tmp_76441;\n            l_72971 = l_tmp_76442;\n            t_72972 = t_tmp_76443;\n        }\n        l_72967 = loop_while_72970;\n        l_72968 = l_72971;\n        l_72969 = t_72972;\n        \n        int32_t y_72994 = mul32(res_72916, l_72968);\n        int32_t j_72995 = add32(gtid_72881, y_72994);\n        bool cond_72996 = sle32(0, j_72995);\n        bool res_72997 = slt32(j_72995, 400);\n        bool x_72998 = cond_72996 && res_72997;\n        int32_t res_72999;\n        \n        if (x_72998) {\n            int32_t Lj_73000 = ((__global int32_t *) mem_76040)[j_72995];\n            bool cond_73001 = res_elem_72894 == Lj_73000;\n            int32_t res_73002;\n            \n            if (cond_73001) {\n                int32_t clzz_arg_73003 = gtid_72881 ^ j_72995;\n                int32_t res_73004;\n                \n                res_73004 = futrts_clzz32(clzz_arg_73003);\n                \n                int32_t res_73005 = add32(32, res_73004);\n                \n                res_73002 = res_73005;\n            } else {\n                int32_t clzz_arg_73006 = res_elem_72894 ^ Lj_73000;\n                int32_t res_73007;\n                \n                res_73007 = futrts_clzz32(clzz_arg_73006);\n                res_73002 = res_73007;\n            }\n            res_72999 = res_73002;\n        } else {\n            res_72999 = -1;\n        }\n        \n        bool loop_cond_73008 = sle32(1, l_72968);\n        bool s_73009;\n        int32_t s_73010;\n    ",
                   "    int32_t s_73011;\n        bool loop_while_73012;\n        int32_t s_73013;\n        int32_t q_73014;\n        \n        loop_while_73012 = loop_cond_73008;\n        s_73013 = 0;\n        q_73014 = 1;\n        while (loop_while_73012) {\n            int32_t div_rounding_up_arg_73015 = mul32(2, q_73014);\n            int32_t x_73016 = add32(l_72968, div_rounding_up_arg_73015);\n            int32_t x_73017 = sub32(x_73016, 1);\n            bool zzero_73018 = div_rounding_up_arg_73015 == 0;\n            bool nonzzero_73019 = !zzero_73018;\n            bool nonzzero_cert_73020;\n            \n            if (!nonzzero_73019) {\n                if (atomic_cmpxchg(global_failure, -1, 3) == -1) {\n                    ;\n                }\n                return;\n            }\n            \n            int32_t res_73021 = sdiv32(x_73017, div_rounding_up_arg_73015);\n            int32_t x_73022 = add32(s_73013, res_73021);\n            int32_t y_73023 = mul32(res_72916, x_73022);\n            int32_t lifted_0_delta_arg_73024 = add32(gtid_72881, y_73023);\n            bool cond_73025 = sle32(0, lifted_0_delta_arg_73024);\n            bool res_73026 = slt32(lifted_0_delta_arg_73024, 400);\n            bool x_73027 = cond_73025 && res_73026;\n            int32_t res_73028;\n            \n            if (x_73027) {\n                int32_t Lj_73029 = ((__global\n                                     int32_t *) mem_76040)[lifted_0_delta_arg_73024];\n                bool cond_73030 = res_elem_72894 == Lj_73029;\n                int32_t res_73031;\n                \n                if (cond_73030) {\n                    int32_t clzz_arg_73032 = gtid_72881 ^\n                            lifted_0_delta_arg_73024;\n                    int32_t res_73033;\n                    \n                    res_73033 = futrts_clzz32(clzz_arg_73032);\n                    \n                    int32_t res_73034 = add32(32, res_73033);\n                    \n                    res_73031 = res_73034;\n                } else {\n                ",
                   "    int32_t clzz_arg_73035 = res_elem_72894 ^ Lj_73029;\n                    int32_t res_73036;\n                    \n                    res_73036 = futrts_clzz32(clzz_arg_73035);\n                    res_73031 = res_73036;\n                }\n                res_73028 = res_73031;\n            } else {\n                res_73028 = -1;\n            }\n            \n            bool cond_73037 = slt32(res_72999, res_73028);\n            int32_t loopres_73038;\n            \n            if (cond_73037) {\n                loopres_73038 = x_73022;\n            } else {\n                loopres_73038 = s_73013;\n            }\n            \n            bool loop_cond_73039 = sle32(div_rounding_up_arg_73015, l_72968);\n            bool loop_while_tmp_76444 = loop_cond_73039;\n            int32_t s_tmp_76445 = loopres_73038;\n            int32_t q_tmp_76446;\n            \n            q_tmp_76446 = div_rounding_up_arg_73015;\n            loop_while_73012 = loop_while_tmp_76444;\n            s_73013 = s_tmp_76445;\n            q_73014 = q_tmp_76446;\n        }\n        s_73009 = loop_while_73012;\n        s_73010 = s_73013;\n        s_73011 = q_73014;\n        \n        int32_t y_73040 = mul32(res_72916, s_73010);\n        int32_t x_73041 = add32(gtid_72881, y_73040);\n        int32_t res_73042 = smin32(0, res_72916);\n        int32_t gamma_73043 = add32(x_73041, res_73042);\n        int32_t res_73044 = smin32(gtid_72881, j_72995);\n        bool cond_73045 = res_73044 == gamma_73043;\n        int8_t res_73046;\n        \n        if (cond_73045) {\n            res_73046 = 1;\n        } else {\n            res_73046 = 0;\n        }\n        \n        int32_t res_73047;\n        \n        if (cond_73045) {\n            res_73047 = -1;\n        } else {\n            res_73047 = gamma_73043;\n        }\n        \n        int32_t res_73048 = smax32(gtid_72881, j_72995);\n        int32_t y_73049 = add32(1, gamma_73043);\n        bool cond_73050 = res_73048 == y_73049;\n        int8_t res_73051;\n        \n        if (cond_73050) {\n       ",
                   "     res_73051 = 1;\n        } else {\n            res_73051 = 0;\n        }\n        \n        int32_t res_73052;\n        \n        if (cond_73050) {\n            res_73052 = -1;\n        } else {\n            res_73052 = y_73049;\n        }\n        ((__global int8_t *) mem_76060)[gtid_72881] = res_73046;\n        ((__global int32_t *) mem_76063)[gtid_72881] = gamma_73043;\n        ((__global int8_t *) mem_76065)[gtid_72881] = res_73051;\n        ((__global int32_t *) mem_76068)[gtid_72881] = y_73049;\n        ((__global int32_t *) mem_76071)[gtid_72881] = res_73047;\n        ((__global int32_t *) mem_76074)[gtid_72881] = res_73052;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_72886\n}\n__kernel void segmap_73054(__global int *global_failure, __global\n                           unsigned char *mem_76071, __global\n                           unsigned char *mem_76074, __global\n                           unsigned char *mem_76077)\n{\n    #define segmap_group_sizze_73058 (bvh_rgbboxzisegmap_group_sizze_73057)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76456;\n    int32_t local_tid_76457;\n    int32_t group_sizze_76460;\n    int32_t wave_sizze_76459;\n    int32_t group_tid_76458;\n    \n    global_tid_76456 = get_global_id(0);\n    local_tid_76457 = get_local_id(0);\n    group_sizze_76460 = get_local_size(0);\n    wave_sizze_76459 = LOCKSTEP_WIDTH;\n    group_tid_76458 = get_group_id(0);\n    \n    int32_t phys_tid_73054 = global_tid_76456;\n    int32_t write_i_73053 = add32(mul32(group_tid_76458,\n                                        segmap_group_sizze_73058),\n                                  local_tid_76457);\n    \n    if (slt32(write_i_73053, 399)) {\n        int32_t write_index_69901 = ((__global\n                                      int32_t *) mem_76071)[write_i_73053];\n        int32_t write_index_69903 = ((__global\n                                  ",
                   "    int32_t *) mem_76074)[write_i_73053];\n        \n        if (sle32(0, write_index_69901) && slt32(write_index_69901, 399)) {\n            ((__global int32_t *) mem_76077)[write_index_69901] = write_i_73053;\n        }\n        if (sle32(0, write_index_69903) && slt32(write_index_69903, 399)) {\n            ((__global int32_t *) mem_76077)[write_index_69903] = write_i_73053;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_73058\n}\n__kernel void segmap_73066(__global int *global_failure, __global\n                           unsigned char *mem_76052, __global\n                           unsigned char *mem_76055, __global\n                           unsigned char *mem_76058, __global\n                           unsigned char *mem_76060, __global\n                           unsigned char *mem_76063, __global\n                           unsigned char *mem_76065, __global\n                           unsigned char *mem_76068, __global\n                           unsigned char *inners_mem_76081, __global\n                           unsigned char *inners_mem_76082, __global\n                           unsigned char *inners_mem_76083, __global\n                           unsigned char *inners_mem_76084, __global\n                           unsigned char *inners_mem_76085, __global\n                           unsigned char *inners_mem_76086, __global\n                           unsigned char *mem_76089, __global\n                           unsigned char *mem_76092, __global\n                           unsigned char *mem_76095, __global\n                           unsigned char *mem_76098, __global\n                           unsigned char *mem_76101, __global\n                           unsigned char *mem_76104)\n{\n    #define segmap_group_sizze_73070 (bvh_rgbboxzisegmap_group_sizze_73069)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76473;\n    int",
                   "32_t local_tid_76474;\n    int32_t group_sizze_76477;\n    int32_t wave_sizze_76476;\n    int32_t group_tid_76475;\n    \n    global_tid_76473 = get_global_id(0);\n    local_tid_76474 = get_local_id(0);\n    group_sizze_76477 = get_local_size(0);\n    wave_sizze_76476 = LOCKSTEP_WIDTH;\n    group_tid_76475 = get_group_id(0);\n    \n    int32_t phys_tid_73066 = global_tid_76473;\n    int32_t gtid_73065 = add32(mul32(group_tid_76475, segmap_group_sizze_73070),\n                               local_tid_76474);\n    \n    if (slt32(gtid_73065, 399)) {\n        int8_t x_73077 = ((__global int8_t *) mem_76060)[gtid_73065];\n        int32_t x_73078 = ((__global int32_t *) mem_76063)[gtid_73065];\n        int8_t x_73079 = ((__global int8_t *) mem_76065)[gtid_73065];\n        int32_t x_73080 = ((__global int32_t *) mem_76068)[gtid_73065];\n        bool match_constr_73081 = 1 == x_73079;\n        float res_73082;\n        float res_73083;\n        float res_73084;\n        float res_73085;\n        float res_73086;\n        float res_73087;\n        \n        if (match_constr_73081) {\n            float lifted_0_bbf_arg_73088 = ((__global\n                                             float *) mem_76052)[x_73080];\n            float lifted_0_bbf_arg_73089 = ((__global\n                                             float *) mem_76055)[x_73080];\n            float lifted_0_bbf_arg_73090 = ((__global\n                                             float *) mem_76058)[x_73080];\n            float res_73091 = lifted_0_bbf_arg_73088 - 3.0F;\n            float res_73092 = lifted_0_bbf_arg_73089 - 3.0F;\n            float res_73093 = lifted_0_bbf_arg_73090 - 3.0F;\n            float res_73094 = 3.0F + lifted_0_bbf_arg_73088;\n            float res_73095 = 3.0F + lifted_0_bbf_arg_73089;\n            float res_73096 = 3.0F + lifted_0_bbf_arg_73090;\n            \n            res_73082 = res_73094;\n            res_73083 = res_73095;\n            res_73084 = res_73096;\n            res_73085 = res_73091;\n            res_73086 = res_73",
                   "092;\n            res_73087 = res_73093;\n        } else {\n            float res_73097 = ((__global float *) inners_mem_76081)[x_73080];\n            float res_73098 = ((__global float *) inners_mem_76082)[x_73080];\n            float res_73099 = ((__global float *) inners_mem_76083)[x_73080];\n            float res_73100 = ((__global float *) inners_mem_76084)[x_73080];\n            float res_73101 = ((__global float *) inners_mem_76085)[x_73080];\n            float res_73102 = ((__global float *) inners_mem_76086)[x_73080];\n            \n            res_73082 = res_73097;\n            res_73083 = res_73098;\n            res_73084 = res_73099;\n            res_73085 = res_73100;\n            res_73086 = res_73101;\n            res_73087 = res_73102;\n        }\n        \n        bool match_constr_73103 = 1 == x_73077;\n        float res_73104;\n        float res_73105;\n        float res_73106;\n        float res_73107;\n        float res_73108;\n        float res_73109;\n        \n        if (match_constr_73103) {\n            float lifted_0_bbf_arg_73110 = ((__global\n                                             float *) mem_76052)[x_73078];\n            float lifted_0_bbf_arg_73111 = ((__global\n                                             float *) mem_76055)[x_73078];\n            float lifted_0_bbf_arg_73112 = ((__global\n                                             float *) mem_76058)[x_73078];\n            float res_73113 = lifted_0_bbf_arg_73110 - 3.0F;\n            float res_73114 = lifted_0_bbf_arg_73111 - 3.0F;\n            float res_73115 = lifted_0_bbf_arg_73112 - 3.0F;\n            float res_73116 = 3.0F + lifted_0_bbf_arg_73110;\n            float res_73117 = 3.0F + lifted_0_bbf_arg_73111;\n            float res_73118 = 3.0F + lifted_0_bbf_arg_73112;\n            \n            res_73104 = res_73116;\n            res_73105 = res_73117;\n            res_73106 = res_73118;\n            res_73107 = res_73113;\n            res_73108 = res_73114;\n            res_73109 = res_73115;\n        } else {",
                   "\n            float res_73119 = ((__global float *) inners_mem_76081)[x_73078];\n            float res_73120 = ((__global float *) inners_mem_76082)[x_73078];\n            float res_73121 = ((__global float *) inners_mem_76083)[x_73078];\n            float res_73122 = ((__global float *) inners_mem_76084)[x_73078];\n            float res_73123 = ((__global float *) inners_mem_76085)[x_73078];\n            float res_73124 = ((__global float *) inners_mem_76086)[x_73078];\n            \n            res_73104 = res_73119;\n            res_73105 = res_73120;\n            res_73106 = res_73121;\n            res_73107 = res_73122;\n            res_73108 = res_73123;\n            res_73109 = res_73124;\n        }\n        \n        float res_73125 = fmin32(res_73085, res_73107);\n        float res_73126 = fmin32(res_73086, res_73108);\n        float res_73127 = fmin32(res_73087, res_73109);\n        float res_73128 = fmax32(res_73082, res_73104);\n        float res_73129 = fmax32(res_73083, res_73105);\n        float res_73130 = fmax32(res_73084, res_73106);\n        \n        ((__global float *) mem_76089)[gtid_73065] = res_73128;\n        ((__global float *) mem_76092)[gtid_73065] = res_73129;\n        ((__global float *) mem_76095)[gtid_73065] = res_73130;\n        ((__global float *) mem_76098)[gtid_73065] = res_73125;\n        ((__global float *) mem_76101)[gtid_73065] = res_73126;\n        ((__global float *) mem_76104)[gtid_73065] = res_73127;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_73070\n}\n__kernel void segmap_73199(__global int *global_failure, float res_70008,\n                           float res_70010, float y_70040, float y_70042,\n                           int32_t y_70057, __global unsigned char *mem_75992)\n{\n    #define segmap_group_sizze_73203 (bvh_irregzisegmap_group_sizze_73202)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76577;\n   ",
                   " int32_t local_tid_76578;\n    int32_t group_sizze_76581;\n    int32_t wave_sizze_76580;\n    int32_t group_tid_76579;\n    \n    global_tid_76577 = get_global_id(0);\n    local_tid_76578 = get_local_id(0);\n    group_sizze_76581 = get_local_size(0);\n    wave_sizze_76580 = LOCKSTEP_WIDTH;\n    group_tid_76579 = get_group_id(0);\n    \n    int32_t phys_tid_73199 = global_tid_76577;\n    int32_t gtid_73198 = add32(mul32(group_tid_76579, segmap_group_sizze_73203),\n                               local_tid_76578);\n    \n    if (slt32(gtid_73198, 10000)) {\n        int32_t new_index_75671 = squot32(gtid_73198, 100);\n        float binop_y_75701 = sitofp_i32_f32(new_index_75671);\n        float binop_y_75702 = 6.0F * binop_y_75701;\n        float index_primexp_75703 = -300.0F + binop_y_75702;\n        int32_t binop_y_75677 = mul32(100, new_index_75671);\n        int32_t new_index_75678 = sub32(gtid_73198, binop_y_75677);\n        float binop_y_75698 = sitofp_i32_f32(new_index_75678);\n        float binop_y_75699 = 6.0F * binop_y_75698;\n        float index_primexp_75700 = -300.0F + binop_y_75699;\n        float res_73212 = index_primexp_75703 - 3.0F;\n        float res_73213 = index_primexp_75700 - 3.0F;\n        float res_73214 = 3.0F + index_primexp_75703;\n        float res_73215 = 3.0F + index_primexp_75700;\n        float y_73216 = res_73214 - res_73212;\n        float res_73217 = res_73212 + y_73216;\n        float y_73218 = res_73215 - res_73213;\n        float res_73219 = res_73213 + y_73218;\n        float x_73220 = res_73217 - res_70008;\n        float res_73221 = x_73220 / y_70040;\n        float x_73222 = res_73219 - res_70010;\n        float res_73223 = x_73222 / y_70042;\n        float max_arg_73224 = 1024.0F * res_73221;\n        float res_73225 = fmax32(0.0F, max_arg_73224);\n        float res_73226 = fmin32(1023.0F, res_73225);\n        float max_arg_73227 = 1024.0F * res_73223;\n        float res_73228 = fmax32(0.0F, max_arg_73227);\n        float res_73229 = fmin32(1023.0F, res_73228);\n      ",
                   "  int32_t unsign_arg_73230 = fptoui_f32_i32(res_73226);\n        int32_t x_73231 = mul32(65537, unsign_arg_73230);\n        int32_t v_73232 = -16776961 & x_73231;\n        int32_t x_73233 = mul32(257, v_73232);\n        int32_t v_73234 = 251719695 & x_73233;\n        int32_t x_73235 = mul32(17, v_73234);\n        int32_t v_73236 = -1022611261 & x_73235;\n        int32_t x_73237 = mul32(5, v_73236);\n        int32_t v_73238 = 1227133513 & x_73237;\n        int32_t unsign_arg_73239 = fptoui_f32_i32(res_73229);\n        int32_t x_73240 = mul32(65537, unsign_arg_73239);\n        int32_t v_73241 = -16776961 & x_73240;\n        int32_t x_73242 = mul32(257, v_73241);\n        int32_t v_73243 = 251719695 & x_73242;\n        int32_t x_73244 = mul32(17, v_73243);\n        int32_t v_73245 = -1022611261 & x_73244;\n        int32_t x_73246 = mul32(5, v_73245);\n        int32_t v_73247 = 1227133513 & x_73246;\n        int32_t x_73248 = mul32(4, v_73238);\n        int32_t x_73249 = add32(y_70057, x_73248);\n        int32_t res_73250 = add32(v_73247, x_73249);\n        \n        ((__global int32_t *) mem_75992)[gtid_73198] = res_73250;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_73203\n}\n__kernel void segmap_73252(__global int *global_failure, int32_t i_70105,\n                           __global unsigned char *xs_mem_75996, __global\n                           unsigned char *mem_76000)\n{\n    #define segmap_group_sizze_73256 (bvh_irregzisegmap_group_sizze_73255)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76593;\n    int32_t local_tid_76594;\n    int32_t group_sizze_76597;\n    int32_t wave_sizze_76596;\n    int32_t group_tid_76595;\n    \n    global_tid_76593 = get_global_id(0);\n    local_tid_76594 = get_local_id(0);\n    group_sizze_76597 = get_local_size(0);\n    wave_sizze_76596 = LOCKSTEP_WIDTH;\n    group_tid_76595 = get_group_id(0);\n    \n    int32_t phys_tid_73",
                   "252 = global_tid_76593;\n    int32_t gtid_73251 = add32(mul32(group_tid_76595, segmap_group_sizze_73256),\n                               local_tid_76594);\n    \n    if (slt32(gtid_73251, 10000)) {\n        int32_t x_73263 = ((__global int32_t *) xs_mem_75996)[gtid_73251];\n        int32_t unsign_arg_73264 = ashr32(x_73263, i_70105);\n        int32_t unsign_arg_73265 = 1 & unsign_arg_73264;\n        \n        ((__global int32_t *) mem_76000)[gtid_73251] = unsign_arg_73265;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_73256\n}\n__kernel void segmap_73289(__global int *global_failure, int32_t res_70137,\n                           __global unsigned char *xs_mem_75996, __global\n                           unsigned char *xs_mem_75997, __global\n                           unsigned char *mem_76000, __global\n                           unsigned char *mem_76004, __global\n                           unsigned char *mem_76007, __global\n                           unsigned char *mem_76010, __global\n                           unsigned char *mem_76019, __global\n                           unsigned char *mem_76024)\n{\n    #define segmap_group_sizze_73293 (bvh_irregzisegmap_group_sizze_73292)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76688;\n    int32_t local_tid_76689;\n    int32_t group_sizze_76692;\n    int32_t wave_sizze_76691;\n    int32_t group_tid_76690;\n    \n    global_tid_76688 = get_global_id(0);\n    local_tid_76689 = get_local_id(0);\n    group_sizze_76692 = get_local_size(0);\n    wave_sizze_76691 = LOCKSTEP_WIDTH;\n    group_tid_76690 = get_group_id(0);\n    \n    int32_t phys_tid_73289 = global_tid_76688;\n    int32_t write_i_73288 = add32(mul32(group_tid_76690,\n                                        segmap_group_sizze_73293),\n                                  local_tid_76689);\n    \n    if (slt32(write_i_73288, 10000)) {\n        int32_t x_70151 =",
                   " ((__global int32_t *) mem_76010)[write_i_73288];\n        int32_t x_70152 = ((__global int32_t *) mem_76004)[write_i_73288];\n        int32_t x_70153 = ((__global int32_t *) mem_76007)[write_i_73288];\n        int32_t x_70154 = ((__global int32_t *) mem_76000)[write_i_73288];\n        int32_t write_value_70155 = ((__global\n                                      int32_t *) xs_mem_75996)[write_i_73288];\n        int32_t write_value_70156 = ((__global\n                                      int32_t *) xs_mem_75997)[write_i_73288];\n        int32_t res_70157 = mul32(x_70151, x_70152);\n        int32_t res_70158 = add32(res_70137, x_70153);\n        int32_t res_70159 = mul32(x_70154, res_70158);\n        int32_t res_70160 = add32(res_70157, res_70159);\n        int32_t res_70161 = sub32(res_70160, 1);\n        \n        if (sle32(0, res_70161) && slt32(res_70161, 10000)) {\n            ((__global int32_t *) mem_76024)[res_70161] = write_value_70155;\n        }\n        if (sle32(0, res_70161) && slt32(res_70161, 10000)) {\n            ((__global int32_t *) mem_76019)[res_70161] = write_value_70156;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_73293\n}\n__kernel void segmap_73301(__global int *global_failure, float res_70008,\n                           float res_70010, float y_70040, float y_70042,\n                           int32_t y_70057, __global\n                           unsigned char *res_mem_76034, __global\n                           unsigned char *mem_76052, __global\n                           unsigned char *mem_76055, __global\n                           unsigned char *mem_76058)\n{\n    #define segmap_group_sizze_73305 (bvh_irregzisegmap_group_sizze_73304)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76693;\n    int32_t local_tid_76694;\n    int32_t group_sizze_76697;\n    int32_t wave_sizze_76696;\n    int32_t group_tid_76695;\n    ",
                   "\n    global_tid_76693 = get_global_id(0);\n    local_tid_76694 = get_local_id(0);\n    group_sizze_76697 = get_local_size(0);\n    wave_sizze_76696 = LOCKSTEP_WIDTH;\n    group_tid_76695 = get_group_id(0);\n    \n    int32_t phys_tid_73301 = global_tid_76693;\n    int32_t gtid_73300 = add32(mul32(group_tid_76695, segmap_group_sizze_73305),\n                               local_tid_76694);\n    \n    if (slt32(gtid_73300, 10000)) {\n        int32_t x_73312 = ((__global int32_t *) res_mem_76034)[gtid_73300];\n        int32_t new_index_73313 = squot32(x_73312, 100);\n        int32_t binop_y_73314 = mul32(100, new_index_73313);\n        int32_t new_index_73315 = sub32(x_73312, binop_y_73314);\n        float binop_y_75704 = sitofp_i32_f32(new_index_73313);\n        float binop_y_75705 = 6.0F * binop_y_75704;\n        float index_primexp_75706 = -300.0F + binop_y_75705;\n        float binop_y_73317 = sitofp_i32_f32(new_index_73315);\n        float binop_y_73318 = 6.0F * binop_y_73317;\n        float index_primexp_73319 = -300.0F + binop_y_73318;\n        float res_73320 = index_primexp_75706 - 3.0F;\n        float res_73321 = index_primexp_73319 - 3.0F;\n        float res_73322 = 3.0F + index_primexp_75706;\n        float res_73323 = 3.0F + index_primexp_73319;\n        float y_73324 = res_73322 - res_73320;\n        float res_73325 = res_73320 + y_73324;\n        float y_73326 = res_73323 - res_73321;\n        float res_73327 = res_73321 + y_73326;\n        float x_73328 = res_73325 - res_70008;\n        float res_73329 = x_73328 / y_70040;\n        float x_73330 = res_73327 - res_70010;\n        float res_73331 = x_73330 / y_70042;\n        float max_arg_73332 = 1024.0F * res_73329;\n        float res_73333 = fmax32(0.0F, max_arg_73332);\n        float res_73334 = fmin32(1023.0F, res_73333);\n        float max_arg_73335 = 1024.0F * res_73331;\n        float res_73336 = fmax32(0.0F, max_arg_73335);\n        float res_73337 = fmin32(1023.0F, res_73336);\n        int32_t unsign_arg_73338 = fptoui_f32_i32(res_73",
                   "334);\n        int32_t x_73339 = mul32(65537, unsign_arg_73338);\n        int32_t v_73340 = -16776961 & x_73339;\n        int32_t x_73341 = mul32(257, v_73340);\n        int32_t v_73342 = 251719695 & x_73341;\n        int32_t x_73343 = mul32(17, v_73342);\n        int32_t v_73344 = -1022611261 & x_73343;\n        int32_t x_73345 = mul32(5, v_73344);\n        int32_t v_73346 = 1227133513 & x_73345;\n        int32_t unsign_arg_73347 = fptoui_f32_i32(res_73337);\n        int32_t x_73348 = mul32(65537, unsign_arg_73347);\n        int32_t v_73349 = -16776961 & x_73348;\n        int32_t x_73350 = mul32(257, v_73349);\n        int32_t v_73351 = 251719695 & x_73350;\n        int32_t x_73352 = mul32(17, v_73351);\n        int32_t v_73353 = -1022611261 & x_73352;\n        int32_t x_73354 = mul32(5, v_73353);\n        int32_t v_73355 = 1227133513 & x_73354;\n        int32_t x_73356 = mul32(4, v_73346);\n        int32_t x_73357 = add32(y_70057, x_73356);\n        int32_t res_73358 = add32(v_73355, x_73357);\n        \n        ((__global int32_t *) mem_76052)[gtid_73300] = res_73358;\n        ((__global float *) mem_76055)[gtid_73300] = index_primexp_75706;\n        ((__global float *) mem_76058)[gtid_73300] = index_primexp_73319;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_73305\n}\n__kernel void segmap_73360(__global int *global_failure,\n                           int failure_is_an_option, __global\n                           int *global_failure_args, __global\n                           unsigned char *mem_76052, __global\n                           unsigned char *mem_76060, __global\n                           unsigned char *mem_76063, __global\n                           unsigned char *mem_76065, __global\n                           unsigned char *mem_76068, __global\n                           unsigned char *mem_76071, __global\n                           unsigned char *mem_76074)\n{\n    #define segmap_group_sizze_73364 (bvh_irregzisegmap_group_sizze_73363)\n    \n    const int block_dim0 =",
                   " 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76698;\n    int32_t local_tid_76699;\n    int32_t group_sizze_76702;\n    int32_t wave_sizze_76701;\n    int32_t group_tid_76700;\n    \n    global_tid_76698 = get_global_id(0);\n    local_tid_76699 = get_local_id(0);\n    group_sizze_76702 = get_local_size(0);\n    wave_sizze_76701 = LOCKSTEP_WIDTH;\n    group_tid_76700 = get_group_id(0);\n    \n    int32_t phys_tid_73360 = global_tid_76698;\n    int32_t gtid_73359 = add32(mul32(group_tid_76700, segmap_group_sizze_73364),\n                               local_tid_76699);\n    \n    if (slt32(gtid_73359, 9999)) {\n        int32_t res_elem_73372 = ((__global int32_t *) mem_76052)[gtid_73359];\n        int32_t lifted_0_delta_arg_73373 = add32(1, gtid_73359);\n        int32_t Lj_73374 = ((__global\n                             int32_t *) mem_76052)[lifted_0_delta_arg_73373];\n        bool cond_73375 = res_elem_73372 == Lj_73374;\n        int32_t res_73376;\n        \n        if (cond_73375) {\n            int32_t clzz_arg_73377 = gtid_73359 ^ lifted_0_delta_arg_73373;\n            int32_t res_73378;\n            \n            res_73378 = futrts_clzz32(clzz_arg_73377);\n            \n            int32_t res_73379 = add32(32, res_73378);\n            \n            res_73376 = res_73379;\n        } else {\n            int32_t clzz_arg_73380 = res_elem_73372 ^ Lj_73374;\n            int32_t res_73381;\n            \n            res_73381 = futrts_clzz32(clzz_arg_73380);\n            res_73376 = res_73381;\n        }\n        \n        int32_t lifted_0_delta_arg_73382 = sub32(gtid_73359, 1);\n        bool cond_73383 = sle32(0, lifted_0_delta_arg_73382);\n        int32_t res_73384;\n        \n        if (cond_73383) {\n            int32_t Lj_73385 = ((__global\n                                 int32_t *) mem_76052)[lifted_0_delta_arg_73382];\n            bool cond_73386 = res_elem_73372 == Lj_73385;\n            int32_t res_73387;\n ",
                   "           \n            if (cond_73386) {\n                int32_t clzz_arg_73388 = gtid_73359 ^ lifted_0_delta_arg_73382;\n                int32_t res_73389;\n                \n                res_73389 = futrts_clzz32(clzz_arg_73388);\n                \n                int32_t res_73390 = add32(32, res_73389);\n                \n                res_73387 = res_73390;\n            } else {\n                int32_t clzz_arg_73391 = res_elem_73372 ^ Lj_73385;\n                int32_t res_73392;\n                \n                res_73392 = futrts_clzz32(clzz_arg_73391);\n                res_73387 = res_73392;\n            }\n            res_73384 = res_73387;\n        } else {\n            res_73384 = -1;\n        }\n        \n        int32_t sgn_arg_73393 = sub32(res_73376, res_73384);\n        int32_t res_73394 = (sgn_arg_73393 > 0) - (sgn_arg_73393 < 0);\n        int32_t lifted_0_delta_arg_73395 = sub32(gtid_73359, res_73394);\n        bool cond_73396 = sle32(0, lifted_0_delta_arg_73395);\n        bool res_73397 = slt32(lifted_0_delta_arg_73395, 10000);\n        bool x_73398 = cond_73396 && res_73397;\n        int32_t res_73399;\n        \n        if (x_73398) {\n            int32_t Lj_73400 = ((__global\n                                 int32_t *) mem_76052)[lifted_0_delta_arg_73395];\n            bool cond_73401 = res_elem_73372 == Lj_73400;\n            int32_t res_73402;\n            \n            if (cond_73401) {\n                int32_t clzz_arg_73403 = gtid_73359 ^ lifted_0_delta_arg_73395;\n                int32_t res_73404;\n                \n                res_73404 = futrts_clzz32(clzz_arg_73403);\n                \n                int32_t res_73405 = add32(32, res_73404);\n                \n                res_73402 = res_73405;\n            } else {\n                int32_t clzz_arg_73406 = res_elem_73372 ^ Lj_73400;\n                int32_t res_73407;\n                \n                res_73407 = futrts_clzz32(clzz_arg_73406);\n                res_73402 = res_73407;\n            }\n            re",
                   "s_73399 = res_73402;\n        } else {\n            res_73399 = -1;\n        }\n        \n        int32_t y_73408 = mul32(2, res_73394);\n        int32_t lifted_0_delta_arg_73409 = add32(gtid_73359, y_73408);\n        bool cond_73410 = sle32(0, lifted_0_delta_arg_73409);\n        bool res_73411 = slt32(lifted_0_delta_arg_73409, 10000);\n        bool x_73412 = cond_73410 && res_73411;\n        int32_t res_73413;\n        \n        if (x_73412) {\n            int32_t Lj_73414 = ((__global\n                                 int32_t *) mem_76052)[lifted_0_delta_arg_73409];\n            bool cond_73415 = res_elem_73372 == Lj_73414;\n            int32_t res_73416;\n            \n            if (cond_73415) {\n                int32_t clzz_arg_73417 = gtid_73359 ^ lifted_0_delta_arg_73409;\n                int32_t res_73418;\n                \n                res_73418 = futrts_clzz32(clzz_arg_73417);\n                \n                int32_t res_73419 = add32(32, res_73418);\n                \n                res_73416 = res_73419;\n            } else {\n                int32_t clzz_arg_73420 = res_elem_73372 ^ Lj_73414;\n                int32_t res_73421;\n                \n                res_73421 = futrts_clzz32(clzz_arg_73420);\n                res_73416 = res_73421;\n            }\n            res_73413 = res_73416;\n        } else {\n            res_73413 = -1;\n        }\n        \n        bool loop_cond_73422 = slt32(res_73399, res_73413);\n        bool l_max_73423;\n        int32_t l_max_73424;\n        bool loop_while_73425;\n        int32_t l_max_73426;\n        \n        loop_while_73425 = loop_cond_73422;\n        l_max_73426 = 2;\n        while (loop_while_73425) {\n            int32_t loopres_73427 = mul32(2, l_max_73426);\n            int32_t y_73428 = mul32(res_73394, loopres_73427);\n            int32_t lifted_0_delta_arg_73429 = add32(gtid_73359, y_73428);\n            bool cond_73430 = sle32(0, lifted_0_delta_arg_73429);\n            bool res_73431 = slt32(lifted_0_delta_arg_73429, 10000);\n            b",
                   "ool x_73432 = cond_73430 && res_73431;\n            int32_t res_73433;\n            \n            if (x_73432) {\n                int32_t Lj_73434 = ((__global\n                                     int32_t *) mem_76052)[lifted_0_delta_arg_73429];\n                bool cond_73435 = res_elem_73372 == Lj_73434;\n                int32_t res_73436;\n                \n                if (cond_73435) {\n                    int32_t clzz_arg_73437 = gtid_73359 ^\n                            lifted_0_delta_arg_73429;\n                    int32_t res_73438;\n                    \n                    res_73438 = futrts_clzz32(clzz_arg_73437);\n                    \n                    int32_t res_73439 = add32(32, res_73438);\n                    \n                    res_73436 = res_73439;\n                } else {\n                    int32_t clzz_arg_73440 = res_elem_73372 ^ Lj_73434;\n                    int32_t res_73441;\n                    \n                    res_73441 = futrts_clzz32(clzz_arg_73440);\n                    res_73436 = res_73441;\n                }\n                res_73433 = res_73436;\n            } else {\n                res_73433 = -1;\n            }\n            \n            bool loop_cond_73442 = slt32(res_73399, res_73433);\n            bool loop_while_tmp_76703 = loop_cond_73442;\n            int32_t l_max_tmp_76704;\n            \n            l_max_tmp_76704 = loopres_73427;\n            loop_while_73425 = loop_while_tmp_76703;\n            l_max_73426 = l_max_tmp_76704;\n        }\n        l_max_73423 = loop_while_73425;\n        l_max_73424 = l_max_73426;\n        \n        int32_t loop_init_73443 = sdiv32(l_max_73424, 2);\n        bool loop_cond_73444 = slt32(0, loop_init_73443);\n        bool l_73445;\n        int32_t l_73446;\n        int32_t l_73447;\n        bool loop_while_73448;\n        int32_t l_73449;\n        int32_t t_73450;\n        \n        loop_while_73448 = loop_cond_73444;\n        l_73449 = 0;\n        t_73450 = loop_init_73443;\n        while (loop_while_73448) {\n         ",
                   "   int32_t x_73451 = add32(l_73449, t_73450);\n            int32_t y_73452 = mul32(res_73394, x_73451);\n            int32_t lifted_0_delta_arg_73453 = add32(gtid_73359, y_73452);\n            bool cond_73454 = sle32(0, lifted_0_delta_arg_73453);\n            bool res_73455 = slt32(lifted_0_delta_arg_73453, 10000);\n            bool x_73456 = cond_73454 && res_73455;\n            int32_t res_73457;\n            \n            if (x_73456) {\n                int32_t Lj_73458 = ((__global\n                                     int32_t *) mem_76052)[lifted_0_delta_arg_73453];\n                bool cond_73459 = res_elem_73372 == Lj_73458;\n                int32_t res_73460;\n                \n                if (cond_73459) {\n                    int32_t clzz_arg_73461 = gtid_73359 ^\n                            lifted_0_delta_arg_73453;\n                    int32_t res_73462;\n                    \n                    res_73462 = futrts_clzz32(clzz_arg_73461);\n                    \n                    int32_t res_73463 = add32(32, res_73462);\n                    \n                    res_73460 = res_73463;\n                } else {\n                    int32_t clzz_arg_73464 = res_elem_73372 ^ Lj_73458;\n                    int32_t res_73465;\n                    \n                    res_73465 = futrts_clzz32(clzz_arg_73464);\n                    res_73460 = res_73465;\n                }\n                res_73457 = res_73460;\n            } else {\n                res_73457 = -1;\n            }\n            \n            bool cond_73466 = slt32(res_73399, res_73457);\n            int32_t loopres_73467;\n            \n            if (cond_73466) {\n                loopres_73467 = x_73451;\n            } else {\n                loopres_73467 = l_73449;\n            }\n            \n            int32_t loopres_73468;\n            \n            if (cond_73466) {\n                int32_t res_73469 = sdiv32(t_73450, 2);\n                \n                loopres_73468 = res_73469;\n            } else {\n                int3",
                   "2_t res_73470 = sdiv32(t_73450, 2);\n                \n                loopres_73468 = res_73470;\n            }\n            \n            bool loop_cond_73471 = slt32(0, loopres_73468);\n            bool loop_while_tmp_76705 = loop_cond_73471;\n            int32_t l_tmp_76706 = loopres_73467;\n            int32_t t_tmp_76707;\n            \n            t_tmp_76707 = loopres_73468;\n            loop_while_73448 = loop_while_tmp_76705;\n            l_73449 = l_tmp_76706;\n            t_73450 = t_tmp_76707;\n        }\n        l_73445 = loop_while_73448;\n        l_73446 = l_73449;\n        l_73447 = t_73450;\n        \n        int32_t y_73472 = mul32(res_73394, l_73446);\n        int32_t j_73473 = add32(gtid_73359, y_73472);\n        bool cond_73474 = sle32(0, j_73473);\n        bool res_73475 = slt32(j_73473, 10000);\n        bool x_73476 = cond_73474 && res_73475;\n        int32_t res_73477;\n        \n        if (x_73476) {\n            int32_t Lj_73478 = ((__global int32_t *) mem_76052)[j_73473];\n            bool cond_73479 = res_elem_73372 == Lj_73478;\n            int32_t res_73480;\n            \n            if (cond_73479) {\n                int32_t clzz_arg_73481 = gtid_73359 ^ j_73473;\n                int32_t res_73482;\n                \n                res_73482 = futrts_clzz32(clzz_arg_73481);\n                \n                int32_t res_73483 = add32(32, res_73482);\n                \n                res_73480 = res_73483;\n            } else {\n                int32_t clzz_arg_73484 = res_elem_73372 ^ Lj_73478;\n                int32_t res_73485;\n                \n                res_73485 = futrts_clzz32(clzz_arg_73484);\n                res_73480 = res_73485;\n            }\n            res_73477 = res_73480;\n        } else {\n            res_73477 = -1;\n        }\n        \n        bool loop_cond_73486 = sle32(1, l_73446);\n        bool s_73487;\n        int32_t s_73488;\n        int32_t s_73489;\n        bool loop_while_73490;\n        int32_t s_73491;\n        int32_t q_73492;\n        \n        lo",
                   "op_while_73490 = loop_cond_73486;\n        s_73491 = 0;\n        q_73492 = 1;\n        while (loop_while_73490) {\n            int32_t div_rounding_up_arg_73493 = mul32(2, q_73492);\n            int32_t x_73494 = add32(l_73446, div_rounding_up_arg_73493);\n            int32_t x_73495 = sub32(x_73494, 1);\n            bool zzero_73496 = div_rounding_up_arg_73493 == 0;\n            bool nonzzero_73497 = !zzero_73496;\n            bool nonzzero_cert_73498;\n            \n            if (!nonzzero_73497) {\n                if (atomic_cmpxchg(global_failure, -1, 2) == -1) {\n                    ;\n                }\n                return;\n            }\n            \n            int32_t res_73499 = sdiv32(x_73495, div_rounding_up_arg_73493);\n            int32_t x_73500 = add32(s_73491, res_73499);\n            int32_t y_73501 = mul32(res_73394, x_73500);\n            int32_t lifted_0_delta_arg_73502 = add32(gtid_73359, y_73501);\n            bool cond_73503 = sle32(0, lifted_0_delta_arg_73502);\n            bool res_73504 = slt32(lifted_0_delta_arg_73502, 10000);\n            bool x_73505 = cond_73503 && res_73504;\n            int32_t res_73506;\n            \n            if (x_73505) {\n                int32_t Lj_73507 = ((__global\n                                     int32_t *) mem_76052)[lifted_0_delta_arg_73502];\n                bool cond_73508 = res_elem_73372 == Lj_73507;\n                int32_t res_73509;\n                \n                if (cond_73508) {\n                    int32_t clzz_arg_73510 = gtid_73359 ^\n                            lifted_0_delta_arg_73502;\n                    int32_t res_73511;\n                    \n                    res_73511 = futrts_clzz32(clzz_arg_73510);\n                    \n                    int32_t res_73512 = add32(32, res_73511);\n                    \n                    res_73509 = res_73512;\n                } else {\n                    int32_t clzz_arg_73513 = res_elem_73372 ^ Lj_73507;\n                    int32_t res_73514;\n                    \n   ",
                   "                 res_73514 = futrts_clzz32(clzz_arg_73513);\n                    res_73509 = res_73514;\n                }\n                res_73506 = res_73509;\n            } else {\n                res_73506 = -1;\n            }\n            \n            bool cond_73515 = slt32(res_73477, res_73506);\n            int32_t loopres_73516;\n            \n            if (cond_73515) {\n                loopres_73516 = x_73500;\n            } else {\n                loopres_73516 = s_73491;\n            }\n            \n            bool loop_cond_73517 = sle32(div_rounding_up_arg_73493, l_73446);\n            bool loop_while_tmp_76708 = loop_cond_73517;\n            int32_t s_tmp_76709 = loopres_73516;\n            int32_t q_tmp_76710;\n            \n            q_tmp_76710 = div_rounding_up_arg_73493;\n            loop_while_73490 = loop_while_tmp_76708;\n            s_73491 = s_tmp_76709;\n            q_73492 = q_tmp_76710;\n        }\n        s_73487 = loop_while_73490;\n        s_73488 = s_73491;\n        s_73489 = q_73492;\n        \n        int32_t y_73518 = mul32(res_73394, s_73488);\n        int32_t x_73519 = add32(gtid_73359, y_73518);\n        int32_t res_73520 = smin32(0, res_73394);\n        int32_t gamma_73521 = add32(x_73519, res_73520);\n        int32_t res_73522 = smin32(gtid_73359, j_73473);\n        bool cond_73523 = res_73522 == gamma_73521;\n        int8_t res_73524;\n        \n        if (cond_73523) {\n            res_73524 = 1;\n        } else {\n            res_73524 = 0;\n        }\n        \n        int32_t res_73525;\n        \n        if (cond_73523) {\n            res_73525 = -1;\n        } else {\n            res_73525 = gamma_73521;\n        }\n        \n        int32_t res_73526 = smax32(gtid_73359, j_73473);\n        int32_t y_73527 = add32(1, gamma_73521);\n        bool cond_73528 = res_73526 == y_73527;\n        int8_t res_73529;\n        \n        if (cond_73528) {\n            res_73529 = 1;\n        } else {\n            res_73529 = 0;\n        }\n        \n        int32_t res_73530;\n        \n",
                   "        if (cond_73528) {\n            res_73530 = -1;\n        } else {\n            res_73530 = y_73527;\n        }\n        ((__global int8_t *) mem_76060)[gtid_73359] = res_73524;\n        ((__global int32_t *) mem_76063)[gtid_73359] = gamma_73521;\n        ((__global int8_t *) mem_76065)[gtid_73359] = res_73529;\n        ((__global int32_t *) mem_76068)[gtid_73359] = y_73527;\n        ((__global int32_t *) mem_76071)[gtid_73359] = res_73525;\n        ((__global int32_t *) mem_76074)[gtid_73359] = res_73530;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_73364\n}\n__kernel void segmap_73532(__global int *global_failure, __global\n                           unsigned char *mem_76071, __global\n                           unsigned char *mem_76074, __global\n                           unsigned char *mem_76077)\n{\n    #define segmap_group_sizze_73536 (bvh_irregzisegmap_group_sizze_73535)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76711;\n    int32_t local_tid_76712;\n    int32_t group_sizze_76715;\n    int32_t wave_sizze_76714;\n    int32_t group_tid_76713;\n    \n    global_tid_76711 = get_global_id(0);\n    local_tid_76712 = get_local_id(0);\n    group_sizze_76715 = get_local_size(0);\n    wave_sizze_76714 = LOCKSTEP_WIDTH;\n    group_tid_76713 = get_group_id(0);\n    \n    int32_t phys_tid_73532 = global_tid_76711;\n    int32_t write_i_73531 = add32(mul32(group_tid_76713,\n                                        segmap_group_sizze_73536),\n                                  local_tid_76712);\n    \n    if (slt32(write_i_73531, 9999)) {\n        int32_t write_index_70393 = ((__global\n                                      int32_t *) mem_76071)[write_i_73531];\n        int32_t write_index_70395 = ((__global\n                                      int32_t *) mem_76074)[write_i_73531];\n        \n        if (sle32(0, write_index_70393) && slt32(write_index_70393, ",
                   "9999)) {\n            ((__global int32_t *) mem_76077)[write_index_70393] = write_i_73531;\n        }\n        if (sle32(0, write_index_70395) && slt32(write_index_70395, 9999)) {\n            ((__global int32_t *) mem_76077)[write_index_70395] = write_i_73531;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_73536\n}\n__kernel void segmap_73544(__global int *global_failure, __global\n                           unsigned char *mem_76055, __global\n                           unsigned char *mem_76058, __global\n                           unsigned char *mem_76060, __global\n                           unsigned char *mem_76063, __global\n                           unsigned char *mem_76065, __global\n                           unsigned char *mem_76068, __global\n                           unsigned char *inners_mem_76081, __global\n                           unsigned char *inners_mem_76082, __global\n                           unsigned char *inners_mem_76083, __global\n                           unsigned char *inners_mem_76084, __global\n                           unsigned char *inners_mem_76085, __global\n                           unsigned char *inners_mem_76086, __global\n                           unsigned char *mem_76089, __global\n                           unsigned char *mem_76092, __global\n                           unsigned char *mem_76095, __global\n                           unsigned char *mem_76098, __global\n                           unsigned char *mem_76101, __global\n                           unsigned char *mem_76104)\n{\n    #define segmap_group_sizze_73548 (bvh_irregzisegmap_group_sizze_73547)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76728;\n    int32_t local_tid_76729;\n    int32_t group_sizze_76732;\n    int32_t wave_sizze_76731;\n    int32_t group_tid_76730;\n    \n    global_tid_76728 = get_global_id(0);\n    local_tid_76729 = ",
                   "get_local_id(0);\n    group_sizze_76732 = get_local_size(0);\n    wave_sizze_76731 = LOCKSTEP_WIDTH;\n    group_tid_76730 = get_group_id(0);\n    \n    int32_t phys_tid_73544 = global_tid_76728;\n    int32_t gtid_73543 = add32(mul32(group_tid_76730, segmap_group_sizze_73548),\n                               local_tid_76729);\n    \n    if (slt32(gtid_73543, 9999)) {\n        int8_t x_73555 = ((__global int8_t *) mem_76060)[gtid_73543];\n        int32_t x_73556 = ((__global int32_t *) mem_76063)[gtid_73543];\n        int8_t x_73557 = ((__global int8_t *) mem_76065)[gtid_73543];\n        int32_t x_73558 = ((__global int32_t *) mem_76068)[gtid_73543];\n        bool match_constr_73559 = 1 == x_73557;\n        float res_73560;\n        float res_73561;\n        float res_73562;\n        float res_73563;\n        float res_73564;\n        float res_73565;\n        \n        if (match_constr_73559) {\n            float lifted_0_bbf_arg_73566 = ((__global\n                                             float *) mem_76055)[x_73558];\n            float lifted_0_bbf_arg_73567 = ((__global\n                                             float *) mem_76058)[x_73558];\n            float res_73568 = lifted_0_bbf_arg_73566 - 3.0F;\n            float res_73569 = lifted_0_bbf_arg_73567 - 3.0F;\n            float res_73570 = 3.0F + lifted_0_bbf_arg_73566;\n            float res_73571 = 3.0F + lifted_0_bbf_arg_73567;\n            \n            res_73560 = res_73570;\n            res_73561 = 3.0F;\n            res_73562 = res_73571;\n            res_73563 = res_73568;\n            res_73564 = -3.0F;\n            res_73565 = res_73569;\n        } else {\n            float res_73572 = ((__global float *) inners_mem_76081)[x_73558];\n            float res_73573 = ((__global float *) inners_mem_76082)[x_73558];\n            float res_73574 = ((__global float *) inners_mem_76083)[x_73558];\n            float res_73575 = ((__global float *) inners_mem_76084)[x_73558];\n            float res_73576 = ((__global float *) inners_mem_76085)[x_",
                   "73558];\n            float res_73577 = ((__global float *) inners_mem_76086)[x_73558];\n            \n            res_73560 = res_73572;\n            res_73561 = res_73573;\n            res_73562 = res_73574;\n            res_73563 = res_73575;\n            res_73564 = res_73576;\n            res_73565 = res_73577;\n        }\n        \n        bool match_constr_73578 = 1 == x_73555;\n        float res_73579;\n        float res_73580;\n        float res_73581;\n        float res_73582;\n        float res_73583;\n        float res_73584;\n        \n        if (match_constr_73578) {\n            float lifted_0_bbf_arg_73585 = ((__global\n                                             float *) mem_76055)[x_73556];\n            float lifted_0_bbf_arg_73586 = ((__global\n                                             float *) mem_76058)[x_73556];\n            float res_73587 = lifted_0_bbf_arg_73585 - 3.0F;\n            float res_73588 = lifted_0_bbf_arg_73586 - 3.0F;\n            float res_73589 = 3.0F + lifted_0_bbf_arg_73585;\n            float res_73590 = 3.0F + lifted_0_bbf_arg_73586;\n            \n            res_73579 = res_73589;\n            res_73580 = 3.0F;\n            res_73581 = res_73590;\n            res_73582 = res_73587;\n            res_73583 = -3.0F;\n            res_73584 = res_73588;\n        } else {\n            float res_73591 = ((__global float *) inners_mem_76081)[x_73556];\n            float res_73592 = ((__global float *) inners_mem_76082)[x_73556];\n            float res_73593 = ((__global float *) inners_mem_76083)[x_73556];\n            float res_73594 = ((__global float *) inners_mem_76084)[x_73556];\n            float res_73595 = ((__global float *) inners_mem_76085)[x_73556];\n            float res_73596 = ((__global float *) inners_mem_76086)[x_73556];\n            \n            res_73579 = res_73591;\n            res_73580 = res_73592;\n            res_73581 = res_73593;\n            res_73582 = res_73594;\n            res_73583 = res_73595;\n            res_73584 = res_73596;\n       ",
                   " }\n        \n        float res_73597 = fmin32(res_73563, res_73582);\n        float res_73598 = fmin32(res_73564, res_73583);\n        float res_73599 = fmin32(res_73565, res_73584);\n        float res_73600 = fmax32(res_73560, res_73579);\n        float res_73601 = fmax32(res_73561, res_73580);\n        float res_73602 = fmax32(res_73562, res_73581);\n        \n        ((__global float *) mem_76089)[gtid_73543] = res_73600;\n        ((__global float *) mem_76092)[gtid_73543] = res_73601;\n        ((__global float *) mem_76095)[gtid_73543] = res_73602;\n        ((__global float *) mem_76098)[gtid_73543] = res_73597;\n        ((__global float *) mem_76101)[gtid_73543] = res_73598;\n        ((__global float *) mem_76104)[gtid_73543] = res_73599;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_73548\n}\n__kernel void segmap_73824(__global int *global_failure, float res_70540,\n                           float res_70541, float res_70542, float y_70577,\n                           float y_70578, float y_70579, __global\n                           unsigned char *mem_75992)\n{\n    #define segmap_group_sizze_73828 (render_rgbboxzisegmap_group_sizze_73827)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76803;\n    int32_t local_tid_76804;\n    int32_t group_sizze_76807;\n    int32_t wave_sizze_76806;\n    int32_t group_tid_76805;\n    \n    global_tid_76803 = get_global_id(0);\n    local_tid_76804 = get_local_id(0);\n    group_sizze_76807 = get_local_size(0);\n    wave_sizze_76806 = LOCKSTEP_WIDTH;\n    group_tid_76805 = get_group_id(0);\n    \n    int32_t phys_tid_73824 = global_tid_76803;\n    int32_t gtid_73823 = add32(mul32(group_tid_76805, segmap_group_sizze_73828),\n                               local_tid_76804);\n    \n    if (slt32(gtid_73823, 400)) {\n        bool index_concat_cmp_75784 = sle32(300, gtid_73823);\n        float index_concat_branch_75796;\n       ",
                   " \n        if (index_concat_cmp_75784) {\n            int32_t index_concat_i_75785 = sub32(gtid_73823, 300);\n            int32_t new_index_75868 = squot32(index_concat_i_75785, 10);\n            float binop_y_75951 = sitofp_i32_f32(new_index_75868);\n            float binop_y_75952 = 6.0F * binop_y_75951;\n            float index_primexp_75953 = -30.0F + binop_y_75952;\n            \n            index_concat_branch_75796 = index_primexp_75953;\n        } else {\n            bool index_concat_cmp_75787 = sle32(200, gtid_73823);\n            float index_concat_branch_75795;\n            \n            if (index_concat_cmp_75787) {\n                index_concat_branch_75795 = 30.0F;\n            } else {\n                bool index_concat_cmp_75790 = sle32(100, gtid_73823);\n                float index_concat_branch_75794;\n                \n                if (index_concat_cmp_75790) {\n                    int32_t index_concat_i_75791 = sub32(gtid_73823, 100);\n                    int32_t new_index_75872 = squot32(index_concat_i_75791, 10);\n                    float binop_y_75948 = sitofp_i32_f32(new_index_75872);\n                    float binop_y_75949 = 6.0F * binop_y_75948;\n                    float index_primexp_75950 = -30.0F + binop_y_75949;\n                    \n                    index_concat_branch_75794 = index_primexp_75950;\n                } else {\n                    index_concat_branch_75794 = -30.0F;\n                }\n                index_concat_branch_75795 = index_concat_branch_75794;\n            }\n            index_concat_branch_75796 = index_concat_branch_75795;\n        }\n        \n        float index_concat_branch_75780;\n        \n        if (index_concat_cmp_75784) {\n            index_concat_branch_75780 = -30.0F;\n        } else {\n            bool index_concat_cmp_75771 = sle32(200, gtid_73823);\n            float index_concat_branch_75779;\n            \n            if (index_concat_cmp_75771) {\n                int32_t index_concat_i_75772 = sub32(gtid_73823, 200);\n     ",
                   "           int32_t new_index_75876 = squot32(index_concat_i_75772, 10);\n                float binop_y_75957 = sitofp_i32_f32(new_index_75876);\n                float binop_y_75958 = 6.0F * binop_y_75957;\n                float index_primexp_75959 = -30.0F + binop_y_75958;\n                \n                index_concat_branch_75779 = index_primexp_75959;\n            } else {\n                bool index_concat_cmp_75774 = sle32(100, gtid_73823);\n                float index_concat_branch_75778;\n                \n                if (index_concat_cmp_75774) {\n                    int32_t index_concat_i_75775 = sub32(gtid_73823, 100);\n                    int32_t binop_x_75881 = squot32(index_concat_i_75775, 10);\n                    int32_t binop_y_75882 = mul32(10, binop_x_75881);\n                    int32_t new_index_75883 = sub32(index_concat_i_75775,\n                                                    binop_y_75882);\n                    float binop_y_75888 = sitofp_i32_f32(new_index_75883);\n                    float binop_y_75889 = 6.0F * binop_y_75888;\n                    float index_primexp_75890 = -30.0F + binop_y_75889;\n                    \n                    index_concat_branch_75778 = index_primexp_75890;\n                } else {\n                    int32_t new_index_75884 = squot32(gtid_73823, 10);\n                    float binop_y_75954 = sitofp_i32_f32(new_index_75884);\n                    float binop_y_75955 = 6.0F * binop_y_75954;\n                    float index_primexp_75956 = -30.0F + binop_y_75955;\n                    \n                    index_concat_branch_75778 = index_primexp_75956;\n                }\n                index_concat_branch_75779 = index_concat_branch_75778;\n            }\n            index_concat_branch_75780 = index_concat_branch_75779;\n        }\n        \n        float index_concat_branch_75764;\n        \n        if (index_concat_cmp_75784) {\n            int32_t index_concat_i_75753 = sub32(gtid_73823, 300);\n            int32_t binop_x_75892 = ",
                   "squot32(index_concat_i_75753, 10);\n            int32_t binop_y_75893 = mul32(10, binop_x_75892);\n            int32_t new_index_75894 = sub32(index_concat_i_75753,\n                                            binop_y_75893);\n            float binop_y_75909 = sitofp_i32_f32(new_index_75894);\n            float binop_y_75910 = 6.0F * binop_y_75909;\n            float index_primexp_75911 = -30.0F + binop_y_75910;\n            \n            index_concat_branch_75764 = index_primexp_75911;\n        } else {\n            bool index_concat_cmp_75755 = sle32(200, gtid_73823);\n            float index_concat_branch_75763;\n            \n            if (index_concat_cmp_75755) {\n                int32_t index_concat_i_75756 = sub32(gtid_73823, 200);\n                int32_t binop_x_75896 = squot32(index_concat_i_75756, 10);\n                int32_t binop_y_75897 = mul32(10, binop_x_75896);\n                int32_t new_index_75898 = sub32(index_concat_i_75756,\n                                                binop_y_75897);\n                float binop_y_75906 = sitofp_i32_f32(new_index_75898);\n                float binop_y_75907 = 6.0F * binop_y_75906;\n                float index_primexp_75908 = -30.0F + binop_y_75907;\n                \n                index_concat_branch_75763 = index_primexp_75908;\n            } else {\n                bool index_concat_cmp_75758 = sle32(100, gtid_73823);\n                float index_concat_branch_75762;\n                \n                if (index_concat_cmp_75758) {\n                    index_concat_branch_75762 = -30.0F;\n                } else {\n                    int32_t binop_x_75900 = squot32(gtid_73823, 10);\n                    int32_t binop_y_75901 = mul32(10, binop_x_75900);\n                    int32_t new_index_75902 = sub32(gtid_73823, binop_y_75901);\n                    float binop_y_75903 = sitofp_i32_f32(new_index_75902);\n                    float binop_y_75904 = 6.0F * binop_y_75903;\n                    float index_primexp_75905 = -30.0F + binop_y",
                   "_75904;\n                    \n                    index_concat_branch_75762 = index_primexp_75905;\n                }\n                index_concat_branch_75763 = index_concat_branch_75762;\n            }\n            index_concat_branch_75764 = index_concat_branch_75763;\n        }\n        \n        float res_73839 = index_concat_branch_75796 - 3.0F;\n        float res_73840 = index_concat_branch_75780 - 3.0F;\n        float res_73841 = index_concat_branch_75764 - 3.0F;\n        float res_73842 = 3.0F + index_concat_branch_75796;\n        float res_73843 = 3.0F + index_concat_branch_75780;\n        float res_73844 = 3.0F + index_concat_branch_75764;\n        float y_73845 = res_73842 - res_73839;\n        float res_73846 = res_73839 + y_73845;\n        float y_73847 = res_73843 - res_73840;\n        float res_73848 = res_73840 + y_73847;\n        float y_73849 = res_73844 - res_73841;\n        float res_73850 = res_73841 + y_73849;\n        float x_73851 = res_73846 - res_70540;\n        float res_73852 = x_73851 / y_70577;\n        float x_73853 = res_73848 - res_70541;\n        float res_73854 = x_73853 / y_70578;\n        float x_73855 = res_73850 - res_70542;\n        float res_73856 = x_73855 / y_70579;\n        float max_arg_73857 = 1024.0F * res_73852;\n        float res_73858 = fmax32(0.0F, max_arg_73857);\n        float res_73859 = fmin32(1023.0F, res_73858);\n        float max_arg_73860 = 1024.0F * res_73854;\n        float res_73861 = fmax32(0.0F, max_arg_73860);\n        float res_73862 = fmin32(1023.0F, res_73861);\n        float max_arg_73863 = 1024.0F * res_73856;\n        float res_73864 = fmax32(0.0F, max_arg_73863);\n        float res_73865 = fmin32(1023.0F, res_73864);\n        int32_t unsign_arg_73866 = fptoui_f32_i32(res_73859);\n        int32_t x_73867 = mul32(65537, unsign_arg_73866);\n        int32_t v_73868 = -16776961 & x_73867;\n        int32_t x_73869 = mul32(257, v_73868);\n        int32_t v_73870 = 251719695 & x_73869;\n        int32_t x_73871 = mul32(17, v_73870);\n        ",
                   "int32_t v_73872 = -1022611261 & x_73871;\n        int32_t x_73873 = mul32(5, v_73872);\n        int32_t v_73874 = 1227133513 & x_73873;\n        int32_t unsign_arg_73875 = fptoui_f32_i32(res_73862);\n        int32_t x_73876 = mul32(65537, unsign_arg_73875);\n        int32_t v_73877 = -16776961 & x_73876;\n        int32_t x_73878 = mul32(257, v_73877);\n        int32_t v_73879 = 251719695 & x_73878;\n        int32_t x_73880 = mul32(17, v_73879);\n        int32_t v_73881 = -1022611261 & x_73880;\n        int32_t x_73882 = mul32(5, v_73881);\n        int32_t v_73883 = 1227133513 & x_73882;\n        int32_t unsign_arg_73884 = fptoui_f32_i32(res_73865);\n        int32_t x_73885 = mul32(65537, unsign_arg_73884);\n        int32_t v_73886 = -16776961 & x_73885;\n        int32_t x_73887 = mul32(257, v_73886);\n        int32_t v_73888 = 251719695 & x_73887;\n        int32_t x_73889 = mul32(17, v_73888);\n        int32_t v_73890 = -1022611261 & x_73889;\n        int32_t x_73891 = mul32(5, v_73890);\n        int32_t v_73892 = 1227133513 & x_73891;\n        int32_t x_73893 = mul32(4, v_73874);\n        int32_t y_73894 = mul32(2, v_73883);\n        int32_t x_73895 = add32(x_73893, y_73894);\n        int32_t res_73896 = add32(v_73892, x_73895);\n        \n        ((__global int32_t *) mem_75992)[gtid_73823] = res_73896;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_73828\n}\n__kernel void segmap_73898(__global int *global_failure, int32_t i_70648,\n                           __global unsigned char *xs_mem_75996, __global\n                           unsigned char *mem_76000)\n{\n    #define segmap_group_sizze_73902 (render_rgbboxzisegmap_group_sizze_73901)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76819;\n    int32_t local_tid_76820;\n    int32_t group_sizze_76823;\n    int32_t wave_sizze_76822;\n    int32_t group_tid_76821;\n    \n    global_tid_76819 = get_global_id(0);",
                   "\n    local_tid_76820 = get_local_id(0);\n    group_sizze_76823 = get_local_size(0);\n    wave_sizze_76822 = LOCKSTEP_WIDTH;\n    group_tid_76821 = get_group_id(0);\n    \n    int32_t phys_tid_73898 = global_tid_76819;\n    int32_t gtid_73897 = add32(mul32(group_tid_76821, segmap_group_sizze_73902),\n                               local_tid_76820);\n    \n    if (slt32(gtid_73897, 400)) {\n        int32_t x_73909 = ((__global int32_t *) xs_mem_75996)[gtid_73897];\n        int32_t unsign_arg_73910 = ashr32(x_73909, i_70648);\n        int32_t unsign_arg_73911 = 1 & unsign_arg_73910;\n        \n        ((__global int32_t *) mem_76000)[gtid_73897] = unsign_arg_73911;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_73902\n}\n__kernel void segmap_73935(__global int *global_failure, int32_t res_70680,\n                           __global unsigned char *xs_mem_75996, __global\n                           unsigned char *xs_mem_75997, __global\n                           unsigned char *mem_76000, __global\n                           unsigned char *mem_76004, __global\n                           unsigned char *mem_76007, __global\n                           unsigned char *mem_76010, __global\n                           unsigned char *mem_76019, __global\n                           unsigned char *mem_76024)\n{\n    #define segmap_group_sizze_73939 (render_rgbboxzisegmap_group_sizze_73938)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76914;\n    int32_t local_tid_76915;\n    int32_t group_sizze_76918;\n    int32_t wave_sizze_76917;\n    int32_t group_tid_76916;\n    \n    global_tid_76914 = get_global_id(0);\n    local_tid_76915 = get_local_id(0);\n    group_sizze_76918 = get_local_size(0);\n    wave_sizze_76917 = LOCKSTEP_WIDTH;\n    group_tid_76916 = get_group_id(0);\n    \n    int32_t phys_tid_73935 = global_tid_76914;\n    int32_t write_i_73934 = add32(mul32(group_tid_7691",
                   "6,\n                                        segmap_group_sizze_73939),\n                                  local_tid_76915);\n    \n    if (slt32(write_i_73934, 400)) {\n        int32_t x_70694 = ((__global int32_t *) mem_76010)[write_i_73934];\n        int32_t x_70695 = ((__global int32_t *) mem_76004)[write_i_73934];\n        int32_t x_70696 = ((__global int32_t *) mem_76007)[write_i_73934];\n        int32_t x_70697 = ((__global int32_t *) mem_76000)[write_i_73934];\n        int32_t write_value_70698 = ((__global\n                                      int32_t *) xs_mem_75996)[write_i_73934];\n        int32_t write_value_70699 = ((__global\n                                      int32_t *) xs_mem_75997)[write_i_73934];\n        int32_t res_70700 = mul32(x_70694, x_70695);\n        int32_t res_70701 = add32(res_70680, x_70696);\n        int32_t res_70702 = mul32(x_70697, res_70701);\n        int32_t res_70703 = add32(res_70700, res_70702);\n        int32_t res_70704 = sub32(res_70703, 1);\n        \n        if (sle32(0, res_70704) && slt32(res_70704, 400)) {\n            ((__global int32_t *) mem_76024)[res_70704] = write_value_70698;\n        }\n        if (sle32(0, res_70704) && slt32(res_70704, 400)) {\n            ((__global int32_t *) mem_76019)[res_70704] = write_value_70699;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_73939\n}\n__kernel void segmap_73947(__global int *global_failure, float res_70540,\n                           float res_70541, float res_70542, float y_70577,\n                           float y_70578, float y_70579, __global\n                           unsigned char *res_mem_76034, __global\n                           unsigned char *mem_76037, __global\n                           unsigned char *mem_76040, __global\n                           unsigned char *mem_76043, __global\n                           unsigned char *mem_76046, __global\n                           unsigned char *mem_76049, __global\n                           unsigned char *mem_76",
                   "052, __global\n                           unsigned char *mem_76055)\n{\n    #define segmap_group_sizze_73951 (render_rgbboxzisegmap_group_sizze_73950)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76919;\n    int32_t local_tid_76920;\n    int32_t group_sizze_76923;\n    int32_t wave_sizze_76922;\n    int32_t group_tid_76921;\n    \n    global_tid_76919 = get_global_id(0);\n    local_tid_76920 = get_local_id(0);\n    group_sizze_76923 = get_local_size(0);\n    wave_sizze_76922 = LOCKSTEP_WIDTH;\n    group_tid_76921 = get_group_id(0);\n    \n    int32_t phys_tid_73947 = global_tid_76919;\n    int32_t gtid_73946 = add32(mul32(group_tid_76921, segmap_group_sizze_73951),\n                               local_tid_76920);\n    \n    if (slt32(gtid_73946, 400)) {\n        int32_t x_73958 = ((__global int32_t *) res_mem_76034)[gtid_73946];\n        bool index_concat_cmp_73959 = sle32(300, x_73958);\n        float index_concat_branch_73960;\n        \n        if (index_concat_cmp_73959) {\n            index_concat_branch_73960 = 1.0F;\n        } else {\n            bool index_concat_cmp_73961 = sle32(200, x_73958);\n            float index_concat_branch_73962;\n            \n            if (index_concat_cmp_73961) {\n                index_concat_branch_73962 = 0.0F;\n            } else {\n                index_concat_branch_73962 = 1.0F;\n            }\n            index_concat_branch_73960 = index_concat_branch_73962;\n        }\n        \n        float index_concat_branch_73963;\n        \n        if (index_concat_cmp_73959) {\n            index_concat_branch_73963 = 1.0F;\n        } else {\n            bool index_concat_cmp_73964 = sle32(200, x_73958);\n            float index_concat_branch_73965;\n            \n            if (index_concat_cmp_73964) {\n                index_concat_branch_73965 = 0.0F;\n            } else {\n                bool index_concat_cmp_73966 = sle32(100, x_73958);\n   ",
                   "             float index_concat_branch_73967;\n                \n                if (index_concat_cmp_73966) {\n                    index_concat_branch_73967 = 1.0F;\n                } else {\n                    index_concat_branch_73967 = 0.0F;\n                }\n                index_concat_branch_73965 = index_concat_branch_73967;\n            }\n            index_concat_branch_73963 = index_concat_branch_73965;\n        }\n        \n        float index_concat_branch_73968;\n        \n        if (index_concat_cmp_73959) {\n            index_concat_branch_73968 = 1.0F;\n        } else {\n            bool index_concat_cmp_73969 = sle32(200, x_73958);\n            float index_concat_branch_73970;\n            \n            if (index_concat_cmp_73969) {\n                index_concat_branch_73970 = 1.0F;\n            } else {\n                index_concat_branch_73970 = 0.0F;\n            }\n            index_concat_branch_73968 = index_concat_branch_73970;\n        }\n        \n        float index_concat_branch_73971;\n        \n        if (index_concat_cmp_73959) {\n            int32_t index_concat_i_73972 = sub32(x_73958, 300);\n            int32_t new_index_73973 = squot32(index_concat_i_73972, 10);\n            float binop_y_75915 = sitofp_i32_f32(new_index_73973);\n            float binop_y_75916 = 6.0F * binop_y_75915;\n            float index_primexp_75917 = -30.0F + binop_y_75916;\n            \n            index_concat_branch_73971 = index_primexp_75917;\n        } else {\n            bool index_concat_cmp_73977 = sle32(200, x_73958);\n            float index_concat_branch_73978;\n            \n            if (index_concat_cmp_73977) {\n                index_concat_branch_73978 = 30.0F;\n            } else {\n                bool index_concat_cmp_73979 = sle32(100, x_73958);\n                float index_concat_branch_73980;\n                \n                if (index_concat_cmp_73979) {\n                    int32_t index_concat_i_73981 = sub32(x_73958, 100);\n                    int32_t new_index_73982 =",
                   " squot32(index_concat_i_73981, 10);\n                    float binop_y_75912 = sitofp_i32_f32(new_index_73982);\n                    float binop_y_75913 = 6.0F * binop_y_75912;\n                    float index_primexp_75914 = -30.0F + binop_y_75913;\n                    \n                    index_concat_branch_73980 = index_primexp_75914;\n                } else {\n                    index_concat_branch_73980 = -30.0F;\n                }\n                index_concat_branch_73978 = index_concat_branch_73980;\n            }\n            index_concat_branch_73971 = index_concat_branch_73978;\n        }\n        \n        float index_concat_branch_73986;\n        \n        if (index_concat_cmp_73959) {\n            index_concat_branch_73986 = -30.0F;\n        } else {\n            bool index_concat_cmp_73987 = sle32(200, x_73958);\n            float index_concat_branch_73988;\n            \n            if (index_concat_cmp_73987) {\n                int32_t index_concat_i_73989 = sub32(x_73958, 200);\n                int32_t new_index_73990 = squot32(index_concat_i_73989, 10);\n                float binop_y_75921 = sitofp_i32_f32(new_index_73990);\n                float binop_y_75922 = 6.0F * binop_y_75921;\n                float index_primexp_75923 = -30.0F + binop_y_75922;\n                \n                index_concat_branch_73988 = index_primexp_75923;\n            } else {\n                bool index_concat_cmp_73994 = sle32(100, x_73958);\n                float index_concat_branch_73995;\n                \n                if (index_concat_cmp_73994) {\n                    int32_t index_concat_i_73996 = sub32(x_73958, 100);\n                    int32_t binop_x_73997 = squot32(index_concat_i_73996, 10);\n                    int32_t binop_y_73998 = mul32(10, binop_x_73997);\n                    int32_t new_index_73999 = sub32(index_concat_i_73996,\n                                                    binop_y_73998);\n                    float binop_y_74000 = sitofp_i32_f32(new_index_73999);\n             ",
                   "       float binop_y_74001 = 6.0F * binop_y_74000;\n                    float index_primexp_74002 = -30.0F + binop_y_74001;\n                    \n                    index_concat_branch_73995 = index_primexp_74002;\n                } else {\n                    int32_t new_index_74003 = squot32(x_73958, 10);\n                    float binop_y_75918 = sitofp_i32_f32(new_index_74003);\n                    float binop_y_75919 = 6.0F * binop_y_75918;\n                    float index_primexp_75920 = -30.0F + binop_y_75919;\n                    \n                    index_concat_branch_73995 = index_primexp_75920;\n                }\n                index_concat_branch_73988 = index_concat_branch_73995;\n            }\n            index_concat_branch_73986 = index_concat_branch_73988;\n        }\n        \n        float index_concat_branch_74007;\n        \n        if (index_concat_cmp_73959) {\n            int32_t index_concat_i_74008 = sub32(x_73958, 300);\n            int32_t binop_x_74009 = squot32(index_concat_i_74008, 10);\n            int32_t binop_y_74010 = mul32(10, binop_x_74009);\n            int32_t new_index_74011 = sub32(index_concat_i_74008,\n                                            binop_y_74010);\n            float binop_y_74012 = sitofp_i32_f32(new_index_74011);\n            float binop_y_74013 = 6.0F * binop_y_74012;\n            float index_primexp_74014 = -30.0F + binop_y_74013;\n            \n            index_concat_branch_74007 = index_primexp_74014;\n        } else {\n            bool index_concat_cmp_74015 = sle32(200, x_73958);\n            float index_concat_branch_74016;\n            \n            if (index_concat_cmp_74015) {\n                int32_t index_concat_i_74017 = sub32(x_73958, 200);\n                int32_t binop_x_74018 = squot32(index_concat_i_74017, 10);\n                int32_t binop_y_74019 = mul32(10, binop_x_74018);\n                int32_t new_index_74020 = sub32(index_concat_i_74017,\n                                                binop_y_74019);\n         ",
                   "       float binop_y_74021 = sitofp_i32_f32(new_index_74020);\n                float binop_y_74022 = 6.0F * binop_y_74021;\n                float index_primexp_74023 = -30.0F + binop_y_74022;\n                \n                index_concat_branch_74016 = index_primexp_74023;\n            } else {\n                bool index_concat_cmp_74024 = sle32(100, x_73958);\n                float index_concat_branch_74025;\n                \n                if (index_concat_cmp_74024) {\n                    index_concat_branch_74025 = -30.0F;\n                } else {\n                    int32_t binop_x_74026 = squot32(x_73958, 10);\n                    int32_t binop_y_74027 = mul32(10, binop_x_74026);\n                    int32_t new_index_74028 = sub32(x_73958, binop_y_74027);\n                    float binop_y_74029 = sitofp_i32_f32(new_index_74028);\n                    float binop_y_74030 = 6.0F * binop_y_74029;\n                    float index_primexp_74031 = -30.0F + binop_y_74030;\n                    \n                    index_concat_branch_74025 = index_primexp_74031;\n                }\n                index_concat_branch_74016 = index_concat_branch_74025;\n            }\n            index_concat_branch_74007 = index_concat_branch_74016;\n        }\n        \n        float res_74032 = index_concat_branch_73971 - 3.0F;\n        float res_74033 = index_concat_branch_73986 - 3.0F;\n        float res_74034 = index_concat_branch_74007 - 3.0F;\n        float res_74035 = 3.0F + index_concat_branch_73971;\n        float res_74036 = 3.0F + index_concat_branch_73986;\n        float res_74037 = 3.0F + index_concat_branch_74007;\n        float y_74038 = res_74035 - res_74032;\n        float res_74039 = res_74032 + y_74038;\n        float y_74040 = res_74036 - res_74033;\n        float res_74041 = res_74033 + y_74040;\n        float y_74042 = res_74037 - res_74034;\n        float res_74043 = res_74034 + y_74042;\n        float x_74044 = res_74039 - res_70540;\n        float res_74045 = x_74044 / y_70577;\n        fl",
                   "oat x_74046 = res_74041 - res_70541;\n        float res_74047 = x_74046 / y_70578;\n        float x_74048 = res_74043 - res_70542;\n        float res_74049 = x_74048 / y_70579;\n        float max_arg_74050 = 1024.0F * res_74045;\n        float res_74051 = fmax32(0.0F, max_arg_74050);\n        float res_74052 = fmin32(1023.0F, res_74051);\n        float max_arg_74053 = 1024.0F * res_74047;\n        float res_74054 = fmax32(0.0F, max_arg_74053);\n        float res_74055 = fmin32(1023.0F, res_74054);\n        float max_arg_74056 = 1024.0F * res_74049;\n        float res_74057 = fmax32(0.0F, max_arg_74056);\n        float res_74058 = fmin32(1023.0F, res_74057);\n        int32_t unsign_arg_74059 = fptoui_f32_i32(res_74052);\n        int32_t x_74060 = mul32(65537, unsign_arg_74059);\n        int32_t v_74061 = -16776961 & x_74060;\n        int32_t x_74062 = mul32(257, v_74061);\n        int32_t v_74063 = 251719695 & x_74062;\n        int32_t x_74064 = mul32(17, v_74063);\n        int32_t v_74065 = -1022611261 & x_74064;\n        int32_t x_74066 = mul32(5, v_74065);\n        int32_t v_74067 = 1227133513 & x_74066;\n        int32_t unsign_arg_74068 = fptoui_f32_i32(res_74055);\n        int32_t x_74069 = mul32(65537, unsign_arg_74068);\n        int32_t v_74070 = -16776961 & x_74069;\n        int32_t x_74071 = mul32(257, v_74070);\n        int32_t v_74072 = 251719695 & x_74071;\n        int32_t x_74073 = mul32(17, v_74072);\n        int32_t v_74074 = -1022611261 & x_74073;\n        int32_t x_74075 = mul32(5, v_74074);\n        int32_t v_74076 = 1227133513 & x_74075;\n        int32_t unsign_arg_74077 = fptoui_f32_i32(res_74058);\n        int32_t x_74078 = mul32(65537, unsign_arg_74077);\n        int32_t v_74079 = -16776961 & x_74078;\n        int32_t x_74080 = mul32(257, v_74079);\n        int32_t v_74081 = 251719695 & x_74080;\n        int32_t x_74082 = mul32(17, v_74081);\n        int32_t v_74083 = -1022611261 & x_74082;\n        int32_t x_74084 = mul32(5, v_74083);\n        int32_t v_74085 = 1227133513 & x_74084;",
                   "\n        int32_t x_74086 = mul32(4, v_74067);\n        int32_t y_74087 = mul32(2, v_74076);\n        int32_t x_74088 = add32(x_74086, y_74087);\n        int32_t res_74089 = add32(v_74085, x_74088);\n        \n        ((__global int32_t *) mem_76037)[gtid_73946] = res_74089;\n        ((__global float *) mem_76040)[gtid_73946] = index_concat_branch_73960;\n        ((__global float *) mem_76043)[gtid_73946] = index_concat_branch_73963;\n        ((__global float *) mem_76046)[gtid_73946] = index_concat_branch_73968;\n        ((__global float *) mem_76049)[gtid_73946] = index_concat_branch_73971;\n        ((__global float *) mem_76052)[gtid_73946] = index_concat_branch_73986;\n        ((__global float *) mem_76055)[gtid_73946] = index_concat_branch_74007;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_73951\n}\n__kernel void segmap_74091(__global int *global_failure,\n                           int failure_is_an_option, __global\n                           int *global_failure_args, __global\n                           unsigned char *mem_76037, __global\n                           unsigned char *mem_76057, __global\n                           unsigned char *mem_76060, __global\n                           unsigned char *mem_76062, __global\n                           unsigned char *mem_76065, __global\n                           unsigned char *mem_76068, __global\n                           unsigned char *mem_76071)\n{\n    #define segmap_group_sizze_74095 (render_rgbboxzisegmap_group_sizze_74094)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76924;\n    int32_t local_tid_76925;\n    int32_t group_sizze_76928;\n    int32_t wave_sizze_76927;\n    int32_t group_tid_76926;\n    \n    global_tid_76924 = get_global_id(0);\n    local_tid_76925 = get_local_id(0);\n    group_sizze_76928 = get_local_size(0);\n    wave_sizze_76927 = LOCKSTEP_WIDTH;\n    group_tid_76926 = ge",
                   "t_group_id(0);\n    \n    int32_t phys_tid_74091 = global_tid_76924;\n    int32_t gtid_74090 = add32(mul32(group_tid_76926, segmap_group_sizze_74095),\n                               local_tid_76925);\n    \n    if (slt32(gtid_74090, 399)) {\n        int32_t res_elem_74103 = ((__global int32_t *) mem_76037)[gtid_74090];\n        int32_t lifted_0_delta_arg_74104 = add32(1, gtid_74090);\n        int32_t Lj_74105 = ((__global\n                             int32_t *) mem_76037)[lifted_0_delta_arg_74104];\n        bool cond_74106 = res_elem_74103 == Lj_74105;\n        int32_t res_74107;\n        \n        if (cond_74106) {\n            int32_t clzz_arg_74108 = gtid_74090 ^ lifted_0_delta_arg_74104;\n            int32_t res_74109;\n            \n            res_74109 = futrts_clzz32(clzz_arg_74108);\n            \n            int32_t res_74110 = add32(32, res_74109);\n            \n            res_74107 = res_74110;\n        } else {\n            int32_t clzz_arg_74111 = res_elem_74103 ^ Lj_74105;\n            int32_t res_74112;\n            \n            res_74112 = futrts_clzz32(clzz_arg_74111);\n            res_74107 = res_74112;\n        }\n        \n        int32_t lifted_0_delta_arg_74113 = sub32(gtid_74090, 1);\n        bool cond_74114 = sle32(0, lifted_0_delta_arg_74113);\n        int32_t res_74115;\n        \n        if (cond_74114) {\n            int32_t Lj_74116 = ((__global\n                                 int32_t *) mem_76037)[lifted_0_delta_arg_74113];\n            bool cond_74117 = res_elem_74103 == Lj_74116;\n            int32_t res_74118;\n            \n            if (cond_74117) {\n                int32_t clzz_arg_74119 = gtid_74090 ^ lifted_0_delta_arg_74113;\n                int32_t res_74120;\n                \n                res_74120 = futrts_clzz32(clzz_arg_74119);\n                \n                int32_t res_74121 = add32(32, res_74120);\n                \n                res_74118 = res_74121;\n            } else {\n                int32_t clzz_arg_74122 = res_elem_74103 ^ Lj_74116;\n        ",
                   "        int32_t res_74123;\n                \n                res_74123 = futrts_clzz32(clzz_arg_74122);\n                res_74118 = res_74123;\n            }\n            res_74115 = res_74118;\n        } else {\n            res_74115 = -1;\n        }\n        \n        int32_t sgn_arg_74124 = sub32(res_74107, res_74115);\n        int32_t res_74125 = (sgn_arg_74124 > 0) - (sgn_arg_74124 < 0);\n        int32_t lifted_0_delta_arg_74126 = sub32(gtid_74090, res_74125);\n        bool cond_74127 = sle32(0, lifted_0_delta_arg_74126);\n        bool res_74128 = slt32(lifted_0_delta_arg_74126, 400);\n        bool x_74129 = cond_74127 && res_74128;\n        int32_t res_74130;\n        \n        if (x_74129) {\n            int32_t Lj_74131 = ((__global\n                                 int32_t *) mem_76037)[lifted_0_delta_arg_74126];\n            bool cond_74132 = res_elem_74103 == Lj_74131;\n            int32_t res_74133;\n            \n            if (cond_74132) {\n                int32_t clzz_arg_74134 = gtid_74090 ^ lifted_0_delta_arg_74126;\n                int32_t res_74135;\n                \n                res_74135 = futrts_clzz32(clzz_arg_74134);\n                \n                int32_t res_74136 = add32(32, res_74135);\n                \n                res_74133 = res_74136;\n            } else {\n                int32_t clzz_arg_74137 = res_elem_74103 ^ Lj_74131;\n                int32_t res_74138;\n                \n                res_74138 = futrts_clzz32(clzz_arg_74137);\n                res_74133 = res_74138;\n            }\n            res_74130 = res_74133;\n        } else {\n            res_74130 = -1;\n        }\n        \n        int32_t y_74139 = mul32(2, res_74125);\n        int32_t lifted_0_delta_arg_74140 = add32(gtid_74090, y_74139);\n        bool cond_74141 = sle32(0, lifted_0_delta_arg_74140);\n        bool res_74142 = slt32(lifted_0_delta_arg_74140, 400);\n        bool x_74143 = cond_74141 && res_74142;\n        int32_t res_74144;\n        \n        if (x_74143) {\n            int32_t Lj_74145",
                   " = ((__global\n                                 int32_t *) mem_76037)[lifted_0_delta_arg_74140];\n            bool cond_74146 = res_elem_74103 == Lj_74145;\n            int32_t res_74147;\n            \n            if (cond_74146) {\n                int32_t clzz_arg_74148 = gtid_74090 ^ lifted_0_delta_arg_74140;\n                int32_t res_74149;\n                \n                res_74149 = futrts_clzz32(clzz_arg_74148);\n                \n                int32_t res_74150 = add32(32, res_74149);\n                \n                res_74147 = res_74150;\n            } else {\n                int32_t clzz_arg_74151 = res_elem_74103 ^ Lj_74145;\n                int32_t res_74152;\n                \n                res_74152 = futrts_clzz32(clzz_arg_74151);\n                res_74147 = res_74152;\n            }\n            res_74144 = res_74147;\n        } else {\n            res_74144 = -1;\n        }\n        \n        bool loop_cond_74153 = slt32(res_74130, res_74144);\n        bool l_max_74154;\n        int32_t l_max_74155;\n        bool loop_while_74156;\n        int32_t l_max_74157;\n        \n        loop_while_74156 = loop_cond_74153;\n        l_max_74157 = 2;\n        while (loop_while_74156) {\n            int32_t loopres_74158 = mul32(2, l_max_74157);\n            int32_t y_74159 = mul32(res_74125, loopres_74158);\n            int32_t lifted_0_delta_arg_74160 = add32(gtid_74090, y_74159);\n            bool cond_74161 = sle32(0, lifted_0_delta_arg_74160);\n            bool res_74162 = slt32(lifted_0_delta_arg_74160, 400);\n            bool x_74163 = cond_74161 && res_74162;\n            int32_t res_74164;\n            \n            if (x_74163) {\n                int32_t Lj_74165 = ((__global\n                                     int32_t *) mem_76037)[lifted_0_delta_arg_74160];\n                bool cond_74166 = res_elem_74103 == Lj_74165;\n                int32_t res_74167;\n                \n                if (cond_74166) {\n                    int32_t clzz_arg_74168 = gtid_74090 ^\n                   ",
                   "         lifted_0_delta_arg_74160;\n                    int32_t res_74169;\n                    \n                    res_74169 = futrts_clzz32(clzz_arg_74168);\n                    \n                    int32_t res_74170 = add32(32, res_74169);\n                    \n                    res_74167 = res_74170;\n                } else {\n                    int32_t clzz_arg_74171 = res_elem_74103 ^ Lj_74165;\n                    int32_t res_74172;\n                    \n                    res_74172 = futrts_clzz32(clzz_arg_74171);\n                    res_74167 = res_74172;\n                }\n                res_74164 = res_74167;\n            } else {\n                res_74164 = -1;\n            }\n            \n            bool loop_cond_74173 = slt32(res_74130, res_74164);\n            bool loop_while_tmp_76929 = loop_cond_74173;\n            int32_t l_max_tmp_76930;\n            \n            l_max_tmp_76930 = loopres_74158;\n            loop_while_74156 = loop_while_tmp_76929;\n            l_max_74157 = l_max_tmp_76930;\n        }\n        l_max_74154 = loop_while_74156;\n        l_max_74155 = l_max_74157;\n        \n        int32_t loop_init_74174 = sdiv32(l_max_74155, 2);\n        bool loop_cond_74175 = slt32(0, loop_init_74174);\n        bool l_74176;\n        int32_t l_74177;\n        int32_t l_74178;\n        bool loop_while_74179;\n        int32_t l_74180;\n        int32_t t_74181;\n        \n        loop_while_74179 = loop_cond_74175;\n        l_74180 = 0;\n        t_74181 = loop_init_74174;\n        while (loop_while_74179) {\n            int32_t x_74182 = add32(l_74180, t_74181);\n            int32_t y_74183 = mul32(res_74125, x_74182);\n            int32_t lifted_0_delta_arg_74184 = add32(gtid_74090, y_74183);\n            bool cond_74185 = sle32(0, lifted_0_delta_arg_74184);\n            bool res_74186 = slt32(lifted_0_delta_arg_74184, 400);\n            bool x_74187 = cond_74185 && res_74186;\n            int32_t res_74188;\n            \n            if (x_74187) {\n                int32_t Lj_74189 ",
                   "= ((__global\n                                     int32_t *) mem_76037)[lifted_0_delta_arg_74184];\n                bool cond_74190 = res_elem_74103 == Lj_74189;\n                int32_t res_74191;\n                \n                if (cond_74190) {\n                    int32_t clzz_arg_74192 = gtid_74090 ^\n                            lifted_0_delta_arg_74184;\n                    int32_t res_74193;\n                    \n                    res_74193 = futrts_clzz32(clzz_arg_74192);\n                    \n                    int32_t res_74194 = add32(32, res_74193);\n                    \n                    res_74191 = res_74194;\n                } else {\n                    int32_t clzz_arg_74195 = res_elem_74103 ^ Lj_74189;\n                    int32_t res_74196;\n                    \n                    res_74196 = futrts_clzz32(clzz_arg_74195);\n                    res_74191 = res_74196;\n                }\n                res_74188 = res_74191;\n            } else {\n                res_74188 = -1;\n            }\n            \n            bool cond_74197 = slt32(res_74130, res_74188);\n            int32_t loopres_74198;\n            \n            if (cond_74197) {\n                loopres_74198 = x_74182;\n            } else {\n                loopres_74198 = l_74180;\n            }\n            \n            int32_t loopres_74199;\n            \n            if (cond_74197) {\n                int32_t res_74200 = sdiv32(t_74181, 2);\n                \n                loopres_74199 = res_74200;\n            } else {\n                int32_t res_74201 = sdiv32(t_74181, 2);\n                \n                loopres_74199 = res_74201;\n            }\n            \n            bool loop_cond_74202 = slt32(0, loopres_74199);\n            bool loop_while_tmp_76931 = loop_cond_74202;\n            int32_t l_tmp_76932 = loopres_74198;\n            int32_t t_tmp_76933;\n            \n            t_tmp_76933 = loopres_74199;\n            loop_while_74179 = loop_while_tmp_76931;\n            l_74180 = l_tmp_76932;\n     ",
                   "       t_74181 = t_tmp_76933;\n        }\n        l_74176 = loop_while_74179;\n        l_74177 = l_74180;\n        l_74178 = t_74181;\n        \n        int32_t y_74203 = mul32(res_74125, l_74177);\n        int32_t j_74204 = add32(gtid_74090, y_74203);\n        bool cond_74205 = sle32(0, j_74204);\n        bool res_74206 = slt32(j_74204, 400);\n        bool x_74207 = cond_74205 && res_74206;\n        int32_t res_74208;\n        \n        if (x_74207) {\n            int32_t Lj_74209 = ((__global int32_t *) mem_76037)[j_74204];\n            bool cond_74210 = res_elem_74103 == Lj_74209;\n            int32_t res_74211;\n            \n            if (cond_74210) {\n                int32_t clzz_arg_74212 = gtid_74090 ^ j_74204;\n                int32_t res_74213;\n                \n                res_74213 = futrts_clzz32(clzz_arg_74212);\n                \n                int32_t res_74214 = add32(32, res_74213);\n                \n                res_74211 = res_74214;\n            } else {\n                int32_t clzz_arg_74215 = res_elem_74103 ^ Lj_74209;\n                int32_t res_74216;\n                \n                res_74216 = futrts_clzz32(clzz_arg_74215);\n                res_74211 = res_74216;\n            }\n            res_74208 = res_74211;\n        } else {\n            res_74208 = -1;\n        }\n        \n        bool loop_cond_74217 = sle32(1, l_74177);\n        bool s_74218;\n        int32_t s_74219;\n        int32_t s_74220;\n        bool loop_while_74221;\n        int32_t s_74222;\n        int32_t q_74223;\n        \n        loop_while_74221 = loop_cond_74217;\n        s_74222 = 0;\n        q_74223 = 1;\n        while (loop_while_74221) {\n            int32_t div_rounding_up_arg_74224 = mul32(2, q_74223);\n            int32_t x_74225 = add32(l_74177, div_rounding_up_arg_74224);\n            int32_t x_74226 = sub32(x_74225, 1);\n            bool zzero_74227 = div_rounding_up_arg_74224 == 0;\n            bool nonzzero_74228 = !zzero_74227;\n            bool nonzzero_cert_74229;\n            \n         ",
                   "   if (!nonzzero_74228) {\n                if (atomic_cmpxchg(global_failure, -1, 1) == -1) {\n                    ;\n                }\n                return;\n            }\n            \n            int32_t res_74230 = sdiv32(x_74226, div_rounding_up_arg_74224);\n            int32_t x_74231 = add32(s_74222, res_74230);\n            int32_t y_74232 = mul32(res_74125, x_74231);\n            int32_t lifted_0_delta_arg_74233 = add32(gtid_74090, y_74232);\n            bool cond_74234 = sle32(0, lifted_0_delta_arg_74233);\n            bool res_74235 = slt32(lifted_0_delta_arg_74233, 400);\n            bool x_74236 = cond_74234 && res_74235;\n            int32_t res_74237;\n            \n            if (x_74236) {\n                int32_t Lj_74238 = ((__global\n                                     int32_t *) mem_76037)[lifted_0_delta_arg_74233];\n                bool cond_74239 = res_elem_74103 == Lj_74238;\n                int32_t res_74240;\n                \n                if (cond_74239) {\n                    int32_t clzz_arg_74241 = gtid_74090 ^\n                            lifted_0_delta_arg_74233;\n                    int32_t res_74242;\n                    \n                    res_74242 = futrts_clzz32(clzz_arg_74241);\n                    \n                    int32_t res_74243 = add32(32, res_74242);\n                    \n                    res_74240 = res_74243;\n                } else {\n                    int32_t clzz_arg_74244 = res_elem_74103 ^ Lj_74238;\n                    int32_t res_74245;\n                    \n                    res_74245 = futrts_clzz32(clzz_arg_74244);\n                    res_74240 = res_74245;\n                }\n                res_74237 = res_74240;\n            } else {\n                res_74237 = -1;\n            }\n            \n            bool cond_74246 = slt32(res_74208, res_74237);\n            int32_t loopres_74247;\n            \n            if (cond_74246) {\n                loopres_74247 = x_74231;\n            } else {\n                loopres_74247 = s_",
                   "74222;\n            }\n            \n            bool loop_cond_74248 = sle32(div_rounding_up_arg_74224, l_74177);\n            bool loop_while_tmp_76934 = loop_cond_74248;\n            int32_t s_tmp_76935 = loopres_74247;\n            int32_t q_tmp_76936;\n            \n            q_tmp_76936 = div_rounding_up_arg_74224;\n            loop_while_74221 = loop_while_tmp_76934;\n            s_74222 = s_tmp_76935;\n            q_74223 = q_tmp_76936;\n        }\n        s_74218 = loop_while_74221;\n        s_74219 = s_74222;\n        s_74220 = q_74223;\n        \n        int32_t y_74249 = mul32(res_74125, s_74219);\n        int32_t x_74250 = add32(gtid_74090, y_74249);\n        int32_t res_74251 = smin32(0, res_74125);\n        int32_t gamma_74252 = add32(x_74250, res_74251);\n        int32_t res_74253 = smin32(gtid_74090, j_74204);\n        bool cond_74254 = res_74253 == gamma_74252;\n        int8_t res_74255;\n        \n        if (cond_74254) {\n            res_74255 = 1;\n        } else {\n            res_74255 = 0;\n        }\n        \n        int32_t res_74256;\n        \n        if (cond_74254) {\n            res_74256 = -1;\n        } else {\n            res_74256 = gamma_74252;\n        }\n        \n        int32_t res_74257 = smax32(gtid_74090, j_74204);\n        int32_t y_74258 = add32(1, gamma_74252);\n        bool cond_74259 = res_74257 == y_74258;\n        int8_t res_74260;\n        \n        if (cond_74259) {\n            res_74260 = 1;\n        } else {\n            res_74260 = 0;\n        }\n        \n        int32_t res_74261;\n        \n        if (cond_74259) {\n            res_74261 = -1;\n        } else {\n            res_74261 = y_74258;\n        }\n        ((__global int8_t *) mem_76057)[gtid_74090] = res_74255;\n        ((__global int32_t *) mem_76060)[gtid_74090] = gamma_74252;\n        ((__global int8_t *) mem_76062)[gtid_74090] = res_74260;\n        ((__global int32_t *) mem_76065)[gtid_74090] = y_74258;\n        ((__global int32_t *) mem_76068)[gtid_74090] = res_74256;\n        ((__global int32_t *) m",
                   "em_76071)[gtid_74090] = res_74261;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_74095\n}\n__kernel void segmap_74263(__global int *global_failure, __global\n                           unsigned char *mem_76068, __global\n                           unsigned char *mem_76071, __global\n                           unsigned char *mem_76074)\n{\n    #define segmap_group_sizze_74267 (render_rgbboxzisegmap_group_sizze_74266)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76937;\n    int32_t local_tid_76938;\n    int32_t group_sizze_76941;\n    int32_t wave_sizze_76940;\n    int32_t group_tid_76939;\n    \n    global_tid_76937 = get_global_id(0);\n    local_tid_76938 = get_local_id(0);\n    group_sizze_76941 = get_local_size(0);\n    wave_sizze_76940 = LOCKSTEP_WIDTH;\n    group_tid_76939 = get_group_id(0);\n    \n    int32_t phys_tid_74263 = global_tid_76937;\n    int32_t write_i_74262 = add32(mul32(group_tid_76939,\n                                        segmap_group_sizze_74267),\n                                  local_tid_76938);\n    \n    if (slt32(write_i_74262, 399)) {\n        int32_t write_index_71020 = ((__global\n                                      int32_t *) mem_76068)[write_i_74262];\n        int32_t write_index_71022 = ((__global\n                                      int32_t *) mem_76071)[write_i_74262];\n        \n        if (sle32(0, write_index_71020) && slt32(write_index_71020, 399)) {\n            ((__global int32_t *) mem_76074)[write_index_71020] = write_i_74262;\n        }\n        if (sle32(0, write_index_71022) && slt32(write_index_71022, 399)) {\n            ((__global int32_t *) mem_76074)[write_index_71022] = write_i_74262;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_74267\n}\n__kernel void segmap_74275(__global int *global_failure, __global\n                           unsigned char *mem_76049, __global\n    ",
                   "                       unsigned char *mem_76052, __global\n                           unsigned char *mem_76055, __global\n                           unsigned char *mem_76057, __global\n                           unsigned char *mem_76060, __global\n                           unsigned char *mem_76062, __global\n                           unsigned char *mem_76065, __global\n                           unsigned char *inners_mem_76078, __global\n                           unsigned char *inners_mem_76079, __global\n                           unsigned char *inners_mem_76080, __global\n                           unsigned char *inners_mem_76081, __global\n                           unsigned char *inners_mem_76082, __global\n                           unsigned char *inners_mem_76083, __global\n                           unsigned char *mem_76086, __global\n                           unsigned char *mem_76089, __global\n                           unsigned char *mem_76092, __global\n                           unsigned char *mem_76095, __global\n                           unsigned char *mem_76098, __global\n                           unsigned char *mem_76101)\n{\n    #define segmap_group_sizze_74279 (render_rgbboxzisegmap_group_sizze_74278)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76954;\n    int32_t local_tid_76955;\n    int32_t group_sizze_76958;\n    int32_t wave_sizze_76957;\n    int32_t group_tid_76956;\n    \n    global_tid_76954 = get_global_id(0);\n    local_tid_76955 = get_local_id(0);\n    group_sizze_76958 = get_local_size(0);\n    wave_sizze_76957 = LOCKSTEP_WIDTH;\n    group_tid_76956 = get_group_id(0);\n    \n    int32_t phys_tid_74275 = global_tid_76954;\n    int32_t gtid_74274 = add32(mul32(group_tid_76956, segmap_group_sizze_74279),\n                               local_tid_76955);\n    \n    if (slt32(gtid_74274, 399)) {\n        int8_t x_74286 = ((__global int8_t *) m",
                   "em_76057)[gtid_74274];\n        int32_t x_74287 = ((__global int32_t *) mem_76060)[gtid_74274];\n        int8_t x_74288 = ((__global int8_t *) mem_76062)[gtid_74274];\n        int32_t x_74289 = ((__global int32_t *) mem_76065)[gtid_74274];\n        bool match_constr_74290 = 1 == x_74288;\n        float res_74291;\n        float res_74292;\n        float res_74293;\n        float res_74294;\n        float res_74295;\n        float res_74296;\n        \n        if (match_constr_74290) {\n            float lifted_0_bbf_arg_74297 = ((__global\n                                             float *) mem_76049)[x_74289];\n            float lifted_0_bbf_arg_74298 = ((__global\n                                             float *) mem_76052)[x_74289];\n            float lifted_0_bbf_arg_74299 = ((__global\n                                             float *) mem_76055)[x_74289];\n            float res_74300 = lifted_0_bbf_arg_74297 - 3.0F;\n            float res_74301 = lifted_0_bbf_arg_74298 - 3.0F;\n            float res_74302 = lifted_0_bbf_arg_74299 - 3.0F;\n            float res_74303 = 3.0F + lifted_0_bbf_arg_74297;\n            float res_74304 = 3.0F + lifted_0_bbf_arg_74298;\n            float res_74305 = 3.0F + lifted_0_bbf_arg_74299;\n            \n            res_74291 = res_74303;\n            res_74292 = res_74304;\n            res_74293 = res_74305;\n            res_74294 = res_74300;\n            res_74295 = res_74301;\n            res_74296 = res_74302;\n        } else {\n            float res_74306 = ((__global float *) inners_mem_76078)[x_74289];\n            float res_74307 = ((__global float *) inners_mem_76079)[x_74289];\n            float res_74308 = ((__global float *) inners_mem_76080)[x_74289];\n            float res_74309 = ((__global float *) inners_mem_76081)[x_74289];\n            float res_74310 = ((__global float *) inners_mem_76082)[x_74289];\n            float res_74311 = ((__global float *) inners_mem_76083)[x_74289];\n            \n            res_74291 = res_74306;\n            r",
                   "es_74292 = res_74307;\n            res_74293 = res_74308;\n            res_74294 = res_74309;\n            res_74295 = res_74310;\n            res_74296 = res_74311;\n        }\n        \n        bool match_constr_74312 = 1 == x_74286;\n        float res_74313;\n        float res_74314;\n        float res_74315;\n        float res_74316;\n        float res_74317;\n        float res_74318;\n        \n        if (match_constr_74312) {\n            float lifted_0_bbf_arg_74319 = ((__global\n                                             float *) mem_76049)[x_74287];\n            float lifted_0_bbf_arg_74320 = ((__global\n                                             float *) mem_76052)[x_74287];\n            float lifted_0_bbf_arg_74321 = ((__global\n                                             float *) mem_76055)[x_74287];\n            float res_74322 = lifted_0_bbf_arg_74319 - 3.0F;\n            float res_74323 = lifted_0_bbf_arg_74320 - 3.0F;\n            float res_74324 = lifted_0_bbf_arg_74321 - 3.0F;\n            float res_74325 = 3.0F + lifted_0_bbf_arg_74319;\n            float res_74326 = 3.0F + lifted_0_bbf_arg_74320;\n            float res_74327 = 3.0F + lifted_0_bbf_arg_74321;\n            \n            res_74313 = res_74325;\n            res_74314 = res_74326;\n            res_74315 = res_74327;\n            res_74316 = res_74322;\n            res_74317 = res_74323;\n            res_74318 = res_74324;\n        } else {\n            float res_74328 = ((__global float *) inners_mem_76078)[x_74287];\n            float res_74329 = ((__global float *) inners_mem_76079)[x_74287];\n            float res_74330 = ((__global float *) inners_mem_76080)[x_74287];\n            float res_74331 = ((__global float *) inners_mem_76081)[x_74287];\n            float res_74332 = ((__global float *) inners_mem_76082)[x_74287];\n            float res_74333 = ((__global float *) inners_mem_76083)[x_74287];\n            \n            res_74313 = res_74328;\n            res_74314 = res_74329;\n            res_74315 = res_74330;",
                   "\n            res_74316 = res_74331;\n            res_74317 = res_74332;\n            res_74318 = res_74333;\n        }\n        \n        float res_74334 = fmin32(res_74294, res_74316);\n        float res_74335 = fmin32(res_74295, res_74317);\n        float res_74336 = fmin32(res_74296, res_74318);\n        float res_74337 = fmax32(res_74291, res_74313);\n        float res_74338 = fmax32(res_74292, res_74314);\n        float res_74339 = fmax32(res_74293, res_74315);\n        \n        ((__global float *) mem_76086)[gtid_74274] = res_74337;\n        ((__global float *) mem_76089)[gtid_74274] = res_74338;\n        ((__global float *) mem_76092)[gtid_74274] = res_74339;\n        ((__global float *) mem_76095)[gtid_74274] = res_74334;\n        ((__global float *) mem_76098)[gtid_74274] = res_74335;\n        ((__global float *) mem_76101)[gtid_74274] = res_74336;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_74279\n}\n__kernel void segmap_74344(__global int *global_failure, int32_t h_70471,\n                           int32_t w_70472, float res_71098, float res_71099,\n                           float res_71103, float res_71105, __global\n                           unsigned char *mem_76040, __global\n                           unsigned char *mem_76043, __global\n                           unsigned char *mem_76046, __global\n                           unsigned char *mem_76049, __global\n                           unsigned char *mem_76052, __global\n                           unsigned char *mem_76055, __global\n                           unsigned char *mem_76057, __global\n                           unsigned char *mem_76060, __global\n                           unsigned char *mem_76062, __global\n                           unsigned char *mem_76065, __global\n                           unsigned char *mem_76074, __global\n                           unsigned char *inners_mem_76102, __global\n                           unsigned char *inners_mem_76103, __global\n                           unsig",
                   "ned char *inners_mem_76104, __global\n                           unsigned char *inners_mem_76105, __global\n                           unsigned char *inners_mem_76106, __global\n                           unsigned char *inners_mem_76107, __global\n                           unsigned char *mem_76112)\n{\n    #define segmap_group_sizze_74350 (render_rgbboxzisegmap_group_sizze_74349)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76959;\n    int32_t local_tid_76960;\n    int32_t group_sizze_76963;\n    int32_t wave_sizze_76962;\n    int32_t group_tid_76961;\n    \n    global_tid_76959 = get_global_id(0);\n    local_tid_76960 = get_local_id(0);\n    group_sizze_76963 = get_local_size(0);\n    wave_sizze_76962 = LOCKSTEP_WIDTH;\n    group_tid_76961 = get_group_id(0);\n    \n    int32_t phys_tid_74344 = global_tid_76959;\n    int32_t gtid_74342 = squot32(add32(mul32(group_tid_76961,\n                                             segmap_group_sizze_74350),\n                                       local_tid_76960), w_70472);\n    int32_t gtid_74343;\n    \n    gtid_74343 = sub32(add32(mul32(group_tid_76961, segmap_group_sizze_74350),\n                             local_tid_76960),\n                       mul32(squot32(add32(mul32(group_tid_76961,\n                                                 segmap_group_sizze_74350),\n                                           local_tid_76960), w_70472),\n                             w_70472));\n    if (slt32(gtid_74342, h_70471) && slt32(gtid_74343, w_70472)) {\n        int32_t convop_x_75930 = sub32(h_70471, gtid_74342);\n        float binop_x_75931 = sitofp_i32_f32(convop_x_75930);\n        float binop_y_75932 = binop_x_75931 / res_71099;\n        float binop_y_75933 = 1.0851642F * binop_y_75932;\n        float binop_x_75934 = 28.75031F + binop_y_75933;\n        float index_primexp_75935 = binop_x_75934 - 30.0F;\n        float binop_y_75927 = -1.",
                   "0851642F * binop_y_75932;\n        float binop_x_75928 = 29.835474F + binop_y_75927;\n        float index_primexp_75929 = binop_x_75928 - 30.0F;\n        float res_74360 = sitofp_i32_f32(gtid_74343);\n        float u_74361 = res_74360 / res_71098;\n        float res_74362 = res_71105 * u_74361;\n        float res_74363 = res_71103 + res_74362;\n        bool lifted_1_zlzb_arg_74364;\n        float lifted_1_zlzb_arg_74365;\n        float lifted_1_zlzb_arg_74366;\n        float lifted_1_zlzb_arg_74367;\n        float lifted_1_zlzb_arg_74368;\n        float lifted_1_zlzb_arg_74369;\n        float lifted_1_zlzb_arg_74370;\n        int32_t lifted_1_zlzb_arg_74371;\n        float lifted_1_zlzb_arg_74372;\n        float lifted_1_zlzb_arg_74373;\n        float lifted_1_zlzb_arg_74374;\n        float lifted_1_zlzb_arg_74375;\n        float lifted_1_zlzb_arg_74376;\n        float lifted_1_zlzb_arg_74377;\n        bool loop_while_74378;\n        float r_74379;\n        float r_74380;\n        float r_74381;\n        float r_74382;\n        float r_74383;\n        float r_74384;\n        int32_t depth_74385;\n        float light_74386;\n        float light_74387;\n        float light_74388;\n        float colour_74389;\n        float colour_74390;\n        float colour_74391;\n        \n        loop_while_74378 = 1;\n        r_74379 = res_74363;\n        r_74380 = index_primexp_75935;\n        r_74381 = index_primexp_75929;\n        r_74382 = 0.0F;\n        r_74383 = 30.0F;\n        r_74384 = 30.0F;\n        depth_74385 = 0;\n        light_74386 = 1.0F;\n        light_74387 = 1.0F;\n        light_74388 = 1.0F;\n        colour_74389 = 0.0F;\n        colour_74390 = 0.0F;\n        colour_74391 = 0.0F;\n        while (loop_while_74378) {\n            bool lifted_1_zlzb_arg_74392;\n            int32_t lifted_1_zlzb_arg_74393;\n            float lifted_1_zlzb_arg_74394;\n            int32_t lifted_1_zlzb_arg_74395;\n            int8_t lifted_1_zlzb_arg_74396;\n            int32_t lifted_1_zlzb_arg_74397;\n            bool loop_while_74398;\n",
                   "            int32_t acc_74399;\n            float acc_74400;\n            int32_t cur_74401;\n            int8_t prev_74402;\n            int32_t prev_74403;\n            \n            loop_while_74398 = 1;\n            acc_74399 = -1;\n            acc_74400 = 1.0e9F;\n            cur_74401 = 0;\n            prev_74402 = 0;\n            prev_74403 = -1;\n            while (loop_while_74398) {\n                int8_t loopres_74410 = ((__global\n                                         int8_t *) mem_76057)[cur_74401];\n                int32_t loopres_74411 = ((__global\n                                          int32_t *) mem_76060)[cur_74401];\n                int8_t loopres_74413 = ((__global\n                                         int8_t *) mem_76062)[cur_74401];\n                int32_t loopres_74414 = ((__global\n                                          int32_t *) mem_76065)[cur_74401];\n                bool from_left_74415 = prev_74402 == loopres_74410;\n                bool from_left_74416 = prev_74403 == loopres_74411;\n                bool eq_74417 = from_left_74415 && from_left_74416;\n                bool from_right_74418 = prev_74402 == loopres_74413;\n                bool from_right_74419 = prev_74403 == loopres_74414;\n                bool eq_74420 = from_right_74418 && from_right_74419;\n                int8_t rec_child_74421;\n                int8_t rec_child_74422;\n                int32_t rec_child_74423;\n                \n                if (eq_74417) {\n                    rec_child_74421 = 1;\n                    rec_child_74422 = loopres_74413;\n                    rec_child_74423 = loopres_74414;\n                } else {\n                    float loopres_74404 = ((__global\n                                            float *) inners_mem_76102)[cur_74401];\n                    float loopres_74405 = ((__global\n                                            float *) inners_mem_76103)[cur_74401];\n                    float loopres_74406 = ((__global\n                                   ",
                   "         float *) inners_mem_76104)[cur_74401];\n                    float loopres_74407 = ((__global\n                                            float *) inners_mem_76105)[cur_74401];\n                    float loopres_74408 = ((__global\n                                            float *) inners_mem_76106)[cur_74401];\n                    float loopres_74409 = ((__global\n                                            float *) inners_mem_76107)[cur_74401];\n                    bool cond_74424 = !eq_74420;\n                    float invD_74425 = 1.0F / r_74379;\n                    float x_74426 = loopres_74407 - r_74382;\n                    float t0_74427 = invD_74425 * x_74426;\n                    float x_74428 = loopres_74404 - r_74382;\n                    float t1_74429 = invD_74425 * x_74428;\n                    bool cond_74430 = invD_74425 < 0.0F;\n                    float res_74431;\n                    \n                    if (cond_74430) {\n                        res_74431 = t1_74429;\n                    } else {\n                        res_74431 = t0_74427;\n                    }\n                    \n                    float res_74432;\n                    \n                    if (cond_74430) {\n                        res_74432 = t0_74427;\n                    } else {\n                        res_74432 = t1_74429;\n                    }\n                    \n                    float res_74433 = fmax32(1.0e-3F, res_74431);\n                    float res_74434 = fmin32(1.0e9F, res_74432);\n                    bool cond_74435 = res_74434 <= res_74433;\n                    float invD_74436 = 1.0F / r_74380;\n                    float x_74437 = loopres_74408 - r_74383;\n                    float t0_74438 = invD_74436 * x_74437;\n                    float x_74439 = loopres_74405 - r_74383;\n                    float t1_74440 = invD_74436 * x_74439;\n                    bool cond_74441 = invD_74436 < 0.0F;\n                    float res_74442;\n                    \n                    ",
                   "if (cond_74441) {\n                        res_74442 = t1_74440;\n                    } else {\n                        res_74442 = t0_74438;\n                    }\n                    \n                    float res_74443;\n                    \n                    if (cond_74441) {\n                        res_74443 = t0_74438;\n                    } else {\n                        res_74443 = t1_74440;\n                    }\n                    \n                    float res_74444 = fmax32(res_74433, res_74442);\n                    float res_74445 = fmin32(res_74434, res_74443);\n                    bool cond_74446 = res_74445 <= res_74444;\n                    float invD_74447 = 1.0F / r_74381;\n                    float x_74448 = loopres_74409 - r_74384;\n                    float t0_74449 = invD_74447 * x_74448;\n                    float x_74450 = loopres_74406 - r_74384;\n                    float t1_74451 = invD_74447 * x_74450;\n                    bool cond_74452 = invD_74447 < 0.0F;\n                    float res_74453;\n                    \n                    if (cond_74452) {\n                        res_74453 = t1_74451;\n                    } else {\n                        res_74453 = t0_74449;\n                    }\n                    \n                    float res_74454;\n                    \n                    if (cond_74452) {\n                        res_74454 = t0_74449;\n                    } else {\n                        res_74454 = t1_74451;\n                    }\n                    \n                    float res_74455 = fmax32(res_74444, res_74453);\n                    float res_74456 = fmin32(res_74445, res_74454);\n                    bool complement_arg_74457 = res_74456 <= res_74455;\n                    bool res_74458 = !complement_arg_74457;\n                    bool x_74459 = !cond_74446;\n                    bool y_74460 = res_74458 && x_74459;\n                    bool x_74461 = !cond_74435;\n                    bool y_74462 = y_74460 && x_74461;\n            ",
                   "        bool x_74463 = cond_74424 && y_74462;\n                    int8_t res_74464;\n                    \n                    if (x_74463) {\n                        res_74464 = 1;\n                    } else {\n                        res_74464 = 0;\n                    }\n                    \n                    int8_t res_74465;\n                    \n                    if (x_74463) {\n                        res_74465 = loopres_74410;\n                    } else {\n                        res_74465 = 0;\n                    }\n                    \n                    int32_t res_74466;\n                    \n                    if (x_74463) {\n                        res_74466 = loopres_74411;\n                    } else {\n                        res_74466 = 0;\n                    }\n                    rec_child_74421 = res_74464;\n                    rec_child_74422 = res_74465;\n                    rec_child_74423 = res_74466;\n                }\n                \n                bool match_constr_74467 = 0 == rec_child_74421;\n                int32_t loopres_74468;\n                float loopres_74469;\n                int32_t loopres_74470;\n                int8_t loopres_74471;\n                int32_t loopres_74472;\n                \n                if (match_constr_74467) {\n                    int32_t loopres_74412 = ((__global\n                                              int32_t *) mem_76074)[cur_74401];\n                    \n                    loopres_74468 = acc_74399;\n                    loopres_74469 = acc_74400;\n                    loopres_74470 = loopres_74412;\n                    loopres_74471 = 0;\n                    loopres_74472 = cur_74401;\n                } else {\n                    bool match_constr_74473 = 0 == rec_child_74422;\n                    int32_t res_74474;\n                    \n                    if (match_constr_74473) {\n                        res_74474 = rec_child_74423;\n                    } else {\n                        res_74474 = cur_74401;\n      ",
                   "              }\n                    \n                    int8_t res_74475;\n                    \n                    if (match_constr_74473) {\n                        res_74475 = 0;\n                    } else {\n                        res_74475 = rec_child_74422;\n                    }\n                    \n                    int32_t res_74476;\n                    \n                    if (match_constr_74473) {\n                        res_74476 = cur_74401;\n                    } else {\n                        res_74476 = rec_child_74423;\n                    }\n                    \n                    int32_t res_74477;\n                    float res_74478;\n                    \n                    if (match_constr_74473) {\n                        res_74477 = acc_74399;\n                        res_74478 = acc_74400;\n                    } else {\n                        float lifted_2_op_arg_74479 = ((__global\n                                                        float *) mem_76049)[rec_child_74423];\n                        float lifted_2_op_arg_74480 = ((__global\n                                                        float *) mem_76052)[rec_child_74423];\n                        float lifted_2_op_arg_74481 = ((__global\n                                                        float *) mem_76055)[rec_child_74423];\n                        float res_74482 = r_74382 - lifted_2_op_arg_74479;\n                        float res_74483 = r_74383 - lifted_2_op_arg_74480;\n                        float res_74484 = r_74384 - lifted_2_op_arg_74481;\n                        float res_74485 = r_74379 * r_74379;\n                        float res_74486 = r_74380 * r_74380;\n                        float res_74487 = r_74381 * r_74381;\n                        float x_74488 = res_74485 + res_74486;\n                        float res_74489 = res_74487 + x_74488;\n                        float res_74490 = r_74379 * res_74482;\n                        float res_74491 = r_74380 * res_74483;\n             ",
                   "           float res_74492 = r_74381 * res_74484;\n                        float x_74493 = res_74490 + res_74491;\n                        float res_74494 = res_74492 + x_74493;\n                        float res_74495 = res_74482 * res_74482;\n                        float res_74496 = res_74483 * res_74483;\n                        float res_74497 = res_74484 * res_74484;\n                        float x_74498 = res_74495 + res_74496;\n                        float res_74499 = res_74497 + x_74498;\n                        float c_74500 = res_74499 - 9.0F;\n                        float x_74501 = res_74494 * res_74494;\n                        float y_74502 = res_74489 * c_74500;\n                        float discriminant_74503 = x_74501 - y_74502;\n                        bool cond_74504 = discriminant_74503 <= 0.0F;\n                        int8_t res_74505;\n                        float res_74506;\n                        \n                        if (cond_74504) {\n                            res_74505 = 0;\n                            res_74506 = 0.0F;\n                        } else {\n                            float x_74507 = 0.0F - res_74494;\n                            float res_74508;\n                            \n                            res_74508 = futrts_sqrt32(discriminant_74503);\n                            \n                            float x_74509 = x_74507 - res_74508;\n                            float lifted_0_f_arg_74510 = x_74509 / res_74489;\n                            bool cond_74511 = lifted_0_f_arg_74510 < acc_74400;\n                            bool res_74512 = 1.0e-3F < lifted_0_f_arg_74510;\n                            bool x_74513 = cond_74511 && res_74512;\n                            float res_74514;\n                            \n                            if (x_74513) {\n                                res_74514 = lifted_0_f_arg_74510;\n                            } else {\n                                res_74514 = 0.0F;\n                            }\n ",
                   "                           \n                            int8_t res_74515;\n                            float res_74516;\n                            \n                            if (x_74513) {\n                                res_74515 = 1;\n                                res_74516 = res_74514;\n                            } else {\n                                float x_74517 = x_74507 + res_74508;\n                                float lifted_0_f_arg_74518 = x_74517 /\n                                      res_74489;\n                                bool cond_74519 = lifted_0_f_arg_74518 <\n                                     acc_74400;\n                                bool res_74520 = 1.0e-3F < lifted_0_f_arg_74518;\n                                bool x_74521 = cond_74519 && res_74520;\n                                int8_t res_74522;\n                                \n                                if (x_74521) {\n                                    res_74522 = 1;\n                                } else {\n                                    res_74522 = 0;\n                                }\n                                \n                                float res_74523;\n                                \n                                if (x_74521) {\n                                    res_74523 = lifted_0_f_arg_74518;\n                                } else {\n                                    res_74523 = 0.0F;\n                                }\n                                res_74515 = res_74522;\n                                res_74516 = res_74523;\n                            }\n                            res_74505 = res_74515;\n                            res_74506 = res_74516;\n                        }\n                        \n                        bool match_constr_74524 = 0 == res_74505;\n                        int32_t res_74525;\n                        \n                        if (match_constr_74524) {\n                            res_74525 = acc_74399;\n           ",
                   "             } else {\n                            res_74525 = rec_child_74423;\n                        }\n                        \n                        float res_74526;\n                        \n                        if (match_constr_74524) {\n                            res_74526 = acc_74400;\n                        } else {\n                            res_74526 = res_74506;\n                        }\n                        res_74477 = res_74525;\n                        res_74478 = res_74526;\n                    }\n                    loopres_74468 = res_74477;\n                    loopres_74469 = res_74478;\n                    loopres_74470 = res_74474;\n                    loopres_74471 = res_74475;\n                    loopres_74472 = res_74476;\n                }\n                \n                bool loop_cond_74527 = loopres_74470 == -1;\n                bool loop_cond_74528 = !loop_cond_74527;\n                bool loop_while_tmp_76978 = loop_cond_74528;\n                int32_t acc_tmp_76979 = loopres_74468;\n                float acc_tmp_76980 = loopres_74469;\n                int32_t cur_tmp_76981 = loopres_74470;\n                int8_t prev_tmp_76982 = loopres_74471;\n                int32_t prev_tmp_76983;\n                \n                prev_tmp_76983 = loopres_74472;\n                loop_while_74398 = loop_while_tmp_76978;\n                acc_74399 = acc_tmp_76979;\n                acc_74400 = acc_tmp_76980;\n                cur_74401 = cur_tmp_76981;\n                prev_74402 = prev_tmp_76982;\n                prev_74403 = prev_tmp_76983;\n            }\n            lifted_1_zlzb_arg_74392 = loop_while_74398;\n            lifted_1_zlzb_arg_74393 = acc_74399;\n            lifted_1_zlzb_arg_74394 = acc_74400;\n            lifted_1_zlzb_arg_74395 = cur_74401;\n            lifted_1_zlzb_arg_74396 = prev_74402;\n            lifted_1_zlzb_arg_74397 = prev_74403;\n            \n            bool cond_74529 = sle32(0, lifted_1_zlzb_arg_74393);\n            int8_t res_74530;\n     ",
                   "       float res_74531;\n            float res_74532;\n            float res_74533;\n            float res_74534;\n            float res_74535;\n            float res_74536;\n            float res_74537;\n            float res_74538;\n            float res_74539;\n            \n            if (cond_74529) {\n                float res_74543 = ((__global\n                                    float *) mem_76049)[lifted_1_zlzb_arg_74393];\n                float res_74544 = ((__global\n                                    float *) mem_76052)[lifted_1_zlzb_arg_74393];\n                float res_74545 = ((__global\n                                    float *) mem_76055)[lifted_1_zlzb_arg_74393];\n                float sphere_hit_arg_74546 = 1.0F + lifted_1_zlzb_arg_74394;\n                float res_74547 = r_74382 - res_74543;\n                float res_74548 = r_74383 - res_74544;\n                float res_74549 = r_74384 - res_74545;\n                float res_74550 = r_74379 * r_74379;\n                float res_74551 = r_74380 * r_74380;\n                float res_74552 = r_74381 * r_74381;\n                float x_74553 = res_74550 + res_74551;\n                float res_74554 = res_74552 + x_74553;\n                float res_74555 = r_74379 * res_74547;\n                float res_74556 = r_74380 * res_74548;\n                float res_74557 = r_74381 * res_74549;\n                float x_74558 = res_74555 + res_74556;\n                float res_74559 = res_74557 + x_74558;\n                float res_74560 = res_74547 * res_74547;\n                float res_74561 = res_74548 * res_74548;\n                float res_74562 = res_74549 * res_74549;\n                float x_74563 = res_74560 + res_74561;\n                float res_74564 = res_74562 + x_74563;\n                float c_74565 = res_74564 - 9.0F;\n                float x_74566 = res_74559 * res_74559;\n                float y_74567 = res_74554 * c_74565;\n                float discriminant_74568 = x_74566 - y_74567;\n                bool cond_74569 =",
                   " discriminant_74568 <= 0.0F;\n                int8_t res_74570;\n                float res_74571;\n                float res_74572;\n                float res_74573;\n                float res_74574;\n                float res_74575;\n                float res_74576;\n                float res_74577;\n                float res_74578;\n                float res_74579;\n                \n                if (cond_74569) {\n                    res_74570 = 0;\n                    res_74571 = 0.0F;\n                    res_74572 = 0.0F;\n                    res_74573 = 0.0F;\n                    res_74574 = 0.0F;\n                    res_74575 = 0.0F;\n                    res_74576 = 0.0F;\n                    res_74577 = 0.0F;\n                    res_74578 = 0.0F;\n                    res_74579 = 0.0F;\n                } else {\n                    float res_74540 = ((__global\n                                        float *) mem_76040)[lifted_1_zlzb_arg_74393];\n                    float res_74541 = ((__global\n                                        float *) mem_76043)[lifted_1_zlzb_arg_74393];\n                    float res_74542 = ((__global\n                                        float *) mem_76046)[lifted_1_zlzb_arg_74393];\n                    float x_74580 = 0.0F - res_74559;\n                    float res_74581;\n                    \n                    res_74581 = futrts_sqrt32(discriminant_74568);\n                    \n                    float x_74582 = x_74580 - res_74581;\n                    float lifted_0_f_arg_74583 = x_74582 / res_74554;\n                    bool cond_74584 = lifted_0_f_arg_74583 <\n                         sphere_hit_arg_74546;\n                    bool res_74585 = 1.0e-3F < lifted_0_f_arg_74583;\n                    bool x_74586 = cond_74584 && res_74585;\n                    float res_74587;\n                    \n                    if (x_74586) {\n                        res_74587 = res_74540;\n                    } else {\n                        res_74587 = 0.0F;\n       ",
                   "             }\n                    \n                    float res_74588;\n                    \n                    if (x_74586) {\n                        res_74588 = res_74541;\n                    } else {\n                        res_74588 = 0.0F;\n                    }\n                    \n                    float res_74589;\n                    \n                    if (x_74586) {\n                        res_74589 = res_74542;\n                    } else {\n                        res_74589 = 0.0F;\n                    }\n                    \n                    float res_74590;\n                    float res_74591;\n                    float res_74592;\n                    float res_74593;\n                    float res_74594;\n                    float res_74595;\n                    \n                    if (x_74586) {\n                        float res_74596 = r_74379 * lifted_0_f_arg_74583;\n                        float res_74597 = r_74380 * lifted_0_f_arg_74583;\n                        float res_74598 = r_74381 * lifted_0_f_arg_74583;\n                        float res_74599 = r_74382 + res_74596;\n                        float res_74600 = r_74383 + res_74597;\n                        float res_74601 = r_74384 + res_74598;\n                        float res_74602 = res_74599 - res_74543;\n                        float res_74603 = res_74600 - res_74544;\n                        float res_74604 = res_74601 - res_74545;\n                        float res_74605 = 0.33333334F * res_74602;\n                        float res_74606 = 0.33333334F * res_74603;\n                        float res_74607 = 0.33333334F * res_74604;\n                        \n                        res_74590 = res_74605;\n                        res_74591 = res_74606;\n                        res_74592 = res_74607;\n                        res_74593 = res_74599;\n                        res_74594 = res_74600;\n                        res_74595 = res_74601;\n                    } else {\n                        res_74590 =",
                   " 0.0F;\n                        res_74591 = 0.0F;\n                        res_74592 = 0.0F;\n                        res_74593 = 0.0F;\n                        res_74594 = 0.0F;\n                        res_74595 = 0.0F;\n                    }\n                    \n                    int8_t res_74608;\n                    float res_74609;\n                    float res_74610;\n                    float res_74611;\n                    float res_74612;\n                    float res_74613;\n                    float res_74614;\n                    float res_74615;\n                    float res_74616;\n                    float res_74617;\n                    \n                    if (x_74586) {\n                        res_74608 = 1;\n                        res_74609 = res_74587;\n                        res_74610 = res_74588;\n                        res_74611 = res_74589;\n                        res_74612 = res_74590;\n                        res_74613 = res_74591;\n                        res_74614 = res_74592;\n                        res_74615 = res_74593;\n                        res_74616 = res_74594;\n                        res_74617 = res_74595;\n                    } else {\n                        float x_74618 = x_74580 + res_74581;\n                        float lifted_0_f_arg_74619 = x_74618 / res_74554;\n                        bool cond_74620 = lifted_0_f_arg_74619 <\n                             sphere_hit_arg_74546;\n                        bool res_74621 = 1.0e-3F < lifted_0_f_arg_74619;\n                        bool x_74622 = cond_74620 && res_74621;\n                        int8_t res_74623;\n                        \n                        if (x_74622) {\n                            res_74623 = 1;\n                        } else {\n                            res_74623 = 0;\n                        }\n                        \n                        float res_74624;\n                        \n                        if (x_74622) {\n                            res_74624 = res_74540;\n  ",
                   "                      } else {\n                            res_74624 = 0.0F;\n                        }\n                        \n                        float res_74625;\n                        \n                        if (x_74622) {\n                            res_74625 = res_74541;\n                        } else {\n                            res_74625 = 0.0F;\n                        }\n                        \n                        float res_74626;\n                        \n                        if (x_74622) {\n                            res_74626 = res_74542;\n                        } else {\n                            res_74626 = 0.0F;\n                        }\n                        \n                        float res_74627;\n                        float res_74628;\n                        float res_74629;\n                        float res_74630;\n                        float res_74631;\n                        float res_74632;\n                        \n                        if (x_74622) {\n                            float res_74633 = r_74379 * lifted_0_f_arg_74619;\n                            float res_74634 = r_74380 * lifted_0_f_arg_74619;\n                            float res_74635 = r_74381 * lifted_0_f_arg_74619;\n                            float res_74636 = r_74382 + res_74633;\n                            float res_74637 = r_74383 + res_74634;\n                            float res_74638 = r_74384 + res_74635;\n                            float res_74639 = res_74636 - res_74543;\n                            float res_74640 = res_74637 - res_74544;\n                            float res_74641 = res_74638 - res_74545;\n                            float res_74642 = 0.33333334F * res_74639;\n                            float res_74643 = 0.33333334F * res_74640;\n                            float res_74644 = 0.33333334F * res_74641;\n                            \n                            res_74627 = res_74642;\n                            res_74628 = res_74643;\n    ",
                   "                        res_74629 = res_74644;\n                            res_74630 = res_74636;\n                            res_74631 = res_74637;\n                            res_74632 = res_74638;\n                        } else {\n                            res_74627 = 0.0F;\n                            res_74628 = 0.0F;\n                            res_74629 = 0.0F;\n                            res_74630 = 0.0F;\n                            res_74631 = 0.0F;\n                            res_74632 = 0.0F;\n                        }\n                        res_74608 = res_74623;\n                        res_74609 = res_74624;\n                        res_74610 = res_74625;\n                        res_74611 = res_74626;\n                        res_74612 = res_74627;\n                        res_74613 = res_74628;\n                        res_74614 = res_74629;\n                        res_74615 = res_74630;\n                        res_74616 = res_74631;\n                        res_74617 = res_74632;\n                    }\n                    res_74570 = res_74608;\n                    res_74571 = res_74609;\n                    res_74572 = res_74610;\n                    res_74573 = res_74611;\n                    res_74574 = res_74612;\n                    res_74575 = res_74613;\n                    res_74576 = res_74614;\n                    res_74577 = res_74615;\n                    res_74578 = res_74616;\n                    res_74579 = res_74617;\n                }\n                res_74530 = res_74570;\n                res_74531 = res_74571;\n                res_74532 = res_74572;\n                res_74533 = res_74573;\n                res_74534 = res_74574;\n                res_74535 = res_74575;\n                res_74536 = res_74576;\n                res_74537 = res_74577;\n                res_74538 = res_74578;\n                res_74539 = res_74579;\n            } else {\n                res_74530 = 0;\n                res_74531 = 0.0F;\n                res_74532 = 0.0F;\n               ",
                   " res_74533 = 0.0F;\n                res_74534 = 0.0F;\n                res_74535 = 0.0F;\n                res_74536 = 0.0F;\n                res_74537 = 0.0F;\n                res_74538 = 0.0F;\n                res_74539 = 0.0F;\n            }\n            \n            bool match_constr_74645 = 1 == res_74530;\n            float loopres_74646;\n            float loopres_74647;\n            float loopres_74648;\n            float loopres_74649;\n            float loopres_74650;\n            float loopres_74651;\n            int32_t loopres_74652;\n            float loopres_74653;\n            float loopres_74654;\n            float loopres_74655;\n            float loopres_74656;\n            float loopres_74657;\n            float loopres_74658;\n            \n            if (match_constr_74645) {\n                float res_74659 = r_74379 * r_74379;\n                float res_74660 = r_74380 * r_74380;\n                float res_74661 = r_74381 * r_74381;\n                float x_74662 = res_74659 + res_74660;\n                float res_74663 = res_74661 + x_74662;\n                float res_74664;\n                \n                res_74664 = futrts_sqrt32(res_74663);\n                \n                float scale_arg_74665 = 1.0F / res_74664;\n                float res_74666 = r_74379 * scale_arg_74665;\n                float res_74667 = r_74380 * scale_arg_74665;\n                float res_74668 = r_74381 * scale_arg_74665;\n                float res_74669 = res_74534 * res_74666;\n                float res_74670 = res_74535 * res_74667;\n                float res_74671 = res_74536 * res_74668;\n                float x_74672 = res_74669 + res_74670;\n                float res_74673 = res_74671 + x_74672;\n                float scale_arg_74674 = 2.0F * res_74673;\n                float res_74675 = res_74534 * scale_arg_74674;\n                float res_74676 = res_74535 * scale_arg_74674;\n                float res_74677 = res_74536 * scale_arg_74674;\n                float res_74678 = res_74666 - res_74675",
                   ";\n                float res_74679 = res_74667 - res_74676;\n                float res_74680 = res_74668 - res_74677;\n                float res_74681 = res_74534 * res_74678;\n                float res_74682 = res_74535 * res_74679;\n                float res_74683 = res_74536 * res_74680;\n                float x_74684 = res_74681 + res_74682;\n                float res_74685 = res_74683 + x_74684;\n                bool cond_74686 = 0.0F < res_74685;\n                float res_74687;\n                \n                if (cond_74686) {\n                    res_74687 = res_74678;\n                } else {\n                    res_74687 = 0.0F;\n                }\n                \n                float res_74688;\n                \n                if (cond_74686) {\n                    res_74688 = res_74679;\n                } else {\n                    res_74688 = 0.0F;\n                }\n                \n                float res_74689;\n                \n                if (cond_74686) {\n                    res_74689 = res_74680;\n                } else {\n                    res_74689 = 0.0F;\n                }\n                \n                float res_74690;\n                \n                if (cond_74686) {\n                    res_74690 = res_74537;\n                } else {\n                    res_74690 = 0.0F;\n                }\n                \n                float res_74691;\n                \n                if (cond_74686) {\n                    res_74691 = res_74538;\n                } else {\n                    res_74691 = 0.0F;\n                }\n                \n                float res_74692;\n                \n                if (cond_74686) {\n                    res_74692 = res_74539;\n                } else {\n                    res_74692 = 0.0F;\n                }\n                \n                float res_74693;\n                \n                if (cond_74686) {\n                    res_74693 = res_74531;\n                } else {\n                    res_74693 = 0.0F;\n           ",
                   "     }\n                \n                float res_74694;\n                \n                if (cond_74686) {\n                    res_74694 = res_74532;\n                } else {\n                    res_74694 = 0.0F;\n                }\n                \n                float res_74695;\n                \n                if (cond_74686) {\n                    res_74695 = res_74533;\n                } else {\n                    res_74695 = 0.0F;\n                }\n                \n                float res_74696;\n                \n                if (cond_74686) {\n                    res_74696 = res_74687;\n                } else {\n                    res_74696 = r_74379;\n                }\n                \n                float res_74697;\n                \n                if (cond_74686) {\n                    res_74697 = res_74688;\n                } else {\n                    res_74697 = r_74380;\n                }\n                \n                float res_74698;\n                \n                if (cond_74686) {\n                    res_74698 = res_74689;\n                } else {\n                    res_74698 = r_74381;\n                }\n                \n                float res_74699;\n                \n                if (cond_74686) {\n                    res_74699 = res_74690;\n                } else {\n                    res_74699 = r_74382;\n                }\n                \n                float res_74700;\n                \n                if (cond_74686) {\n                    res_74700 = res_74691;\n                } else {\n                    res_74700 = r_74383;\n                }\n                \n                float res_74701;\n                \n                if (cond_74686) {\n                    res_74701 = res_74692;\n                } else {\n                    res_74701 = r_74384;\n                }\n                \n                int32_t res_74702;\n                float res_74703;\n                float res_74704;\n                float res_74705;\n                float re",
                   "s_74706;\n                float res_74707;\n                float res_74708;\n                \n                if (cond_74686) {\n                    int32_t res_74709 = add32(1, depth_74385);\n                    float res_74710 = light_74386 * res_74693;\n                    float res_74711 = light_74387 * res_74694;\n                    float res_74712 = light_74388 * res_74695;\n                    float res_74713 = light_74386 * colour_74389;\n                    float res_74714 = light_74387 * colour_74390;\n                    float res_74715 = light_74388 * colour_74391;\n                    \n                    res_74702 = res_74709;\n                    res_74703 = res_74710;\n                    res_74704 = res_74711;\n                    res_74705 = res_74712;\n                    res_74706 = res_74713;\n                    res_74707 = res_74714;\n                    res_74708 = res_74715;\n                } else {\n                    float res_74716 = light_74386 * colour_74389;\n                    float res_74717 = light_74387 * colour_74390;\n                    float res_74718 = light_74388 * colour_74391;\n                    \n                    res_74702 = 50;\n                    res_74703 = light_74386;\n                    res_74704 = light_74387;\n                    res_74705 = light_74388;\n                    res_74706 = res_74716;\n                    res_74707 = res_74717;\n                    res_74708 = res_74718;\n                }\n                loopres_74646 = res_74696;\n                loopres_74647 = res_74697;\n                loopres_74648 = res_74698;\n                loopres_74649 = res_74699;\n                loopres_74650 = res_74700;\n                loopres_74651 = res_74701;\n                loopres_74652 = res_74702;\n                loopres_74653 = res_74703;\n                loopres_74654 = res_74704;\n                loopres_74655 = res_74705;\n                loopres_74656 = res_74706;\n                loopres_74657 = res_74707;\n                loopres_",
                   "74658 = res_74708;\n            } else {\n                float res_74719 = r_74379 * r_74379;\n                float res_74720 = r_74380 * r_74380;\n                float res_74721 = r_74381 * r_74381;\n                float x_74722 = res_74719 + res_74720;\n                float res_74723 = res_74721 + x_74722;\n                float res_74724;\n                \n                res_74724 = futrts_sqrt32(res_74723);\n                \n                float scale_arg_74725 = 1.0F / res_74724;\n                float res_74726 = r_74380 * scale_arg_74725;\n                float y_74727 = 1.0F + res_74726;\n                float t_74728 = 0.5F * y_74727;\n                float res_74729 = 0.5F * t_74728;\n                float res_74730 = 0.7F * t_74728;\n                float scale_arg_74731 = 1.0F - t_74728;\n                float res_74732 = res_74729 + scale_arg_74731;\n                float res_74733 = res_74730 + scale_arg_74731;\n                float res_74734 = t_74728 + scale_arg_74731;\n                float res_74735 = light_74386 * res_74732;\n                float res_74736 = light_74387 * res_74733;\n                float res_74737 = light_74388 * res_74734;\n                \n                loopres_74646 = r_74379;\n                loopres_74647 = r_74380;\n                loopres_74648 = r_74381;\n                loopres_74649 = r_74382;\n                loopres_74650 = r_74383;\n                loopres_74651 = r_74384;\n                loopres_74652 = 50;\n                loopres_74653 = light_74386;\n                loopres_74654 = light_74387;\n                loopres_74655 = light_74388;\n                loopres_74656 = res_74735;\n                loopres_74657 = res_74736;\n                loopres_74658 = res_74737;\n            }\n            \n            bool loop_cond_74738 = slt32(loopres_74652, 50);\n            bool loop_while_tmp_76964 = loop_cond_74738;\n            float r_tmp_76965 = loopres_74646;\n            float r_tmp_76966 = loopres_74647;\n            float r_tmp_76967 =",
                   " loopres_74648;\n            float r_tmp_76968 = loopres_74649;\n            float r_tmp_76969 = loopres_74650;\n            float r_tmp_76970 = loopres_74651;\n            int32_t depth_tmp_76971 = loopres_74652;\n            float light_tmp_76972 = loopres_74653;\n            float light_tmp_76973 = loopres_74654;\n            float light_tmp_76974 = loopres_74655;\n            float colour_tmp_76975 = loopres_74656;\n            float colour_tmp_76976 = loopres_74657;\n            float colour_tmp_76977;\n            \n            colour_tmp_76977 = loopres_74658;\n            loop_while_74378 = loop_while_tmp_76964;\n            r_74379 = r_tmp_76965;\n            r_74380 = r_tmp_76966;\n            r_74381 = r_tmp_76967;\n            r_74382 = r_tmp_76968;\n            r_74383 = r_tmp_76969;\n            r_74384 = r_tmp_76970;\n            depth_74385 = depth_tmp_76971;\n            light_74386 = light_tmp_76972;\n            light_74387 = light_tmp_76973;\n            light_74388 = light_tmp_76974;\n            colour_74389 = colour_tmp_76975;\n            colour_74390 = colour_tmp_76976;\n            colour_74391 = colour_tmp_76977;\n        }\n        lifted_1_zlzb_arg_74364 = loop_while_74378;\n        lifted_1_zlzb_arg_74365 = r_74379;\n        lifted_1_zlzb_arg_74366 = r_74380;\n        lifted_1_zlzb_arg_74367 = r_74381;\n        lifted_1_zlzb_arg_74368 = r_74382;\n        lifted_1_zlzb_arg_74369 = r_74383;\n        lifted_1_zlzb_arg_74370 = r_74384;\n        lifted_1_zlzb_arg_74371 = depth_74385;\n        lifted_1_zlzb_arg_74372 = light_74386;\n        lifted_1_zlzb_arg_74373 = light_74387;\n        lifted_1_zlzb_arg_74374 = light_74388;\n        lifted_1_zlzb_arg_74375 = colour_74389;\n        lifted_1_zlzb_arg_74376 = colour_74390;\n        lifted_1_zlzb_arg_74377 = colour_74391;\n        \n        float f32_arg_74739 = 255.99F * lifted_1_zlzb_arg_74375;\n        int32_t res_74740 = fptosi_f32_i32(f32_arg_74739);\n        float f32_arg_74741 = 255.99F * lifted_1_zlzb_arg_74376;\n        int32_t re",
                   "s_74742 = fptosi_f32_i32(f32_arg_74741);\n        float f32_arg_74743 = 255.99F * lifted_1_zlzb_arg_74377;\n        int32_t res_74744 = fptosi_f32_i32(f32_arg_74743);\n        int32_t x_74745 = res_74740 << 16;\n        int32_t y_74746 = res_74742 << 8;\n        int32_t x_74747 = x_74745 | y_74746;\n        int32_t res_74748 = res_74744 | x_74747;\n        \n        ((__global int32_t *) mem_76112)[add32(mul32(gtid_74342, w_70472),\n                                               gtid_74343)] = res_74748;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_74350\n}\n__kernel void segmap_74839(__global int *global_failure, float res_71538,\n                           float res_71540, float y_71570, float y_71572,\n                           int32_t y_71587, __global unsigned char *mem_75992)\n{\n    #define segmap_group_sizze_74843 (render_irregzisegmap_group_sizze_74842)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_77054;\n    int32_t local_tid_77055;\n    int32_t group_sizze_77058;\n    int32_t wave_sizze_77057;\n    int32_t group_tid_77056;\n    \n    global_tid_77054 = get_global_id(0);\n    local_tid_77055 = get_local_id(0);\n    group_sizze_77058 = get_local_size(0);\n    wave_sizze_77057 = LOCKSTEP_WIDTH;\n    group_tid_77056 = get_group_id(0);\n    \n    int32_t phys_tid_74839 = global_tid_77054;\n    int32_t gtid_74838 = add32(mul32(group_tid_77056, segmap_group_sizze_74843),\n                               local_tid_77055);\n    \n    if (slt32(gtid_74838, 10000)) {\n        int32_t new_index_75671 = squot32(gtid_74838, 100);\n        float binop_y_75703 = sitofp_i32_f32(new_index_75671);\n        float binop_y_75704 = 6.0F * binop_y_75703;\n        float index_primexp_75705 = -300.0F + binop_y_75704;\n        int32_t binop_y_75677 = mul32(100, new_index_75671);\n        int32_t new_index_75678 = sub32(gtid_74838, binop_y_75677);\n        float binop_y_7570",
                   "0 = sitofp_i32_f32(new_index_75678);\n        float binop_y_75701 = 6.0F * binop_y_75700;\n        float index_primexp_75702 = -300.0F + binop_y_75701;\n        float res_74852 = index_primexp_75705 - 3.0F;\n        float res_74853 = index_primexp_75702 - 3.0F;\n        float res_74854 = 3.0F + index_primexp_75705;\n        float res_74855 = 3.0F + index_primexp_75702;\n        float y_74856 = res_74854 - res_74852;\n        float res_74857 = res_74852 + y_74856;\n        float y_74858 = res_74855 - res_74853;\n        float res_74859 = res_74853 + y_74858;\n        float x_74860 = res_74857 - res_71538;\n        float res_74861 = x_74860 / y_71570;\n        float x_74862 = res_74859 - res_71540;\n        float res_74863 = x_74862 / y_71572;\n        float max_arg_74864 = 1024.0F * res_74861;\n        float res_74865 = fmax32(0.0F, max_arg_74864);\n        float res_74866 = fmin32(1023.0F, res_74865);\n        float max_arg_74867 = 1024.0F * res_74863;\n        float res_74868 = fmax32(0.0F, max_arg_74867);\n        float res_74869 = fmin32(1023.0F, res_74868);\n        int32_t unsign_arg_74870 = fptoui_f32_i32(res_74866);\n        int32_t x_74871 = mul32(65537, unsign_arg_74870);\n        int32_t v_74872 = -16776961 & x_74871;\n        int32_t x_74873 = mul32(257, v_74872);\n        int32_t v_74874 = 251719695 & x_74873;\n        int32_t x_74875 = mul32(17, v_74874);\n        int32_t v_74876 = -1022611261 & x_74875;\n        int32_t x_74877 = mul32(5, v_74876);\n        int32_t v_74878 = 1227133513 & x_74877;\n        int32_t unsign_arg_74879 = fptoui_f32_i32(res_74869);\n        int32_t x_74880 = mul32(65537, unsign_arg_74879);\n        int32_t v_74881 = -16776961 & x_74880;\n        int32_t x_74882 = mul32(257, v_74881);\n        int32_t v_74883 = 251719695 & x_74882;\n        int32_t x_74884 = mul32(17, v_74883);\n        int32_t v_74885 = -1022611261 & x_74884;\n        int32_t x_74886 = mul32(5, v_74885);\n        int32_t v_74887 = 1227133513 & x_74886;\n        int32_t x_74888 = mul32(4, v_74878);",
                   "\n        int32_t x_74889 = add32(y_71587, x_74888);\n        int32_t res_74890 = add32(v_74887, x_74889);\n        \n        ((__global int32_t *) mem_75992)[gtid_74838] = res_74890;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_74843\n}\n__kernel void segmap_74892(__global int *global_failure, int32_t i_71635,\n                           __global unsigned char *xs_mem_75996, __global\n                           unsigned char *mem_76000)\n{\n    #define segmap_group_sizze_74896 (render_irregzisegmap_group_sizze_74895)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_77070;\n    int32_t local_tid_77071;\n    int32_t group_sizze_77074;\n    int32_t wave_sizze_77073;\n    int32_t group_tid_77072;\n    \n    global_tid_77070 = get_global_id(0);\n    local_tid_77071 = get_local_id(0);\n    group_sizze_77074 = get_local_size(0);\n    wave_sizze_77073 = LOCKSTEP_WIDTH;\n    group_tid_77072 = get_group_id(0);\n    \n    int32_t phys_tid_74892 = global_tid_77070;\n    int32_t gtid_74891 = add32(mul32(group_tid_77072, segmap_group_sizze_74896),\n                               local_tid_77071);\n    \n    if (slt32(gtid_74891, 10000)) {\n        int32_t x_74903 = ((__global int32_t *) xs_mem_75996)[gtid_74891];\n        int32_t unsign_arg_74904 = ashr32(x_74903, i_71635);\n        int32_t unsign_arg_74905 = 1 & unsign_arg_74904;\n        \n        ((__global int32_t *) mem_76000)[gtid_74891] = unsign_arg_74905;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_74896\n}\n__kernel void segmap_74929(__global int *global_failure, int32_t res_71667,\n                           __global unsigned char *xs_mem_75996, __global\n                           unsigned char *xs_mem_75997, __global\n                           unsigned char *mem_76000, __global\n                           unsigned char *mem_76004, __global\n                           unsigned char *mem_76007,",
                   " __global\n                           unsigned char *mem_76010, __global\n                           unsigned char *mem_76019, __global\n                           unsigned char *mem_76024)\n{\n    #define segmap_group_sizze_74933 (render_irregzisegmap_group_sizze_74932)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_77165;\n    int32_t local_tid_77166;\n    int32_t group_sizze_77169;\n    int32_t wave_sizze_77168;\n    int32_t group_tid_77167;\n    \n    global_tid_77165 = get_global_id(0);\n    local_tid_77166 = get_local_id(0);\n    group_sizze_77169 = get_local_size(0);\n    wave_sizze_77168 = LOCKSTEP_WIDTH;\n    group_tid_77167 = get_group_id(0);\n    \n    int32_t phys_tid_74929 = global_tid_77165;\n    int32_t write_i_74928 = add32(mul32(group_tid_77167,\n                                        segmap_group_sizze_74933),\n                                  local_tid_77166);\n    \n    if (slt32(write_i_74928, 10000)) {\n        int32_t x_71681 = ((__global int32_t *) mem_76010)[write_i_74928];\n        int32_t x_71682 = ((__global int32_t *) mem_76004)[write_i_74928];\n        int32_t x_71683 = ((__global int32_t *) mem_76007)[write_i_74928];\n        int32_t x_71684 = ((__global int32_t *) mem_76000)[write_i_74928];\n        int32_t write_value_71685 = ((__global\n                                      int32_t *) xs_mem_75996)[write_i_74928];\n        int32_t write_value_71686 = ((__global\n                                      int32_t *) xs_mem_75997)[write_i_74928];\n        int32_t res_71687 = mul32(x_71681, x_71682);\n        int32_t res_71688 = add32(res_71667, x_71683);\n        int32_t res_71689 = mul32(x_71684, res_71688);\n        int32_t res_71690 = add32(res_71687, res_71689);\n        int32_t res_71691 = sub32(res_71690, 1);\n        \n        if (sle32(0, res_71691) && slt32(res_71691, 10000)) {\n            ((__global int32_t *) mem_76024)[res_71691] = write",
                   "_value_71685;\n        }\n        if (sle32(0, res_71691) && slt32(res_71691, 10000)) {\n            ((__global int32_t *) mem_76019)[res_71691] = write_value_71686;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_74933\n}\n__kernel void segmap_74941(__global int *global_failure, float res_71538,\n                           float res_71540, float y_71570, float y_71572,\n                           int32_t y_71587, __global\n                           unsigned char *res_mem_76034, __global\n                           unsigned char *mem_76037, __global\n                           unsigned char *mem_76040, __global\n                           unsigned char *mem_76043)\n{\n    #define segmap_group_sizze_74945 (render_irregzisegmap_group_sizze_74944)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_77170;\n    int32_t local_tid_77171;\n    int32_t group_sizze_77174;\n    int32_t wave_sizze_77173;\n    int32_t group_tid_77172;\n    \n    global_tid_77170 = get_global_id(0);\n    local_tid_77171 = get_local_id(0);\n    group_sizze_77174 = get_local_size(0);\n    wave_sizze_77173 = LOCKSTEP_WIDTH;\n    group_tid_77172 = get_group_id(0);\n    \n    int32_t phys_tid_74941 = global_tid_77170;\n    int32_t gtid_74940 = add32(mul32(group_tid_77172, segmap_group_sizze_74945),\n                               local_tid_77171);\n    \n    if (slt32(gtid_74940, 10000)) {\n        int32_t x_74952 = ((__global int32_t *) res_mem_76034)[gtid_74940];\n        int32_t new_index_74953 = squot32(x_74952, 100);\n        int32_t binop_y_74954 = mul32(100, new_index_74953);\n        int32_t new_index_74955 = sub32(x_74952, binop_y_74954);\n        float binop_y_75706 = sitofp_i32_f32(new_index_74953);\n        float binop_y_75707 = 6.0F * binop_y_75706;\n        float index_primexp_75708 = -300.0F + binop_y_75707;\n        float binop_y_74957 = sitofp_i32_f32(new_index_74955);\n    ",
                   "    float binop_y_74958 = 6.0F * binop_y_74957;\n        float index_primexp_74959 = -300.0F + binop_y_74958;\n        float res_74960 = index_primexp_75708 - 3.0F;\n        float res_74961 = index_primexp_74959 - 3.0F;\n        float res_74962 = 3.0F + index_primexp_75708;\n        float res_74963 = 3.0F + index_primexp_74959;\n        float y_74964 = res_74962 - res_74960;\n        float res_74965 = res_74960 + y_74964;\n        float y_74966 = res_74963 - res_74961;\n        float res_74967 = res_74961 + y_74966;\n        float x_74968 = res_74965 - res_71538;\n        float res_74969 = x_74968 / y_71570;\n        float x_74970 = res_74967 - res_71540;\n        float res_74971 = x_74970 / y_71572;\n        float max_arg_74972 = 1024.0F * res_74969;\n        float res_74973 = fmax32(0.0F, max_arg_74972);\n        float res_74974 = fmin32(1023.0F, res_74973);\n        float max_arg_74975 = 1024.0F * res_74971;\n        float res_74976 = fmax32(0.0F, max_arg_74975);\n        float res_74977 = fmin32(1023.0F, res_74976);\n        int32_t unsign_arg_74978 = fptoui_f32_i32(res_74974);\n        int32_t x_74979 = mul32(65537, unsign_arg_74978);\n        int32_t v_74980 = -16776961 & x_74979;\n        int32_t x_74981 = mul32(257, v_74980);\n        int32_t v_74982 = 251719695 & x_74981;\n        int32_t x_74983 = mul32(17, v_74982);\n        int32_t v_74984 = -1022611261 & x_74983;\n        int32_t x_74985 = mul32(5, v_74984);\n        int32_t v_74986 = 1227133513 & x_74985;\n        int32_t unsign_arg_74987 = fptoui_f32_i32(res_74977);\n        int32_t x_74988 = mul32(65537, unsign_arg_74987);\n        int32_t v_74989 = -16776961 & x_74988;\n        int32_t x_74990 = mul32(257, v_74989);\n        int32_t v_74991 = 251719695 & x_74990;\n        int32_t x_74992 = mul32(17, v_74991);\n        int32_t v_74993 = -1022611261 & x_74992;\n        int32_t x_74994 = mul32(5, v_74993);\n        int32_t v_74995 = 1227133513 & x_74994;\n        int32_t x_74996 = mul32(4, v_74986);\n        int32_t x_74997 = add32(y_71587,",
                   " x_74996);\n        int32_t res_74998 = add32(v_74995, x_74997);\n        \n        ((__global int32_t *) mem_76037)[gtid_74940] = res_74998;\n        ((__global float *) mem_76040)[gtid_74940] = index_primexp_75708;\n        ((__global float *) mem_76043)[gtid_74940] = index_primexp_74959;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_74945\n}\n__kernel void segmap_75000(__global int *global_failure,\n                           int failure_is_an_option, __global\n                           int *global_failure_args, __global\n                           unsigned char *mem_76037, __global\n                           unsigned char *mem_76045, __global\n                           unsigned char *mem_76048, __global\n                           unsigned char *mem_76050, __global\n                           unsigned char *mem_76053, __global\n                           unsigned char *mem_76056, __global\n                           unsigned char *mem_76059)\n{\n    #define segmap_group_sizze_75004 (render_irregzisegmap_group_sizze_75003)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_77175;\n    int32_t local_tid_77176;\n    int32_t group_sizze_77179;\n    int32_t wave_sizze_77178;\n    int32_t group_tid_77177;\n    \n    global_tid_77175 = get_global_id(0);\n    local_tid_77176 = get_local_id(0);\n    group_sizze_77179 = get_local_size(0);\n    wave_sizze_77178 = LOCKSTEP_WIDTH;\n    group_tid_77177 = get_group_id(0);\n    \n    int32_t phys_tid_75000 = global_tid_77175;\n    int32_t gtid_74999 = add32(mul32(group_tid_77177, segmap_group_sizze_75004),\n                               local_tid_77176);\n    \n    if (slt32(gtid_74999, 9999)) {\n        int32_t res_elem_75012 = ((__global int32_t *) mem_76037)[gtid_74999];\n        int32_t lifted_0_delta_arg_75013 = add32(1, gtid_74999);\n        int32_t Lj_75014 = ((__global\n                             int32_t *) mem_7",
                   "6037)[lifted_0_delta_arg_75013];\n        bool cond_75015 = res_elem_75012 == Lj_75014;\n        int32_t res_75016;\n        \n        if (cond_75015) {\n            int32_t clzz_arg_75017 = gtid_74999 ^ lifted_0_delta_arg_75013;\n            int32_t res_75018;\n            \n            res_75018 = futrts_clzz32(clzz_arg_75017);\n            \n            int32_t res_75019 = add32(32, res_75018);\n            \n            res_75016 = res_75019;\n        } else {\n            int32_t clzz_arg_75020 = res_elem_75012 ^ Lj_75014;\n            int32_t res_75021;\n            \n            res_75021 = futrts_clzz32(clzz_arg_75020);\n            res_75016 = res_75021;\n        }\n        \n        int32_t lifted_0_delta_arg_75022 = sub32(gtid_74999, 1);\n        bool cond_75023 = sle32(0, lifted_0_delta_arg_75022);\n        int32_t res_75024;\n        \n        if (cond_75023) {\n            int32_t Lj_75025 = ((__global\n                                 int32_t *) mem_76037)[lifted_0_delta_arg_75022];\n            bool cond_75026 = res_elem_75012 == Lj_75025;\n            int32_t res_75027;\n            \n            if (cond_75026) {\n                int32_t clzz_arg_75028 = gtid_74999 ^ lifted_0_delta_arg_75022;\n                int32_t res_75029;\n                \n                res_75029 = futrts_clzz32(clzz_arg_75028);\n                \n                int32_t res_75030 = add32(32, res_75029);\n                \n                res_75027 = res_75030;\n            } else {\n                int32_t clzz_arg_75031 = res_elem_75012 ^ Lj_75025;\n                int32_t res_75032;\n                \n                res_75032 = futrts_clzz32(clzz_arg_75031);\n                res_75027 = res_75032;\n            }\n            res_75024 = res_75027;\n        } else {\n            res_75024 = -1;\n        }\n        \n        int32_t sgn_arg_75033 = sub32(res_75016, res_75024);\n        int32_t res_75034 = (sgn_arg_75033 > 0) - (sgn_arg_75033 < 0);\n        int32_t lifted_0_delta_arg_75035 = sub32(gtid_74999, res_75034);\n   ",
                   "     bool cond_75036 = sle32(0, lifted_0_delta_arg_75035);\n        bool res_75037 = slt32(lifted_0_delta_arg_75035, 10000);\n        bool x_75038 = cond_75036 && res_75037;\n        int32_t res_75039;\n        \n        if (x_75038) {\n            int32_t Lj_75040 = ((__global\n                                 int32_t *) mem_76037)[lifted_0_delta_arg_75035];\n            bool cond_75041 = res_elem_75012 == Lj_75040;\n            int32_t res_75042;\n            \n            if (cond_75041) {\n                int32_t clzz_arg_75043 = gtid_74999 ^ lifted_0_delta_arg_75035;\n                int32_t res_75044;\n                \n                res_75044 = futrts_clzz32(clzz_arg_75043);\n                \n                int32_t res_75045 = add32(32, res_75044);\n                \n                res_75042 = res_75045;\n            } else {\n                int32_t clzz_arg_75046 = res_elem_75012 ^ Lj_75040;\n                int32_t res_75047;\n                \n                res_75047 = futrts_clzz32(clzz_arg_75046);\n                res_75042 = res_75047;\n            }\n            res_75039 = res_75042;\n        } else {\n            res_75039 = -1;\n        }\n        \n        int32_t y_75048 = mul32(2, res_75034);\n        int32_t lifted_0_delta_arg_75049 = add32(gtid_74999, y_75048);\n        bool cond_75050 = sle32(0, lifted_0_delta_arg_75049);\n        bool res_75051 = slt32(lifted_0_delta_arg_75049, 10000);\n        bool x_75052 = cond_75050 && res_75051;\n        int32_t res_75053;\n        \n        if (x_75052) {\n            int32_t Lj_75054 = ((__global\n                                 int32_t *) mem_76037)[lifted_0_delta_arg_75049];\n            bool cond_75055 = res_elem_75012 == Lj_75054;\n            int32_t res_75056;\n            \n            if (cond_75055) {\n                int32_t clzz_arg_75057 = gtid_74999 ^ lifted_0_delta_arg_75049;\n                int32_t res_75058;\n                \n                res_75058 = futrts_clzz32(clzz_arg_75057);\n                \n                int32_t",
                   " res_75059 = add32(32, res_75058);\n                \n                res_75056 = res_75059;\n            } else {\n                int32_t clzz_arg_75060 = res_elem_75012 ^ Lj_75054;\n                int32_t res_75061;\n                \n                res_75061 = futrts_clzz32(clzz_arg_75060);\n                res_75056 = res_75061;\n            }\n            res_75053 = res_75056;\n        } else {\n            res_75053 = -1;\n        }\n        \n        bool loop_cond_75062 = slt32(res_75039, res_75053);\n        bool l_max_75063;\n        int32_t l_max_75064;\n        bool loop_while_75065;\n        int32_t l_max_75066;\n        \n        loop_while_75065 = loop_cond_75062;\n        l_max_75066 = 2;\n        while (loop_while_75065) {\n            int32_t loopres_75067 = mul32(2, l_max_75066);\n            int32_t y_75068 = mul32(res_75034, loopres_75067);\n            int32_t lifted_0_delta_arg_75069 = add32(gtid_74999, y_75068);\n            bool cond_75070 = sle32(0, lifted_0_delta_arg_75069);\n            bool res_75071 = slt32(lifted_0_delta_arg_75069, 10000);\n            bool x_75072 = cond_75070 && res_75071;\n            int32_t res_75073;\n            \n            if (x_75072) {\n                int32_t Lj_75074 = ((__global\n                                     int32_t *) mem_76037)[lifted_0_delta_arg_75069];\n                bool cond_75075 = res_elem_75012 == Lj_75074;\n                int32_t res_75076;\n                \n                if (cond_75075) {\n                    int32_t clzz_arg_75077 = gtid_74999 ^\n                            lifted_0_delta_arg_75069;\n                    int32_t res_75078;\n                    \n                    res_75078 = futrts_clzz32(clzz_arg_75077);\n                    \n                    int32_t res_75079 = add32(32, res_75078);\n                    \n                    res_75076 = res_75079;\n                } else {\n                    int32_t clzz_arg_75080 = res_elem_75012 ^ Lj_75074;\n                    int32_t res_75081;\n                ",
                   "    \n                    res_75081 = futrts_clzz32(clzz_arg_75080);\n                    res_75076 = res_75081;\n                }\n                res_75073 = res_75076;\n            } else {\n                res_75073 = -1;\n            }\n            \n            bool loop_cond_75082 = slt32(res_75039, res_75073);\n            bool loop_while_tmp_77180 = loop_cond_75082;\n            int32_t l_max_tmp_77181;\n            \n            l_max_tmp_77181 = loopres_75067;\n            loop_while_75065 = loop_while_tmp_77180;\n            l_max_75066 = l_max_tmp_77181;\n        }\n        l_max_75063 = loop_while_75065;\n        l_max_75064 = l_max_75066;\n        \n        int32_t loop_init_75083 = sdiv32(l_max_75064, 2);\n        bool loop_cond_75084 = slt32(0, loop_init_75083);\n        bool l_75085;\n        int32_t l_75086;\n        int32_t l_75087;\n        bool loop_while_75088;\n        int32_t l_75089;\n        int32_t t_75090;\n        \n        loop_while_75088 = loop_cond_75084;\n        l_75089 = 0;\n        t_75090 = loop_init_75083;\n        while (loop_while_75088) {\n            int32_t x_75091 = add32(l_75089, t_75090);\n            int32_t y_75092 = mul32(res_75034, x_75091);\n            int32_t lifted_0_delta_arg_75093 = add32(gtid_74999, y_75092);\n            bool cond_75094 = sle32(0, lifted_0_delta_arg_75093);\n            bool res_75095 = slt32(lifted_0_delta_arg_75093, 10000);\n            bool x_75096 = cond_75094 && res_75095;\n            int32_t res_75097;\n            \n            if (x_75096) {\n                int32_t Lj_75098 = ((__global\n                                     int32_t *) mem_76037)[lifted_0_delta_arg_75093];\n                bool cond_75099 = res_elem_75012 == Lj_75098;\n                int32_t res_75100;\n                \n                if (cond_75099) {\n                    int32_t clzz_arg_75101 = gtid_74999 ^\n                            lifted_0_delta_arg_75093;\n                    int32_t res_75102;\n                    \n                    res_75102 = futr",
                   "ts_clzz32(clzz_arg_75101);\n                    \n                    int32_t res_75103 = add32(32, res_75102);\n                    \n                    res_75100 = res_75103;\n                } else {\n                    int32_t clzz_arg_75104 = res_elem_75012 ^ Lj_75098;\n                    int32_t res_75105;\n                    \n                    res_75105 = futrts_clzz32(clzz_arg_75104);\n                    res_75100 = res_75105;\n                }\n                res_75097 = res_75100;\n            } else {\n                res_75097 = -1;\n            }\n            \n            bool cond_75106 = slt32(res_75039, res_75097);\n            int32_t loopres_75107;\n            \n            if (cond_75106) {\n                loopres_75107 = x_75091;\n            } else {\n                loopres_75107 = l_75089;\n            }\n            \n            int32_t loopres_75108;\n            \n            if (cond_75106) {\n                int32_t res_75109 = sdiv32(t_75090, 2);\n                \n                loopres_75108 = res_75109;\n            } else {\n                int32_t res_75110 = sdiv32(t_75090, 2);\n                \n                loopres_75108 = res_75110;\n            }\n            \n            bool loop_cond_75111 = slt32(0, loopres_75108);\n            bool loop_while_tmp_77182 = loop_cond_75111;\n            int32_t l_tmp_77183 = loopres_75107;\n            int32_t t_tmp_77184;\n            \n            t_tmp_77184 = loopres_75108;\n            loop_while_75088 = loop_while_tmp_77182;\n            l_75089 = l_tmp_77183;\n            t_75090 = t_tmp_77184;\n        }\n        l_75085 = loop_while_75088;\n        l_75086 = l_75089;\n        l_75087 = t_75090;\n        \n        int32_t y_75112 = mul32(res_75034, l_75086);\n        int32_t j_75113 = add32(gtid_74999, y_75112);\n        bool cond_75114 = sle32(0, j_75113);\n        bool res_75115 = slt32(j_75113, 10000);\n        bool x_75116 = cond_75114 && res_75115;\n        int32_t res_75117;\n        \n        if (x_75116) {\n         ",
                   "   int32_t Lj_75118 = ((__global int32_t *) mem_76037)[j_75113];\n            bool cond_75119 = res_elem_75012 == Lj_75118;\n            int32_t res_75120;\n            \n            if (cond_75119) {\n                int32_t clzz_arg_75121 = gtid_74999 ^ j_75113;\n                int32_t res_75122;\n                \n                res_75122 = futrts_clzz32(clzz_arg_75121);\n                \n                int32_t res_75123 = add32(32, res_75122);\n                \n                res_75120 = res_75123;\n            } else {\n                int32_t clzz_arg_75124 = res_elem_75012 ^ Lj_75118;\n                int32_t res_75125;\n                \n                res_75125 = futrts_clzz32(clzz_arg_75124);\n                res_75120 = res_75125;\n            }\n            res_75117 = res_75120;\n        } else {\n            res_75117 = -1;\n        }\n        \n        bool loop_cond_75126 = sle32(1, l_75086);\n        bool s_75127;\n        int32_t s_75128;\n        int32_t s_75129;\n        bool loop_while_75130;\n        int32_t s_75131;\n        int32_t q_75132;\n        \n        loop_while_75130 = loop_cond_75126;\n        s_75131 = 0;\n        q_75132 = 1;\n        while (loop_while_75130) {\n            int32_t div_rounding_up_arg_75133 = mul32(2, q_75132);\n            int32_t x_75134 = add32(l_75086, div_rounding_up_arg_75133);\n            int32_t x_75135 = sub32(x_75134, 1);\n            bool zzero_75136 = div_rounding_up_arg_75133 == 0;\n            bool nonzzero_75137 = !zzero_75136;\n            bool nonzzero_cert_75138;\n            \n            if (!nonzzero_75137) {\n                if (atomic_cmpxchg(global_failure, -1, 0) == -1) {\n                    ;\n                }\n                return;\n            }\n            \n            int32_t res_75139 = sdiv32(x_75135, div_rounding_up_arg_75133);\n            int32_t x_75140 = add32(s_75131, res_75139);\n            int32_t y_75141 = mul32(res_75034, x_75140);\n            int32_t lifted_0_delta_arg_75142 = add32(gtid_74999, y_75141);\n    ",
                   "        bool cond_75143 = sle32(0, lifted_0_delta_arg_75142);\n            bool res_75144 = slt32(lifted_0_delta_arg_75142, 10000);\n            bool x_75145 = cond_75143 && res_75144;\n            int32_t res_75146;\n            \n            if (x_75145) {\n                int32_t Lj_75147 = ((__global\n                                     int32_t *) mem_76037)[lifted_0_delta_arg_75142];\n                bool cond_75148 = res_elem_75012 == Lj_75147;\n                int32_t res_75149;\n                \n                if (cond_75148) {\n                    int32_t clzz_arg_75150 = gtid_74999 ^\n                            lifted_0_delta_arg_75142;\n                    int32_t res_75151;\n                    \n                    res_75151 = futrts_clzz32(clzz_arg_75150);\n                    \n                    int32_t res_75152 = add32(32, res_75151);\n                    \n                    res_75149 = res_75152;\n                } else {\n                    int32_t clzz_arg_75153 = res_elem_75012 ^ Lj_75147;\n                    int32_t res_75154;\n                    \n                    res_75154 = futrts_clzz32(clzz_arg_75153);\n                    res_75149 = res_75154;\n                }\n                res_75146 = res_75149;\n            } else {\n                res_75146 = -1;\n            }\n            \n            bool cond_75155 = slt32(res_75117, res_75146);\n            int32_t loopres_75156;\n            \n            if (cond_75155) {\n                loopres_75156 = x_75140;\n            } else {\n                loopres_75156 = s_75131;\n            }\n            \n            bool loop_cond_75157 = sle32(div_rounding_up_arg_75133, l_75086);\n            bool loop_while_tmp_77185 = loop_cond_75157;\n            int32_t s_tmp_77186 = loopres_75156;\n            int32_t q_tmp_77187;\n            \n            q_tmp_77187 = div_rounding_up_arg_75133;\n            loop_while_75130 = loop_while_tmp_77185;\n            s_75131 = s_tmp_77186;\n            q_75132 = q_tmp_77187;\n        }\n ",
                   "       s_75127 = loop_while_75130;\n        s_75128 = s_75131;\n        s_75129 = q_75132;\n        \n        int32_t y_75158 = mul32(res_75034, s_75128);\n        int32_t x_75159 = add32(gtid_74999, y_75158);\n        int32_t res_75160 = smin32(0, res_75034);\n        int32_t gamma_75161 = add32(x_75159, res_75160);\n        int32_t res_75162 = smin32(gtid_74999, j_75113);\n        bool cond_75163 = res_75162 == gamma_75161;\n        int8_t res_75164;\n        \n        if (cond_75163) {\n            res_75164 = 1;\n        } else {\n            res_75164 = 0;\n        }\n        \n        int32_t res_75165;\n        \n        if (cond_75163) {\n            res_75165 = -1;\n        } else {\n            res_75165 = gamma_75161;\n        }\n        \n        int32_t res_75166 = smax32(gtid_74999, j_75113);\n        int32_t y_75167 = add32(1, gamma_75161);\n        bool cond_75168 = res_75166 == y_75167;\n        int8_t res_75169;\n        \n        if (cond_75168) {\n            res_75169 = 1;\n        } else {\n            res_75169 = 0;\n        }\n        \n        int32_t res_75170;\n        \n        if (cond_75168) {\n            res_75170 = -1;\n        } else {\n            res_75170 = y_75167;\n        }\n        ((__global int8_t *) mem_76045)[gtid_74999] = res_75164;\n        ((__global int32_t *) mem_76048)[gtid_74999] = gamma_75161;\n        ((__global int8_t *) mem_76050)[gtid_74999] = res_75169;\n        ((__global int32_t *) mem_76053)[gtid_74999] = y_75167;\n        ((__global int32_t *) mem_76056)[gtid_74999] = res_75165;\n        ((__global int32_t *) mem_76059)[gtid_74999] = res_75170;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_75004\n}\n__kernel void segmap_75172(__global int *global_failure, __global\n                           unsigned char *mem_76056, __global\n                           unsigned char *mem_76059, __global\n                           unsigned char *mem_76062)\n{\n    #define segmap_group_sizze_75176 (render_irregzisegmap_group_sizze_75175)\n    \n    const int bl",
                   "ock_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_77188;\n    int32_t local_tid_77189;\n    int32_t group_sizze_77192;\n    int32_t wave_sizze_77191;\n    int32_t group_tid_77190;\n    \n    global_tid_77188 = get_global_id(0);\n    local_tid_77189 = get_local_id(0);\n    group_sizze_77192 = get_local_size(0);\n    wave_sizze_77191 = LOCKSTEP_WIDTH;\n    group_tid_77190 = get_group_id(0);\n    \n    int32_t phys_tid_75172 = global_tid_77188;\n    int32_t write_i_75171 = add32(mul32(group_tid_77190,\n                                        segmap_group_sizze_75176),\n                                  local_tid_77189);\n    \n    if (slt32(write_i_75171, 9999)) {\n        int32_t write_index_71918 = ((__global\n                                      int32_t *) mem_76056)[write_i_75171];\n        int32_t write_index_71920 = ((__global\n                                      int32_t *) mem_76059)[write_i_75171];\n        \n        if (sle32(0, write_index_71918) && slt32(write_index_71918, 9999)) {\n            ((__global int32_t *) mem_76062)[write_index_71918] = write_i_75171;\n        }\n        if (sle32(0, write_index_71920) && slt32(write_index_71920, 9999)) {\n            ((__global int32_t *) mem_76062)[write_index_71920] = write_i_75171;\n        }\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_75176\n}\n__kernel void segmap_75184(__global int *global_failure, __global\n                           unsigned char *mem_76040, __global\n                           unsigned char *mem_76043, __global\n                           unsigned char *mem_76045, __global\n                           unsigned char *mem_76048, __global\n                           unsigned char *mem_76050, __global\n                           unsigned char *mem_76053, __global\n                           unsigned char *inners_mem_76066, __global\n                           unsigned char *inners_mem_76067, __global\n     ",
                   "                      unsigned char *inners_mem_76068, __global\n                           unsigned char *inners_mem_76069, __global\n                           unsigned char *inners_mem_76070, __global\n                           unsigned char *inners_mem_76071, __global\n                           unsigned char *mem_76074, __global\n                           unsigned char *mem_76077, __global\n                           unsigned char *mem_76080, __global\n                           unsigned char *mem_76083, __global\n                           unsigned char *mem_76086, __global\n                           unsigned char *mem_76089)\n{\n    #define segmap_group_sizze_75188 (render_irregzisegmap_group_sizze_75187)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_77205;\n    int32_t local_tid_77206;\n    int32_t group_sizze_77209;\n    int32_t wave_sizze_77208;\n    int32_t group_tid_77207;\n    \n    global_tid_77205 = get_global_id(0);\n    local_tid_77206 = get_local_id(0);\n    group_sizze_77209 = get_local_size(0);\n    wave_sizze_77208 = LOCKSTEP_WIDTH;\n    group_tid_77207 = get_group_id(0);\n    \n    int32_t phys_tid_75184 = global_tid_77205;\n    int32_t gtid_75183 = add32(mul32(group_tid_77207, segmap_group_sizze_75188),\n                               local_tid_77206);\n    \n    if (slt32(gtid_75183, 9999)) {\n        int8_t x_75195 = ((__global int8_t *) mem_76045)[gtid_75183];\n        int32_t x_75196 = ((__global int32_t *) mem_76048)[gtid_75183];\n        int8_t x_75197 = ((__global int8_t *) mem_76050)[gtid_75183];\n        int32_t x_75198 = ((__global int32_t *) mem_76053)[gtid_75183];\n        bool match_constr_75199 = 1 == x_75197;\n        float res_75200;\n        float res_75201;\n        float res_75202;\n        float res_75203;\n        float res_75204;\n        float res_75205;\n        \n        if (match_constr_75199) {\n            float lifted_0_bbf_ar",
                   "g_75206 = ((__global\n                                             float *) mem_76040)[x_75198];\n            float lifted_0_bbf_arg_75207 = ((__global\n                                             float *) mem_76043)[x_75198];\n            float res_75208 = lifted_0_bbf_arg_75206 - 3.0F;\n            float res_75209 = lifted_0_bbf_arg_75207 - 3.0F;\n            float res_75210 = 3.0F + lifted_0_bbf_arg_75206;\n            float res_75211 = 3.0F + lifted_0_bbf_arg_75207;\n            \n            res_75200 = res_75210;\n            res_75201 = 3.0F;\n            res_75202 = res_75211;\n            res_75203 = res_75208;\n            res_75204 = -3.0F;\n            res_75205 = res_75209;\n        } else {\n            float res_75212 = ((__global float *) inners_mem_76066)[x_75198];\n            float res_75213 = ((__global float *) inners_mem_76067)[x_75198];\n            float res_75214 = ((__global float *) inners_mem_76068)[x_75198];\n            float res_75215 = ((__global float *) inners_mem_76069)[x_75198];\n            float res_75216 = ((__global float *) inners_mem_76070)[x_75198];\n            float res_75217 = ((__global float *) inners_mem_76071)[x_75198];\n            \n            res_75200 = res_75212;\n            res_75201 = res_75213;\n            res_75202 = res_75214;\n            res_75203 = res_75215;\n            res_75204 = res_75216;\n            res_75205 = res_75217;\n        }\n        \n        bool match_constr_75218 = 1 == x_75195;\n        float res_75219;\n        float res_75220;\n        float res_75221;\n        float res_75222;\n        float res_75223;\n        float res_75224;\n        \n        if (match_constr_75218) {\n            float lifted_0_bbf_arg_75225 = ((__global\n                                             float *) mem_76040)[x_75196];\n            float lifted_0_bbf_arg_75226 = ((__global\n                                             float *) mem_76043)[x_75196];\n            float res_75227 = lifted_0_bbf_arg_75225 - 3.0F;\n            float res_75228 = ",
                   "lifted_0_bbf_arg_75226 - 3.0F;\n            float res_75229 = 3.0F + lifted_0_bbf_arg_75225;\n            float res_75230 = 3.0F + lifted_0_bbf_arg_75226;\n            \n            res_75219 = res_75229;\n            res_75220 = 3.0F;\n            res_75221 = res_75230;\n            res_75222 = res_75227;\n            res_75223 = -3.0F;\n            res_75224 = res_75228;\n        } else {\n            float res_75231 = ((__global float *) inners_mem_76066)[x_75196];\n            float res_75232 = ((__global float *) inners_mem_76067)[x_75196];\n            float res_75233 = ((__global float *) inners_mem_76068)[x_75196];\n            float res_75234 = ((__global float *) inners_mem_76069)[x_75196];\n            float res_75235 = ((__global float *) inners_mem_76070)[x_75196];\n            float res_75236 = ((__global float *) inners_mem_76071)[x_75196];\n            \n            res_75219 = res_75231;\n            res_75220 = res_75232;\n            res_75221 = res_75233;\n            res_75222 = res_75234;\n            res_75223 = res_75235;\n            res_75224 = res_75236;\n        }\n        \n        float res_75237 = fmin32(res_75203, res_75222);\n        float res_75238 = fmin32(res_75204, res_75223);\n        float res_75239 = fmin32(res_75205, res_75224);\n        float res_75240 = fmax32(res_75200, res_75219);\n        float res_75241 = fmax32(res_75201, res_75220);\n        float res_75242 = fmax32(res_75202, res_75221);\n        \n        ((__global float *) mem_76074)[gtid_75183] = res_75240;\n        ((__global float *) mem_76077)[gtid_75183] = res_75241;\n        ((__global float *) mem_76080)[gtid_75183] = res_75242;\n        ((__global float *) mem_76083)[gtid_75183] = res_75237;\n        ((__global float *) mem_76086)[gtid_75183] = res_75238;\n        ((__global float *) mem_76089)[gtid_75183] = res_75239;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_75188\n}\n__kernel void segmap_75247(__global int *global_failure, int32_t h_71517,\n                           int3",
                   "2_t w_71518, float res_71990, float res_71991,\n                           float res_71994, float scale_arg_71995, __global\n                           unsigned char *mem_76040, __global\n                           unsigned char *mem_76043, __global\n                           unsigned char *mem_76045, __global\n                           unsigned char *mem_76048, __global\n                           unsigned char *mem_76050, __global\n                           unsigned char *mem_76053, __global\n                           unsigned char *mem_76062, __global\n                           unsigned char *inners_mem_76090, __global\n                           unsigned char *inners_mem_76091, __global\n                           unsigned char *inners_mem_76092, __global\n                           unsigned char *inners_mem_76093, __global\n                           unsigned char *inners_mem_76094, __global\n                           unsigned char *inners_mem_76095, __global\n                           unsigned char *mem_76100)\n{\n    #define segmap_group_sizze_75253 (render_irregzisegmap_group_sizze_75252)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_77210;\n    int32_t local_tid_77211;\n    int32_t group_sizze_77214;\n    int32_t wave_sizze_77213;\n    int32_t group_tid_77212;\n    \n    global_tid_77210 = get_global_id(0);\n    local_tid_77211 = get_local_id(0);\n    group_sizze_77214 = get_local_size(0);\n    wave_sizze_77213 = LOCKSTEP_WIDTH;\n    group_tid_77212 = get_group_id(0);\n    \n    int32_t phys_tid_75247 = global_tid_77210;\n    int32_t gtid_75245 = squot32(add32(mul32(group_tid_77212,\n                                             segmap_group_sizze_75253),\n                                       local_tid_77211), w_71518);\n    int32_t gtid_75246;\n    \n    gtid_75246 = sub32(add32(mul32(group_tid_77212, segmap_group_sizze_75253),\n                             ",
                   "local_tid_77211),\n                       mul32(squot32(add32(mul32(group_tid_77212,\n                                                 segmap_group_sizze_75253),\n                                           local_tid_77211), w_71518),\n                             w_71518));\n    if (slt32(gtid_75245, h_71517) && slt32(gtid_75246, w_71518)) {\n        int32_t convop_x_75715 = sub32(h_71517, gtid_75245);\n        float binop_x_75716 = sitofp_i32_f32(convop_x_75715);\n        float binop_y_75717 = binop_x_75716 / res_71991;\n        float binop_y_75718 = 1.5314702F * binop_y_75717;\n        float binop_x_75719 = 11.169883F + binop_y_75718;\n        float index_primexp_75720 = binop_x_75719 - 12.0F;\n        float binop_y_75712 = -9.8804526e-2F * binop_y_75717;\n        float binop_x_75713 = 29.051477F + binop_y_75712;\n        float index_primexp_75714 = binop_x_75713 - 30.0F;\n        float res_75263 = sitofp_i32_f32(gtid_75246);\n        float u_75264 = res_75263 / res_71990;\n        float res_75265 = scale_arg_71995 * u_75264;\n        float res_75266 = res_71994 + res_75265;\n        bool lifted_1_zlzb_arg_75267;\n        float lifted_1_zlzb_arg_75268;\n        float lifted_1_zlzb_arg_75269;\n        float lifted_1_zlzb_arg_75270;\n        float lifted_1_zlzb_arg_75271;\n        float lifted_1_zlzb_arg_75272;\n        float lifted_1_zlzb_arg_75273;\n        int32_t lifted_1_zlzb_arg_75274;\n        float lifted_1_zlzb_arg_75275;\n        float lifted_1_zlzb_arg_75276;\n        float lifted_1_zlzb_arg_75277;\n        float lifted_1_zlzb_arg_75278;\n        float lifted_1_zlzb_arg_75279;\n        float lifted_1_zlzb_arg_75280;\n        bool loop_while_75281;\n        float r_75282;\n        float r_75283;\n        float r_75284;\n        float r_75285;\n        float r_75286;\n        float r_75287;\n        int32_t depth_75288;\n        float light_75289;\n        float light_75290;\n        float light_75291;\n        float colour_75292;\n        float colour_75293;\n        float colour_75294;\n        \n     ",
                   "   loop_while_75281 = 1;\n        r_75282 = res_75266;\n        r_75283 = index_primexp_75720;\n        r_75284 = index_primexp_75714;\n        r_75285 = 0.0F;\n        r_75286 = 12.0F;\n        r_75287 = 30.0F;\n        depth_75288 = 0;\n        light_75289 = 1.0F;\n        light_75290 = 1.0F;\n        light_75291 = 1.0F;\n        colour_75292 = 0.0F;\n        colour_75293 = 0.0F;\n        colour_75294 = 0.0F;\n        while (loop_while_75281) {\n            bool lifted_1_zlzb_arg_75295;\n            int32_t lifted_1_zlzb_arg_75296;\n            float lifted_1_zlzb_arg_75297;\n            int32_t lifted_1_zlzb_arg_75298;\n            int8_t lifted_1_zlzb_arg_75299;\n            int32_t lifted_1_zlzb_arg_75300;\n            bool loop_while_75301;\n            int32_t acc_75302;\n            float acc_75303;\n            int32_t cur_75304;\n            int8_t prev_75305;\n            int32_t prev_75306;\n            \n            loop_while_75301 = 1;\n            acc_75302 = -1;\n            acc_75303 = 1.0e9F;\n            cur_75304 = 0;\n            prev_75305 = 0;\n            prev_75306 = -1;\n            while (loop_while_75301) {\n                int8_t loopres_75313 = ((__global\n                                         int8_t *) mem_76045)[cur_75304];\n                int32_t loopres_75314 = ((__global\n                                          int32_t *) mem_76048)[cur_75304];\n                int8_t loopres_75316 = ((__global\n                                         int8_t *) mem_76050)[cur_75304];\n                int32_t loopres_75317 = ((__global\n                                          int32_t *) mem_76053)[cur_75304];\n                bool from_left_75318 = prev_75305 == loopres_75313;\n                bool from_left_75319 = prev_75306 == loopres_75314;\n                bool eq_75320 = from_left_75318 && from_left_75319;\n                bool from_right_75321 = prev_75305 == loopres_75316;\n                bool from_right_75322 = prev_75306 == loopres_75317;\n                bool eq_75323 = from",
                   "_right_75321 && from_right_75322;\n                int8_t rec_child_75324;\n                int8_t rec_child_75325;\n                int32_t rec_child_75326;\n                \n                if (eq_75320) {\n                    rec_child_75324 = 1;\n                    rec_child_75325 = loopres_75316;\n                    rec_child_75326 = loopres_75317;\n                } else {\n                    float loopres_75307 = ((__global\n                                            float *) inners_mem_76090)[cur_75304];\n                    float loopres_75308 = ((__global\n                                            float *) inners_mem_76091)[cur_75304];\n                    float loopres_75309 = ((__global\n                                            float *) inners_mem_76092)[cur_75304];\n                    float loopres_75310 = ((__global\n                                            float *) inners_mem_76093)[cur_75304];\n                    float loopres_75311 = ((__global\n                                            float *) inners_mem_76094)[cur_75304];\n                    float loopres_75312 = ((__global\n                                            float *) inners_mem_76095)[cur_75304];\n                    bool cond_75327 = !eq_75323;\n                    float invD_75328 = 1.0F / r_75282;\n                    float x_75329 = loopres_75310 - r_75285;\n                    float t0_75330 = invD_75328 * x_75329;\n                    float x_75331 = loopres_75307 - r_75285;\n                    float t1_75332 = invD_75328 * x_75331;\n                    bool cond_75333 = invD_75328 < 0.0F;\n                    float res_75334;\n                    \n                    if (cond_75333) {\n                        res_75334 = t1_75332;\n                    } else {\n                        res_75334 = t0_75330;\n                    }\n                    \n                    float res_75335;\n                    \n                    if (cond_75333) {\n                        res_75335 = t0_75330;\n     ",
                   "               } else {\n                        res_75335 = t1_75332;\n                    }\n                    \n                    float res_75336 = fmax32(1.0e-3F, res_75334);\n                    float res_75337 = fmin32(1.0e9F, res_75335);\n                    bool cond_75338 = res_75337 <= res_75336;\n                    float invD_75339 = 1.0F / r_75283;\n                    float x_75340 = loopres_75311 - r_75286;\n                    float t0_75341 = invD_75339 * x_75340;\n                    float x_75342 = loopres_75308 - r_75286;\n                    float t1_75343 = invD_75339 * x_75342;\n                    bool cond_75344 = invD_75339 < 0.0F;\n                    float res_75345;\n                    \n                    if (cond_75344) {\n                        res_75345 = t1_75343;\n                    } else {\n                        res_75345 = t0_75341;\n                    }\n                    \n                    float res_75346;\n                    \n                    if (cond_75344) {\n                        res_75346 = t0_75341;\n                    } else {\n                        res_75346 = t1_75343;\n                    }\n                    \n                    float res_75347 = fmax32(res_75336, res_75345);\n                    float res_75348 = fmin32(res_75337, res_75346);\n                    bool cond_75349 = res_75348 <= res_75347;\n                    float invD_75350 = 1.0F / r_75284;\n                    float x_75351 = loopres_75312 - r_75287;\n                    float t0_75352 = invD_75350 * x_75351;\n                    float x_75353 = loopres_75309 - r_75287;\n                    float t1_75354 = invD_75350 * x_75353;\n                    bool cond_75355 = invD_75350 < 0.0F;\n                    float res_75356;\n                    \n                    if (cond_75355) {\n                        res_75356 = t1_75354;\n                    } else {\n                        res_75356 = t0_75352;\n                    }\n                    \n            ",
                   "        float res_75357;\n                    \n                    if (cond_75355) {\n                        res_75357 = t0_75352;\n                    } else {\n                        res_75357 = t1_75354;\n                    }\n                    \n                    float res_75358 = fmax32(res_75347, res_75356);\n                    float res_75359 = fmin32(res_75348, res_75357);\n                    bool complement_arg_75360 = res_75359 <= res_75358;\n                    bool res_75361 = !complement_arg_75360;\n                    bool x_75362 = !cond_75349;\n                    bool y_75363 = res_75361 && x_75362;\n                    bool x_75364 = !cond_75338;\n                    bool y_75365 = y_75363 && x_75364;\n                    bool x_75366 = cond_75327 && y_75365;\n                    int8_t res_75367;\n                    \n                    if (x_75366) {\n                        res_75367 = 1;\n                    } else {\n                        res_75367 = 0;\n                    }\n                    \n                    int8_t res_75368;\n                    \n                    if (x_75366) {\n                        res_75368 = loopres_75313;\n                    } else {\n                        res_75368 = 0;\n                    }\n                    \n                    int32_t res_75369;\n                    \n                    if (x_75366) {\n                        res_75369 = loopres_75314;\n                    } else {\n                        res_75369 = 0;\n                    }\n                    rec_child_75324 = res_75367;\n                    rec_child_75325 = res_75368;\n                    rec_child_75326 = res_75369;\n                }\n                \n                bool match_constr_75370 = 0 == rec_child_75324;\n                int32_t loopres_75371;\n                float loopres_75372;\n                int32_t loopres_75373;\n                int8_t loopres_75374;\n                int32_t loopres_75375;\n                \n                if (match_c",
                   "onstr_75370) {\n                    int32_t loopres_75315 = ((__global\n                                              int32_t *) mem_76062)[cur_75304];\n                    \n                    loopres_75371 = acc_75302;\n                    loopres_75372 = acc_75303;\n                    loopres_75373 = loopres_75315;\n                    loopres_75374 = 0;\n                    loopres_75375 = cur_75304;\n                } else {\n                    bool match_constr_75376 = 0 == rec_child_75325;\n                    int32_t res_75377;\n                    \n                    if (match_constr_75376) {\n                        res_75377 = rec_child_75326;\n                    } else {\n                        res_75377 = cur_75304;\n                    }\n                    \n                    int8_t res_75378;\n                    \n                    if (match_constr_75376) {\n                        res_75378 = 0;\n                    } else {\n                        res_75378 = rec_child_75325;\n                    }\n                    \n                    int32_t res_75379;\n                    \n                    if (match_constr_75376) {\n                        res_75379 = cur_75304;\n                    } else {\n                        res_75379 = rec_child_75326;\n                    }\n                    \n                    int32_t res_75380;\n                    float res_75381;\n                    \n                    if (match_constr_75376) {\n                        res_75380 = acc_75302;\n                        res_75381 = acc_75303;\n                    } else {\n                        float lifted_2_op_arg_75382 = ((__global\n                                                        float *) mem_76040)[rec_child_75326];\n                        float lifted_2_op_arg_75383 = ((__global\n                                                        float *) mem_76043)[rec_child_75326];\n                        float res_75384 = r_75285 - lifted_2_op_arg_75382;\n                     ",
                   "   float res_75385 = r_75287 - lifted_2_op_arg_75383;\n                        float res_75386 = r_75282 * r_75282;\n                        float res_75387 = r_75283 * r_75283;\n                        float res_75388 = r_75284 * r_75284;\n                        float x_75389 = res_75386 + res_75387;\n                        float res_75390 = res_75388 + x_75389;\n                        float res_75391 = r_75282 * res_75384;\n                        float res_75392 = r_75283 * r_75286;\n                        float res_75393 = r_75284 * res_75385;\n                        float x_75394 = res_75391 + res_75392;\n                        float res_75395 = res_75393 + x_75394;\n                        float res_75396 = res_75384 * res_75384;\n                        float res_75397 = r_75286 * r_75286;\n                        float res_75398 = res_75385 * res_75385;\n                        float x_75399 = res_75396 + res_75397;\n                        float res_75400 = res_75398 + x_75399;\n                        float c_75401 = res_75400 - 9.0F;\n                        float x_75402 = res_75395 * res_75395;\n                        float y_75403 = res_75390 * c_75401;\n                        float discriminant_75404 = x_75402 - y_75403;\n                        bool cond_75405 = discriminant_75404 <= 0.0F;\n                        int8_t res_75406;\n                        float res_75407;\n                        \n                        if (cond_75405) {\n                            res_75406 = 0;\n                            res_75407 = 0.0F;\n                        } else {\n                            float x_75408 = 0.0F - res_75395;\n                            float res_75409;\n                            \n                            res_75409 = futrts_sqrt32(discriminant_75404);\n                            \n                            float x_75410 = x_75408 - res_75409;\n                            float lifted_0_f_arg_75411 = x_75410 / res_75390;\n                            bo",
                   "ol cond_75412 = lifted_0_f_arg_75411 < acc_75303;\n                            bool res_75413 = 1.0e-3F < lifted_0_f_arg_75411;\n                            bool x_75414 = cond_75412 && res_75413;\n                            float res_75415;\n                            \n                            if (x_75414) {\n                                res_75415 = lifted_0_f_arg_75411;\n                            } else {\n                                res_75415 = 0.0F;\n                            }\n                            \n                            int8_t res_75416;\n                            float res_75417;\n                            \n                            if (x_75414) {\n                                res_75416 = 1;\n                                res_75417 = res_75415;\n                            } else {\n                                float x_75418 = x_75408 + res_75409;\n                                float lifted_0_f_arg_75419 = x_75418 /\n                                      res_75390;\n                                bool cond_75420 = lifted_0_f_arg_75419 <\n                                     acc_75303;\n                                bool res_75421 = 1.0e-3F < lifted_0_f_arg_75419;\n                                bool x_75422 = cond_75420 && res_75421;\n                                int8_t res_75423;\n                                \n                                if (x_75422) {\n                                    res_75423 = 1;\n                                } else {\n                                    res_75423 = 0;\n                                }\n                                \n                                float res_75424;\n                                \n                                if (x_75422) {\n                                    res_75424 = lifted_0_f_arg_75419;\n                                } else {\n                                    res_75424 = 0.0F;\n                                }\n                                res_75416 =",
                   " res_75423;\n                                res_75417 = res_75424;\n                            }\n                            res_75406 = res_75416;\n                            res_75407 = res_75417;\n                        }\n                        \n                        bool match_constr_75425 = 0 == res_75406;\n                        int32_t res_75426;\n                        \n                        if (match_constr_75425) {\n                            res_75426 = acc_75302;\n                        } else {\n                            res_75426 = rec_child_75326;\n                        }\n                        \n                        float res_75427;\n                        \n                        if (match_constr_75425) {\n                            res_75427 = acc_75303;\n                        } else {\n                            res_75427 = res_75407;\n                        }\n                        res_75380 = res_75426;\n                        res_75381 = res_75427;\n                    }\n                    loopres_75371 = res_75380;\n                    loopres_75372 = res_75381;\n                    loopres_75373 = res_75377;\n                    loopres_75374 = res_75378;\n                    loopres_75375 = res_75379;\n                }\n                \n                bool loop_cond_75428 = loopres_75373 == -1;\n                bool loop_cond_75429 = !loop_cond_75428;\n                bool loop_while_tmp_77229 = loop_cond_75429;\n                int32_t acc_tmp_77230 = loopres_75371;\n                float acc_tmp_77231 = loopres_75372;\n                int32_t cur_tmp_77232 = loopres_75373;\n                int8_t prev_tmp_77233 = loopres_75374;\n                int32_t prev_tmp_77234;\n                \n                prev_tmp_77234 = loopres_75375;\n                loop_while_75301 = loop_while_tmp_77229;\n                acc_75302 = acc_tmp_77230;\n                acc_75303 = acc_tmp_77231;\n                cur_75304 = cur_tmp_77232;\n                prev_753",
                   "05 = prev_tmp_77233;\n                prev_75306 = prev_tmp_77234;\n            }\n            lifted_1_zlzb_arg_75295 = loop_while_75301;\n            lifted_1_zlzb_arg_75296 = acc_75302;\n            lifted_1_zlzb_arg_75297 = acc_75303;\n            lifted_1_zlzb_arg_75298 = cur_75304;\n            lifted_1_zlzb_arg_75299 = prev_75305;\n            lifted_1_zlzb_arg_75300 = prev_75306;\n            \n            bool cond_75430 = sle32(0, lifted_1_zlzb_arg_75296);\n            int8_t res_75431;\n            float res_75432;\n            float res_75433;\n            float res_75434;\n            float res_75435;\n            float res_75436;\n            float res_75437;\n            float res_75438;\n            float res_75439;\n            float res_75440;\n            \n            if (cond_75430) {\n                float res_75441 = ((__global\n                                    float *) mem_76040)[lifted_1_zlzb_arg_75296];\n                float res_75442 = ((__global\n                                    float *) mem_76043)[lifted_1_zlzb_arg_75296];\n                float sphere_hit_arg_75443 = 1.0F + lifted_1_zlzb_arg_75297;\n                float res_75444 = r_75285 - res_75441;\n                float res_75445 = r_75287 - res_75442;\n                float res_75446 = r_75282 * r_75282;\n                float res_75447 = r_75283 * r_75283;\n                float res_75448 = r_75284 * r_75284;\n                float x_75449 = res_75446 + res_75447;\n                float res_75450 = res_75448 + x_75449;\n                float res_75451 = r_75282 * res_75444;\n                float res_75452 = r_75283 * r_75286;\n                float res_75453 = r_75284 * res_75445;\n                float x_75454 = res_75451 + res_75452;\n                float res_75455 = res_75453 + x_75454;\n                float res_75456 = res_75444 * res_75444;\n                float res_75457 = r_75286 * r_75286;\n                float res_75458 = res_75445 * res_75445;\n                float x_75459 = res_75456 + res_75457;\n",
                   "                float res_75460 = res_75458 + x_75459;\n                float c_75461 = res_75460 - 9.0F;\n                float x_75462 = res_75455 * res_75455;\n                float y_75463 = res_75450 * c_75461;\n                float discriminant_75464 = x_75462 - y_75463;\n                bool cond_75465 = discriminant_75464 <= 0.0F;\n                int8_t res_75466;\n                float res_75467;\n                float res_75468;\n                float res_75469;\n                float res_75470;\n                float res_75471;\n                float res_75472;\n                float res_75473;\n                float res_75474;\n                float res_75475;\n                \n                if (cond_75465) {\n                    res_75466 = 0;\n                    res_75467 = 0.0F;\n                    res_75468 = 0.0F;\n                    res_75469 = 0.0F;\n                    res_75470 = 0.0F;\n                    res_75471 = 0.0F;\n                    res_75472 = 0.0F;\n                    res_75473 = 0.0F;\n                    res_75474 = 0.0F;\n                    res_75475 = 0.0F;\n                } else {\n                    float x_75476 = 0.0F - res_75455;\n                    float res_75477;\n                    \n                    res_75477 = futrts_sqrt32(discriminant_75464);\n                    \n                    float x_75478 = x_75476 - res_75477;\n                    float lifted_0_f_arg_75479 = x_75478 / res_75450;\n                    bool cond_75480 = lifted_0_f_arg_75479 <\n                         sphere_hit_arg_75443;\n                    bool res_75481 = 1.0e-3F < lifted_0_f_arg_75479;\n                    bool x_75482 = cond_75480 && res_75481;\n                    float res_75483;\n                    \n                    if (x_75482) {\n                        res_75483 = 1.0F;\n                    } else {\n                        res_75483 = 0.0F;\n                    }\n                    \n                    float res_75484;\n                    float res",
                   "_75485;\n                    float res_75486;\n                    float res_75487;\n                    float res_75488;\n                    float res_75489;\n                    \n                    if (x_75482) {\n                        float res_75490 = r_75282 * lifted_0_f_arg_75479;\n                        float res_75491 = r_75283 * lifted_0_f_arg_75479;\n                        float res_75492 = r_75284 * lifted_0_f_arg_75479;\n                        float res_75493 = r_75285 + res_75490;\n                        float res_75494 = r_75286 + res_75491;\n                        float res_75495 = r_75287 + res_75492;\n                        float res_75496 = res_75493 - res_75441;\n                        float res_75497 = res_75495 - res_75442;\n                        float res_75498 = 0.33333334F * res_75496;\n                        float res_75499 = 0.33333334F * res_75494;\n                        float res_75500 = 0.33333334F * res_75497;\n                        \n                        res_75484 = res_75498;\n                        res_75485 = res_75499;\n                        res_75486 = res_75500;\n                        res_75487 = res_75493;\n                        res_75488 = res_75494;\n                        res_75489 = res_75495;\n                    } else {\n                        res_75484 = 0.0F;\n                        res_75485 = 0.0F;\n                        res_75486 = 0.0F;\n                        res_75487 = 0.0F;\n                        res_75488 = 0.0F;\n                        res_75489 = 0.0F;\n                    }\n                    \n                    int8_t res_75501;\n                    float res_75502;\n                    float res_75503;\n                    float res_75504;\n                    float res_75505;\n                    float res_75506;\n                    float res_75507;\n                    float res_75508;\n                    float res_75509;\n                    float res_75510;\n                    \n                    if ",
                   "(x_75482) {\n                        res_75501 = 1;\n                        res_75502 = res_75483;\n                        res_75503 = res_75483;\n                        res_75504 = res_75483;\n                        res_75505 = res_75484;\n                        res_75506 = res_75485;\n                        res_75507 = res_75486;\n                        res_75508 = res_75487;\n                        res_75509 = res_75488;\n                        res_75510 = res_75489;\n                    } else {\n                        float x_75511 = x_75476 + res_75477;\n                        float lifted_0_f_arg_75512 = x_75511 / res_75450;\n                        bool cond_75513 = lifted_0_f_arg_75512 <\n                             sphere_hit_arg_75443;\n                        bool res_75514 = 1.0e-3F < lifted_0_f_arg_75512;\n                        bool x_75515 = cond_75513 && res_75514;\n                        int8_t res_75516;\n                        \n                        if (x_75515) {\n                            res_75516 = 1;\n                        } else {\n                            res_75516 = 0;\n                        }\n                        \n                        float res_75517;\n                        \n                        if (x_75515) {\n                            res_75517 = 1.0F;\n                        } else {\n                            res_75517 = 0.0F;\n                        }\n                        \n                        float res_75518;\n                        float res_75519;\n                        float res_75520;\n                        float res_75521;\n                        float res_75522;\n                        float res_75523;\n                        \n                        if (x_75515) {\n                            float res_75524 = r_75282 * lifted_0_f_arg_75512;\n                            float res_75525 = r_75283 * lifted_0_f_arg_75512;\n                            float res_75526 = r_75284 * lifted_0_f_arg_75512;\n        ",
                   "                    float res_75527 = r_75285 + res_75524;\n                            float res_75528 = r_75286 + res_75525;\n                            float res_75529 = r_75287 + res_75526;\n                            float res_75530 = res_75527 - res_75441;\n                            float res_75531 = res_75529 - res_75442;\n                            float res_75532 = 0.33333334F * res_75530;\n                            float res_75533 = 0.33333334F * res_75528;\n                            float res_75534 = 0.33333334F * res_75531;\n                            \n                            res_75518 = res_75532;\n                            res_75519 = res_75533;\n                            res_75520 = res_75534;\n                            res_75521 = res_75527;\n                            res_75522 = res_75528;\n                            res_75523 = res_75529;\n                        } else {\n                            res_75518 = 0.0F;\n                            res_75519 = 0.0F;\n                            res_75520 = 0.0F;\n                            res_75521 = 0.0F;\n                            res_75522 = 0.0F;\n                            res_75523 = 0.0F;\n                        }\n                        res_75501 = res_75516;\n                        res_75502 = res_75517;\n                        res_75503 = res_75517;\n                        res_75504 = res_75517;\n                        res_75505 = res_75518;\n                        res_75506 = res_75519;\n                        res_75507 = res_75520;\n                        res_75508 = res_75521;\n                        res_75509 = res_75522;\n                        res_75510 = res_75523;\n                    }\n                    res_75466 = res_75501;\n                    res_75467 = res_75502;\n                    res_75468 = res_75503;\n                    res_75469 = res_75504;\n                    res_75470 = res_75505;\n                    res_75471 = res_75506;\n                    res_75472 = res_",
                   "75507;\n                    res_75473 = res_75508;\n                    res_75474 = res_75509;\n                    res_75475 = res_75510;\n                }\n                res_75431 = res_75466;\n                res_75432 = res_75467;\n                res_75433 = res_75468;\n                res_75434 = res_75469;\n                res_75435 = res_75470;\n                res_75436 = res_75471;\n                res_75437 = res_75472;\n                res_75438 = res_75473;\n                res_75439 = res_75474;\n                res_75440 = res_75475;\n            } else {\n                res_75431 = 0;\n                res_75432 = 0.0F;\n                res_75433 = 0.0F;\n                res_75434 = 0.0F;\n                res_75435 = 0.0F;\n                res_75436 = 0.0F;\n                res_75437 = 0.0F;\n                res_75438 = 0.0F;\n                res_75439 = 0.0F;\n                res_75440 = 0.0F;\n            }\n            \n            bool match_constr_75535 = 1 == res_75431;\n            float loopres_75536;\n            float loopres_75537;\n            float loopres_75538;\n            float loopres_75539;\n            float loopres_75540;\n            float loopres_75541;\n            int32_t loopres_75542;\n            float loopres_75543;\n            float loopres_75544;\n            float loopres_75545;\n            float loopres_75546;\n            float loopres_75547;\n            float loopres_75548;\n            \n            if (match_constr_75535) {\n                float res_75549 = r_75282 * r_75282;\n                float res_75550 = r_75283 * r_75283;\n                float res_75551 = r_75284 * r_75284;\n                float x_75552 = res_75549 + res_75550;\n                float res_75553 = res_75551 + x_75552;\n                float res_75554;\n                \n                res_75554 = futrts_sqrt32(res_75553);\n                \n                float scale_arg_75555 = 1.0F / res_75554;\n                float res_75556 = r_75282 * scale_arg_75555;\n                float res_",
                   "75557 = r_75283 * scale_arg_75555;\n                float res_75558 = r_75284 * scale_arg_75555;\n                float res_75559 = res_75435 * res_75556;\n                float res_75560 = res_75436 * res_75557;\n                float res_75561 = res_75437 * res_75558;\n                float x_75562 = res_75559 + res_75560;\n                float res_75563 = res_75561 + x_75562;\n                float scale_arg_75564 = 2.0F * res_75563;\n                float res_75565 = res_75435 * scale_arg_75564;\n                float res_75566 = res_75436 * scale_arg_75564;\n                float res_75567 = res_75437 * scale_arg_75564;\n                float res_75568 = res_75556 - res_75565;\n                float res_75569 = res_75557 - res_75566;\n                float res_75570 = res_75558 - res_75567;\n                float res_75571 = res_75435 * res_75568;\n                float res_75572 = res_75436 * res_75569;\n                float res_75573 = res_75437 * res_75570;\n                float x_75574 = res_75571 + res_75572;\n                float res_75575 = res_75573 + x_75574;\n                bool cond_75576 = 0.0F < res_75575;\n                float res_75577;\n                \n                if (cond_75576) {\n                    res_75577 = res_75568;\n                } else {\n                    res_75577 = 0.0F;\n                }\n                \n                float res_75578;\n                \n                if (cond_75576) {\n                    res_75578 = res_75569;\n                } else {\n                    res_75578 = 0.0F;\n                }\n                \n                float res_75579;\n                \n                if (cond_75576) {\n                    res_75579 = res_75570;\n                } else {\n                    res_75579 = 0.0F;\n                }\n                \n                float res_75580;\n                \n                if (cond_75576) {\n                    res_75580 = res_75438;\n                } else {\n                    res_75580 = 0.0F;\n       ",
                   "         }\n                \n                float res_75581;\n                \n                if (cond_75576) {\n                    res_75581 = res_75439;\n                } else {\n                    res_75581 = 0.0F;\n                }\n                \n                float res_75582;\n                \n                if (cond_75576) {\n                    res_75582 = res_75440;\n                } else {\n                    res_75582 = 0.0F;\n                }\n                \n                float res_75583;\n                \n                if (cond_75576) {\n                    res_75583 = res_75432;\n                } else {\n                    res_75583 = 0.0F;\n                }\n                \n                float res_75584;\n                \n                if (cond_75576) {\n                    res_75584 = res_75433;\n                } else {\n                    res_75584 = 0.0F;\n                }\n                \n                float res_75585;\n                \n                if (cond_75576) {\n                    res_75585 = res_75434;\n                } else {\n                    res_75585 = 0.0F;\n                }\n                \n                float res_75586;\n                \n                if (cond_75576) {\n                    res_75586 = res_75577;\n                } else {\n                    res_75586 = r_75282;\n                }\n                \n                float res_75587;\n                \n                if (cond_75576) {\n                    res_75587 = res_75578;\n                } else {\n                    res_75587 = r_75283;\n                }\n                \n                float res_75588;\n                \n                if (cond_75576) {\n                    res_75588 = res_75579;\n                } else {\n                    res_75588 = r_75284;\n                }\n                \n                float res_75589;\n                \n                if (cond_75576) {\n                    res_75589 = res_75580;\n                } else {\n           ",
                   "         res_75589 = r_75285;\n                }\n                \n                float res_75590;\n                \n                if (cond_75576) {\n                    res_75590 = res_75581;\n                } else {\n                    res_75590 = r_75286;\n                }\n                \n                float res_75591;\n                \n                if (cond_75576) {\n                    res_75591 = res_75582;\n                } else {\n                    res_75591 = r_75287;\n                }\n                \n                int32_t res_75592;\n                float res_75593;\n                float res_75594;\n                float res_75595;\n                float res_75596;\n                float res_75597;\n                float res_75598;\n                \n                if (cond_75576) {\n                    int32_t res_75599 = add32(1, depth_75288);\n                    float res_75600 = light_75289 * res_75583;\n                    float res_75601 = light_75290 * res_75584;\n                    float res_75602 = light_75291 * res_75585;\n                    float res_75603 = light_75289 * colour_75292;\n                    float res_75604 = light_75290 * colour_75293;\n                    float res_75605 = light_75291 * colour_75294;\n                    \n                    res_75592 = res_75599;\n                    res_75593 = res_75600;\n                    res_75594 = res_75601;\n                    res_75595 = res_75602;\n                    res_75596 = res_75603;\n                    res_75597 = res_75604;\n                    res_75598 = res_75605;\n                } else {\n                    float res_75606 = light_75289 * colour_75292;\n                    float res_75607 = light_75290 * colour_75293;\n                    float res_75608 = light_75291 * colour_75294;\n                    \n                    res_75592 = 50;\n                    res_75593 = light_75289;\n                    res_75594 = light_75290;\n                    res_75595 = light_75291;\n        ",
                   "            res_75596 = res_75606;\n                    res_75597 = res_75607;\n                    res_75598 = res_75608;\n                }\n                loopres_75536 = res_75586;\n                loopres_75537 = res_75587;\n                loopres_75538 = res_75588;\n                loopres_75539 = res_75589;\n                loopres_75540 = res_75590;\n                loopres_75541 = res_75591;\n                loopres_75542 = res_75592;\n                loopres_75543 = res_75593;\n                loopres_75544 = res_75594;\n                loopres_75545 = res_75595;\n                loopres_75546 = res_75596;\n                loopres_75547 = res_75597;\n                loopres_75548 = res_75598;\n            } else {\n                float res_75609 = r_75282 * r_75282;\n                float res_75610 = r_75283 * r_75283;\n                float res_75611 = r_75284 * r_75284;\n                float x_75612 = res_75609 + res_75610;\n                float res_75613 = res_75611 + x_75612;\n                float res_75614;\n                \n                res_75614 = futrts_sqrt32(res_75613);\n                \n                float scale_arg_75615 = 1.0F / res_75614;\n                float res_75616 = r_75283 * scale_arg_75615;\n                float y_75617 = 1.0F + res_75616;\n                float t_75618 = 0.5F * y_75617;\n                float res_75619 = 0.5F * t_75618;\n                float res_75620 = 0.7F * t_75618;\n                float scale_arg_75621 = 1.0F - t_75618;\n                float res_75622 = res_75619 + scale_arg_75621;\n                float res_75623 = res_75620 + scale_arg_75621;\n                float res_75624 = t_75618 + scale_arg_75621;\n                float res_75625 = light_75289 * res_75622;\n                float res_75626 = light_75290 * res_75623;\n                float res_75627 = light_75291 * res_75624;\n                \n                loopres_75536 = r_75282;\n                loopres_75537 = r_75283;\n                loopres_75538 = r_75284;\n              ",
                   "  loopres_75539 = r_75285;\n                loopres_75540 = r_75286;\n                loopres_75541 = r_75287;\n                loopres_75542 = 50;\n                loopres_75543 = light_75289;\n                loopres_75544 = light_75290;\n                loopres_75545 = light_75291;\n                loopres_75546 = res_75625;\n                loopres_75547 = res_75626;\n                loopres_75548 = res_75627;\n            }\n            \n            bool loop_cond_75628 = slt32(loopres_75542, 50);\n            bool loop_while_tmp_77215 = loop_cond_75628;\n            float r_tmp_77216 = loopres_75536;\n            float r_tmp_77217 = loopres_75537;\n            float r_tmp_77218 = loopres_75538;\n            float r_tmp_77219 = loopres_75539;\n            float r_tmp_77220 = loopres_75540;\n            float r_tmp_77221 = loopres_75541;\n            int32_t depth_tmp_77222 = loopres_75542;\n            float light_tmp_77223 = loopres_75543;\n            float light_tmp_77224 = loopres_75544;\n            float light_tmp_77225 = loopres_75545;\n            float colour_tmp_77226 = loopres_75546;\n            float colour_tmp_77227 = loopres_75547;\n            float colour_tmp_77228;\n            \n            colour_tmp_77228 = loopres_75548;\n            loop_while_75281 = loop_while_tmp_77215;\n            r_75282 = r_tmp_77216;\n            r_75283 = r_tmp_77217;\n            r_75284 = r_tmp_77218;\n            r_75285 = r_tmp_77219;\n            r_75286 = r_tmp_77220;\n            r_75287 = r_tmp_77221;\n            depth_75288 = depth_tmp_77222;\n            light_75289 = light_tmp_77223;\n            light_75290 = light_tmp_77224;\n            light_75291 = light_tmp_77225;\n            colour_75292 = colour_tmp_77226;\n            colour_75293 = colour_tmp_77227;\n            colour_75294 = colour_tmp_77228;\n        }\n        lifted_1_zlzb_arg_75267 = loop_while_75281;\n        lifted_1_zlzb_arg_75268 = r_75282;\n        lifted_1_zlzb_arg_75269 = r_75283;\n        lifted_1_zlzb_arg_75270 = r_75284",
                   ";\n        lifted_1_zlzb_arg_75271 = r_75285;\n        lifted_1_zlzb_arg_75272 = r_75286;\n        lifted_1_zlzb_arg_75273 = r_75287;\n        lifted_1_zlzb_arg_75274 = depth_75288;\n        lifted_1_zlzb_arg_75275 = light_75289;\n        lifted_1_zlzb_arg_75276 = light_75290;\n        lifted_1_zlzb_arg_75277 = light_75291;\n        lifted_1_zlzb_arg_75278 = colour_75292;\n        lifted_1_zlzb_arg_75279 = colour_75293;\n        lifted_1_zlzb_arg_75280 = colour_75294;\n        \n        float f32_arg_75629 = 255.99F * lifted_1_zlzb_arg_75278;\n        int32_t res_75630 = fptosi_f32_i32(f32_arg_75629);\n        float f32_arg_75631 = 255.99F * lifted_1_zlzb_arg_75279;\n        int32_t res_75632 = fptosi_f32_i32(f32_arg_75631);\n        float f32_arg_75633 = 255.99F * lifted_1_zlzb_arg_75280;\n        int32_t res_75634 = fptosi_f32_i32(f32_arg_75633);\n        int32_t x_75635 = res_75630 << 16;\n        int32_t y_75636 = res_75632 << 8;\n        int32_t x_75637 = x_75635 | y_75636;\n        int32_t res_75638 = res_75634 | x_75637;\n        \n        ((__global int32_t *) mem_76100)[add32(mul32(gtid_75245, w_71518),\n                                               gtid_75246)] = res_75638;\n    }\n    \n  error_0:\n    return;\n    #undef segmap_group_sizze_75253\n}\n__kernel void segred_nonseg_72613(__global int *global_failure, __local volatile\n                                  int64_t *red_arr_mem_76270_backing_aligned_0,\n                                  __local volatile\n                                  int64_t *red_arr_mem_76268_backing_aligned_1,\n                                  __local volatile\n                                  int64_t *red_arr_mem_76266_backing_aligned_2,\n                                  __local volatile\n                                  int64_t *red_arr_mem_76264_backing_aligned_3,\n                                  __local volatile\n                                  int64_t *red_arr_mem_76262_backing_aligned_4,\n                                  __local volatile\n            ",
                   "                      int64_t *red_arr_mem_76260_backing_aligned_5,\n                                  __local volatile\n                                  int64_t *sync_arr_mem_76258_backing_aligned_6,\n                                  int32_t num_groups_72603, __global\n                                  unsigned char *mem_75974, __global\n                                  unsigned char *mem_75977, __global\n                                  unsigned char *mem_75980, __global\n                                  unsigned char *mem_75983, __global\n                                  unsigned char *mem_75986, __global\n                                  unsigned char *mem_75989, __global\n                                  unsigned char *counter_mem_76238, __global\n                                  unsigned char *group_res_arr_mem_76240,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76242,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76244,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76246,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76248,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76250,\n                                  int32_t num_threads_76252)\n{\n    #define segred_group_sizze_72601 (bvh_rgbboxzisegred_group_sizze_72600)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_76270_backing_6 =\n                          (__local volatile\n                           char *) red_arr_mem_76270_backing_aligned_0;\n    __local volatile char *restrict red_arr_mem_76268_backing_5 =\n                          (__local volatile\n                           char *) red_arr_mem_76268_ba",
                   "cking_aligned_1;\n    __local volatile char *restrict red_arr_mem_76266_backing_4 =\n                          (__local volatile\n                           char *) red_arr_mem_76266_backing_aligned_2;\n    __local volatile char *restrict red_arr_mem_76264_backing_3 =\n                          (__local volatile\n                           char *) red_arr_mem_76264_backing_aligned_3;\n    __local volatile char *restrict red_arr_mem_76262_backing_2 =\n                          (__local volatile\n                           char *) red_arr_mem_76262_backing_aligned_4;\n    __local volatile char *restrict red_arr_mem_76260_backing_1 =\n                          (__local volatile\n                           char *) red_arr_mem_76260_backing_aligned_5;\n    __local volatile char *restrict sync_arr_mem_76258_backing_0 =\n                          (__local volatile\n                           char *) sync_arr_mem_76258_backing_aligned_6;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76253;\n    int32_t local_tid_76254;\n    int32_t group_sizze_76257;\n    int32_t wave_sizze_76256;\n    int32_t group_tid_76255;\n    \n    global_tid_76253 = get_global_id(0);\n    local_tid_76254 = get_local_id(0);\n    group_sizze_76257 = get_local_size(0);\n    wave_sizze_76256 = LOCKSTEP_WIDTH;\n    group_tid_76255 = get_group_id(0);\n    \n    int32_t phys_tid_72613 = global_tid_76253;\n    __local char *sync_arr_mem_76258;\n    \n    sync_arr_mem_76258 = (__local char *) sync_arr_mem_76258_backing_0;\n    \n    __local char *red_arr_mem_76260;\n    \n    red_arr_mem_76260 = (__local char *) red_arr_mem_76260_backing_1;\n    \n    __local char *red_arr_mem_76262;\n    \n    red_arr_mem_76262 = (__local char *) red_arr_mem_76262_backing_2;\n    \n    __local char *red_arr_mem_76264;\n    \n    red_arr_mem_76264 = (__local char *) red_arr_mem_76264_backing_3;\n    \n    __local char *red_arr_mem_76266;\n    \n    red_arr_mem_76266 = (__local char *) red_arr_mem_76266_backing_4;\n    \n    __local char *re",
                   "d_arr_mem_76268;\n    \n    red_arr_mem_76268 = (__local char *) red_arr_mem_76268_backing_5;\n    \n    __local char *red_arr_mem_76270;\n    \n    red_arr_mem_76270 = (__local char *) red_arr_mem_76270_backing_6;\n    \n    int32_t dummy_72611 = 0;\n    int32_t gtid_72612;\n    \n    gtid_72612 = 0;\n    \n    float x_acc_76272;\n    float x_acc_76273;\n    float x_acc_76274;\n    float x_acc_76275;\n    float x_acc_76276;\n    float x_acc_76277;\n    int32_t chunk_sizze_76278 = smin32(squot32(sub32(add32(400,\n                                                           mul32(segred_group_sizze_72601,\n                                                                 num_groups_72603)),\n                                                     1),\n                                               mul32(segred_group_sizze_72601,\n                                                     num_groups_72603)),\n                                       squot32(sub32(add32(sub32(400,\n                                                                 phys_tid_72613),\n                                                           num_threads_76252),\n                                                     1), num_threads_76252));\n    float x_69423;\n    float x_69424;\n    float x_69426;\n    float x_69427;\n    float x_69429;\n    float x_69430;\n    float x_69432;\n    float x_69433;\n    float x_69435;\n    float x_69436;\n    float x_69438;\n    float x_69439;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_76272 = -INFINITY;\n        x_acc_76273 = -INFINITY;\n        x_acc_76274 = -INFINITY;\n        x_acc_76275 = INFINITY;\n        x_acc_76276 = INFINITY;\n        x_acc_76277 = INFINITY;\n    }\n    for (int32_t i_76297 = 0; i_76297 < chunk_sizze_76278; i_76297++) {\n        gtid_72612 = add32(phys_tid_72613, mul32(num_threads_76252, i_76297));\n        // apply map function\n        {\n            bool index_concat_cmp_75720 = sle32(300, gtid_72612);\n            float index_concat_branch_75732;\n            \n         ",
                   "   if (index_concat_cmp_75720) {\n                int32_t index_concat_i_75721 = sub32(gtid_72612, 300);\n                int32_t new_index_75822 = squot32(index_concat_i_75721, 10);\n                float binop_y_75925 = sitofp_i32_f32(new_index_75822);\n                float binop_y_75926 = 6.0F * binop_y_75925;\n                float index_primexp_75927 = -30.0F + binop_y_75926;\n                \n                index_concat_branch_75732 = index_primexp_75927;\n            } else {\n                bool index_concat_cmp_75723 = sle32(200, gtid_72612);\n                float index_concat_branch_75731;\n                \n                if (index_concat_cmp_75723) {\n                    index_concat_branch_75731 = 30.0F;\n                } else {\n                    bool index_concat_cmp_75726 = sle32(100, gtid_72612);\n                    float index_concat_branch_75730;\n                    \n                    if (index_concat_cmp_75726) {\n                        int32_t index_concat_i_75727 = sub32(gtid_72612, 100);\n                        int32_t new_index_75826 = squot32(index_concat_i_75727,\n                                                          10);\n                        float binop_y_75922 = sitofp_i32_f32(new_index_75826);\n                        float binop_y_75923 = 6.0F * binop_y_75922;\n                        float index_primexp_75924 = -30.0F + binop_y_75923;\n                        \n                        index_concat_branch_75730 = index_primexp_75924;\n                    } else {\n                        index_concat_branch_75730 = -30.0F;\n                    }\n                    index_concat_branch_75731 = index_concat_branch_75730;\n                }\n                index_concat_branch_75732 = index_concat_branch_75731;\n            }\n            \n            float index_concat_branch_75716;\n            \n            if (index_concat_cmp_75720) {\n                index_concat_branch_75716 = -30.0F;\n            } else {\n                bool index_concat_cmp_7",
                   "5707 = sle32(200, gtid_72612);\n                float index_concat_branch_75715;\n                \n                if (index_concat_cmp_75707) {\n                    int32_t index_concat_i_75708 = sub32(gtid_72612, 200);\n                    int32_t new_index_75830 = squot32(index_concat_i_75708, 10);\n                    float binop_y_75931 = sitofp_i32_f32(new_index_75830);\n                    float binop_y_75932 = 6.0F * binop_y_75931;\n                    float index_primexp_75933 = -30.0F + binop_y_75932;\n                    \n                    index_concat_branch_75715 = index_primexp_75933;\n                } else {\n                    bool index_concat_cmp_75710 = sle32(100, gtid_72612);\n                    float index_concat_branch_75714;\n                    \n                    if (index_concat_cmp_75710) {\n                        int32_t index_concat_i_75711 = sub32(gtid_72612, 100);\n                        int32_t binop_x_75835 = squot32(index_concat_i_75711,\n                                                        10);\n                        int32_t binop_y_75836 = mul32(10, binop_x_75835);\n                        int32_t new_index_75837 = sub32(index_concat_i_75711,\n                                                        binop_y_75836);\n                        float binop_y_75842 = sitofp_i32_f32(new_index_75837);\n                        float binop_y_75843 = 6.0F * binop_y_75842;\n                        float index_primexp_75844 = -30.0F + binop_y_75843;\n                        \n                        index_concat_branch_75714 = index_primexp_75844;\n                    } else {\n                        int32_t new_index_75838 = squot32(gtid_72612, 10);\n                        float binop_y_75928 = sitofp_i32_f32(new_index_75838);\n                        float binop_y_75929 = 6.0F * binop_y_75928;\n                        float index_primexp_75930 = -30.0F + binop_y_75929;\n                        \n                        index_concat_branch_75714 = index_prim",
                   "exp_75930;\n                    }\n                    index_concat_branch_75715 = index_concat_branch_75714;\n                }\n                index_concat_branch_75716 = index_concat_branch_75715;\n            }\n            \n            float index_concat_branch_75700;\n            \n            if (index_concat_cmp_75720) {\n                int32_t index_concat_i_75689 = sub32(gtid_72612, 300);\n                int32_t binop_x_75846 = squot32(index_concat_i_75689, 10);\n                int32_t binop_y_75847 = mul32(10, binop_x_75846);\n                int32_t new_index_75848 = sub32(index_concat_i_75689,\n                                                binop_y_75847);\n                float binop_y_75863 = sitofp_i32_f32(new_index_75848);\n                float binop_y_75864 = 6.0F * binop_y_75863;\n                float index_primexp_75865 = -30.0F + binop_y_75864;\n                \n                index_concat_branch_75700 = index_primexp_75865;\n            } else {\n                bool index_concat_cmp_75691 = sle32(200, gtid_72612);\n                float index_concat_branch_75699;\n                \n                if (index_concat_cmp_75691) {\n                    int32_t index_concat_i_75692 = sub32(gtid_72612, 200);\n                    int32_t binop_x_75850 = squot32(index_concat_i_75692, 10);\n                    int32_t binop_y_75851 = mul32(10, binop_x_75850);\n                    int32_t new_index_75852 = sub32(index_concat_i_75692,\n                                                    binop_y_75851);\n                    float binop_y_75860 = sitofp_i32_f32(new_index_75852);\n                    float binop_y_75861 = 6.0F * binop_y_75860;\n                    float index_primexp_75862 = -30.0F + binop_y_75861;\n                    \n                    index_concat_branch_75699 = index_primexp_75862;\n                } else {\n                    bool index_concat_cmp_75694 = sle32(100, gtid_72612);\n                    float index_concat_branch_75698;\n                    \n      ",
                   "              if (index_concat_cmp_75694) {\n                        index_concat_branch_75698 = -30.0F;\n                    } else {\n                        int32_t binop_x_75854 = squot32(gtid_72612, 10);\n                        int32_t binop_y_75855 = mul32(10, binop_x_75854);\n                        int32_t new_index_75856 = sub32(gtid_72612,\n                                                        binop_y_75855);\n                        float binop_y_75857 = sitofp_i32_f32(new_index_75856);\n                        float binop_y_75858 = 6.0F * binop_y_75857;\n                        float index_primexp_75859 = -30.0F + binop_y_75858;\n                        \n                        index_concat_branch_75698 = index_primexp_75859;\n                    }\n                    index_concat_branch_75699 = index_concat_branch_75698;\n                }\n                index_concat_branch_75700 = index_concat_branch_75699;\n            }\n            \n            float res_69445 = index_concat_branch_75732 - 3.0F;\n            float res_69446 = index_concat_branch_75716 - 3.0F;\n            float res_69447 = index_concat_branch_75700 - 3.0F;\n            float res_69448 = 3.0F + index_concat_branch_75732;\n            float res_69449 = 3.0F + index_concat_branch_75716;\n            float res_69450 = 3.0F + index_concat_branch_75700;\n            float y_69451 = res_69448 - res_69445;\n            float res_69452 = res_69445 + y_69451;\n            float y_69453 = res_69449 - res_69446;\n            float res_69454 = res_69446 + y_69453;\n            float y_69455 = res_69450 - res_69447;\n            float res_69456 = res_69447 + y_69455;\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_69423 = x_acc_76272;\n                x_69426 = x_acc_76273;\n                x_69429 = x_acc_76274;\n                x_69432 = x_acc_76275;\n                x_69435 = x_acc_76276;\n                x_69438 = x_acc_76277;\n           ",
                   " }\n            // load new values\n            {\n                x_69424 = res_69452;\n                x_69427 = res_69454;\n                x_69430 = res_69456;\n                x_69433 = res_69452;\n                x_69436 = res_69454;\n                x_69439 = res_69456;\n            }\n            // apply reduction operator\n            {\n                float res_69425 = fmax32(x_69423, x_69424);\n                float res_69428 = fmax32(x_69426, x_69427);\n                float res_69431 = fmax32(x_69429, x_69430);\n                float res_69434 = fmin32(x_69432, x_69433);\n                float res_69437 = fmin32(x_69435, x_69436);\n                float res_69440 = fmin32(x_69438, x_69439);\n                \n                // store in accumulator\n                {\n                    x_acc_76272 = res_69425;\n                    x_acc_76273 = res_69428;\n                    x_acc_76274 = res_69431;\n                    x_acc_76275 = res_69434;\n                    x_acc_76276 = res_69437;\n                    x_acc_76277 = res_69440;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_69423 = x_acc_76272;\n        x_69426 = x_acc_76273;\n        x_69429 = x_acc_76274;\n        x_69432 = x_acc_76275;\n        x_69435 = x_acc_76276;\n        x_69438 = x_acc_76277;\n        ((__local float *) red_arr_mem_76260)[local_tid_76254] = x_69423;\n        ((__local float *) red_arr_mem_76262)[local_tid_76254] = x_69426;\n        ((__local float *) red_arr_mem_76264)[local_tid_76254] = x_69429;\n        ((__local float *) red_arr_mem_76266)[local_tid_76254] = x_69432;\n        ((__local float *) red_arr_mem_76268)[local_tid_76254] = x_69435;\n        ((__local float *) red_arr_mem_76270)[local_tid_76254] = x_69438;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_76298;\n    int32_t skip_waves_76299;\n    float x_76279;\n    float x_76280;\n    float x_76281;\n    float x_76282;\n    float x_76283;\n    float x_",
                   "76284;\n    float x_76285;\n    float x_76286;\n    float x_76287;\n    float x_76288;\n    float x_76289;\n    float x_76290;\n    \n    offset_76298 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_76254, segred_group_sizze_72601)) {\n            x_76279 = ((__local\n                        float *) red_arr_mem_76260)[add32(local_tid_76254,\n                                                          offset_76298)];\n            x_76280 = ((__local\n                        float *) red_arr_mem_76262)[add32(local_tid_76254,\n                                                          offset_76298)];\n            x_76281 = ((__local\n                        float *) red_arr_mem_76264)[add32(local_tid_76254,\n                                                          offset_76298)];\n            x_76282 = ((__local\n                        float *) red_arr_mem_76266)[add32(local_tid_76254,\n                                                          offset_76298)];\n            x_76283 = ((__local\n                        float *) red_arr_mem_76268)[add32(local_tid_76254,\n                                                          offset_76298)];\n            x_76284 = ((__local\n                        float *) red_arr_mem_76270)[add32(local_tid_76254,\n                                                          offset_76298)];\n        }\n    }\n    offset_76298 = 1;\n    while (slt32(offset_76298, wave_sizze_76256)) {\n        if (slt32(add32(local_tid_76254, offset_76298),\n                  segred_group_sizze_72601) && (sub32(local_tid_76254,\n                                                      mul32(squot32(local_tid_76254,\n                                                                    wave_sizze_76256),\n                                                            wave_sizze_76256)) &\n                                                sub32(mul32(2, offset_76298),\n                                                      1)) == 0) {\n            // read array el",
                   "ement\n            {\n                x_76285 = ((volatile __local\n                            float *) red_arr_mem_76260)[add32(local_tid_76254,\n                                                              offset_76298)];\n                x_76286 = ((volatile __local\n                            float *) red_arr_mem_76262)[add32(local_tid_76254,\n                                                              offset_76298)];\n                x_76287 = ((volatile __local\n                            float *) red_arr_mem_76264)[add32(local_tid_76254,\n                                                              offset_76298)];\n                x_76288 = ((volatile __local\n                            float *) red_arr_mem_76266)[add32(local_tid_76254,\n                                                              offset_76298)];\n                x_76289 = ((volatile __local\n                            float *) red_arr_mem_76268)[add32(local_tid_76254,\n                                                              offset_76298)];\n                x_76290 = ((volatile __local\n                            float *) red_arr_mem_76270)[add32(local_tid_76254,\n                                                              offset_76298)];\n            }\n            // apply reduction operation\n            {\n                float res_76291 = fmax32(x_76279, x_76285);\n                float res_76292 = fmax32(x_76280, x_76286);\n                float res_76293 = fmax32(x_76281, x_76287);\n                float res_76294 = fmin32(x_76282, x_76288);\n                float res_76295 = fmin32(x_76283, x_76289);\n                float res_76296 = fmin32(x_76284, x_76290);\n                \n                x_76279 = res_76291;\n                x_76280 = res_76292;\n                x_76281 = res_76293;\n                x_76282 = res_76294;\n                x_76283 = res_76295;\n                x_76284 = res_76296;\n            }\n            // write result of operation\n            {\n                ((volatile __lo",
                   "cal\n                  float *) red_arr_mem_76260)[local_tid_76254] = x_76279;\n                ((volatile __local\n                  float *) red_arr_mem_76262)[local_tid_76254] = x_76280;\n                ((volatile __local\n                  float *) red_arr_mem_76264)[local_tid_76254] = x_76281;\n                ((volatile __local\n                  float *) red_arr_mem_76266)[local_tid_76254] = x_76282;\n                ((volatile __local\n                  float *) red_arr_mem_76268)[local_tid_76254] = x_76283;\n                ((volatile __local\n                  float *) red_arr_mem_76270)[local_tid_76254] = x_76284;\n            }\n        }\n        offset_76298 *= 2;\n    }\n    skip_waves_76299 = 1;\n    while (slt32(skip_waves_76299, squot32(sub32(add32(segred_group_sizze_72601,\n                                                       wave_sizze_76256), 1),\n                                           wave_sizze_76256))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_76298 = mul32(skip_waves_76299, wave_sizze_76256);\n        if (slt32(add32(local_tid_76254, offset_76298),\n                  segred_group_sizze_72601) && (sub32(local_tid_76254,\n                                                      mul32(squot32(local_tid_76254,\n                                                                    wave_sizze_76256),\n                                                            wave_sizze_76256)) ==\n                                                0 && (squot32(local_tid_76254,\n                                                              wave_sizze_76256) &\n                                                      sub32(mul32(2,\n                                                                  skip_waves_76299),\n                                                            1)) == 0)) {\n            // read array element\n            {\n                x_76285 = ((__local\n                            float *) red_arr_mem_76260)[add32(local_tid_76254,\n                                  ",
                   "                            offset_76298)];\n                x_76286 = ((__local\n                            float *) red_arr_mem_76262)[add32(local_tid_76254,\n                                                              offset_76298)];\n                x_76287 = ((__local\n                            float *) red_arr_mem_76264)[add32(local_tid_76254,\n                                                              offset_76298)];\n                x_76288 = ((__local\n                            float *) red_arr_mem_76266)[add32(local_tid_76254,\n                                                              offset_76298)];\n                x_76289 = ((__local\n                            float *) red_arr_mem_76268)[add32(local_tid_76254,\n                                                              offset_76298)];\n                x_76290 = ((__local\n                            float *) red_arr_mem_76270)[add32(local_tid_76254,\n                                                              offset_76298)];\n            }\n            // apply reduction operation\n            {\n                float res_76291 = fmax32(x_76279, x_76285);\n                float res_76292 = fmax32(x_76280, x_76286);\n                float res_76293 = fmax32(x_76281, x_76287);\n                float res_76294 = fmin32(x_76282, x_76288);\n                float res_76295 = fmin32(x_76283, x_76289);\n                float res_76296 = fmin32(x_76284, x_76290);\n                \n                x_76279 = res_76291;\n                x_76280 = res_76292;\n                x_76281 = res_76293;\n                x_76282 = res_76294;\n                x_76283 = res_76295;\n                x_76284 = res_76296;\n            }\n            // write result of operation\n            {\n                ((__local float *) red_arr_mem_76260)[local_tid_76254] =\n                    x_76279;\n                ((__local float *) red_arr_mem_76262)[local_tid_76254] =\n                    x_76280;\n                ((__local float *) red_arr_mem_762",
                   "64)[local_tid_76254] =\n                    x_76281;\n                ((__local float *) red_arr_mem_76266)[local_tid_76254] =\n                    x_76282;\n                ((__local float *) red_arr_mem_76268)[local_tid_76254] =\n                    x_76283;\n                ((__local float *) red_arr_mem_76270)[local_tid_76254] =\n                    x_76284;\n            }\n        }\n        skip_waves_76299 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (local_tid_76254 == 0) {\n            x_acc_76272 = x_76279;\n            x_acc_76273 = x_76280;\n            x_acc_76274 = x_76281;\n            x_acc_76275 = x_76282;\n            x_acc_76276 = x_76283;\n            x_acc_76277 = x_76284;\n        }\n    }\n    \n    int32_t old_counter_76300;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_76254 == 0) {\n            ((__global float *) group_res_arr_mem_76240)[mul32(group_tid_76255,\n                                                               segred_group_sizze_72601)] =\n                x_acc_76272;\n            ((__global float *) group_res_arr_mem_76242)[mul32(group_tid_76255,\n                                                               segred_group_sizze_72601)] =\n                x_acc_76273;\n            ((__global float *) group_res_arr_mem_76244)[mul32(group_tid_76255,\n                                                               segred_group_sizze_72601)] =\n                x_acc_76274;\n            ((__global float *) group_res_arr_mem_76246)[mul32(group_tid_76255,\n                                                               segred_group_sizze_72601)] =\n                x_acc_76275;\n            ((__global float *) group_res_arr_mem_76248)[mul32(group_tid_76255,\n                                                               segred_group_sizze_72601)] =\n                x_acc_76276;\n            ((__global float *) group_res_arr_mem_76250)[mul32(group_tid_7",
                   "6255,\n                                                               segred_group_sizze_72601)] =\n                x_acc_76277;\n            mem_fence_global();\n            old_counter_76300 = atomic_add(&((volatile __global\n                                              int *) counter_mem_76238)[0],\n                                           (int) 1);\n            ((__local bool *) sync_arr_mem_76258)[0] = old_counter_76300 ==\n                sub32(num_groups_72603, 1);\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    barrier(CLK_GLOBAL_MEM_FENCE);\n    \n    bool is_last_group_76301 = ((__local bool *) sync_arr_mem_76258)[0];\n    \n    if (is_last_group_76301) {\n        if (local_tid_76254 == 0) {\n            old_counter_76300 = atomic_add(&((volatile __global\n                                              int *) counter_mem_76238)[0],\n                                           (int) sub32(0, num_groups_72603));\n        }\n        // read in the per-group-results\n        {\n            if (slt32(local_tid_76254, num_groups_72603)) {\n                x_69423 = ((__global\n                            float *) group_res_arr_mem_76240)[mul32(local_tid_76254,\n                                                                    segred_group_sizze_72601)];\n            } else {\n                x_69423 = -INFINITY;\n            }\n            ((__local float *) red_arr_mem_76260)[local_tid_76254] = x_69423;\n            if (slt32(local_tid_76254, num_groups_72603)) {\n                x_69426 = ((__global\n                            float *) group_res_arr_mem_76242)[mul32(local_tid_76254,\n                                                                    segred_group_sizze_72601)];\n            } else {\n                x_69426 = -INFINITY;\n            }\n            ((__local float *) red_arr_mem_76262)[local_tid_76254] = x_69426;\n            if (slt32(local_tid_76254, num_groups_72603)) {\n                x_69429 = ((__global\n                            float *) group_res_arr_mem_76244)",
                   "[mul32(local_tid_76254,\n                                                                    segred_group_sizze_72601)];\n            } else {\n                x_69429 = -INFINITY;\n            }\n            ((__local float *) red_arr_mem_76264)[local_tid_76254] = x_69429;\n            if (slt32(local_tid_76254, num_groups_72603)) {\n                x_69432 = ((__global\n                            float *) group_res_arr_mem_76246)[mul32(local_tid_76254,\n                                                                    segred_group_sizze_72601)];\n            } else {\n                x_69432 = INFINITY;\n            }\n            ((__local float *) red_arr_mem_76266)[local_tid_76254] = x_69432;\n            if (slt32(local_tid_76254, num_groups_72603)) {\n                x_69435 = ((__global\n                            float *) group_res_arr_mem_76248)[mul32(local_tid_76254,\n                                                                    segred_group_sizze_72601)];\n            } else {\n                x_69435 = INFINITY;\n            }\n            ((__local float *) red_arr_mem_76268)[local_tid_76254] = x_69435;\n            if (slt32(local_tid_76254, num_groups_72603)) {\n                x_69438 = ((__global\n                            float *) group_res_arr_mem_76250)[mul32(local_tid_76254,\n                                                                    segred_group_sizze_72601)];\n            } else {\n                x_69438 = INFINITY;\n            }\n            ((__local float *) red_arr_mem_76270)[local_tid_76254] = x_69438;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_76302;\n            int32_t skip_waves_76303;\n            float x_76279;\n            float x_76280;\n            float x_76281;\n            float x_76282;\n            float x_76283;\n            float x_76284;\n            float x_76285;\n            float x_76286;\n            float x_76287;\n            float x_76288;\n         ",
                   "   float x_76289;\n            float x_76290;\n            \n            offset_76302 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_76254, segred_group_sizze_72601)) {\n                    x_76279 = ((__local\n                                float *) red_arr_mem_76260)[add32(local_tid_76254,\n                                                                  offset_76302)];\n                    x_76280 = ((__local\n                                float *) red_arr_mem_76262)[add32(local_tid_76254,\n                                                                  offset_76302)];\n                    x_76281 = ((__local\n                                float *) red_arr_mem_76264)[add32(local_tid_76254,\n                                                                  offset_76302)];\n                    x_76282 = ((__local\n                                float *) red_arr_mem_76266)[add32(local_tid_76254,\n                                                                  offset_76302)];\n                    x_76283 = ((__local\n                                float *) red_arr_mem_76268)[add32(local_tid_76254,\n                                                                  offset_76302)];\n                    x_76284 = ((__local\n                                float *) red_arr_mem_76270)[add32(local_tid_76254,\n                                                                  offset_76302)];\n                }\n            }\n            offset_76302 = 1;\n            while (slt32(offset_76302, wave_sizze_76256)) {\n                if (slt32(add32(local_tid_76254, offset_76302),\n                          segred_group_sizze_72601) && (sub32(local_tid_76254,\n                                                              mul32(squot32(local_tid_76254,\n                                                                            wave_sizze_76256),\n                                                                    wave_sizze_76",
                   "256)) &\n                                                        sub32(mul32(2,\n                                                                    offset_76302),\n                                                              1)) == 0) {\n                    // read array element\n                    {\n                        x_76285 = ((volatile __local\n                                    float *) red_arr_mem_76260)[add32(local_tid_76254,\n                                                                      offset_76302)];\n                        x_76286 = ((volatile __local\n                                    float *) red_arr_mem_76262)[add32(local_tid_76254,\n                                                                      offset_76302)];\n                        x_76287 = ((volatile __local\n                                    float *) red_arr_mem_76264)[add32(local_tid_76254,\n                                                                      offset_76302)];\n                        x_76288 = ((volatile __local\n                                    float *) red_arr_mem_76266)[add32(local_tid_76254,\n                                                                      offset_76302)];\n                        x_76289 = ((volatile __local\n                                    float *) red_arr_mem_76268)[add32(local_tid_76254,\n                                                                      offset_76302)];\n                        x_76290 = ((volatile __local\n                                    float *) red_arr_mem_76270)[add32(local_tid_76254,\n                                                                      offset_76302)];\n                    }\n                    // apply reduction operation\n                    {\n                        float res_76291 = fmax32(x_76279, x_76285);\n                        float res_76292 = fmax32(x_76280, x_76286);\n                        float res_76293 = fmax32(x_76281, x_76287);\n                        float res_76294 = fmin3",
                   "2(x_76282, x_76288);\n                        float res_76295 = fmin32(x_76283, x_76289);\n                        float res_76296 = fmin32(x_76284, x_76290);\n                        \n                        x_76279 = res_76291;\n                        x_76280 = res_76292;\n                        x_76281 = res_76293;\n                        x_76282 = res_76294;\n                        x_76283 = res_76295;\n                        x_76284 = res_76296;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          float *) red_arr_mem_76260)[local_tid_76254] =\n                            x_76279;\n                        ((volatile __local\n                          float *) red_arr_mem_76262)[local_tid_76254] =\n                            x_76280;\n                        ((volatile __local\n                          float *) red_arr_mem_76264)[local_tid_76254] =\n                            x_76281;\n                        ((volatile __local\n                          float *) red_arr_mem_76266)[local_tid_76254] =\n                            x_76282;\n                        ((volatile __local\n                          float *) red_arr_mem_76268)[local_tid_76254] =\n                            x_76283;\n                        ((volatile __local\n                          float *) red_arr_mem_76270)[local_tid_76254] =\n                            x_76284;\n                    }\n                }\n                offset_76302 *= 2;\n            }\n            skip_waves_76303 = 1;\n            while (slt32(skip_waves_76303,\n                         squot32(sub32(add32(segred_group_sizze_72601,\n                                             wave_sizze_76256), 1),\n                                 wave_sizze_76256))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_76302 = mul32(skip_waves_76303, wave_sizze_76256);\n                if (slt32(add32(local_tid_76254, offset_7",
                   "6302),\n                          segred_group_sizze_72601) && (sub32(local_tid_76254,\n                                                              mul32(squot32(local_tid_76254,\n                                                                            wave_sizze_76256),\n                                                                    wave_sizze_76256)) ==\n                                                        0 &&\n                                                        (squot32(local_tid_76254,\n                                                                 wave_sizze_76256) &\n                                                         sub32(mul32(2,\n                                                                     skip_waves_76303),\n                                                               1)) == 0)) {\n                    // read array element\n                    {\n                        x_76285 = ((__local\n                                    float *) red_arr_mem_76260)[add32(local_tid_76254,\n                                                                      offset_76302)];\n                        x_76286 = ((__local\n                                    float *) red_arr_mem_76262)[add32(local_tid_76254,\n                                                                      offset_76302)];\n                        x_76287 = ((__local\n                                    float *) red_arr_mem_76264)[add32(local_tid_76254,\n                                                                      offset_76302)];\n                        x_76288 = ((__local\n                                    float *) red_arr_mem_76266)[add32(local_tid_76254,\n                                                                      offset_76302)];\n                        x_76289 = ((__local\n                                    float *) red_arr_mem_76268)[add32(local_tid_76254,\n                                                                      offset_76302)];\n                       ",
                   " x_76290 = ((__local\n                                    float *) red_arr_mem_76270)[add32(local_tid_76254,\n                                                                      offset_76302)];\n                    }\n                    // apply reduction operation\n                    {\n                        float res_76291 = fmax32(x_76279, x_76285);\n                        float res_76292 = fmax32(x_76280, x_76286);\n                        float res_76293 = fmax32(x_76281, x_76287);\n                        float res_76294 = fmin32(x_76282, x_76288);\n                        float res_76295 = fmin32(x_76283, x_76289);\n                        float res_76296 = fmin32(x_76284, x_76290);\n                        \n                        x_76279 = res_76291;\n                        x_76280 = res_76292;\n                        x_76281 = res_76293;\n                        x_76282 = res_76294;\n                        x_76283 = res_76295;\n                        x_76284 = res_76296;\n                    }\n                    // write result of operation\n                    {\n                        ((__local float *) red_arr_mem_76260)[local_tid_76254] =\n                            x_76279;\n                        ((__local float *) red_arr_mem_76262)[local_tid_76254] =\n                            x_76280;\n                        ((__local float *) red_arr_mem_76264)[local_tid_76254] =\n                            x_76281;\n                        ((__local float *) red_arr_mem_76266)[local_tid_76254] =\n                            x_76282;\n                        ((__local float *) red_arr_mem_76268)[local_tid_76254] =\n                            x_76283;\n                        ((__local float *) red_arr_mem_76270)[local_tid_76254] =\n                            x_76284;\n                    }\n                }\n                skip_waves_76303 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_76254 == 0) {\n  ",
                   "                  ((__global float *) mem_75974)[0] = x_76279;\n                    ((__global float *) mem_75977)[0] = x_76280;\n                    ((__global float *) mem_75980)[0] = x_76281;\n                    ((__global float *) mem_75983)[0] = x_76282;\n                    ((__global float *) mem_75986)[0] = x_76283;\n                    ((__global float *) mem_75989)[0] = x_76284;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_72601\n}\n__kernel void segred_nonseg_72724(__global int *global_failure, __local volatile\n                                  int64_t *red_arr_mem_76401_backing_aligned_0,\n                                  __local volatile\n                                  int64_t *sync_arr_mem_76399_backing_aligned_1,\n                                  int32_t num_groups_72717, __global\n                                  unsigned char *xs_mem_75996, __global\n                                  unsigned char *xs_mem_75997, __global\n                                  unsigned char *mem_76010, __global\n                                  unsigned char *mem_76014, __global\n                                  unsigned char *mem_76019, __global\n                                  unsigned char *mem_76024, __global\n                                  unsigned char *counter_mem_76389, __global\n                                  unsigned char *group_res_arr_mem_76391,\n                                  int32_t num_threads_76393)\n{\n    #define segred_group_sizze_72715 (bvh_rgbboxzisegred_group_sizze_72714)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_76401_backing_1 =\n                          (__local volatile\n                           char *) red_arr_mem_76401_backing_aligned_0;\n    __local volatile char *restrict sync_arr_mem_76399_backing_0 =\n                          (__local volatile\n                           char *) syn",
                   "c_arr_mem_76399_backing_aligned_1;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76394;\n    int32_t local_tid_76395;\n    int32_t group_sizze_76398;\n    int32_t wave_sizze_76397;\n    int32_t group_tid_76396;\n    \n    global_tid_76394 = get_global_id(0);\n    local_tid_76395 = get_local_id(0);\n    group_sizze_76398 = get_local_size(0);\n    wave_sizze_76397 = LOCKSTEP_WIDTH;\n    group_tid_76396 = get_group_id(0);\n    \n    int32_t phys_tid_72724 = global_tid_76394;\n    __local char *sync_arr_mem_76399;\n    \n    sync_arr_mem_76399 = (__local char *) sync_arr_mem_76399_backing_0;\n    \n    __local char *red_arr_mem_76401;\n    \n    red_arr_mem_76401 = (__local char *) red_arr_mem_76401_backing_1;\n    \n    int32_t dummy_72722 = 0;\n    int32_t gtid_72723;\n    \n    gtid_72723 = 0;\n    \n    int32_t x_acc_76403;\n    int32_t chunk_sizze_76404 = smin32(squot32(sub32(add32(400,\n                                                           mul32(segred_group_sizze_72715,\n                                                                 num_groups_72717)),\n                                                     1),\n                                               mul32(segred_group_sizze_72715,\n                                                     num_groups_72717)),\n                                       squot32(sub32(add32(sub32(400,\n                                                                 phys_tid_72724),\n                                                           num_threads_76393),\n                                                     1), num_threads_76393));\n    int32_t x_69563;\n    int32_t x_69564;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_76403 = 0;\n    }\n    for (int32_t i_76408 = 0; i_76408 < chunk_sizze_76404; i_76408++) {\n        gtid_72723 = add32(phys_tid_72724, mul32(num_threads_76393, i_76408));\n        // apply map function\n        {\n            int32_t copy_p_69566 = ((__global\n                                   ",
                   "  int32_t *) xs_mem_75997)[gtid_72723];\n            int32_t x_69567 = ((__global int32_t *) mem_76010)[gtid_72723];\n            int32_t copy_p_69568 = ((__global\n                                     int32_t *) xs_mem_75996)[gtid_72723];\n            \n            // save map-out results\n            {\n                ((__global int32_t *) mem_76019)[add32(mul32(dummy_72722, 400),\n                                                       gtid_72723)] =\n                    copy_p_69566;\n                ((__global int32_t *) mem_76024)[add32(mul32(dummy_72722, 400),\n                                                       gtid_72723)] =\n                    copy_p_69568;\n            }\n            // load accumulator\n            {\n                x_69563 = x_acc_76403;\n            }\n            // load new values\n            {\n                x_69564 = x_69567;\n            }\n            // apply reduction operator\n            {\n                int32_t res_69565 = add32(x_69563, x_69564);\n                \n                // store in accumulator\n                {\n                    x_acc_76403 = res_69565;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_69563 = x_acc_76403;\n        ((__local int32_t *) red_arr_mem_76401)[local_tid_76395] = x_69563;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_76409;\n    int32_t skip_waves_76410;\n    int32_t x_76405;\n    int32_t x_76406;\n    \n    offset_76409 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_76395, segred_group_sizze_72715)) {\n            x_76405 = ((__local\n                        int32_t *) red_arr_mem_76401)[add32(local_tid_76395,\n                                                            offset_76409)];\n        }\n    }\n    offset_76409 = 1;\n    while (slt32(offset_76409, wave_sizze_76397)) {\n        if (slt32(add32(local_tid_76395, offset_76409),\n                  segred_group_sizze_72",
                   "715) && (sub32(local_tid_76395,\n                                                      mul32(squot32(local_tid_76395,\n                                                                    wave_sizze_76397),\n                                                            wave_sizze_76397)) &\n                                                sub32(mul32(2, offset_76409),\n                                                      1)) == 0) {\n            // read array element\n            {\n                x_76406 = ((volatile __local\n                            int32_t *) red_arr_mem_76401)[add32(local_tid_76395,\n                                                                offset_76409)];\n            }\n            // apply reduction operation\n            {\n                int32_t res_76407 = add32(x_76405, x_76406);\n                \n                x_76405 = res_76407;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  int32_t *) red_arr_mem_76401)[local_tid_76395] = x_76405;\n            }\n        }\n        offset_76409 *= 2;\n    }\n    skip_waves_76410 = 1;\n    while (slt32(skip_waves_76410, squot32(sub32(add32(segred_group_sizze_72715,\n                                                       wave_sizze_76397), 1),\n                                           wave_sizze_76397))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_76409 = mul32(skip_waves_76410, wave_sizze_76397);\n        if (slt32(add32(local_tid_76395, offset_76409),\n                  segred_group_sizze_72715) && (sub32(local_tid_76395,\n                                                      mul32(squot32(local_tid_76395,\n                                                                    wave_sizze_76397),\n                                                            wave_sizze_76397)) ==\n                                                0 && (squot32(local_tid_76395,\n                                                              wave_sizze_76397) &\n",
                   "                                                      sub32(mul32(2,\n                                                                  skip_waves_76410),\n                                                            1)) == 0)) {\n            // read array element\n            {\n                x_76406 = ((__local\n                            int32_t *) red_arr_mem_76401)[add32(local_tid_76395,\n                                                                offset_76409)];\n            }\n            // apply reduction operation\n            {\n                int32_t res_76407 = add32(x_76405, x_76406);\n                \n                x_76405 = res_76407;\n            }\n            // write result of operation\n            {\n                ((__local int32_t *) red_arr_mem_76401)[local_tid_76395] =\n                    x_76405;\n            }\n        }\n        skip_waves_76410 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (local_tid_76395 == 0) {\n            x_acc_76403 = x_76405;\n        }\n    }\n    \n    int32_t old_counter_76411;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_76395 == 0) {\n            ((__global\n              int32_t *) group_res_arr_mem_76391)[mul32(group_tid_76396,\n                                                        segred_group_sizze_72715)] =\n                x_acc_76403;\n            mem_fence_global();\n            old_counter_76411 = atomic_add(&((volatile __global\n                                              int *) counter_mem_76389)[0],\n                                           (int) 1);\n            ((__local bool *) sync_arr_mem_76399)[0] = old_counter_76411 ==\n                sub32(num_groups_72717, 1);\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    barrier(CLK_GLOBAL_MEM_FENCE);\n    \n    bool is_last_group_76412 = ((__local bool *) sync_arr_mem_76399)[0];\n    \n    if (is_last_group_76412) {\n        if (local_tid_76395 =",
                   "= 0) {\n            old_counter_76411 = atomic_add(&((volatile __global\n                                              int *) counter_mem_76389)[0],\n                                           (int) sub32(0, num_groups_72717));\n        }\n        // read in the per-group-results\n        {\n            if (slt32(local_tid_76395, num_groups_72717)) {\n                x_69563 = ((__global\n                            int32_t *) group_res_arr_mem_76391)[mul32(local_tid_76395,\n                                                                      segred_group_sizze_72715)];\n            } else {\n                x_69563 = 0;\n            }\n            ((__local int32_t *) red_arr_mem_76401)[local_tid_76395] = x_69563;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_76413;\n            int32_t skip_waves_76414;\n            int32_t x_76405;\n            int32_t x_76406;\n            \n            offset_76413 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_76395, segred_group_sizze_72715)) {\n                    x_76405 = ((__local\n                                int32_t *) red_arr_mem_76401)[add32(local_tid_76395,\n                                                                    offset_76413)];\n                }\n            }\n            offset_76413 = 1;\n            while (slt32(offset_76413, wave_sizze_76397)) {\n                if (slt32(add32(local_tid_76395, offset_76413),\n                          segred_group_sizze_72715) && (sub32(local_tid_76395,\n                                                              mul32(squot32(local_tid_76395,\n                                                                            wave_sizze_76397),\n                                                                    wave_sizze_76397)) &\n                                                        sub32(mul32(2,\n                                               ",
                   "                     offset_76413),\n                                                              1)) == 0) {\n                    // read array element\n                    {\n                        x_76406 = ((volatile __local\n                                    int32_t *) red_arr_mem_76401)[add32(local_tid_76395,\n                                                                        offset_76413)];\n                    }\n                    // apply reduction operation\n                    {\n                        int32_t res_76407 = add32(x_76405, x_76406);\n                        \n                        x_76405 = res_76407;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          int32_t *) red_arr_mem_76401)[local_tid_76395] =\n                            x_76405;\n                    }\n                }\n                offset_76413 *= 2;\n            }\n            skip_waves_76414 = 1;\n            while (slt32(skip_waves_76414,\n                         squot32(sub32(add32(segred_group_sizze_72715,\n                                             wave_sizze_76397), 1),\n                                 wave_sizze_76397))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_76413 = mul32(skip_waves_76414, wave_sizze_76397);\n                if (slt32(add32(local_tid_76395, offset_76413),\n                          segred_group_sizze_72715) && (sub32(local_tid_76395,\n                                                              mul32(squot32(local_tid_76395,\n                                                                            wave_sizze_76397),\n                                                                    wave_sizze_76397)) ==\n                                                        0 &&\n                                                        (squot32(local_tid_76395,\n                                                                 wave_si",
                   "zze_76397) &\n                                                         sub32(mul32(2,\n                                                                     skip_waves_76414),\n                                                               1)) == 0)) {\n                    // read array element\n                    {\n                        x_76406 = ((__local\n                                    int32_t *) red_arr_mem_76401)[add32(local_tid_76395,\n                                                                        offset_76413)];\n                    }\n                    // apply reduction operation\n                    {\n                        int32_t res_76407 = add32(x_76405, x_76406);\n                        \n                        x_76405 = res_76407;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          int32_t *) red_arr_mem_76401)[local_tid_76395] =\n                            x_76405;\n                    }\n                }\n                skip_waves_76414 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_76395 == 0) {\n                    ((__global int32_t *) mem_76014)[0] = x_76405;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_72715\n}\n__kernel void segred_nonseg_73197(__global int *global_failure, __local volatile\n                                  int64_t *red_arr_mem_76543_backing_aligned_0,\n                                  __local volatile\n                                  int64_t *red_arr_mem_76541_backing_aligned_1,\n                                  __local volatile\n                                  int64_t *red_arr_mem_76539_backing_aligned_2,\n                                  __local volatile\n                                  int64_t *red_arr_mem_76537_backing_aligned_3,\n                                  __local volatile\n  ",
                   "                                int64_t *red_arr_mem_76535_backing_aligned_4,\n                                  __local volatile\n                                  int64_t *red_arr_mem_76533_backing_aligned_5,\n                                  __local volatile\n                                  int64_t *sync_arr_mem_76531_backing_aligned_6,\n                                  int32_t num_groups_73187, __global\n                                  unsigned char *mem_75974, __global\n                                  unsigned char *mem_75977, __global\n                                  unsigned char *mem_75980, __global\n                                  unsigned char *mem_75983, __global\n                                  unsigned char *mem_75986, __global\n                                  unsigned char *mem_75989, __global\n                                  unsigned char *counter_mem_76511, __global\n                                  unsigned char *group_res_arr_mem_76513,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76515,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76517,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76519,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76521,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76523,\n                                  int32_t num_threads_76525)\n{\n    #define segred_group_sizze_73185 (bvh_irregzisegred_group_sizze_73184)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_76543_backing_6 =\n                          (__local volatile\n                           char *) red_arr_mem_76543_backing_aligned_0;\n    __local volatile char",
                   " *restrict red_arr_mem_76541_backing_5 =\n                          (__local volatile\n                           char *) red_arr_mem_76541_backing_aligned_1;\n    __local volatile char *restrict red_arr_mem_76539_backing_4 =\n                          (__local volatile\n                           char *) red_arr_mem_76539_backing_aligned_2;\n    __local volatile char *restrict red_arr_mem_76537_backing_3 =\n                          (__local volatile\n                           char *) red_arr_mem_76537_backing_aligned_3;\n    __local volatile char *restrict red_arr_mem_76535_backing_2 =\n                          (__local volatile\n                           char *) red_arr_mem_76535_backing_aligned_4;\n    __local volatile char *restrict red_arr_mem_76533_backing_1 =\n                          (__local volatile\n                           char *) red_arr_mem_76533_backing_aligned_5;\n    __local volatile char *restrict sync_arr_mem_76531_backing_0 =\n                          (__local volatile\n                           char *) sync_arr_mem_76531_backing_aligned_6;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76526;\n    int32_t local_tid_76527;\n    int32_t group_sizze_76530;\n    int32_t wave_sizze_76529;\n    int32_t group_tid_76528;\n    \n    global_tid_76526 = get_global_id(0);\n    local_tid_76527 = get_local_id(0);\n    group_sizze_76530 = get_local_size(0);\n    wave_sizze_76529 = LOCKSTEP_WIDTH;\n    group_tid_76528 = get_group_id(0);\n    \n    int32_t phys_tid_73197 = global_tid_76526;\n    __local char *sync_arr_mem_76531;\n    \n    sync_arr_mem_76531 = (__local char *) sync_arr_mem_76531_backing_0;\n    \n    __local char *red_arr_mem_76533;\n    \n    red_arr_mem_76533 = (__local char *) red_arr_mem_76533_backing_1;\n    \n    __local char *red_arr_mem_76535;\n    \n    red_arr_mem_76535 = (__local char *) red_arr_mem_76535_backing_2;\n    \n    __local char *red_arr_mem_76537;\n    \n    red_arr_mem_76537 = (__local char *) red_arr_mem_76537_backing_3;\n  ",
                   "  \n    __local char *red_arr_mem_76539;\n    \n    red_arr_mem_76539 = (__local char *) red_arr_mem_76539_backing_4;\n    \n    __local char *red_arr_mem_76541;\n    \n    red_arr_mem_76541 = (__local char *) red_arr_mem_76541_backing_5;\n    \n    __local char *red_arr_mem_76543;\n    \n    red_arr_mem_76543 = (__local char *) red_arr_mem_76543_backing_6;\n    \n    int32_t dummy_73195 = 0;\n    int32_t gtid_73196;\n    \n    gtid_73196 = 0;\n    \n    float x_acc_76545;\n    float x_acc_76546;\n    float x_acc_76547;\n    float x_acc_76548;\n    float x_acc_76549;\n    float x_acc_76550;\n    int32_t chunk_sizze_76551 = smin32(squot32(sub32(add32(10000,\n                                                           mul32(segred_group_sizze_73185,\n                                                                 num_groups_73187)),\n                                                     1),\n                                               mul32(segred_group_sizze_73185,\n                                                     num_groups_73187)),\n                                       squot32(sub32(add32(sub32(10000,\n                                                                 phys_tid_73197),\n                                                           num_threads_76525),\n                                                     1), num_threads_76525));\n    float x_70011;\n    float x_70012;\n    float x_70014;\n    float x_70015;\n    float x_70017;\n    float x_70018;\n    float x_70020;\n    float x_70021;\n    float x_70023;\n    float x_70024;\n    float x_70026;\n    float x_70027;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_76545 = -INFINITY;\n        x_acc_76546 = -INFINITY;\n        x_acc_76547 = -INFINITY;\n        x_acc_76548 = INFINITY;\n        x_acc_76549 = INFINITY;\n        x_acc_76550 = INFINITY;\n    }\n    for (int32_t i_76570 = 0; i_76570 < chunk_sizze_76551; i_76570++) {\n        gtid_73196 = add32(phys_tid_73197, mul32(num_threads_76525, i_76570));\n        // apply map function",
                   "\n        {\n            int32_t new_index_75663 = squot32(gtid_73196, 100);\n            float binop_y_75695 = sitofp_i32_f32(new_index_75663);\n            float binop_y_75696 = 6.0F * binop_y_75695;\n            float index_primexp_75697 = -300.0F + binop_y_75696;\n            int32_t binop_y_75669 = mul32(100, new_index_75663);\n            int32_t new_index_75670 = sub32(gtid_73196, binop_y_75669);\n            float binop_y_75692 = sitofp_i32_f32(new_index_75670);\n            float binop_y_75693 = 6.0F * binop_y_75692;\n            float index_primexp_75694 = -300.0F + binop_y_75693;\n            float res_70032 = index_primexp_75697 - 3.0F;\n            float res_70033 = index_primexp_75694 - 3.0F;\n            float res_70034 = 3.0F + index_primexp_75697;\n            float res_70035 = 3.0F + index_primexp_75694;\n            float y_70036 = res_70034 - res_70032;\n            float res_70037 = res_70032 + y_70036;\n            float y_70038 = res_70035 - res_70033;\n            float res_70039 = res_70033 + y_70038;\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_70011 = x_acc_76545;\n                x_70014 = x_acc_76546;\n                x_70017 = x_acc_76547;\n                x_70020 = x_acc_76548;\n                x_70023 = x_acc_76549;\n                x_70026 = x_acc_76550;\n            }\n            // load new values\n            {\n                x_70012 = res_70037;\n                x_70015 = 3.0F;\n                x_70018 = res_70039;\n                x_70021 = res_70037;\n                x_70024 = 3.0F;\n                x_70027 = res_70039;\n            }\n            // apply reduction operator\n            {\n                float res_70013 = fmax32(x_70011, x_70012);\n                float res_70016 = fmax32(x_70014, x_70015);\n                float res_70019 = fmax32(x_70017, x_70018);\n                float res_70022 = fmin32(x_70020, x_70021);\n                float res_70025 = fmin32(x_70023, x_",
                   "70024);\n                float res_70028 = fmin32(x_70026, x_70027);\n                \n                // store in accumulator\n                {\n                    x_acc_76545 = res_70013;\n                    x_acc_76546 = res_70016;\n                    x_acc_76547 = res_70019;\n                    x_acc_76548 = res_70022;\n                    x_acc_76549 = res_70025;\n                    x_acc_76550 = res_70028;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_70011 = x_acc_76545;\n        x_70014 = x_acc_76546;\n        x_70017 = x_acc_76547;\n        x_70020 = x_acc_76548;\n        x_70023 = x_acc_76549;\n        x_70026 = x_acc_76550;\n        ((__local float *) red_arr_mem_76533)[local_tid_76527] = x_70011;\n        ((__local float *) red_arr_mem_76535)[local_tid_76527] = x_70014;\n        ((__local float *) red_arr_mem_76537)[local_tid_76527] = x_70017;\n        ((__local float *) red_arr_mem_76539)[local_tid_76527] = x_70020;\n        ((__local float *) red_arr_mem_76541)[local_tid_76527] = x_70023;\n        ((__local float *) red_arr_mem_76543)[local_tid_76527] = x_70026;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_76571;\n    int32_t skip_waves_76572;\n    float x_76552;\n    float x_76553;\n    float x_76554;\n    float x_76555;\n    float x_76556;\n    float x_76557;\n    float x_76558;\n    float x_76559;\n    float x_76560;\n    float x_76561;\n    float x_76562;\n    float x_76563;\n    \n    offset_76571 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_76527, segred_group_sizze_73185)) {\n            x_76552 = ((__local\n                        float *) red_arr_mem_76533)[add32(local_tid_76527,\n                                                          offset_76571)];\n            x_76553 = ((__local\n                        float *) red_arr_mem_76535)[add32(local_tid_76527,\n                                                          offset_76571",
                   ")];\n            x_76554 = ((__local\n                        float *) red_arr_mem_76537)[add32(local_tid_76527,\n                                                          offset_76571)];\n            x_76555 = ((__local\n                        float *) red_arr_mem_76539)[add32(local_tid_76527,\n                                                          offset_76571)];\n            x_76556 = ((__local\n                        float *) red_arr_mem_76541)[add32(local_tid_76527,\n                                                          offset_76571)];\n            x_76557 = ((__local\n                        float *) red_arr_mem_76543)[add32(local_tid_76527,\n                                                          offset_76571)];\n        }\n    }\n    offset_76571 = 1;\n    while (slt32(offset_76571, wave_sizze_76529)) {\n        if (slt32(add32(local_tid_76527, offset_76571),\n                  segred_group_sizze_73185) && (sub32(local_tid_76527,\n                                                      mul32(squot32(local_tid_76527,\n                                                                    wave_sizze_76529),\n                                                            wave_sizze_76529)) &\n                                                sub32(mul32(2, offset_76571),\n                                                      1)) == 0) {\n            // read array element\n            {\n                x_76558 = ((volatile __local\n                            float *) red_arr_mem_76533)[add32(local_tid_76527,\n                                                              offset_76571)];\n                x_76559 = ((volatile __local\n                            float *) red_arr_mem_76535)[add32(local_tid_76527,\n                                                              offset_76571)];\n                x_76560 = ((volatile __local\n                            float *) red_arr_mem_76537)[add32(local_tid_76527,\n                                                              offset_76571)];\n    ",
                   "            x_76561 = ((volatile __local\n                            float *) red_arr_mem_76539)[add32(local_tid_76527,\n                                                              offset_76571)];\n                x_76562 = ((volatile __local\n                            float *) red_arr_mem_76541)[add32(local_tid_76527,\n                                                              offset_76571)];\n                x_76563 = ((volatile __local\n                            float *) red_arr_mem_76543)[add32(local_tid_76527,\n                                                              offset_76571)];\n            }\n            // apply reduction operation\n            {\n                float res_76564 = fmax32(x_76552, x_76558);\n                float res_76565 = fmax32(x_76553, x_76559);\n                float res_76566 = fmax32(x_76554, x_76560);\n                float res_76567 = fmin32(x_76555, x_76561);\n                float res_76568 = fmin32(x_76556, x_76562);\n                float res_76569 = fmin32(x_76557, x_76563);\n                \n                x_76552 = res_76564;\n                x_76553 = res_76565;\n                x_76554 = res_76566;\n                x_76555 = res_76567;\n                x_76556 = res_76568;\n                x_76557 = res_76569;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  float *) red_arr_mem_76533)[local_tid_76527] = x_76552;\n                ((volatile __local\n                  float *) red_arr_mem_76535)[local_tid_76527] = x_76553;\n                ((volatile __local\n                  float *) red_arr_mem_76537)[local_tid_76527] = x_76554;\n                ((volatile __local\n                  float *) red_arr_mem_76539)[local_tid_76527] = x_76555;\n                ((volatile __local\n                  float *) red_arr_mem_76541)[local_tid_76527] = x_76556;\n                ((volatile __local\n                  float *) red_arr_mem_76543)[local_tid_76527] = x_76557;\n       ",
                   "     }\n        }\n        offset_76571 *= 2;\n    }\n    skip_waves_76572 = 1;\n    while (slt32(skip_waves_76572, squot32(sub32(add32(segred_group_sizze_73185,\n                                                       wave_sizze_76529), 1),\n                                           wave_sizze_76529))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_76571 = mul32(skip_waves_76572, wave_sizze_76529);\n        if (slt32(add32(local_tid_76527, offset_76571),\n                  segred_group_sizze_73185) && (sub32(local_tid_76527,\n                                                      mul32(squot32(local_tid_76527,\n                                                                    wave_sizze_76529),\n                                                            wave_sizze_76529)) ==\n                                                0 && (squot32(local_tid_76527,\n                                                              wave_sizze_76529) &\n                                                      sub32(mul32(2,\n                                                                  skip_waves_76572),\n                                                            1)) == 0)) {\n            // read array element\n            {\n                x_76558 = ((__local\n                            float *) red_arr_mem_76533)[add32(local_tid_76527,\n                                                              offset_76571)];\n                x_76559 = ((__local\n                            float *) red_arr_mem_76535)[add32(local_tid_76527,\n                                                              offset_76571)];\n                x_76560 = ((__local\n                            float *) red_arr_mem_76537)[add32(local_tid_76527,\n                                                              offset_76571)];\n                x_76561 = ((__local\n                            float *) red_arr_mem_76539)[add32(local_tid_76527,\n                                                              offset_76571)];\n       ",
                   "         x_76562 = ((__local\n                            float *) red_arr_mem_76541)[add32(local_tid_76527,\n                                                              offset_76571)];\n                x_76563 = ((__local\n                            float *) red_arr_mem_76543)[add32(local_tid_76527,\n                                                              offset_76571)];\n            }\n            // apply reduction operation\n            {\n                float res_76564 = fmax32(x_76552, x_76558);\n                float res_76565 = fmax32(x_76553, x_76559);\n                float res_76566 = fmax32(x_76554, x_76560);\n                float res_76567 = fmin32(x_76555, x_76561);\n                float res_76568 = fmin32(x_76556, x_76562);\n                float res_76569 = fmin32(x_76557, x_76563);\n                \n                x_76552 = res_76564;\n                x_76553 = res_76565;\n                x_76554 = res_76566;\n                x_76555 = res_76567;\n                x_76556 = res_76568;\n                x_76557 = res_76569;\n            }\n            // write result of operation\n            {\n                ((__local float *) red_arr_mem_76533)[local_tid_76527] =\n                    x_76552;\n                ((__local float *) red_arr_mem_76535)[local_tid_76527] =\n                    x_76553;\n                ((__local float *) red_arr_mem_76537)[local_tid_76527] =\n                    x_76554;\n                ((__local float *) red_arr_mem_76539)[local_tid_76527] =\n                    x_76555;\n                ((__local float *) red_arr_mem_76541)[local_tid_76527] =\n                    x_76556;\n                ((__local float *) red_arr_mem_76543)[local_tid_76527] =\n                    x_76557;\n            }\n        }\n        skip_waves_76572 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (local_tid_76527 == 0) {\n            x_acc_76545 = x_76552;\n            x_acc_76546 = x_76553;\n            x",
                   "_acc_76547 = x_76554;\n            x_acc_76548 = x_76555;\n            x_acc_76549 = x_76556;\n            x_acc_76550 = x_76557;\n        }\n    }\n    \n    int32_t old_counter_76573;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_76527 == 0) {\n            ((__global float *) group_res_arr_mem_76513)[mul32(group_tid_76528,\n                                                               segred_group_sizze_73185)] =\n                x_acc_76545;\n            ((__global float *) group_res_arr_mem_76515)[mul32(group_tid_76528,\n                                                               segred_group_sizze_73185)] =\n                x_acc_76546;\n            ((__global float *) group_res_arr_mem_76517)[mul32(group_tid_76528,\n                                                               segred_group_sizze_73185)] =\n                x_acc_76547;\n            ((__global float *) group_res_arr_mem_76519)[mul32(group_tid_76528,\n                                                               segred_group_sizze_73185)] =\n                x_acc_76548;\n            ((__global float *) group_res_arr_mem_76521)[mul32(group_tid_76528,\n                                                               segred_group_sizze_73185)] =\n                x_acc_76549;\n            ((__global float *) group_res_arr_mem_76523)[mul32(group_tid_76528,\n                                                               segred_group_sizze_73185)] =\n                x_acc_76550;\n            mem_fence_global();\n            old_counter_76573 = atomic_add(&((volatile __global\n                                              int *) counter_mem_76511)[0],\n                                           (int) 1);\n            ((__local bool *) sync_arr_mem_76531)[0] = old_counter_76573 ==\n                sub32(num_groups_73187, 1);\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    barrier(CLK_GLOBAL_MEM_FENCE);\n    \n    bool is_last_group_76574 = ((__local bool *) sync_arr_mem_76531)",
                   "[0];\n    \n    if (is_last_group_76574) {\n        if (local_tid_76527 == 0) {\n            old_counter_76573 = atomic_add(&((volatile __global\n                                              int *) counter_mem_76511)[0],\n                                           (int) sub32(0, num_groups_73187));\n        }\n        // read in the per-group-results\n        {\n            if (slt32(local_tid_76527, num_groups_73187)) {\n                x_70011 = ((__global\n                            float *) group_res_arr_mem_76513)[mul32(local_tid_76527,\n                                                                    segred_group_sizze_73185)];\n            } else {\n                x_70011 = -INFINITY;\n            }\n            ((__local float *) red_arr_mem_76533)[local_tid_76527] = x_70011;\n            if (slt32(local_tid_76527, num_groups_73187)) {\n                x_70014 = ((__global\n                            float *) group_res_arr_mem_76515)[mul32(local_tid_76527,\n                                                                    segred_group_sizze_73185)];\n            } else {\n                x_70014 = -INFINITY;\n            }\n            ((__local float *) red_arr_mem_76535)[local_tid_76527] = x_70014;\n            if (slt32(local_tid_76527, num_groups_73187)) {\n                x_70017 = ((__global\n                            float *) group_res_arr_mem_76517)[mul32(local_tid_76527,\n                                                                    segred_group_sizze_73185)];\n            } else {\n                x_70017 = -INFINITY;\n            }\n            ((__local float *) red_arr_mem_76537)[local_tid_76527] = x_70017;\n            if (slt32(local_tid_76527, num_groups_73187)) {\n                x_70020 = ((__global\n                            float *) group_res_arr_mem_76519)[mul32(local_tid_76527,\n                                                                    segred_group_sizze_73185)];\n            } else {\n                x_70020 = INFINITY;\n            }\n           ",
                   " ((__local float *) red_arr_mem_76539)[local_tid_76527] = x_70020;\n            if (slt32(local_tid_76527, num_groups_73187)) {\n                x_70023 = ((__global\n                            float *) group_res_arr_mem_76521)[mul32(local_tid_76527,\n                                                                    segred_group_sizze_73185)];\n            } else {\n                x_70023 = INFINITY;\n            }\n            ((__local float *) red_arr_mem_76541)[local_tid_76527] = x_70023;\n            if (slt32(local_tid_76527, num_groups_73187)) {\n                x_70026 = ((__global\n                            float *) group_res_arr_mem_76523)[mul32(local_tid_76527,\n                                                                    segred_group_sizze_73185)];\n            } else {\n                x_70026 = INFINITY;\n            }\n            ((__local float *) red_arr_mem_76543)[local_tid_76527] = x_70026;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_76575;\n            int32_t skip_waves_76576;\n            float x_76552;\n            float x_76553;\n            float x_76554;\n            float x_76555;\n            float x_76556;\n            float x_76557;\n            float x_76558;\n            float x_76559;\n            float x_76560;\n            float x_76561;\n            float x_76562;\n            float x_76563;\n            \n            offset_76575 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_76527, segred_group_sizze_73185)) {\n                    x_76552 = ((__local\n                                float *) red_arr_mem_76533)[add32(local_tid_76527,\n                                                                  offset_76575)];\n                    x_76553 = ((__local\n                                float *) red_arr_mem_76535)[add32(local_tid_76527,\n                                                                  ",
                   "offset_76575)];\n                    x_76554 = ((__local\n                                float *) red_arr_mem_76537)[add32(local_tid_76527,\n                                                                  offset_76575)];\n                    x_76555 = ((__local\n                                float *) red_arr_mem_76539)[add32(local_tid_76527,\n                                                                  offset_76575)];\n                    x_76556 = ((__local\n                                float *) red_arr_mem_76541)[add32(local_tid_76527,\n                                                                  offset_76575)];\n                    x_76557 = ((__local\n                                float *) red_arr_mem_76543)[add32(local_tid_76527,\n                                                                  offset_76575)];\n                }\n            }\n            offset_76575 = 1;\n            while (slt32(offset_76575, wave_sizze_76529)) {\n                if (slt32(add32(local_tid_76527, offset_76575),\n                          segred_group_sizze_73185) && (sub32(local_tid_76527,\n                                                              mul32(squot32(local_tid_76527,\n                                                                            wave_sizze_76529),\n                                                                    wave_sizze_76529)) &\n                                                        sub32(mul32(2,\n                                                                    offset_76575),\n                                                              1)) == 0) {\n                    // read array element\n                    {\n                        x_76558 = ((volatile __local\n                                    float *) red_arr_mem_76533)[add32(local_tid_76527,\n                                                                      offset_76575)];\n                        x_76559 = ((volatile __local\n                                    float *) red_ar",
                   "r_mem_76535)[add32(local_tid_76527,\n                                                                      offset_76575)];\n                        x_76560 = ((volatile __local\n                                    float *) red_arr_mem_76537)[add32(local_tid_76527,\n                                                                      offset_76575)];\n                        x_76561 = ((volatile __local\n                                    float *) red_arr_mem_76539)[add32(local_tid_76527,\n                                                                      offset_76575)];\n                        x_76562 = ((volatile __local\n                                    float *) red_arr_mem_76541)[add32(local_tid_76527,\n                                                                      offset_76575)];\n                        x_76563 = ((volatile __local\n                                    float *) red_arr_mem_76543)[add32(local_tid_76527,\n                                                                      offset_76575)];\n                    }\n                    // apply reduction operation\n                    {\n                        float res_76564 = fmax32(x_76552, x_76558);\n                        float res_76565 = fmax32(x_76553, x_76559);\n                        float res_76566 = fmax32(x_76554, x_76560);\n                        float res_76567 = fmin32(x_76555, x_76561);\n                        float res_76568 = fmin32(x_76556, x_76562);\n                        float res_76569 = fmin32(x_76557, x_76563);\n                        \n                        x_76552 = res_76564;\n                        x_76553 = res_76565;\n                        x_76554 = res_76566;\n                        x_76555 = res_76567;\n                        x_76556 = res_76568;\n                        x_76557 = res_76569;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          float *) red_arr",
                   "_mem_76533)[local_tid_76527] =\n                            x_76552;\n                        ((volatile __local\n                          float *) red_arr_mem_76535)[local_tid_76527] =\n                            x_76553;\n                        ((volatile __local\n                          float *) red_arr_mem_76537)[local_tid_76527] =\n                            x_76554;\n                        ((volatile __local\n                          float *) red_arr_mem_76539)[local_tid_76527] =\n                            x_76555;\n                        ((volatile __local\n                          float *) red_arr_mem_76541)[local_tid_76527] =\n                            x_76556;\n                        ((volatile __local\n                          float *) red_arr_mem_76543)[local_tid_76527] =\n                            x_76557;\n                    }\n                }\n                offset_76575 *= 2;\n            }\n            skip_waves_76576 = 1;\n            while (slt32(skip_waves_76576,\n                         squot32(sub32(add32(segred_group_sizze_73185,\n                                             wave_sizze_76529), 1),\n                                 wave_sizze_76529))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_76575 = mul32(skip_waves_76576, wave_sizze_76529);\n                if (slt32(add32(local_tid_76527, offset_76575),\n                          segred_group_sizze_73185) && (sub32(local_tid_76527,\n                                                              mul32(squot32(local_tid_76527,\n                                                                            wave_sizze_76529),\n                                                                    wave_sizze_76529)) ==\n                                                        0 &&\n                                                        (squot32(local_tid_76527,\n                                                                 wave_sizze_76529) &\n                                      ",
                   "                   sub32(mul32(2,\n                                                                     skip_waves_76576),\n                                                               1)) == 0)) {\n                    // read array element\n                    {\n                        x_76558 = ((__local\n                                    float *) red_arr_mem_76533)[add32(local_tid_76527,\n                                                                      offset_76575)];\n                        x_76559 = ((__local\n                                    float *) red_arr_mem_76535)[add32(local_tid_76527,\n                                                                      offset_76575)];\n                        x_76560 = ((__local\n                                    float *) red_arr_mem_76537)[add32(local_tid_76527,\n                                                                      offset_76575)];\n                        x_76561 = ((__local\n                                    float *) red_arr_mem_76539)[add32(local_tid_76527,\n                                                                      offset_76575)];\n                        x_76562 = ((__local\n                                    float *) red_arr_mem_76541)[add32(local_tid_76527,\n                                                                      offset_76575)];\n                        x_76563 = ((__local\n                                    float *) red_arr_mem_76543)[add32(local_tid_76527,\n                                                                      offset_76575)];\n                    }\n                    // apply reduction operation\n                    {\n                        float res_76564 = fmax32(x_76552, x_76558);\n                        float res_76565 = fmax32(x_76553, x_76559);\n                        float res_76566 = fmax32(x_76554, x_76560);\n                        float res_76567 = fmin32(x_76555, x_76561);\n                        float res_76568 = fmin32(x_76556, x_76562);\n   ",
                   "                     float res_76569 = fmin32(x_76557, x_76563);\n                        \n                        x_76552 = res_76564;\n                        x_76553 = res_76565;\n                        x_76554 = res_76566;\n                        x_76555 = res_76567;\n                        x_76556 = res_76568;\n                        x_76557 = res_76569;\n                    }\n                    // write result of operation\n                    {\n                        ((__local float *) red_arr_mem_76533)[local_tid_76527] =\n                            x_76552;\n                        ((__local float *) red_arr_mem_76535)[local_tid_76527] =\n                            x_76553;\n                        ((__local float *) red_arr_mem_76537)[local_tid_76527] =\n                            x_76554;\n                        ((__local float *) red_arr_mem_76539)[local_tid_76527] =\n                            x_76555;\n                        ((__local float *) red_arr_mem_76541)[local_tid_76527] =\n                            x_76556;\n                        ((__local float *) red_arr_mem_76543)[local_tid_76527] =\n                            x_76557;\n                    }\n                }\n                skip_waves_76576 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_76527 == 0) {\n                    ((__global float *) mem_75974)[0] = x_76552;\n                    ((__global float *) mem_75977)[0] = x_76553;\n                    ((__global float *) mem_75980)[0] = x_76554;\n                    ((__global float *) mem_75983)[0] = x_76555;\n                    ((__global float *) mem_75986)[0] = x_76556;\n                    ((__global float *) mem_75989)[0] = x_76557;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_73185\n}\n__kernel void segred_nonseg_73287(__global int *global_failure, __local volatile\n                                  int64_t *red_",
                   "arr_mem_76674_backing_aligned_0,\n                                  __local volatile\n                                  int64_t *sync_arr_mem_76672_backing_aligned_1,\n                                  int32_t num_groups_73280, __global\n                                  unsigned char *xs_mem_75996, __global\n                                  unsigned char *xs_mem_75997, __global\n                                  unsigned char *mem_76010, __global\n                                  unsigned char *mem_76014, __global\n                                  unsigned char *mem_76019, __global\n                                  unsigned char *mem_76024, __global\n                                  unsigned char *counter_mem_76662, __global\n                                  unsigned char *group_res_arr_mem_76664,\n                                  int32_t num_threads_76666)\n{\n    #define segred_group_sizze_73278 (bvh_irregzisegred_group_sizze_73277)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_76674_backing_1 =\n                          (__local volatile\n                           char *) red_arr_mem_76674_backing_aligned_0;\n    __local volatile char *restrict sync_arr_mem_76672_backing_0 =\n                          (__local volatile\n                           char *) sync_arr_mem_76672_backing_aligned_1;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76667;\n    int32_t local_tid_76668;\n    int32_t group_sizze_76671;\n    int32_t wave_sizze_76670;\n    int32_t group_tid_76669;\n    \n    global_tid_76667 = get_global_id(0);\n    local_tid_76668 = get_local_id(0);\n    group_sizze_76671 = get_local_size(0);\n    wave_sizze_76670 = LOCKSTEP_WIDTH;\n    group_tid_76669 = get_group_id(0);\n    \n    int32_t phys_tid_73287 = global_tid_76667;\n    __local char *sync_arr_mem_76672;\n    \n    sync_arr_mem_76672 = (__local char *) sync_arr_mem_76672_backing_0;\n    \n    __local c",
                   "har *red_arr_mem_76674;\n    \n    red_arr_mem_76674 = (__local char *) red_arr_mem_76674_backing_1;\n    \n    int32_t dummy_73285 = 0;\n    int32_t gtid_73286;\n    \n    gtid_73286 = 0;\n    \n    int32_t x_acc_76676;\n    int32_t chunk_sizze_76677 = smin32(squot32(sub32(add32(10000,\n                                                           mul32(segred_group_sizze_73278,\n                                                                 num_groups_73280)),\n                                                     1),\n                                               mul32(segred_group_sizze_73278,\n                                                     num_groups_73280)),\n                                       squot32(sub32(add32(sub32(10000,\n                                                                 phys_tid_73287),\n                                                           num_threads_76666),\n                                                     1), num_threads_76666));\n    int32_t x_70140;\n    int32_t x_70141;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_76676 = 0;\n    }\n    for (int32_t i_76681 = 0; i_76681 < chunk_sizze_76677; i_76681++) {\n        gtid_73286 = add32(phys_tid_73287, mul32(num_threads_76666, i_76681));\n        // apply map function\n        {\n            int32_t copy_p_70143 = ((__global\n                                     int32_t *) xs_mem_75997)[gtid_73286];\n            int32_t x_70144 = ((__global int32_t *) mem_76010)[gtid_73286];\n            int32_t copy_p_70145 = ((__global\n                                     int32_t *) xs_mem_75996)[gtid_73286];\n            \n            // save map-out results\n            {\n                ((__global int32_t *) mem_76019)[add32(mul32(dummy_73285,\n                                                             10000),\n                                                       gtid_73286)] =\n                    copy_p_70143;\n                ((__global int32_t *) mem_76024)[add32(mul32(dummy_73285,\n      ",
                   "                                                       10000),\n                                                       gtid_73286)] =\n                    copy_p_70145;\n            }\n            // load accumulator\n            {\n                x_70140 = x_acc_76676;\n            }\n            // load new values\n            {\n                x_70141 = x_70144;\n            }\n            // apply reduction operator\n            {\n                int32_t res_70142 = add32(x_70140, x_70141);\n                \n                // store in accumulator\n                {\n                    x_acc_76676 = res_70142;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_70140 = x_acc_76676;\n        ((__local int32_t *) red_arr_mem_76674)[local_tid_76668] = x_70140;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_76682;\n    int32_t skip_waves_76683;\n    int32_t x_76678;\n    int32_t x_76679;\n    \n    offset_76682 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_76668, segred_group_sizze_73278)) {\n            x_76678 = ((__local\n                        int32_t *) red_arr_mem_76674)[add32(local_tid_76668,\n                                                            offset_76682)];\n        }\n    }\n    offset_76682 = 1;\n    while (slt32(offset_76682, wave_sizze_76670)) {\n        if (slt32(add32(local_tid_76668, offset_76682),\n                  segred_group_sizze_73278) && (sub32(local_tid_76668,\n                                                      mul32(squot32(local_tid_76668,\n                                                                    wave_sizze_76670),\n                                                            wave_sizze_76670)) &\n                                                sub32(mul32(2, offset_76682),\n                                                      1)) == 0) {\n            // read array element\n            {\n                x_76679 ",
                   "= ((volatile __local\n                            int32_t *) red_arr_mem_76674)[add32(local_tid_76668,\n                                                                offset_76682)];\n            }\n            // apply reduction operation\n            {\n                int32_t res_76680 = add32(x_76678, x_76679);\n                \n                x_76678 = res_76680;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  int32_t *) red_arr_mem_76674)[local_tid_76668] = x_76678;\n            }\n        }\n        offset_76682 *= 2;\n    }\n    skip_waves_76683 = 1;\n    while (slt32(skip_waves_76683, squot32(sub32(add32(segred_group_sizze_73278,\n                                                       wave_sizze_76670), 1),\n                                           wave_sizze_76670))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_76682 = mul32(skip_waves_76683, wave_sizze_76670);\n        if (slt32(add32(local_tid_76668, offset_76682),\n                  segred_group_sizze_73278) && (sub32(local_tid_76668,\n                                                      mul32(squot32(local_tid_76668,\n                                                                    wave_sizze_76670),\n                                                            wave_sizze_76670)) ==\n                                                0 && (squot32(local_tid_76668,\n                                                              wave_sizze_76670) &\n                                                      sub32(mul32(2,\n                                                                  skip_waves_76683),\n                                                            1)) == 0)) {\n            // read array element\n            {\n                x_76679 = ((__local\n                            int32_t *) red_arr_mem_76674)[add32(local_tid_76668,\n                                                                offset_76682)];\n            }\n            // ",
                   "apply reduction operation\n            {\n                int32_t res_76680 = add32(x_76678, x_76679);\n                \n                x_76678 = res_76680;\n            }\n            // write result of operation\n            {\n                ((__local int32_t *) red_arr_mem_76674)[local_tid_76668] =\n                    x_76678;\n            }\n        }\n        skip_waves_76683 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (local_tid_76668 == 0) {\n            x_acc_76676 = x_76678;\n        }\n    }\n    \n    int32_t old_counter_76684;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_76668 == 0) {\n            ((__global\n              int32_t *) group_res_arr_mem_76664)[mul32(group_tid_76669,\n                                                        segred_group_sizze_73278)] =\n                x_acc_76676;\n            mem_fence_global();\n            old_counter_76684 = atomic_add(&((volatile __global\n                                              int *) counter_mem_76662)[0],\n                                           (int) 1);\n            ((__local bool *) sync_arr_mem_76672)[0] = old_counter_76684 ==\n                sub32(num_groups_73280, 1);\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    barrier(CLK_GLOBAL_MEM_FENCE);\n    \n    bool is_last_group_76685 = ((__local bool *) sync_arr_mem_76672)[0];\n    \n    if (is_last_group_76685) {\n        if (local_tid_76668 == 0) {\n            old_counter_76684 = atomic_add(&((volatile __global\n                                              int *) counter_mem_76662)[0],\n                                           (int) sub32(0, num_groups_73280));\n        }\n        // read in the per-group-results\n        {\n            if (slt32(local_tid_76668, num_groups_73280)) {\n                x_70140 = ((__global\n                            int32_t *) group_res_arr_mem_76664)[mul32(local_tid_76668,\n                               ",
                   "                                       segred_group_sizze_73278)];\n            } else {\n                x_70140 = 0;\n            }\n            ((__local int32_t *) red_arr_mem_76674)[local_tid_76668] = x_70140;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_76686;\n            int32_t skip_waves_76687;\n            int32_t x_76678;\n            int32_t x_76679;\n            \n            offset_76686 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_76668, segred_group_sizze_73278)) {\n                    x_76678 = ((__local\n                                int32_t *) red_arr_mem_76674)[add32(local_tid_76668,\n                                                                    offset_76686)];\n                }\n            }\n            offset_76686 = 1;\n            while (slt32(offset_76686, wave_sizze_76670)) {\n                if (slt32(add32(local_tid_76668, offset_76686),\n                          segred_group_sizze_73278) && (sub32(local_tid_76668,\n                                                              mul32(squot32(local_tid_76668,\n                                                                            wave_sizze_76670),\n                                                                    wave_sizze_76670)) &\n                                                        sub32(mul32(2,\n                                                                    offset_76686),\n                                                              1)) == 0) {\n                    // read array element\n                    {\n                        x_76679 = ((volatile __local\n                                    int32_t *) red_arr_mem_76674)[add32(local_tid_76668,\n                                                                        offset_76686)];\n                    }\n                    // apply reduction operation\n                    {\n    ",
                   "                    int32_t res_76680 = add32(x_76678, x_76679);\n                        \n                        x_76678 = res_76680;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          int32_t *) red_arr_mem_76674)[local_tid_76668] =\n                            x_76678;\n                    }\n                }\n                offset_76686 *= 2;\n            }\n            skip_waves_76687 = 1;\n            while (slt32(skip_waves_76687,\n                         squot32(sub32(add32(segred_group_sizze_73278,\n                                             wave_sizze_76670), 1),\n                                 wave_sizze_76670))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_76686 = mul32(skip_waves_76687, wave_sizze_76670);\n                if (slt32(add32(local_tid_76668, offset_76686),\n                          segred_group_sizze_73278) && (sub32(local_tid_76668,\n                                                              mul32(squot32(local_tid_76668,\n                                                                            wave_sizze_76670),\n                                                                    wave_sizze_76670)) ==\n                                                        0 &&\n                                                        (squot32(local_tid_76668,\n                                                                 wave_sizze_76670) &\n                                                         sub32(mul32(2,\n                                                                     skip_waves_76687),\n                                                               1)) == 0)) {\n                    // read array element\n                    {\n                        x_76679 = ((__local\n                                    int32_t *) red_arr_mem_76674)[add32(local_tid_76668,\n                                                       ",
                   "                 offset_76686)];\n                    }\n                    // apply reduction operation\n                    {\n                        int32_t res_76680 = add32(x_76678, x_76679);\n                        \n                        x_76678 = res_76680;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          int32_t *) red_arr_mem_76674)[local_tid_76668] =\n                            x_76678;\n                    }\n                }\n                skip_waves_76687 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_76668 == 0) {\n                    ((__global int32_t *) mem_76014)[0] = x_76678;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_73278\n}\n__kernel void segred_nonseg_73822(__global int *global_failure, __local volatile\n                                  int64_t *red_arr_mem_76769_backing_aligned_0,\n                                  __local volatile\n                                  int64_t *red_arr_mem_76767_backing_aligned_1,\n                                  __local volatile\n                                  int64_t *red_arr_mem_76765_backing_aligned_2,\n                                  __local volatile\n                                  int64_t *red_arr_mem_76763_backing_aligned_3,\n                                  __local volatile\n                                  int64_t *red_arr_mem_76761_backing_aligned_4,\n                                  __local volatile\n                                  int64_t *red_arr_mem_76759_backing_aligned_5,\n                                  __local volatile\n                                  int64_t *sync_arr_mem_76757_backing_aligned_6,\n                                  int32_t num_groups_73812, __global\n                                  unsigned char *mem_75974, __global\n                      ",
                   "            unsigned char *mem_75977, __global\n                                  unsigned char *mem_75980, __global\n                                  unsigned char *mem_75983, __global\n                                  unsigned char *mem_75986, __global\n                                  unsigned char *mem_75989, __global\n                                  unsigned char *counter_mem_76737, __global\n                                  unsigned char *group_res_arr_mem_76739,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76741,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76743,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76745,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76747,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76749,\n                                  int32_t num_threads_76751)\n{\n    #define segred_group_sizze_73810 (render_rgbboxzisegred_group_sizze_73809)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_76769_backing_6 =\n                          (__local volatile\n                           char *) red_arr_mem_76769_backing_aligned_0;\n    __local volatile char *restrict red_arr_mem_76767_backing_5 =\n                          (__local volatile\n                           char *) red_arr_mem_76767_backing_aligned_1;\n    __local volatile char *restrict red_arr_mem_76765_backing_4 =\n                          (__local volatile\n                           char *) red_arr_mem_76765_backing_aligned_2;\n    __local volatile char *restrict red_arr_mem_76763_backing_3 =\n                          (__local volatile\n                           char *) red_arr_mem_7",
                   "6763_backing_aligned_3;\n    __local volatile char *restrict red_arr_mem_76761_backing_2 =\n                          (__local volatile\n                           char *) red_arr_mem_76761_backing_aligned_4;\n    __local volatile char *restrict red_arr_mem_76759_backing_1 =\n                          (__local volatile\n                           char *) red_arr_mem_76759_backing_aligned_5;\n    __local volatile char *restrict sync_arr_mem_76757_backing_0 =\n                          (__local volatile\n                           char *) sync_arr_mem_76757_backing_aligned_6;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76752;\n    int32_t local_tid_76753;\n    int32_t group_sizze_76756;\n    int32_t wave_sizze_76755;\n    int32_t group_tid_76754;\n    \n    global_tid_76752 = get_global_id(0);\n    local_tid_76753 = get_local_id(0);\n    group_sizze_76756 = get_local_size(0);\n    wave_sizze_76755 = LOCKSTEP_WIDTH;\n    group_tid_76754 = get_group_id(0);\n    \n    int32_t phys_tid_73822 = global_tid_76752;\n    __local char *sync_arr_mem_76757;\n    \n    sync_arr_mem_76757 = (__local char *) sync_arr_mem_76757_backing_0;\n    \n    __local char *red_arr_mem_76759;\n    \n    red_arr_mem_76759 = (__local char *) red_arr_mem_76759_backing_1;\n    \n    __local char *red_arr_mem_76761;\n    \n    red_arr_mem_76761 = (__local char *) red_arr_mem_76761_backing_2;\n    \n    __local char *red_arr_mem_76763;\n    \n    red_arr_mem_76763 = (__local char *) red_arr_mem_76763_backing_3;\n    \n    __local char *red_arr_mem_76765;\n    \n    red_arr_mem_76765 = (__local char *) red_arr_mem_76765_backing_4;\n    \n    __local char *red_arr_mem_76767;\n    \n    red_arr_mem_76767 = (__local char *) red_arr_mem_76767_backing_5;\n    \n    __local char *red_arr_mem_76769;\n    \n    red_arr_mem_76769 = (__local char *) red_arr_mem_76769_backing_6;\n    \n    int32_t dummy_73820 = 0;\n    int32_t gtid_73821;\n    \n    gtid_73821 = 0;\n    \n    float x_acc_76771;\n    float x_acc_76772;\n    float x_ac",
                   "c_76773;\n    float x_acc_76774;\n    float x_acc_76775;\n    float x_acc_76776;\n    int32_t chunk_sizze_76777 = smin32(squot32(sub32(add32(400,\n                                                           mul32(segred_group_sizze_73810,\n                                                                 num_groups_73812)),\n                                                     1),\n                                               mul32(segred_group_sizze_73810,\n                                                     num_groups_73812)),\n                                       squot32(sub32(add32(sub32(400,\n                                                                 phys_tid_73822),\n                                                           num_threads_76751),\n                                                     1), num_threads_76751));\n    float x_70543;\n    float x_70544;\n    float x_70546;\n    float x_70547;\n    float x_70549;\n    float x_70550;\n    float x_70552;\n    float x_70553;\n    float x_70555;\n    float x_70556;\n    float x_70558;\n    float x_70559;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_76771 = -INFINITY;\n        x_acc_76772 = -INFINITY;\n        x_acc_76773 = -INFINITY;\n        x_acc_76774 = INFINITY;\n        x_acc_76775 = INFINITY;\n        x_acc_76776 = INFINITY;\n    }\n    for (int32_t i_76796 = 0; i_76796 < chunk_sizze_76777; i_76796++) {\n        gtid_73821 = add32(phys_tid_73822, mul32(num_threads_76751, i_76796));\n        // apply map function\n        {\n            bool index_concat_cmp_75720 = sle32(300, gtid_73821);\n            float index_concat_branch_75732;\n            \n            if (index_concat_cmp_75720) {\n                int32_t index_concat_i_75721 = sub32(gtid_73821, 300);\n                int32_t new_index_75824 = squot32(index_concat_i_75721, 10);\n                float binop_y_75939 = sitofp_i32_f32(new_index_75824);\n                float binop_y_75940 = 6.0F * binop_y_75939;\n                float index_primexp_75941 = -",
                   "30.0F + binop_y_75940;\n                \n                index_concat_branch_75732 = index_primexp_75941;\n            } else {\n                bool index_concat_cmp_75723 = sle32(200, gtid_73821);\n                float index_concat_branch_75731;\n                \n                if (index_concat_cmp_75723) {\n                    index_concat_branch_75731 = 30.0F;\n                } else {\n                    bool index_concat_cmp_75726 = sle32(100, gtid_73821);\n                    float index_concat_branch_75730;\n                    \n                    if (index_concat_cmp_75726) {\n                        int32_t index_concat_i_75727 = sub32(gtid_73821, 100);\n                        int32_t new_index_75828 = squot32(index_concat_i_75727,\n                                                          10);\n                        float binop_y_75936 = sitofp_i32_f32(new_index_75828);\n                        float binop_y_75937 = 6.0F * binop_y_75936;\n                        float index_primexp_75938 = -30.0F + binop_y_75937;\n                        \n                        index_concat_branch_75730 = index_primexp_75938;\n                    } else {\n                        index_concat_branch_75730 = -30.0F;\n                    }\n                    index_concat_branch_75731 = index_concat_branch_75730;\n                }\n                index_concat_branch_75732 = index_concat_branch_75731;\n            }\n            \n            float index_concat_branch_75716;\n            \n            if (index_concat_cmp_75720) {\n                index_concat_branch_75716 = -30.0F;\n            } else {\n                bool index_concat_cmp_75707 = sle32(200, gtid_73821);\n                float index_concat_branch_75715;\n                \n                if (index_concat_cmp_75707) {\n                    int32_t index_concat_i_75708 = sub32(gtid_73821, 200);\n                    int32_t new_index_75832 = squot32(index_concat_i_75708, 10);\n                    float binop_y_75945 = sitofp_i32_f32(n",
                   "ew_index_75832);\n                    float binop_y_75946 = 6.0F * binop_y_75945;\n                    float index_primexp_75947 = -30.0F + binop_y_75946;\n                    \n                    index_concat_branch_75715 = index_primexp_75947;\n                } else {\n                    bool index_concat_cmp_75710 = sle32(100, gtid_73821);\n                    float index_concat_branch_75714;\n                    \n                    if (index_concat_cmp_75710) {\n                        int32_t index_concat_i_75711 = sub32(gtid_73821, 100);\n                        int32_t binop_x_75837 = squot32(index_concat_i_75711,\n                                                        10);\n                        int32_t binop_y_75838 = mul32(10, binop_x_75837);\n                        int32_t new_index_75839 = sub32(index_concat_i_75711,\n                                                        binop_y_75838);\n                        float binop_y_75844 = sitofp_i32_f32(new_index_75839);\n                        float binop_y_75845 = 6.0F * binop_y_75844;\n                        float index_primexp_75846 = -30.0F + binop_y_75845;\n                        \n                        index_concat_branch_75714 = index_primexp_75846;\n                    } else {\n                        int32_t new_index_75840 = squot32(gtid_73821, 10);\n                        float binop_y_75942 = sitofp_i32_f32(new_index_75840);\n                        float binop_y_75943 = 6.0F * binop_y_75942;\n                        float index_primexp_75944 = -30.0F + binop_y_75943;\n                        \n                        index_concat_branch_75714 = index_primexp_75944;\n                    }\n                    index_concat_branch_75715 = index_concat_branch_75714;\n                }\n                index_concat_branch_75716 = index_concat_branch_75715;\n            }\n            \n            float index_concat_branch_75700;\n            \n            if (index_concat_cmp_75720) {\n                int32_t index_con",
                   "cat_i_75689 = sub32(gtid_73821, 300);\n                int32_t binop_x_75848 = squot32(index_concat_i_75689, 10);\n                int32_t binop_y_75849 = mul32(10, binop_x_75848);\n                int32_t new_index_75850 = sub32(index_concat_i_75689,\n                                                binop_y_75849);\n                float binop_y_75865 = sitofp_i32_f32(new_index_75850);\n                float binop_y_75866 = 6.0F * binop_y_75865;\n                float index_primexp_75867 = -30.0F + binop_y_75866;\n                \n                index_concat_branch_75700 = index_primexp_75867;\n            } else {\n                bool index_concat_cmp_75691 = sle32(200, gtid_73821);\n                float index_concat_branch_75699;\n                \n                if (index_concat_cmp_75691) {\n                    int32_t index_concat_i_75692 = sub32(gtid_73821, 200);\n                    int32_t binop_x_75852 = squot32(index_concat_i_75692, 10);\n                    int32_t binop_y_75853 = mul32(10, binop_x_75852);\n                    int32_t new_index_75854 = sub32(index_concat_i_75692,\n                                                    binop_y_75853);\n                    float binop_y_75862 = sitofp_i32_f32(new_index_75854);\n                    float binop_y_75863 = 6.0F * binop_y_75862;\n                    float index_primexp_75864 = -30.0F + binop_y_75863;\n                    \n                    index_concat_branch_75699 = index_primexp_75864;\n                } else {\n                    bool index_concat_cmp_75694 = sle32(100, gtid_73821);\n                    float index_concat_branch_75698;\n                    \n                    if (index_concat_cmp_75694) {\n                        index_concat_branch_75698 = -30.0F;\n                    } else {\n                        int32_t binop_x_75856 = squot32(gtid_73821, 10);\n                        int32_t binop_y_75857 = mul32(10, binop_x_75856);\n                        int32_t new_index_75858 = sub32(gtid_73821,\n         ",
                   "                                               binop_y_75857);\n                        float binop_y_75859 = sitofp_i32_f32(new_index_75858);\n                        float binop_y_75860 = 6.0F * binop_y_75859;\n                        float index_primexp_75861 = -30.0F + binop_y_75860;\n                        \n                        index_concat_branch_75698 = index_primexp_75861;\n                    }\n                    index_concat_branch_75699 = index_concat_branch_75698;\n                }\n                index_concat_branch_75700 = index_concat_branch_75699;\n            }\n            \n            float res_70565 = index_concat_branch_75732 - 3.0F;\n            float res_70566 = index_concat_branch_75716 - 3.0F;\n            float res_70567 = index_concat_branch_75700 - 3.0F;\n            float res_70568 = 3.0F + index_concat_branch_75732;\n            float res_70569 = 3.0F + index_concat_branch_75716;\n            float res_70570 = 3.0F + index_concat_branch_75700;\n            float y_70571 = res_70568 - res_70565;\n            float res_70572 = res_70565 + y_70571;\n            float y_70573 = res_70569 - res_70566;\n            float res_70574 = res_70566 + y_70573;\n            float y_70575 = res_70570 - res_70567;\n            float res_70576 = res_70567 + y_70575;\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_70543 = x_acc_76771;\n                x_70546 = x_acc_76772;\n                x_70549 = x_acc_76773;\n                x_70552 = x_acc_76774;\n                x_70555 = x_acc_76775;\n                x_70558 = x_acc_76776;\n            }\n            // load new values\n            {\n                x_70544 = res_70572;\n                x_70547 = res_70574;\n                x_70550 = res_70576;\n                x_70553 = res_70572;\n                x_70556 = res_70574;\n                x_70559 = res_70576;\n            }\n            // apply reduction operator\n            {\n                flo",
                   "at res_70545 = fmax32(x_70543, x_70544);\n                float res_70548 = fmax32(x_70546, x_70547);\n                float res_70551 = fmax32(x_70549, x_70550);\n                float res_70554 = fmin32(x_70552, x_70553);\n                float res_70557 = fmin32(x_70555, x_70556);\n                float res_70560 = fmin32(x_70558, x_70559);\n                \n                // store in accumulator\n                {\n                    x_acc_76771 = res_70545;\n                    x_acc_76772 = res_70548;\n                    x_acc_76773 = res_70551;\n                    x_acc_76774 = res_70554;\n                    x_acc_76775 = res_70557;\n                    x_acc_76776 = res_70560;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_70543 = x_acc_76771;\n        x_70546 = x_acc_76772;\n        x_70549 = x_acc_76773;\n        x_70552 = x_acc_76774;\n        x_70555 = x_acc_76775;\n        x_70558 = x_acc_76776;\n        ((__local float *) red_arr_mem_76759)[local_tid_76753] = x_70543;\n        ((__local float *) red_arr_mem_76761)[local_tid_76753] = x_70546;\n        ((__local float *) red_arr_mem_76763)[local_tid_76753] = x_70549;\n        ((__local float *) red_arr_mem_76765)[local_tid_76753] = x_70552;\n        ((__local float *) red_arr_mem_76767)[local_tid_76753] = x_70555;\n        ((__local float *) red_arr_mem_76769)[local_tid_76753] = x_70558;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_76797;\n    int32_t skip_waves_76798;\n    float x_76778;\n    float x_76779;\n    float x_76780;\n    float x_76781;\n    float x_76782;\n    float x_76783;\n    float x_76784;\n    float x_76785;\n    float x_76786;\n    float x_76787;\n    float x_76788;\n    float x_76789;\n    \n    offset_76797 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_76753, segred_group_sizze_73810)) {\n            x_76778 = ((__local\n                        float *) red_arr_mem_76759)[a",
                   "dd32(local_tid_76753,\n                                                          offset_76797)];\n            x_76779 = ((__local\n                        float *) red_arr_mem_76761)[add32(local_tid_76753,\n                                                          offset_76797)];\n            x_76780 = ((__local\n                        float *) red_arr_mem_76763)[add32(local_tid_76753,\n                                                          offset_76797)];\n            x_76781 = ((__local\n                        float *) red_arr_mem_76765)[add32(local_tid_76753,\n                                                          offset_76797)];\n            x_76782 = ((__local\n                        float *) red_arr_mem_76767)[add32(local_tid_76753,\n                                                          offset_76797)];\n            x_76783 = ((__local\n                        float *) red_arr_mem_76769)[add32(local_tid_76753,\n                                                          offset_76797)];\n        }\n    }\n    offset_76797 = 1;\n    while (slt32(offset_76797, wave_sizze_76755)) {\n        if (slt32(add32(local_tid_76753, offset_76797),\n                  segred_group_sizze_73810) && (sub32(local_tid_76753,\n                                                      mul32(squot32(local_tid_76753,\n                                                                    wave_sizze_76755),\n                                                            wave_sizze_76755)) &\n                                                sub32(mul32(2, offset_76797),\n                                                      1)) == 0) {\n            // read array element\n            {\n                x_76784 = ((volatile __local\n                            float *) red_arr_mem_76759)[add32(local_tid_76753,\n                                                              offset_76797)];\n                x_76785 = ((volatile __local\n                            float *) red_arr_mem_76761)[add32(local_tid_76753,\n           ",
                   "                                                   offset_76797)];\n                x_76786 = ((volatile __local\n                            float *) red_arr_mem_76763)[add32(local_tid_76753,\n                                                              offset_76797)];\n                x_76787 = ((volatile __local\n                            float *) red_arr_mem_76765)[add32(local_tid_76753,\n                                                              offset_76797)];\n                x_76788 = ((volatile __local\n                            float *) red_arr_mem_76767)[add32(local_tid_76753,\n                                                              offset_76797)];\n                x_76789 = ((volatile __local\n                            float *) red_arr_mem_76769)[add32(local_tid_76753,\n                                                              offset_76797)];\n            }\n            // apply reduction operation\n            {\n                float res_76790 = fmax32(x_76778, x_76784);\n                float res_76791 = fmax32(x_76779, x_76785);\n                float res_76792 = fmax32(x_76780, x_76786);\n                float res_76793 = fmin32(x_76781, x_76787);\n                float res_76794 = fmin32(x_76782, x_76788);\n                float res_76795 = fmin32(x_76783, x_76789);\n                \n                x_76778 = res_76790;\n                x_76779 = res_76791;\n                x_76780 = res_76792;\n                x_76781 = res_76793;\n                x_76782 = res_76794;\n                x_76783 = res_76795;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  float *) red_arr_mem_76759)[local_tid_76753] = x_76778;\n                ((volatile __local\n                  float *) red_arr_mem_76761)[local_tid_76753] = x_76779;\n                ((volatile __local\n                  float *) red_arr_mem_76763)[local_tid_76753] = x_76780;\n                ((volatile __local\n                  float *)",
                   " red_arr_mem_76765)[local_tid_76753] = x_76781;\n                ((volatile __local\n                  float *) red_arr_mem_76767)[local_tid_76753] = x_76782;\n                ((volatile __local\n                  float *) red_arr_mem_76769)[local_tid_76753] = x_76783;\n            }\n        }\n        offset_76797 *= 2;\n    }\n    skip_waves_76798 = 1;\n    while (slt32(skip_waves_76798, squot32(sub32(add32(segred_group_sizze_73810,\n                                                       wave_sizze_76755), 1),\n                                           wave_sizze_76755))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_76797 = mul32(skip_waves_76798, wave_sizze_76755);\n        if (slt32(add32(local_tid_76753, offset_76797),\n                  segred_group_sizze_73810) && (sub32(local_tid_76753,\n                                                      mul32(squot32(local_tid_76753,\n                                                                    wave_sizze_76755),\n                                                            wave_sizze_76755)) ==\n                                                0 && (squot32(local_tid_76753,\n                                                              wave_sizze_76755) &\n                                                      sub32(mul32(2,\n                                                                  skip_waves_76798),\n                                                            1)) == 0)) {\n            // read array element\n            {\n                x_76784 = ((__local\n                            float *) red_arr_mem_76759)[add32(local_tid_76753,\n                                                              offset_76797)];\n                x_76785 = ((__local\n                            float *) red_arr_mem_76761)[add32(local_tid_76753,\n                                                              offset_76797)];\n                x_76786 = ((__local\n                            float *) red_arr_mem_76763)[add32(local_tid_76753,\n     ",
                   "                                                         offset_76797)];\n                x_76787 = ((__local\n                            float *) red_arr_mem_76765)[add32(local_tid_76753,\n                                                              offset_76797)];\n                x_76788 = ((__local\n                            float *) red_arr_mem_76767)[add32(local_tid_76753,\n                                                              offset_76797)];\n                x_76789 = ((__local\n                            float *) red_arr_mem_76769)[add32(local_tid_76753,\n                                                              offset_76797)];\n            }\n            // apply reduction operation\n            {\n                float res_76790 = fmax32(x_76778, x_76784);\n                float res_76791 = fmax32(x_76779, x_76785);\n                float res_76792 = fmax32(x_76780, x_76786);\n                float res_76793 = fmin32(x_76781, x_76787);\n                float res_76794 = fmin32(x_76782, x_76788);\n                float res_76795 = fmin32(x_76783, x_76789);\n                \n                x_76778 = res_76790;\n                x_76779 = res_76791;\n                x_76780 = res_76792;\n                x_76781 = res_76793;\n                x_76782 = res_76794;\n                x_76783 = res_76795;\n            }\n            // write result of operation\n            {\n                ((__local float *) red_arr_mem_76759)[local_tid_76753] =\n                    x_76778;\n                ((__local float *) red_arr_mem_76761)[local_tid_76753] =\n                    x_76779;\n                ((__local float *) red_arr_mem_76763)[local_tid_76753] =\n                    x_76780;\n                ((__local float *) red_arr_mem_76765)[local_tid_76753] =\n                    x_76781;\n                ((__local float *) red_arr_mem_76767)[local_tid_76753] =\n                    x_76782;\n                ((__local float *) red_arr_mem_76769)[local_tid_76753] =\n                    x_76783;",
                   "\n            }\n        }\n        skip_waves_76798 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (local_tid_76753 == 0) {\n            x_acc_76771 = x_76778;\n            x_acc_76772 = x_76779;\n            x_acc_76773 = x_76780;\n            x_acc_76774 = x_76781;\n            x_acc_76775 = x_76782;\n            x_acc_76776 = x_76783;\n        }\n    }\n    \n    int32_t old_counter_76799;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_76753 == 0) {\n            ((__global float *) group_res_arr_mem_76739)[mul32(group_tid_76754,\n                                                               segred_group_sizze_73810)] =\n                x_acc_76771;\n            ((__global float *) group_res_arr_mem_76741)[mul32(group_tid_76754,\n                                                               segred_group_sizze_73810)] =\n                x_acc_76772;\n            ((__global float *) group_res_arr_mem_76743)[mul32(group_tid_76754,\n                                                               segred_group_sizze_73810)] =\n                x_acc_76773;\n            ((__global float *) group_res_arr_mem_76745)[mul32(group_tid_76754,\n                                                               segred_group_sizze_73810)] =\n                x_acc_76774;\n            ((__global float *) group_res_arr_mem_76747)[mul32(group_tid_76754,\n                                                               segred_group_sizze_73810)] =\n                x_acc_76775;\n            ((__global float *) group_res_arr_mem_76749)[mul32(group_tid_76754,\n                                                               segred_group_sizze_73810)] =\n                x_acc_76776;\n            mem_fence_global();\n            old_counter_76799 = atomic_add(&((volatile __global\n                                              int *) counter_mem_76737)[0],\n                                           (int) 1);\n     ",
                   "       ((__local bool *) sync_arr_mem_76757)[0] = old_counter_76799 ==\n                sub32(num_groups_73812, 1);\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    barrier(CLK_GLOBAL_MEM_FENCE);\n    \n    bool is_last_group_76800 = ((__local bool *) sync_arr_mem_76757)[0];\n    \n    if (is_last_group_76800) {\n        if (local_tid_76753 == 0) {\n            old_counter_76799 = atomic_add(&((volatile __global\n                                              int *) counter_mem_76737)[0],\n                                           (int) sub32(0, num_groups_73812));\n        }\n        // read in the per-group-results\n        {\n            if (slt32(local_tid_76753, num_groups_73812)) {\n                x_70543 = ((__global\n                            float *) group_res_arr_mem_76739)[mul32(local_tid_76753,\n                                                                    segred_group_sizze_73810)];\n            } else {\n                x_70543 = -INFINITY;\n            }\n            ((__local float *) red_arr_mem_76759)[local_tid_76753] = x_70543;\n            if (slt32(local_tid_76753, num_groups_73812)) {\n                x_70546 = ((__global\n                            float *) group_res_arr_mem_76741)[mul32(local_tid_76753,\n                                                                    segred_group_sizze_73810)];\n            } else {\n                x_70546 = -INFINITY;\n            }\n            ((__local float *) red_arr_mem_76761)[local_tid_76753] = x_70546;\n            if (slt32(local_tid_76753, num_groups_73812)) {\n                x_70549 = ((__global\n                            float *) group_res_arr_mem_76743)[mul32(local_tid_76753,\n                                                                    segred_group_sizze_73810)];\n            } else {\n                x_70549 = -INFINITY;\n            }\n            ((__local float *) red_arr_mem_76763)[local_tid_76753] = x_70549;\n            if (slt32(local_tid_76753, num_groups_73812)) {\n                x_70552 = (",
                   "(__global\n                            float *) group_res_arr_mem_76745)[mul32(local_tid_76753,\n                                                                    segred_group_sizze_73810)];\n            } else {\n                x_70552 = INFINITY;\n            }\n            ((__local float *) red_arr_mem_76765)[local_tid_76753] = x_70552;\n            if (slt32(local_tid_76753, num_groups_73812)) {\n                x_70555 = ((__global\n                            float *) group_res_arr_mem_76747)[mul32(local_tid_76753,\n                                                                    segred_group_sizze_73810)];\n            } else {\n                x_70555 = INFINITY;\n            }\n            ((__local float *) red_arr_mem_76767)[local_tid_76753] = x_70555;\n            if (slt32(local_tid_76753, num_groups_73812)) {\n                x_70558 = ((__global\n                            float *) group_res_arr_mem_76749)[mul32(local_tid_76753,\n                                                                    segred_group_sizze_73810)];\n            } else {\n                x_70558 = INFINITY;\n            }\n            ((__local float *) red_arr_mem_76769)[local_tid_76753] = x_70558;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_76801;\n            int32_t skip_waves_76802;\n            float x_76778;\n            float x_76779;\n            float x_76780;\n            float x_76781;\n            float x_76782;\n            float x_76783;\n            float x_76784;\n            float x_76785;\n            float x_76786;\n            float x_76787;\n            float x_76788;\n            float x_76789;\n            \n            offset_76801 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_76753, segred_group_sizze_73810)) {\n                    x_76778 = ((__local\n                                float *) red_arr_mem_76759)[add32(local_tid_76753",
                   ",\n                                                                  offset_76801)];\n                    x_76779 = ((__local\n                                float *) red_arr_mem_76761)[add32(local_tid_76753,\n                                                                  offset_76801)];\n                    x_76780 = ((__local\n                                float *) red_arr_mem_76763)[add32(local_tid_76753,\n                                                                  offset_76801)];\n                    x_76781 = ((__local\n                                float *) red_arr_mem_76765)[add32(local_tid_76753,\n                                                                  offset_76801)];\n                    x_76782 = ((__local\n                                float *) red_arr_mem_76767)[add32(local_tid_76753,\n                                                                  offset_76801)];\n                    x_76783 = ((__local\n                                float *) red_arr_mem_76769)[add32(local_tid_76753,\n                                                                  offset_76801)];\n                }\n            }\n            offset_76801 = 1;\n            while (slt32(offset_76801, wave_sizze_76755)) {\n                if (slt32(add32(local_tid_76753, offset_76801),\n                          segred_group_sizze_73810) && (sub32(local_tid_76753,\n                                                              mul32(squot32(local_tid_76753,\n                                                                            wave_sizze_76755),\n                                                                    wave_sizze_76755)) &\n                                                        sub32(mul32(2,\n                                                                    offset_76801),\n                                                              1)) == 0) {\n                    // read array element\n                    {\n                        x_76784 = ((volatile __local\n    ",
                   "                                float *) red_arr_mem_76759)[add32(local_tid_76753,\n                                                                      offset_76801)];\n                        x_76785 = ((volatile __local\n                                    float *) red_arr_mem_76761)[add32(local_tid_76753,\n                                                                      offset_76801)];\n                        x_76786 = ((volatile __local\n                                    float *) red_arr_mem_76763)[add32(local_tid_76753,\n                                                                      offset_76801)];\n                        x_76787 = ((volatile __local\n                                    float *) red_arr_mem_76765)[add32(local_tid_76753,\n                                                                      offset_76801)];\n                        x_76788 = ((volatile __local\n                                    float *) red_arr_mem_76767)[add32(local_tid_76753,\n                                                                      offset_76801)];\n                        x_76789 = ((volatile __local\n                                    float *) red_arr_mem_76769)[add32(local_tid_76753,\n                                                                      offset_76801)];\n                    }\n                    // apply reduction operation\n                    {\n                        float res_76790 = fmax32(x_76778, x_76784);\n                        float res_76791 = fmax32(x_76779, x_76785);\n                        float res_76792 = fmax32(x_76780, x_76786);\n                        float res_76793 = fmin32(x_76781, x_76787);\n                        float res_76794 = fmin32(x_76782, x_76788);\n                        float res_76795 = fmin32(x_76783, x_76789);\n                        \n                        x_76778 = res_76790;\n                        x_76779 = res_76791;\n                        x_76780 = res_76792;\n                        x_76781 = res_76",
                   "793;\n                        x_76782 = res_76794;\n                        x_76783 = res_76795;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          float *) red_arr_mem_76759)[local_tid_76753] =\n                            x_76778;\n                        ((volatile __local\n                          float *) red_arr_mem_76761)[local_tid_76753] =\n                            x_76779;\n                        ((volatile __local\n                          float *) red_arr_mem_76763)[local_tid_76753] =\n                            x_76780;\n                        ((volatile __local\n                          float *) red_arr_mem_76765)[local_tid_76753] =\n                            x_76781;\n                        ((volatile __local\n                          float *) red_arr_mem_76767)[local_tid_76753] =\n                            x_76782;\n                        ((volatile __local\n                          float *) red_arr_mem_76769)[local_tid_76753] =\n                            x_76783;\n                    }\n                }\n                offset_76801 *= 2;\n            }\n            skip_waves_76802 = 1;\n            while (slt32(skip_waves_76802,\n                         squot32(sub32(add32(segred_group_sizze_73810,\n                                             wave_sizze_76755), 1),\n                                 wave_sizze_76755))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_76801 = mul32(skip_waves_76802, wave_sizze_76755);\n                if (slt32(add32(local_tid_76753, offset_76801),\n                          segred_group_sizze_73810) && (sub32(local_tid_76753,\n                                                              mul32(squot32(local_tid_76753,\n                                                                            wave_sizze_76755),\n                                                                    wave_sizze_7675",
                   "5)) ==\n                                                        0 &&\n                                                        (squot32(local_tid_76753,\n                                                                 wave_sizze_76755) &\n                                                         sub32(mul32(2,\n                                                                     skip_waves_76802),\n                                                               1)) == 0)) {\n                    // read array element\n                    {\n                        x_76784 = ((__local\n                                    float *) red_arr_mem_76759)[add32(local_tid_76753,\n                                                                      offset_76801)];\n                        x_76785 = ((__local\n                                    float *) red_arr_mem_76761)[add32(local_tid_76753,\n                                                                      offset_76801)];\n                        x_76786 = ((__local\n                                    float *) red_arr_mem_76763)[add32(local_tid_76753,\n                                                                      offset_76801)];\n                        x_76787 = ((__local\n                                    float *) red_arr_mem_76765)[add32(local_tid_76753,\n                                                                      offset_76801)];\n                        x_76788 = ((__local\n                                    float *) red_arr_mem_76767)[add32(local_tid_76753,\n                                                                      offset_76801)];\n                        x_76789 = ((__local\n                                    float *) red_arr_mem_76769)[add32(local_tid_76753,\n                                                                      offset_76801)];\n                    }\n                    // apply reduction operation\n                    {\n                        float res_76790 = fmax32(x_76778, x_76784);\n  ",
                   "                      float res_76791 = fmax32(x_76779, x_76785);\n                        float res_76792 = fmax32(x_76780, x_76786);\n                        float res_76793 = fmin32(x_76781, x_76787);\n                        float res_76794 = fmin32(x_76782, x_76788);\n                        float res_76795 = fmin32(x_76783, x_76789);\n                        \n                        x_76778 = res_76790;\n                        x_76779 = res_76791;\n                        x_76780 = res_76792;\n                        x_76781 = res_76793;\n                        x_76782 = res_76794;\n                        x_76783 = res_76795;\n                    }\n                    // write result of operation\n                    {\n                        ((__local float *) red_arr_mem_76759)[local_tid_76753] =\n                            x_76778;\n                        ((__local float *) red_arr_mem_76761)[local_tid_76753] =\n                            x_76779;\n                        ((__local float *) red_arr_mem_76763)[local_tid_76753] =\n                            x_76780;\n                        ((__local float *) red_arr_mem_76765)[local_tid_76753] =\n                            x_76781;\n                        ((__local float *) red_arr_mem_76767)[local_tid_76753] =\n                            x_76782;\n                        ((__local float *) red_arr_mem_76769)[local_tid_76753] =\n                            x_76783;\n                    }\n                }\n                skip_waves_76802 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_76753 == 0) {\n                    ((__global float *) mem_75974)[0] = x_76778;\n                    ((__global float *) mem_75977)[0] = x_76779;\n                    ((__global float *) mem_75980)[0] = x_76780;\n                    ((__global float *) mem_75983)[0] = x_76781;\n                    ((__global float *) mem_75986)[0] = x_76782;\n                    ((__global flo",
                   "at *) mem_75989)[0] = x_76783;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_73810\n}\n__kernel void segred_nonseg_73933(__global int *global_failure, __local volatile\n                                  int64_t *red_arr_mem_76900_backing_aligned_0,\n                                  __local volatile\n                                  int64_t *sync_arr_mem_76898_backing_aligned_1,\n                                  int32_t num_groups_73926, __global\n                                  unsigned char *xs_mem_75996, __global\n                                  unsigned char *xs_mem_75997, __global\n                                  unsigned char *mem_76010, __global\n                                  unsigned char *mem_76014, __global\n                                  unsigned char *mem_76019, __global\n                                  unsigned char *mem_76024, __global\n                                  unsigned char *counter_mem_76888, __global\n                                  unsigned char *group_res_arr_mem_76890,\n                                  int32_t num_threads_76892)\n{\n    #define segred_group_sizze_73924 (render_rgbboxzisegred_group_sizze_73923)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_76900_backing_1 =\n                          (__local volatile\n                           char *) red_arr_mem_76900_backing_aligned_0;\n    __local volatile char *restrict sync_arr_mem_76898_backing_0 =\n                          (__local volatile\n                           char *) sync_arr_mem_76898_backing_aligned_1;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_76893;\n    int32_t local_tid_76894;\n    int32_t group_sizze_76897;\n    int32_t wave_sizze_76896;\n    int32_t group_tid_76895;\n    \n    global_tid_76893 = get_global_id(0);\n    local_tid_76894 = get_local_id(0);\n    group_sizze_76897 = get_l",
                   "ocal_size(0);\n    wave_sizze_76896 = LOCKSTEP_WIDTH;\n    group_tid_76895 = get_group_id(0);\n    \n    int32_t phys_tid_73933 = global_tid_76893;\n    __local char *sync_arr_mem_76898;\n    \n    sync_arr_mem_76898 = (__local char *) sync_arr_mem_76898_backing_0;\n    \n    __local char *red_arr_mem_76900;\n    \n    red_arr_mem_76900 = (__local char *) red_arr_mem_76900_backing_1;\n    \n    int32_t dummy_73931 = 0;\n    int32_t gtid_73932;\n    \n    gtid_73932 = 0;\n    \n    int32_t x_acc_76902;\n    int32_t chunk_sizze_76903 = smin32(squot32(sub32(add32(400,\n                                                           mul32(segred_group_sizze_73924,\n                                                                 num_groups_73926)),\n                                                     1),\n                                               mul32(segred_group_sizze_73924,\n                                                     num_groups_73926)),\n                                       squot32(sub32(add32(sub32(400,\n                                                                 phys_tid_73933),\n                                                           num_threads_76892),\n                                                     1), num_threads_76892));\n    int32_t x_70683;\n    int32_t x_70684;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_76902 = 0;\n    }\n    for (int32_t i_76907 = 0; i_76907 < chunk_sizze_76903; i_76907++) {\n        gtid_73932 = add32(phys_tid_73933, mul32(num_threads_76892, i_76907));\n        // apply map function\n        {\n            int32_t copy_p_70686 = ((__global\n                                     int32_t *) xs_mem_75997)[gtid_73932];\n            int32_t x_70687 = ((__global int32_t *) mem_76010)[gtid_73932];\n            int32_t copy_p_70688 = ((__global\n                                     int32_t *) xs_mem_75996)[gtid_73932];\n            \n            // save map-out results\n            {\n                ((__global int32_t *) mem_76019)[add32",
                   "(mul32(dummy_73931, 400),\n                                                       gtid_73932)] =\n                    copy_p_70686;\n                ((__global int32_t *) mem_76024)[add32(mul32(dummy_73931, 400),\n                                                       gtid_73932)] =\n                    copy_p_70688;\n            }\n            // load accumulator\n            {\n                x_70683 = x_acc_76902;\n            }\n            // load new values\n            {\n                x_70684 = x_70687;\n            }\n            // apply reduction operator\n            {\n                int32_t res_70685 = add32(x_70683, x_70684);\n                \n                // store in accumulator\n                {\n                    x_acc_76902 = res_70685;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_70683 = x_acc_76902;\n        ((__local int32_t *) red_arr_mem_76900)[local_tid_76894] = x_70683;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_76908;\n    int32_t skip_waves_76909;\n    int32_t x_76904;\n    int32_t x_76905;\n    \n    offset_76908 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_76894, segred_group_sizze_73924)) {\n            x_76904 = ((__local\n                        int32_t *) red_arr_mem_76900)[add32(local_tid_76894,\n                                                            offset_76908)];\n        }\n    }\n    offset_76908 = 1;\n    while (slt32(offset_76908, wave_sizze_76896)) {\n        if (slt32(add32(local_tid_76894, offset_76908),\n                  segred_group_sizze_73924) && (sub32(local_tid_76894,\n                                                      mul32(squot32(local_tid_76894,\n                                                                    wave_sizze_76896),\n                                                            wave_sizze_76896)) &\n                                                sub32(mul32(2, offset",
                   "_76908),\n                                                      1)) == 0) {\n            // read array element\n            {\n                x_76905 = ((volatile __local\n                            int32_t *) red_arr_mem_76900)[add32(local_tid_76894,\n                                                                offset_76908)];\n            }\n            // apply reduction operation\n            {\n                int32_t res_76906 = add32(x_76904, x_76905);\n                \n                x_76904 = res_76906;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  int32_t *) red_arr_mem_76900)[local_tid_76894] = x_76904;\n            }\n        }\n        offset_76908 *= 2;\n    }\n    skip_waves_76909 = 1;\n    while (slt32(skip_waves_76909, squot32(sub32(add32(segred_group_sizze_73924,\n                                                       wave_sizze_76896), 1),\n                                           wave_sizze_76896))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_76908 = mul32(skip_waves_76909, wave_sizze_76896);\n        if (slt32(add32(local_tid_76894, offset_76908),\n                  segred_group_sizze_73924) && (sub32(local_tid_76894,\n                                                      mul32(squot32(local_tid_76894,\n                                                                    wave_sizze_76896),\n                                                            wave_sizze_76896)) ==\n                                                0 && (squot32(local_tid_76894,\n                                                              wave_sizze_76896) &\n                                                      sub32(mul32(2,\n                                                                  skip_waves_76909),\n                                                            1)) == 0)) {\n            // read array element\n            {\n                x_76905 = ((__local\n                            int32_t *) red_",
                   "arr_mem_76900)[add32(local_tid_76894,\n                                                                offset_76908)];\n            }\n            // apply reduction operation\n            {\n                int32_t res_76906 = add32(x_76904, x_76905);\n                \n                x_76904 = res_76906;\n            }\n            // write result of operation\n            {\n                ((__local int32_t *) red_arr_mem_76900)[local_tid_76894] =\n                    x_76904;\n            }\n        }\n        skip_waves_76909 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (local_tid_76894 == 0) {\n            x_acc_76902 = x_76904;\n        }\n    }\n    \n    int32_t old_counter_76910;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_76894 == 0) {\n            ((__global\n              int32_t *) group_res_arr_mem_76890)[mul32(group_tid_76895,\n                                                        segred_group_sizze_73924)] =\n                x_acc_76902;\n            mem_fence_global();\n            old_counter_76910 = atomic_add(&((volatile __global\n                                              int *) counter_mem_76888)[0],\n                                           (int) 1);\n            ((__local bool *) sync_arr_mem_76898)[0] = old_counter_76910 ==\n                sub32(num_groups_73926, 1);\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    barrier(CLK_GLOBAL_MEM_FENCE);\n    \n    bool is_last_group_76911 = ((__local bool *) sync_arr_mem_76898)[0];\n    \n    if (is_last_group_76911) {\n        if (local_tid_76894 == 0) {\n            old_counter_76910 = atomic_add(&((volatile __global\n                                              int *) counter_mem_76888)[0],\n                                           (int) sub32(0, num_groups_73926));\n        }\n        // read in the per-group-results\n        {\n            if (slt32(local_tid_76894, num_groups_73926)) {\n        ",
                   "        x_70683 = ((__global\n                            int32_t *) group_res_arr_mem_76890)[mul32(local_tid_76894,\n                                                                      segred_group_sizze_73924)];\n            } else {\n                x_70683 = 0;\n            }\n            ((__local int32_t *) red_arr_mem_76900)[local_tid_76894] = x_70683;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_76912;\n            int32_t skip_waves_76913;\n            int32_t x_76904;\n            int32_t x_76905;\n            \n            offset_76912 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_76894, segred_group_sizze_73924)) {\n                    x_76904 = ((__local\n                                int32_t *) red_arr_mem_76900)[add32(local_tid_76894,\n                                                                    offset_76912)];\n                }\n            }\n            offset_76912 = 1;\n            while (slt32(offset_76912, wave_sizze_76896)) {\n                if (slt32(add32(local_tid_76894, offset_76912),\n                          segred_group_sizze_73924) && (sub32(local_tid_76894,\n                                                              mul32(squot32(local_tid_76894,\n                                                                            wave_sizze_76896),\n                                                                    wave_sizze_76896)) &\n                                                        sub32(mul32(2,\n                                                                    offset_76912),\n                                                              1)) == 0) {\n                    // read array element\n                    {\n                        x_76905 = ((volatile __local\n                                    int32_t *) red_arr_mem_76900)[add32(local_tid_76894,\n                                      ",
                   "                                  offset_76912)];\n                    }\n                    // apply reduction operation\n                    {\n                        int32_t res_76906 = add32(x_76904, x_76905);\n                        \n                        x_76904 = res_76906;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          int32_t *) red_arr_mem_76900)[local_tid_76894] =\n                            x_76904;\n                    }\n                }\n                offset_76912 *= 2;\n            }\n            skip_waves_76913 = 1;\n            while (slt32(skip_waves_76913,\n                         squot32(sub32(add32(segred_group_sizze_73924,\n                                             wave_sizze_76896), 1),\n                                 wave_sizze_76896))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_76912 = mul32(skip_waves_76913, wave_sizze_76896);\n                if (slt32(add32(local_tid_76894, offset_76912),\n                          segred_group_sizze_73924) && (sub32(local_tid_76894,\n                                                              mul32(squot32(local_tid_76894,\n                                                                            wave_sizze_76896),\n                                                                    wave_sizze_76896)) ==\n                                                        0 &&\n                                                        (squot32(local_tid_76894,\n                                                                 wave_sizze_76896) &\n                                                         sub32(mul32(2,\n                                                                     skip_waves_76913),\n                                                               1)) == 0)) {\n                    // read array element\n                    {\n                        x_76905 = ((__loc",
                   "al\n                                    int32_t *) red_arr_mem_76900)[add32(local_tid_76894,\n                                                                        offset_76912)];\n                    }\n                    // apply reduction operation\n                    {\n                        int32_t res_76906 = add32(x_76904, x_76905);\n                        \n                        x_76904 = res_76906;\n                    }\n                    // write result of operation\n                    {\n                        ((__local\n                          int32_t *) red_arr_mem_76900)[local_tid_76894] =\n                            x_76904;\n                    }\n                }\n                skip_waves_76913 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_76894 == 0) {\n                    ((__global int32_t *) mem_76014)[0] = x_76904;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_73924\n}\n__kernel void segred_nonseg_74837(__global int *global_failure, __local volatile\n                                  int64_t *red_arr_mem_77020_backing_aligned_0,\n                                  __local volatile\n                                  int64_t *red_arr_mem_77018_backing_aligned_1,\n                                  __local volatile\n                                  int64_t *red_arr_mem_77016_backing_aligned_2,\n                                  __local volatile\n                                  int64_t *red_arr_mem_77014_backing_aligned_3,\n                                  __local volatile\n                                  int64_t *red_arr_mem_77012_backing_aligned_4,\n                                  __local volatile\n                                  int64_t *red_arr_mem_77010_backing_aligned_5,\n                                  __local volatile\n                                  int64_t *sync_arr_mem_77008_backing_aligned_6,\n             ",
                   "                     int32_t num_groups_74827, __global\n                                  unsigned char *mem_75974, __global\n                                  unsigned char *mem_75977, __global\n                                  unsigned char *mem_75980, __global\n                                  unsigned char *mem_75983, __global\n                                  unsigned char *mem_75986, __global\n                                  unsigned char *mem_75989, __global\n                                  unsigned char *counter_mem_76988, __global\n                                  unsigned char *group_res_arr_mem_76990,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76992,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76994,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76996,\n                                  __global\n                                  unsigned char *group_res_arr_mem_76998,\n                                  __global\n                                  unsigned char *group_res_arr_mem_77000,\n                                  int32_t num_threads_77002)\n{\n    #define segred_group_sizze_74825 (render_irregzisegred_group_sizze_74824)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_77020_backing_6 =\n                          (__local volatile\n                           char *) red_arr_mem_77020_backing_aligned_0;\n    __local volatile char *restrict red_arr_mem_77018_backing_5 =\n                          (__local volatile\n                           char *) red_arr_mem_77018_backing_aligned_1;\n    __local volatile char *restrict red_arr_mem_77016_backing_4 =\n                          (__local volatile\n                           char *) red_arr_mem_77016_backing_aligned_2;\n    __local ",
                   "volatile char *restrict red_arr_mem_77014_backing_3 =\n                          (__local volatile\n                           char *) red_arr_mem_77014_backing_aligned_3;\n    __local volatile char *restrict red_arr_mem_77012_backing_2 =\n                          (__local volatile\n                           char *) red_arr_mem_77012_backing_aligned_4;\n    __local volatile char *restrict red_arr_mem_77010_backing_1 =\n                          (__local volatile\n                           char *) red_arr_mem_77010_backing_aligned_5;\n    __local volatile char *restrict sync_arr_mem_77008_backing_0 =\n                          (__local volatile\n                           char *) sync_arr_mem_77008_backing_aligned_6;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_77003;\n    int32_t local_tid_77004;\n    int32_t group_sizze_77007;\n    int32_t wave_sizze_77006;\n    int32_t group_tid_77005;\n    \n    global_tid_77003 = get_global_id(0);\n    local_tid_77004 = get_local_id(0);\n    group_sizze_77007 = get_local_size(0);\n    wave_sizze_77006 = LOCKSTEP_WIDTH;\n    group_tid_77005 = get_group_id(0);\n    \n    int32_t phys_tid_74837 = global_tid_77003;\n    __local char *sync_arr_mem_77008;\n    \n    sync_arr_mem_77008 = (__local char *) sync_arr_mem_77008_backing_0;\n    \n    __local char *red_arr_mem_77010;\n    \n    red_arr_mem_77010 = (__local char *) red_arr_mem_77010_backing_1;\n    \n    __local char *red_arr_mem_77012;\n    \n    red_arr_mem_77012 = (__local char *) red_arr_mem_77012_backing_2;\n    \n    __local char *red_arr_mem_77014;\n    \n    red_arr_mem_77014 = (__local char *) red_arr_mem_77014_backing_3;\n    \n    __local char *red_arr_mem_77016;\n    \n    red_arr_mem_77016 = (__local char *) red_arr_mem_77016_backing_4;\n    \n    __local char *red_arr_mem_77018;\n    \n    red_arr_mem_77018 = (__local char *) red_arr_mem_77018_backing_5;\n    \n    __local char *red_arr_mem_77020;\n    \n    red_arr_mem_77020 = (__local char *) red_arr_mem_77020_backing_6;\n  ",
                   "  \n    int32_t dummy_74835 = 0;\n    int32_t gtid_74836;\n    \n    gtid_74836 = 0;\n    \n    float x_acc_77022;\n    float x_acc_77023;\n    float x_acc_77024;\n    float x_acc_77025;\n    float x_acc_77026;\n    float x_acc_77027;\n    int32_t chunk_sizze_77028 = smin32(squot32(sub32(add32(10000,\n                                                           mul32(segred_group_sizze_74825,\n                                                                 num_groups_74827)),\n                                                     1),\n                                               mul32(segred_group_sizze_74825,\n                                                     num_groups_74827)),\n                                       squot32(sub32(add32(sub32(10000,\n                                                                 phys_tid_74837),\n                                                           num_threads_77002),\n                                                     1), num_threads_77002));\n    float x_71541;\n    float x_71542;\n    float x_71544;\n    float x_71545;\n    float x_71547;\n    float x_71548;\n    float x_71550;\n    float x_71551;\n    float x_71553;\n    float x_71554;\n    float x_71556;\n    float x_71557;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_77022 = -INFINITY;\n        x_acc_77023 = -INFINITY;\n        x_acc_77024 = -INFINITY;\n        x_acc_77025 = INFINITY;\n        x_acc_77026 = INFINITY;\n        x_acc_77027 = INFINITY;\n    }\n    for (int32_t i_77047 = 0; i_77047 < chunk_sizze_77028; i_77047++) {\n        gtid_74836 = add32(phys_tid_74837, mul32(num_threads_77002, i_77047));\n        // apply map function\n        {\n            int32_t new_index_75663 = squot32(gtid_74836, 100);\n            float binop_y_75697 = sitofp_i32_f32(new_index_75663);\n            float binop_y_75698 = 6.0F * binop_y_75697;\n            float index_primexp_75699 = -300.0F + binop_y_75698;\n            int32_t binop_y_75669 = mul32(100, new_index_75663);\n            int32_t new",
                   "_index_75670 = sub32(gtid_74836, binop_y_75669);\n            float binop_y_75694 = sitofp_i32_f32(new_index_75670);\n            float binop_y_75695 = 6.0F * binop_y_75694;\n            float index_primexp_75696 = -300.0F + binop_y_75695;\n            float res_71562 = index_primexp_75699 - 3.0F;\n            float res_71563 = index_primexp_75696 - 3.0F;\n            float res_71564 = 3.0F + index_primexp_75699;\n            float res_71565 = 3.0F + index_primexp_75696;\n            float y_71566 = res_71564 - res_71562;\n            float res_71567 = res_71562 + y_71566;\n            float y_71568 = res_71565 - res_71563;\n            float res_71569 = res_71563 + y_71568;\n            \n            // save map-out results\n            { }\n            // load accumulator\n            {\n                x_71541 = x_acc_77022;\n                x_71544 = x_acc_77023;\n                x_71547 = x_acc_77024;\n                x_71550 = x_acc_77025;\n                x_71553 = x_acc_77026;\n                x_71556 = x_acc_77027;\n            }\n            // load new values\n            {\n                x_71542 = res_71567;\n                x_71545 = 3.0F;\n                x_71548 = res_71569;\n                x_71551 = res_71567;\n                x_71554 = 3.0F;\n                x_71557 = res_71569;\n            }\n            // apply reduction operator\n            {\n                float res_71543 = fmax32(x_71541, x_71542);\n                float res_71546 = fmax32(x_71544, x_71545);\n                float res_71549 = fmax32(x_71547, x_71548);\n                float res_71552 = fmin32(x_71550, x_71551);\n                float res_71555 = fmin32(x_71553, x_71554);\n                float res_71558 = fmin32(x_71556, x_71557);\n                \n                // store in accumulator\n                {\n                    x_acc_77022 = res_71543;\n                    x_acc_77023 = res_71546;\n                    x_acc_77024 = res_71549;\n                    x_acc_77025 = res_71552;\n                    x_acc_77",
                   "026 = res_71555;\n                    x_acc_77027 = res_71558;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_71541 = x_acc_77022;\n        x_71544 = x_acc_77023;\n        x_71547 = x_acc_77024;\n        x_71550 = x_acc_77025;\n        x_71553 = x_acc_77026;\n        x_71556 = x_acc_77027;\n        ((__local float *) red_arr_mem_77010)[local_tid_77004] = x_71541;\n        ((__local float *) red_arr_mem_77012)[local_tid_77004] = x_71544;\n        ((__local float *) red_arr_mem_77014)[local_tid_77004] = x_71547;\n        ((__local float *) red_arr_mem_77016)[local_tid_77004] = x_71550;\n        ((__local float *) red_arr_mem_77018)[local_tid_77004] = x_71553;\n        ((__local float *) red_arr_mem_77020)[local_tid_77004] = x_71556;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_77048;\n    int32_t skip_waves_77049;\n    float x_77029;\n    float x_77030;\n    float x_77031;\n    float x_77032;\n    float x_77033;\n    float x_77034;\n    float x_77035;\n    float x_77036;\n    float x_77037;\n    float x_77038;\n    float x_77039;\n    float x_77040;\n    \n    offset_77048 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_77004, segred_group_sizze_74825)) {\n            x_77029 = ((__local\n                        float *) red_arr_mem_77010)[add32(local_tid_77004,\n                                                          offset_77048)];\n            x_77030 = ((__local\n                        float *) red_arr_mem_77012)[add32(local_tid_77004,\n                                                          offset_77048)];\n            x_77031 = ((__local\n                        float *) red_arr_mem_77014)[add32(local_tid_77004,\n                                                          offset_77048)];\n            x_77032 = ((__local\n                        float *) red_arr_mem_77016)[add32(local_tid_77004,\n                                                          o",
                   "ffset_77048)];\n            x_77033 = ((__local\n                        float *) red_arr_mem_77018)[add32(local_tid_77004,\n                                                          offset_77048)];\n            x_77034 = ((__local\n                        float *) red_arr_mem_77020)[add32(local_tid_77004,\n                                                          offset_77048)];\n        }\n    }\n    offset_77048 = 1;\n    while (slt32(offset_77048, wave_sizze_77006)) {\n        if (slt32(add32(local_tid_77004, offset_77048),\n                  segred_group_sizze_74825) && (sub32(local_tid_77004,\n                                                      mul32(squot32(local_tid_77004,\n                                                                    wave_sizze_77006),\n                                                            wave_sizze_77006)) &\n                                                sub32(mul32(2, offset_77048),\n                                                      1)) == 0) {\n            // read array element\n            {\n                x_77035 = ((volatile __local\n                            float *) red_arr_mem_77010)[add32(local_tid_77004,\n                                                              offset_77048)];\n                x_77036 = ((volatile __local\n                            float *) red_arr_mem_77012)[add32(local_tid_77004,\n                                                              offset_77048)];\n                x_77037 = ((volatile __local\n                            float *) red_arr_mem_77014)[add32(local_tid_77004,\n                                                              offset_77048)];\n                x_77038 = ((volatile __local\n                            float *) red_arr_mem_77016)[add32(local_tid_77004,\n                                                              offset_77048)];\n                x_77039 = ((volatile __local\n                            float *) red_arr_mem_77018)[add32(local_tid_77004,\n                             ",
                   "                                 offset_77048)];\n                x_77040 = ((volatile __local\n                            float *) red_arr_mem_77020)[add32(local_tid_77004,\n                                                              offset_77048)];\n            }\n            // apply reduction operation\n            {\n                float res_77041 = fmax32(x_77029, x_77035);\n                float res_77042 = fmax32(x_77030, x_77036);\n                float res_77043 = fmax32(x_77031, x_77037);\n                float res_77044 = fmin32(x_77032, x_77038);\n                float res_77045 = fmin32(x_77033, x_77039);\n                float res_77046 = fmin32(x_77034, x_77040);\n                \n                x_77029 = res_77041;\n                x_77030 = res_77042;\n                x_77031 = res_77043;\n                x_77032 = res_77044;\n                x_77033 = res_77045;\n                x_77034 = res_77046;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  float *) red_arr_mem_77010)[local_tid_77004] = x_77029;\n                ((volatile __local\n                  float *) red_arr_mem_77012)[local_tid_77004] = x_77030;\n                ((volatile __local\n                  float *) red_arr_mem_77014)[local_tid_77004] = x_77031;\n                ((volatile __local\n                  float *) red_arr_mem_77016)[local_tid_77004] = x_77032;\n                ((volatile __local\n                  float *) red_arr_mem_77018)[local_tid_77004] = x_77033;\n                ((volatile __local\n                  float *) red_arr_mem_77020)[local_tid_77004] = x_77034;\n            }\n        }\n        offset_77048 *= 2;\n    }\n    skip_waves_77049 = 1;\n    while (slt32(skip_waves_77049, squot32(sub32(add32(segred_group_sizze_74825,\n                                                       wave_sizze_77006), 1),\n                                           wave_sizze_77006))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offse",
                   "t_77048 = mul32(skip_waves_77049, wave_sizze_77006);\n        if (slt32(add32(local_tid_77004, offset_77048),\n                  segred_group_sizze_74825) && (sub32(local_tid_77004,\n                                                      mul32(squot32(local_tid_77004,\n                                                                    wave_sizze_77006),\n                                                            wave_sizze_77006)) ==\n                                                0 && (squot32(local_tid_77004,\n                                                              wave_sizze_77006) &\n                                                      sub32(mul32(2,\n                                                                  skip_waves_77049),\n                                                            1)) == 0)) {\n            // read array element\n            {\n                x_77035 = ((__local\n                            float *) red_arr_mem_77010)[add32(local_tid_77004,\n                                                              offset_77048)];\n                x_77036 = ((__local\n                            float *) red_arr_mem_77012)[add32(local_tid_77004,\n                                                              offset_77048)];\n                x_77037 = ((__local\n                            float *) red_arr_mem_77014)[add32(local_tid_77004,\n                                                              offset_77048)];\n                x_77038 = ((__local\n                            float *) red_arr_mem_77016)[add32(local_tid_77004,\n                                                              offset_77048)];\n                x_77039 = ((__local\n                            float *) red_arr_mem_77018)[add32(local_tid_77004,\n                                                              offset_77048)];\n                x_77040 = ((__local\n                            float *) red_arr_mem_77020)[add32(local_tid_77004,\n                                                  ",
                   "            offset_77048)];\n            }\n            // apply reduction operation\n            {\n                float res_77041 = fmax32(x_77029, x_77035);\n                float res_77042 = fmax32(x_77030, x_77036);\n                float res_77043 = fmax32(x_77031, x_77037);\n                float res_77044 = fmin32(x_77032, x_77038);\n                float res_77045 = fmin32(x_77033, x_77039);\n                float res_77046 = fmin32(x_77034, x_77040);\n                \n                x_77029 = res_77041;\n                x_77030 = res_77042;\n                x_77031 = res_77043;\n                x_77032 = res_77044;\n                x_77033 = res_77045;\n                x_77034 = res_77046;\n            }\n            // write result of operation\n            {\n                ((__local float *) red_arr_mem_77010)[local_tid_77004] =\n                    x_77029;\n                ((__local float *) red_arr_mem_77012)[local_tid_77004] =\n                    x_77030;\n                ((__local float *) red_arr_mem_77014)[local_tid_77004] =\n                    x_77031;\n                ((__local float *) red_arr_mem_77016)[local_tid_77004] =\n                    x_77032;\n                ((__local float *) red_arr_mem_77018)[local_tid_77004] =\n                    x_77033;\n                ((__local float *) red_arr_mem_77020)[local_tid_77004] =\n                    x_77034;\n            }\n        }\n        skip_waves_77049 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (local_tid_77004 == 0) {\n            x_acc_77022 = x_77029;\n            x_acc_77023 = x_77030;\n            x_acc_77024 = x_77031;\n            x_acc_77025 = x_77032;\n            x_acc_77026 = x_77033;\n            x_acc_77027 = x_77034;\n        }\n    }\n    \n    int32_t old_counter_77050;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_77004 == 0) {\n            ((__global float *) group_res_arr_mem_76990)[mul",
                   "32(group_tid_77005,\n                                                               segred_group_sizze_74825)] =\n                x_acc_77022;\n            ((__global float *) group_res_arr_mem_76992)[mul32(group_tid_77005,\n                                                               segred_group_sizze_74825)] =\n                x_acc_77023;\n            ((__global float *) group_res_arr_mem_76994)[mul32(group_tid_77005,\n                                                               segred_group_sizze_74825)] =\n                x_acc_77024;\n            ((__global float *) group_res_arr_mem_76996)[mul32(group_tid_77005,\n                                                               segred_group_sizze_74825)] =\n                x_acc_77025;\n            ((__global float *) group_res_arr_mem_76998)[mul32(group_tid_77005,\n                                                               segred_group_sizze_74825)] =\n                x_acc_77026;\n            ((__global float *) group_res_arr_mem_77000)[mul32(group_tid_77005,\n                                                               segred_group_sizze_74825)] =\n                x_acc_77027;\n            mem_fence_global();\n            old_counter_77050 = atomic_add(&((volatile __global\n                                              int *) counter_mem_76988)[0],\n                                           (int) 1);\n            ((__local bool *) sync_arr_mem_77008)[0] = old_counter_77050 ==\n                sub32(num_groups_74827, 1);\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    barrier(CLK_GLOBAL_MEM_FENCE);\n    \n    bool is_last_group_77051 = ((__local bool *) sync_arr_mem_77008)[0];\n    \n    if (is_last_group_77051) {\n        if (local_tid_77004 == 0) {\n            old_counter_77050 = atomic_add(&((volatile __global\n                                              int *) counter_mem_76988)[0],\n                                           (int) sub32(0, num_groups_74827));\n        }\n        // read in the per-group-results\n     ",
                   "   {\n            if (slt32(local_tid_77004, num_groups_74827)) {\n                x_71541 = ((__global\n                            float *) group_res_arr_mem_76990)[mul32(local_tid_77004,\n                                                                    segred_group_sizze_74825)];\n            } else {\n                x_71541 = -INFINITY;\n            }\n            ((__local float *) red_arr_mem_77010)[local_tid_77004] = x_71541;\n            if (slt32(local_tid_77004, num_groups_74827)) {\n                x_71544 = ((__global\n                            float *) group_res_arr_mem_76992)[mul32(local_tid_77004,\n                                                                    segred_group_sizze_74825)];\n            } else {\n                x_71544 = -INFINITY;\n            }\n            ((__local float *) red_arr_mem_77012)[local_tid_77004] = x_71544;\n            if (slt32(local_tid_77004, num_groups_74827)) {\n                x_71547 = ((__global\n                            float *) group_res_arr_mem_76994)[mul32(local_tid_77004,\n                                                                    segred_group_sizze_74825)];\n            } else {\n                x_71547 = -INFINITY;\n            }\n            ((__local float *) red_arr_mem_77014)[local_tid_77004] = x_71547;\n            if (slt32(local_tid_77004, num_groups_74827)) {\n                x_71550 = ((__global\n                            float *) group_res_arr_mem_76996)[mul32(local_tid_77004,\n                                                                    segred_group_sizze_74825)];\n            } else {\n                x_71550 = INFINITY;\n            }\n            ((__local float *) red_arr_mem_77016)[local_tid_77004] = x_71550;\n            if (slt32(local_tid_77004, num_groups_74827)) {\n                x_71553 = ((__global\n                            float *) group_res_arr_mem_76998)[mul32(local_tid_77004,\n                                                                    segred_group_sizze_74825)];\n      ",
                   "      } else {\n                x_71553 = INFINITY;\n            }\n            ((__local float *) red_arr_mem_77018)[local_tid_77004] = x_71553;\n            if (slt32(local_tid_77004, num_groups_74827)) {\n                x_71556 = ((__global\n                            float *) group_res_arr_mem_77000)[mul32(local_tid_77004,\n                                                                    segred_group_sizze_74825)];\n            } else {\n                x_71556 = INFINITY;\n            }\n            ((__local float *) red_arr_mem_77020)[local_tid_77004] = x_71556;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_77052;\n            int32_t skip_waves_77053;\n            float x_77029;\n            float x_77030;\n            float x_77031;\n            float x_77032;\n            float x_77033;\n            float x_77034;\n            float x_77035;\n            float x_77036;\n            float x_77037;\n            float x_77038;\n            float x_77039;\n            float x_77040;\n            \n            offset_77052 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_77004, segred_group_sizze_74825)) {\n                    x_77029 = ((__local\n                                float *) red_arr_mem_77010)[add32(local_tid_77004,\n                                                                  offset_77052)];\n                    x_77030 = ((__local\n                                float *) red_arr_mem_77012)[add32(local_tid_77004,\n                                                                  offset_77052)];\n                    x_77031 = ((__local\n                                float *) red_arr_mem_77014)[add32(local_tid_77004,\n                                                                  offset_77052)];\n                    x_77032 = ((__local\n                                float *) red_arr_mem_77016)[add32(local_tid_77004,\n       ",
                   "                                                           offset_77052)];\n                    x_77033 = ((__local\n                                float *) red_arr_mem_77018)[add32(local_tid_77004,\n                                                                  offset_77052)];\n                    x_77034 = ((__local\n                                float *) red_arr_mem_77020)[add32(local_tid_77004,\n                                                                  offset_77052)];\n                }\n            }\n            offset_77052 = 1;\n            while (slt32(offset_77052, wave_sizze_77006)) {\n                if (slt32(add32(local_tid_77004, offset_77052),\n                          segred_group_sizze_74825) && (sub32(local_tid_77004,\n                                                              mul32(squot32(local_tid_77004,\n                                                                            wave_sizze_77006),\n                                                                    wave_sizze_77006)) &\n                                                        sub32(mul32(2,\n                                                                    offset_77052),\n                                                              1)) == 0) {\n                    // read array element\n                    {\n                        x_77035 = ((volatile __local\n                                    float *) red_arr_mem_77010)[add32(local_tid_77004,\n                                                                      offset_77052)];\n                        x_77036 = ((volatile __local\n                                    float *) red_arr_mem_77012)[add32(local_tid_77004,\n                                                                      offset_77052)];\n                        x_77037 = ((volatile __local\n                                    float *) red_arr_mem_77014)[add32(local_tid_77004,\n                                                                      offset_77052)];\n   ",
                   "                     x_77038 = ((volatile __local\n                                    float *) red_arr_mem_77016)[add32(local_tid_77004,\n                                                                      offset_77052)];\n                        x_77039 = ((volatile __local\n                                    float *) red_arr_mem_77018)[add32(local_tid_77004,\n                                                                      offset_77052)];\n                        x_77040 = ((volatile __local\n                                    float *) red_arr_mem_77020)[add32(local_tid_77004,\n                                                                      offset_77052)];\n                    }\n                    // apply reduction operation\n                    {\n                        float res_77041 = fmax32(x_77029, x_77035);\n                        float res_77042 = fmax32(x_77030, x_77036);\n                        float res_77043 = fmax32(x_77031, x_77037);\n                        float res_77044 = fmin32(x_77032, x_77038);\n                        float res_77045 = fmin32(x_77033, x_77039);\n                        float res_77046 = fmin32(x_77034, x_77040);\n                        \n                        x_77029 = res_77041;\n                        x_77030 = res_77042;\n                        x_77031 = res_77043;\n                        x_77032 = res_77044;\n                        x_77033 = res_77045;\n                        x_77034 = res_77046;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          float *) red_arr_mem_77010)[local_tid_77004] =\n                            x_77029;\n                        ((volatile __local\n                          float *) red_arr_mem_77012)[local_tid_77004] =\n                            x_77030;\n                        ((volatile __local\n                          float *) red_arr_mem_77014)[local_tid_77004] =\n              ",
                   "              x_77031;\n                        ((volatile __local\n                          float *) red_arr_mem_77016)[local_tid_77004] =\n                            x_77032;\n                        ((volatile __local\n                          float *) red_arr_mem_77018)[local_tid_77004] =\n                            x_77033;\n                        ((volatile __local\n                          float *) red_arr_mem_77020)[local_tid_77004] =\n                            x_77034;\n                    }\n                }\n                offset_77052 *= 2;\n            }\n            skip_waves_77053 = 1;\n            while (slt32(skip_waves_77053,\n                         squot32(sub32(add32(segred_group_sizze_74825,\n                                             wave_sizze_77006), 1),\n                                 wave_sizze_77006))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_77052 = mul32(skip_waves_77053, wave_sizze_77006);\n                if (slt32(add32(local_tid_77004, offset_77052),\n                          segred_group_sizze_74825) && (sub32(local_tid_77004,\n                                                              mul32(squot32(local_tid_77004,\n                                                                            wave_sizze_77006),\n                                                                    wave_sizze_77006)) ==\n                                                        0 &&\n                                                        (squot32(local_tid_77004,\n                                                                 wave_sizze_77006) &\n                                                         sub32(mul32(2,\n                                                                     skip_waves_77053),\n                                                               1)) == 0)) {\n                    // read array element\n                    {\n                        x_77035 = ((__local\n                                    float *) ",
                   "red_arr_mem_77010)[add32(local_tid_77004,\n                                                                      offset_77052)];\n                        x_77036 = ((__local\n                                    float *) red_arr_mem_77012)[add32(local_tid_77004,\n                                                                      offset_77052)];\n                        x_77037 = ((__local\n                                    float *) red_arr_mem_77014)[add32(local_tid_77004,\n                                                                      offset_77052)];\n                        x_77038 = ((__local\n                                    float *) red_arr_mem_77016)[add32(local_tid_77004,\n                                                                      offset_77052)];\n                        x_77039 = ((__local\n                                    float *) red_arr_mem_77018)[add32(local_tid_77004,\n                                                                      offset_77052)];\n                        x_77040 = ((__local\n                                    float *) red_arr_mem_77020)[add32(local_tid_77004,\n                                                                      offset_77052)];\n                    }\n                    // apply reduction operation\n                    {\n                        float res_77041 = fmax32(x_77029, x_77035);\n                        float res_77042 = fmax32(x_77030, x_77036);\n                        float res_77043 = fmax32(x_77031, x_77037);\n                        float res_77044 = fmin32(x_77032, x_77038);\n                        float res_77045 = fmin32(x_77033, x_77039);\n                        float res_77046 = fmin32(x_77034, x_77040);\n                        \n                        x_77029 = res_77041;\n                        x_77030 = res_77042;\n                        x_77031 = res_77043;\n                        x_77032 = res_77044;\n                        x_77033 = res_77045;\n                        x_77034 = re",
                   "s_77046;\n                    }\n                    // write result of operation\n                    {\n                        ((__local float *) red_arr_mem_77010)[local_tid_77004] =\n                            x_77029;\n                        ((__local float *) red_arr_mem_77012)[local_tid_77004] =\n                            x_77030;\n                        ((__local float *) red_arr_mem_77014)[local_tid_77004] =\n                            x_77031;\n                        ((__local float *) red_arr_mem_77016)[local_tid_77004] =\n                            x_77032;\n                        ((__local float *) red_arr_mem_77018)[local_tid_77004] =\n                            x_77033;\n                        ((__local float *) red_arr_mem_77020)[local_tid_77004] =\n                            x_77034;\n                    }\n                }\n                skip_waves_77053 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_77004 == 0) {\n                    ((__global float *) mem_75974)[0] = x_77029;\n                    ((__global float *) mem_75977)[0] = x_77030;\n                    ((__global float *) mem_75980)[0] = x_77031;\n                    ((__global float *) mem_75983)[0] = x_77032;\n                    ((__global float *) mem_75986)[0] = x_77033;\n                    ((__global float *) mem_75989)[0] = x_77034;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_74825\n}\n__kernel void segred_nonseg_74927(__global int *global_failure, __local volatile\n                                  int64_t *red_arr_mem_77151_backing_aligned_0,\n                                  __local volatile\n                                  int64_t *sync_arr_mem_77149_backing_aligned_1,\n                                  int32_t num_groups_74920, __global\n                                  unsigned char *xs_mem_75996, __global\n                                  unsigned ch",
                   "ar *xs_mem_75997, __global\n                                  unsigned char *mem_76010, __global\n                                  unsigned char *mem_76014, __global\n                                  unsigned char *mem_76019, __global\n                                  unsigned char *mem_76024, __global\n                                  unsigned char *counter_mem_77139, __global\n                                  unsigned char *group_res_arr_mem_77141,\n                                  int32_t num_threads_77143)\n{\n    #define segred_group_sizze_74918 (render_irregzisegred_group_sizze_74917)\n    \n    const int block_dim0 = 0;\n    const int block_dim1 = 1;\n    const int block_dim2 = 2;\n    __local volatile char *restrict red_arr_mem_77151_backing_1 =\n                          (__local volatile\n                           char *) red_arr_mem_77151_backing_aligned_0;\n    __local volatile char *restrict sync_arr_mem_77149_backing_0 =\n                          (__local volatile\n                           char *) sync_arr_mem_77149_backing_aligned_1;\n    \n    if (*global_failure >= 0)\n        return;\n    \n    int32_t global_tid_77144;\n    int32_t local_tid_77145;\n    int32_t group_sizze_77148;\n    int32_t wave_sizze_77147;\n    int32_t group_tid_77146;\n    \n    global_tid_77144 = get_global_id(0);\n    local_tid_77145 = get_local_id(0);\n    group_sizze_77148 = get_local_size(0);\n    wave_sizze_77147 = LOCKSTEP_WIDTH;\n    group_tid_77146 = get_group_id(0);\n    \n    int32_t phys_tid_74927 = global_tid_77144;\n    __local char *sync_arr_mem_77149;\n    \n    sync_arr_mem_77149 = (__local char *) sync_arr_mem_77149_backing_0;\n    \n    __local char *red_arr_mem_77151;\n    \n    red_arr_mem_77151 = (__local char *) red_arr_mem_77151_backing_1;\n    \n    int32_t dummy_74925 = 0;\n    int32_t gtid_74926;\n    \n    gtid_74926 = 0;\n    \n    int32_t x_acc_77153;\n    int32_t chunk_sizze_77154 = smin32(squot32(sub32(add32(10000,\n                                                           mul32(segre",
                   "d_group_sizze_74918,\n                                                                 num_groups_74920)),\n                                                     1),\n                                               mul32(segred_group_sizze_74918,\n                                                     num_groups_74920)),\n                                       squot32(sub32(add32(sub32(10000,\n                                                                 phys_tid_74927),\n                                                           num_threads_77143),\n                                                     1), num_threads_77143));\n    int32_t x_71670;\n    int32_t x_71671;\n    \n    // neutral-initialise the accumulators\n    {\n        x_acc_77153 = 0;\n    }\n    for (int32_t i_77158 = 0; i_77158 < chunk_sizze_77154; i_77158++) {\n        gtid_74926 = add32(phys_tid_74927, mul32(num_threads_77143, i_77158));\n        // apply map function\n        {\n            int32_t copy_p_71673 = ((__global\n                                     int32_t *) xs_mem_75997)[gtid_74926];\n            int32_t x_71674 = ((__global int32_t *) mem_76010)[gtid_74926];\n            int32_t copy_p_71675 = ((__global\n                                     int32_t *) xs_mem_75996)[gtid_74926];\n            \n            // save map-out results\n            {\n                ((__global int32_t *) mem_76019)[add32(mul32(dummy_74925,\n                                                             10000),\n                                                       gtid_74926)] =\n                    copy_p_71673;\n                ((__global int32_t *) mem_76024)[add32(mul32(dummy_74925,\n                                                             10000),\n                                                       gtid_74926)] =\n                    copy_p_71675;\n            }\n            // load accumulator\n            {\n                x_71670 = x_acc_77153;\n            }\n            // load new values\n            {\n                x_71671",
                   " = x_71674;\n            }\n            // apply reduction operator\n            {\n                int32_t res_71672 = add32(x_71670, x_71671);\n                \n                // store in accumulator\n                {\n                    x_acc_77153 = res_71672;\n                }\n            }\n        }\n    }\n    // to reduce current chunk, first store our result in memory\n    {\n        x_71670 = x_acc_77153;\n        ((__local int32_t *) red_arr_mem_77151)[local_tid_77145] = x_71670;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    \n    int32_t offset_77159;\n    int32_t skip_waves_77160;\n    int32_t x_77155;\n    int32_t x_77156;\n    \n    offset_77159 = 0;\n    // participating threads read initial accumulator\n    {\n        if (slt32(local_tid_77145, segred_group_sizze_74918)) {\n            x_77155 = ((__local\n                        int32_t *) red_arr_mem_77151)[add32(local_tid_77145,\n                                                            offset_77159)];\n        }\n    }\n    offset_77159 = 1;\n    while (slt32(offset_77159, wave_sizze_77147)) {\n        if (slt32(add32(local_tid_77145, offset_77159),\n                  segred_group_sizze_74918) && (sub32(local_tid_77145,\n                                                      mul32(squot32(local_tid_77145,\n                                                                    wave_sizze_77147),\n                                                            wave_sizze_77147)) &\n                                                sub32(mul32(2, offset_77159),\n                                                      1)) == 0) {\n            // read array element\n            {\n                x_77156 = ((volatile __local\n                            int32_t *) red_arr_mem_77151)[add32(local_tid_77145,\n                                                                offset_77159)];\n            }\n            // apply reduction operation\n            {\n                int32_t res_77157 = add32(x_77155, x_77156);\n                \n                x_7",
                   "7155 = res_77157;\n            }\n            // write result of operation\n            {\n                ((volatile __local\n                  int32_t *) red_arr_mem_77151)[local_tid_77145] = x_77155;\n            }\n        }\n        offset_77159 *= 2;\n    }\n    skip_waves_77160 = 1;\n    while (slt32(skip_waves_77160, squot32(sub32(add32(segred_group_sizze_74918,\n                                                       wave_sizze_77147), 1),\n                                           wave_sizze_77147))) {\n        barrier(CLK_LOCAL_MEM_FENCE);\n        offset_77159 = mul32(skip_waves_77160, wave_sizze_77147);\n        if (slt32(add32(local_tid_77145, offset_77159),\n                  segred_group_sizze_74918) && (sub32(local_tid_77145,\n                                                      mul32(squot32(local_tid_77145,\n                                                                    wave_sizze_77147),\n                                                            wave_sizze_77147)) ==\n                                                0 && (squot32(local_tid_77145,\n                                                              wave_sizze_77147) &\n                                                      sub32(mul32(2,\n                                                                  skip_waves_77160),\n                                                            1)) == 0)) {\n            // read array element\n            {\n                x_77156 = ((__local\n                            int32_t *) red_arr_mem_77151)[add32(local_tid_77145,\n                                                                offset_77159)];\n            }\n            // apply reduction operation\n            {\n                int32_t res_77157 = add32(x_77155, x_77156);\n                \n                x_77155 = res_77157;\n            }\n            // write result of operation\n            {\n                ((__local int32_t *) red_arr_mem_77151)[local_tid_77145] =\n                    x_77155;\n            }\n      ",
                   "  }\n        skip_waves_77160 *= 2;\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    // first thread saves the result in accumulator\n    {\n        if (local_tid_77145 == 0) {\n            x_acc_77153 = x_77155;\n        }\n    }\n    \n    int32_t old_counter_77161;\n    \n    // first thread in group saves group result to global memory\n    {\n        if (local_tid_77145 == 0) {\n            ((__global\n              int32_t *) group_res_arr_mem_77141)[mul32(group_tid_77146,\n                                                        segred_group_sizze_74918)] =\n                x_acc_77153;\n            mem_fence_global();\n            old_counter_77161 = atomic_add(&((volatile __global\n                                              int *) counter_mem_77139)[0],\n                                           (int) 1);\n            ((__local bool *) sync_arr_mem_77149)[0] = old_counter_77161 ==\n                sub32(num_groups_74920, 1);\n        }\n    }\n    barrier(CLK_LOCAL_MEM_FENCE);\n    barrier(CLK_GLOBAL_MEM_FENCE);\n    \n    bool is_last_group_77162 = ((__local bool *) sync_arr_mem_77149)[0];\n    \n    if (is_last_group_77162) {\n        if (local_tid_77145 == 0) {\n            old_counter_77161 = atomic_add(&((volatile __global\n                                              int *) counter_mem_77139)[0],\n                                           (int) sub32(0, num_groups_74920));\n        }\n        // read in the per-group-results\n        {\n            if (slt32(local_tid_77145, num_groups_74920)) {\n                x_71670 = ((__global\n                            int32_t *) group_res_arr_mem_77141)[mul32(local_tid_77145,\n                                                                      segred_group_sizze_74918)];\n            } else {\n                x_71670 = 0;\n            }\n            ((__local int32_t *) red_arr_mem_77151)[local_tid_77145] = x_71670;\n        }\n        barrier(CLK_LOCAL_MEM_FENCE);\n        // reduce the per-group results\n        {\n            int32_t offset_77163;\n     ",
                   "       int32_t skip_waves_77164;\n            int32_t x_77155;\n            int32_t x_77156;\n            \n            offset_77163 = 0;\n            // participating threads read initial accumulator\n            {\n                if (slt32(local_tid_77145, segred_group_sizze_74918)) {\n                    x_77155 = ((__local\n                                int32_t *) red_arr_mem_77151)[add32(local_tid_77145,\n                                                                    offset_77163)];\n                }\n            }\n            offset_77163 = 1;\n            while (slt32(offset_77163, wave_sizze_77147)) {\n                if (slt32(add32(local_tid_77145, offset_77163),\n                          segred_group_sizze_74918) && (sub32(local_tid_77145,\n                                                              mul32(squot32(local_tid_77145,\n                                                                            wave_sizze_77147),\n                                                                    wave_sizze_77147)) &\n                                                        sub32(mul32(2,\n                                                                    offset_77163),\n                                                              1)) == 0) {\n                    // read array element\n                    {\n                        x_77156 = ((volatile __local\n                                    int32_t *) red_arr_mem_77151)[add32(local_tid_77145,\n                                                                        offset_77163)];\n                    }\n                    // apply reduction operation\n                    {\n                        int32_t res_77157 = add32(x_77155, x_77156);\n                        \n                        x_77155 = res_77157;\n                    }\n                    // write result of operation\n                    {\n                        ((volatile __local\n                          int32_t *) red_arr_mem_77151)[local_tid_77145] =\n  ",
                   "                          x_77155;\n                    }\n                }\n                offset_77163 *= 2;\n            }\n            skip_waves_77164 = 1;\n            while (slt32(skip_waves_77164,\n                         squot32(sub32(add32(segred_group_sizze_74918,\n                                             wave_sizze_77147), 1),\n                                 wave_sizze_77147))) {\n                barrier(CLK_LOCAL_MEM_FENCE);\n                offset_77163 = mul32(skip_waves_77164, wave_sizze_77147);\n                if (slt32(add32(local_tid_77145, offset_77163),\n                          segred_group_sizze_74918) && (sub32(local_tid_77145,\n                                                              mul32(squot32(local_tid_77145,\n                                                                            wave_sizze_77147),\n                                                                    wave_sizze_77147)) ==\n                                                        0 &&\n                                                        (squot32(local_tid_77145,\n                                                                 wave_sizze_77147) &\n                                                         sub32(mul32(2,\n                                                                     skip_waves_77164),\n                                                               1)) == 0)) {\n                    // read array element\n                    {\n                        x_77156 = ((__local\n                                    int32_t *) red_arr_mem_77151)[add32(local_tid_77145,\n                                                                        offset_77163)];\n                    }\n                    // apply reduction operation\n                    {\n                        int32_t res_77157 = add32(x_77155, x_77156);\n                        \n                        x_77155 = res_77157;\n                    }\n                    // write result of operation\n            ",
                   "        {\n                        ((__local\n                          int32_t *) red_arr_mem_77151)[local_tid_77145] =\n                            x_77155;\n                    }\n                }\n                skip_waves_77164 *= 2;\n            }\n            // and back to memory with the final result\n            {\n                if (local_tid_77145 == 0) {\n                    ((__global int32_t *) mem_76014)[0] = x_77155;\n                }\n            }\n        }\n    }\n    \n  error_1:\n    return;\n    #undef segred_group_sizze_74918\n}\n",
                   NULL};
static int32_t counter_mem_realtype_77238[10] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
static int32_t counter_mem_realtype_77280[10] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
static int32_t counter_mem_realtype_77322[10] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
static int32_t counter_mem_realtype_77364[10] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
static int32_t counter_mem_realtype_77435[10] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
static int32_t counter_mem_realtype_77477[10] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
static int32_t counter_mem_realtype_77548[10] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
static int32_t counter_mem_realtype_77590[10] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
struct memblock_device {
    int *references;
    cl_mem mem;
    int64_t size;
    const char *desc;
} ;
struct memblock {
    int *references;
    char *mem;
    int64_t size;
    const char *desc;
} ;
static const char *size_names[] = {"bvh_irreg.group_size_76585",
                                   "bvh_irreg.group_size_76658",
                                   "bvh_irreg.segmap_group_size_73202",
                                   "bvh_irreg.segmap_group_size_73255",
                                   "bvh_irreg.segmap_group_size_73292",
                                   "bvh_irreg.segmap_group_size_73304",
                                   "bvh_irreg.segmap_group_size_73363",
                                   "bvh_irreg.segmap_group_size_73535",
                                   "bvh_irreg.segmap_group_size_73547",
                                   "bvh_irreg.segred_group_size_73184",
                                   "bvh_irreg.segred_group_size_73277",
                                   "bvh_irreg.segred_num_groups_73186",
                                   "bvh_irreg.segred_num_groups_73279",
                                   "bvh_irreg.segscan_group_size_73268",
                                   "bvh_irreg.segscan_num_groups_73270",
                                   "bvh_rgbbox.group_size_76312",
                                   "bvh_rgbbox.group_size_76385",
                                   "bvh_rgbbox.group_size_76427",
                                   "bvh_rgbbox.group_size_76454",
                                   "bvh_rgbbox.segmap_group_size_72618",
                                   "bvh_rgbbox.segmap_group_size_72692",
                                   "bvh_rgbbox.segmap_group_size_72729",
                                   "bvh_rgbbox.segmap_group_size_72741",
                                   "bvh_rgbbox.segmap_group_size_72885",
                                   "bvh_rgbbox.segmap_group_size_73057",
                                   "bvh_rgbbox.segmap_group_size_73069",
                                   "bvh_rgbbox.segred_group_size_72600",
                                   "bvh_rgbbox.segred_group_size_72714",
                                   "bvh_rgbbox.segred_num_groups_72602",
                                   "bvh_rgbbox.segred_num_groups_72716",
                                   "bvh_rgbbox.segscan_group_size_72705",
                                   "bvh_rgbbox.segscan_num_groups_72707",
                                   "render_irreg.group_size_77062",
                                   "render_irreg.group_size_77135",
                                   "render_irreg.segmap_group_size_74842",
                                   "render_irreg.segmap_group_size_74895",
                                   "render_irreg.segmap_group_size_74932",
                                   "render_irreg.segmap_group_size_74944",
                                   "render_irreg.segmap_group_size_75003",
                                   "render_irreg.segmap_group_size_75175",
                                   "render_irreg.segmap_group_size_75187",
                                   "render_irreg.segmap_group_size_75252",
                                   "render_irreg.segred_group_size_74824",
                                   "render_irreg.segred_group_size_74917",
                                   "render_irreg.segred_num_groups_74826",
                                   "render_irreg.segred_num_groups_74919",
                                   "render_irreg.segscan_group_size_74908",
                                   "render_irreg.segscan_num_groups_74910",
                                   "render_rgbbox.group_size_76811",
                                   "render_rgbbox.group_size_76884",
                                   "render_rgbbox.segmap_group_size_73827",
                                   "render_rgbbox.segmap_group_size_73901",
                                   "render_rgbbox.segmap_group_size_73938",
                                   "render_rgbbox.segmap_group_size_73950",
                                   "render_rgbbox.segmap_group_size_74094",
                                   "render_rgbbox.segmap_group_size_74266",
                                   "render_rgbbox.segmap_group_size_74278",
                                   "render_rgbbox.segmap_group_size_74349",
                                   "render_rgbbox.segred_group_size_73809",
                                   "render_rgbbox.segred_group_size_73923",
                                   "render_rgbbox.segred_num_groups_73811",
                                   "render_rgbbox.segred_num_groups_73925",
                                   "render_rgbbox.segscan_group_size_73914",
                                   "render_rgbbox.segscan_num_groups_73916"};
static const char *size_vars[] = {"bvh_irregzigroup_sizze_76585",
                                  "bvh_irregzigroup_sizze_76658",
                                  "bvh_irregzisegmap_group_sizze_73202",
                                  "bvh_irregzisegmap_group_sizze_73255",
                                  "bvh_irregzisegmap_group_sizze_73292",
                                  "bvh_irregzisegmap_group_sizze_73304",
                                  "bvh_irregzisegmap_group_sizze_73363",
                                  "bvh_irregzisegmap_group_sizze_73535",
                                  "bvh_irregzisegmap_group_sizze_73547",
                                  "bvh_irregzisegred_group_sizze_73184",
                                  "bvh_irregzisegred_group_sizze_73277",
                                  "bvh_irregzisegred_num_groups_73186",
                                  "bvh_irregzisegred_num_groups_73279",
                                  "bvh_irregzisegscan_group_sizze_73268",
                                  "bvh_irregzisegscan_num_groups_73270",
                                  "bvh_rgbboxzigroup_sizze_76312",
                                  "bvh_rgbboxzigroup_sizze_76385",
                                  "bvh_rgbboxzigroup_sizze_76427",
                                  "bvh_rgbboxzigroup_sizze_76454",
                                  "bvh_rgbboxzisegmap_group_sizze_72618",
                                  "bvh_rgbboxzisegmap_group_sizze_72692",
                                  "bvh_rgbboxzisegmap_group_sizze_72729",
                                  "bvh_rgbboxzisegmap_group_sizze_72741",
                                  "bvh_rgbboxzisegmap_group_sizze_72885",
                                  "bvh_rgbboxzisegmap_group_sizze_73057",
                                  "bvh_rgbboxzisegmap_group_sizze_73069",
                                  "bvh_rgbboxzisegred_group_sizze_72600",
                                  "bvh_rgbboxzisegred_group_sizze_72714",
                                  "bvh_rgbboxzisegred_num_groups_72602",
                                  "bvh_rgbboxzisegred_num_groups_72716",
                                  "bvh_rgbboxzisegscan_group_sizze_72705",
                                  "bvh_rgbboxzisegscan_num_groups_72707",
                                  "render_irregzigroup_sizze_77062",
                                  "render_irregzigroup_sizze_77135",
                                  "render_irregzisegmap_group_sizze_74842",
                                  "render_irregzisegmap_group_sizze_74895",
                                  "render_irregzisegmap_group_sizze_74932",
                                  "render_irregzisegmap_group_sizze_74944",
                                  "render_irregzisegmap_group_sizze_75003",
                                  "render_irregzisegmap_group_sizze_75175",
                                  "render_irregzisegmap_group_sizze_75187",
                                  "render_irregzisegmap_group_sizze_75252",
                                  "render_irregzisegred_group_sizze_74824",
                                  "render_irregzisegred_group_sizze_74917",
                                  "render_irregzisegred_num_groups_74826",
                                  "render_irregzisegred_num_groups_74919",
                                  "render_irregzisegscan_group_sizze_74908",
                                  "render_irregzisegscan_num_groups_74910",
                                  "render_rgbboxzigroup_sizze_76811",
                                  "render_rgbboxzigroup_sizze_76884",
                                  "render_rgbboxzisegmap_group_sizze_73827",
                                  "render_rgbboxzisegmap_group_sizze_73901",
                                  "render_rgbboxzisegmap_group_sizze_73938",
                                  "render_rgbboxzisegmap_group_sizze_73950",
                                  "render_rgbboxzisegmap_group_sizze_74094",
                                  "render_rgbboxzisegmap_group_sizze_74266",
                                  "render_rgbboxzisegmap_group_sizze_74278",
                                  "render_rgbboxzisegmap_group_sizze_74349",
                                  "render_rgbboxzisegred_group_sizze_73809",
                                  "render_rgbboxzisegred_group_sizze_73923",
                                  "render_rgbboxzisegred_num_groups_73811",
                                  "render_rgbboxzisegred_num_groups_73925",
                                  "render_rgbboxzisegscan_group_sizze_73914",
                                  "render_rgbboxzisegscan_num_groups_73916"};
static const char *size_classes[] = {"group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "num_groups",
                                     "num_groups", "group_size", "num_groups",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "num_groups", "num_groups",
                                     "group_size", "num_groups", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "num_groups",
                                     "num_groups", "group_size", "num_groups",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "group_size", "group_size", "group_size",
                                     "num_groups", "num_groups", "group_size",
                                     "num_groups"};
int futhark_get_num_sizes(void)
{
    return 64;
}
const char *futhark_get_size_name(int i)
{
    return size_names[i];
}
const char *futhark_get_size_class(int i)
{
    return size_classes[i];
}
struct sizes {
    size_t bvh_irregzigroup_sizze_76585;
    size_t bvh_irregzigroup_sizze_76658;
    size_t bvh_irregzisegmap_group_sizze_73202;
    size_t bvh_irregzisegmap_group_sizze_73255;
    size_t bvh_irregzisegmap_group_sizze_73292;
    size_t bvh_irregzisegmap_group_sizze_73304;
    size_t bvh_irregzisegmap_group_sizze_73363;
    size_t bvh_irregzisegmap_group_sizze_73535;
    size_t bvh_irregzisegmap_group_sizze_73547;
    size_t bvh_irregzisegred_group_sizze_73184;
    size_t bvh_irregzisegred_group_sizze_73277;
    size_t bvh_irregzisegred_num_groups_73186;
    size_t bvh_irregzisegred_num_groups_73279;
    size_t bvh_irregzisegscan_group_sizze_73268;
    size_t bvh_irregzisegscan_num_groups_73270;
    size_t bvh_rgbboxzigroup_sizze_76312;
    size_t bvh_rgbboxzigroup_sizze_76385;
    size_t bvh_rgbboxzigroup_sizze_76427;
    size_t bvh_rgbboxzigroup_sizze_76454;
    size_t bvh_rgbboxzisegmap_group_sizze_72618;
    size_t bvh_rgbboxzisegmap_group_sizze_72692;
    size_t bvh_rgbboxzisegmap_group_sizze_72729;
    size_t bvh_rgbboxzisegmap_group_sizze_72741;
    size_t bvh_rgbboxzisegmap_group_sizze_72885;
    size_t bvh_rgbboxzisegmap_group_sizze_73057;
    size_t bvh_rgbboxzisegmap_group_sizze_73069;
    size_t bvh_rgbboxzisegred_group_sizze_72600;
    size_t bvh_rgbboxzisegred_group_sizze_72714;
    size_t bvh_rgbboxzisegred_num_groups_72602;
    size_t bvh_rgbboxzisegred_num_groups_72716;
    size_t bvh_rgbboxzisegscan_group_sizze_72705;
    size_t bvh_rgbboxzisegscan_num_groups_72707;
    size_t render_irregzigroup_sizze_77062;
    size_t render_irregzigroup_sizze_77135;
    size_t render_irregzisegmap_group_sizze_74842;
    size_t render_irregzisegmap_group_sizze_74895;
    size_t render_irregzisegmap_group_sizze_74932;
    size_t render_irregzisegmap_group_sizze_74944;
    size_t render_irregzisegmap_group_sizze_75003;
    size_t render_irregzisegmap_group_sizze_75175;
    size_t render_irregzisegmap_group_sizze_75187;
    size_t render_irregzisegmap_group_sizze_75252;
    size_t render_irregzisegred_group_sizze_74824;
    size_t render_irregzisegred_group_sizze_74917;
    size_t render_irregzisegred_num_groups_74826;
    size_t render_irregzisegred_num_groups_74919;
    size_t render_irregzisegscan_group_sizze_74908;
    size_t render_irregzisegscan_num_groups_74910;
    size_t render_rgbboxzigroup_sizze_76811;
    size_t render_rgbboxzigroup_sizze_76884;
    size_t render_rgbboxzisegmap_group_sizze_73827;
    size_t render_rgbboxzisegmap_group_sizze_73901;
    size_t render_rgbboxzisegmap_group_sizze_73938;
    size_t render_rgbboxzisegmap_group_sizze_73950;
    size_t render_rgbboxzisegmap_group_sizze_74094;
    size_t render_rgbboxzisegmap_group_sizze_74266;
    size_t render_rgbboxzisegmap_group_sizze_74278;
    size_t render_rgbboxzisegmap_group_sizze_74349;
    size_t render_rgbboxzisegred_group_sizze_73809;
    size_t render_rgbboxzisegred_group_sizze_73923;
    size_t render_rgbboxzisegred_num_groups_73811;
    size_t render_rgbboxzisegred_num_groups_73925;
    size_t render_rgbboxzisegscan_group_sizze_73914;
    size_t render_rgbboxzisegscan_num_groups_73916;
} ;
struct futhark_context_config {
    struct opencl_config opencl;
    size_t sizes[64];
    int num_build_opts;
    const char **build_opts;
} ;
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->num_build_opts = 0;
    cfg->build_opts = (const char **) malloc(sizeof(const char *));
    cfg->build_opts[0] = NULL;
    cfg->sizes[0] = 0;
    cfg->sizes[1] = 0;
    cfg->sizes[2] = 0;
    cfg->sizes[3] = 0;
    cfg->sizes[4] = 0;
    cfg->sizes[5] = 0;
    cfg->sizes[6] = 0;
    cfg->sizes[7] = 0;
    cfg->sizes[8] = 0;
    cfg->sizes[9] = 0;
    cfg->sizes[10] = 0;
    cfg->sizes[11] = 0;
    cfg->sizes[12] = 0;
    cfg->sizes[13] = 0;
    cfg->sizes[14] = 0;
    cfg->sizes[15] = 0;
    cfg->sizes[16] = 0;
    cfg->sizes[17] = 0;
    cfg->sizes[18] = 0;
    cfg->sizes[19] = 0;
    cfg->sizes[20] = 0;
    cfg->sizes[21] = 0;
    cfg->sizes[22] = 0;
    cfg->sizes[23] = 0;
    cfg->sizes[24] = 0;
    cfg->sizes[25] = 0;
    cfg->sizes[26] = 0;
    cfg->sizes[27] = 0;
    cfg->sizes[28] = 0;
    cfg->sizes[29] = 0;
    cfg->sizes[30] = 0;
    cfg->sizes[31] = 0;
    cfg->sizes[32] = 0;
    cfg->sizes[33] = 0;
    cfg->sizes[34] = 0;
    cfg->sizes[35] = 0;
    cfg->sizes[36] = 0;
    cfg->sizes[37] = 0;
    cfg->sizes[38] = 0;
    cfg->sizes[39] = 0;
    cfg->sizes[40] = 0;
    cfg->sizes[41] = 0;
    cfg->sizes[42] = 0;
    cfg->sizes[43] = 0;
    cfg->sizes[44] = 0;
    cfg->sizes[45] = 0;
    cfg->sizes[46] = 0;
    cfg->sizes[47] = 0;
    cfg->sizes[48] = 0;
    cfg->sizes[49] = 0;
    cfg->sizes[50] = 0;
    cfg->sizes[51] = 0;
    cfg->sizes[52] = 0;
    cfg->sizes[53] = 0;
    cfg->sizes[54] = 0;
    cfg->sizes[55] = 0;
    cfg->sizes[56] = 0;
    cfg->sizes[57] = 0;
    cfg->sizes[58] = 0;
    cfg->sizes[59] = 0;
    cfg->sizes[60] = 0;
    cfg->sizes[61] = 0;
    cfg->sizes[62] = 0;
    cfg->sizes[63] = 0;
    opencl_config_init(&cfg->opencl, 64, size_names, size_vars, cfg->sizes,
                       size_classes);
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    free(cfg->build_opts);
    free(cfg);
}
void futhark_context_config_add_build_option(struct futhark_context_config *cfg,
                                             const char *opt)
{
    cfg->build_opts[cfg->num_build_opts] = opt;
    cfg->num_build_opts++;
    cfg->build_opts = (const char **) realloc(cfg->build_opts,
                                              (cfg->num_build_opts + 1) *
                                              sizeof(const char *));
    cfg->build_opts[cfg->num_build_opts] = NULL;
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->opencl.profiling = cfg->opencl.logging = cfg->opencl.debugging = flag;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->opencl.profiling = flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag)
{
    cfg->opencl.logging = flag;
}
void futhark_context_config_set_device(struct futhark_context_config *cfg, const
                                       char *s)
{
    set_preferred_device(&cfg->opencl, s);
}
void futhark_context_config_set_platform(struct futhark_context_config *cfg,
                                         const char *s)
{
    set_preferred_platform(&cfg->opencl, s);
}
void futhark_context_config_select_device_interactively(struct futhark_context_config *cfg)
{
    select_device_interactively(&cfg->opencl);
}
void futhark_context_config_dump_program_to(struct futhark_context_config *cfg,
                                            const char *path)
{
    cfg->opencl.dump_program_to = path;
}
void futhark_context_config_load_program_from(struct futhark_context_config *cfg,
                                              const char *path)
{
    cfg->opencl.load_program_from = path;
}
void futhark_context_config_dump_binary_to(struct futhark_context_config *cfg,
                                           const char *path)
{
    cfg->opencl.dump_binary_to = path;
}
void futhark_context_config_load_binary_from(struct futhark_context_config *cfg,
                                             const char *path)
{
    cfg->opencl.load_binary_from = path;
}
void futhark_context_config_set_default_group_size(struct futhark_context_config *cfg,
                                                   int size)
{
    cfg->opencl.default_group_size = size;
    cfg->opencl.default_group_size_changed = 1;
}
void futhark_context_config_set_default_num_groups(struct futhark_context_config *cfg,
                                                   int num)
{
    cfg->opencl.default_num_groups = num;
}
void futhark_context_config_set_default_tile_size(struct futhark_context_config *cfg,
                                                  int size)
{
    cfg->opencl.default_tile_size = size;
    cfg->opencl.default_tile_size_changed = 1;
}
void futhark_context_config_set_default_threshold(struct futhark_context_config *cfg,
                                                  int size)
{
    cfg->opencl.default_threshold = size;
}
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value)
{
    for (int i = 0; i < 64; i++) {
        if (strcmp(size_name, size_names[i]) == 0) {
            cfg->sizes[i] = size_value;
            return 0;
        }
    }
    if (strcmp(size_name, "default_group_size") == 0) {
        cfg->opencl.default_group_size = size_value;
        return 0;
    }
    if (strcmp(size_name, "default_num_groups") == 0) {
        cfg->opencl.default_num_groups = size_value;
        return 0;
    }
    if (strcmp(size_name, "default_threshold") == 0) {
        cfg->opencl.default_threshold = size_value;
        return 0;
    }
    if (strcmp(size_name, "default_tile_size") == 0) {
        cfg->opencl.default_tile_size = size_value;
        return 0;
    }
    return 1;
}
struct futhark_context {
    int detail_memory;
    int debugging;
    int profiling;
    int profiling_paused;
    int logging;
    lock_t lock;
    char *error;
    int64_t peak_mem_usage_device;
    int64_t cur_mem_usage_device;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct memblock_device counter_mem_76988;
    struct memblock_device counter_mem_77139;
    struct memblock_device counter_mem_76737;
    struct memblock_device counter_mem_76888;
    struct memblock_device counter_mem_76511;
    struct memblock_device counter_mem_76662;
    struct memblock_device counter_mem_76238;
    struct memblock_device counter_mem_76389;
    int total_runs;
    long total_runtime;
    cl_kernel iota_76309;
    cl_kernel iota_76582;
    cl_kernel iota_76808;
    cl_kernel iota_77059;
    cl_kernel replicate_76424;
    cl_kernel replicate_76451;
    cl_kernel scan_stage1_72711;
    cl_kernel scan_stage1_73274;
    cl_kernel scan_stage1_73920;
    cl_kernel scan_stage1_74914;
    cl_kernel scan_stage2_72711;
    cl_kernel scan_stage2_73274;
    cl_kernel scan_stage2_73920;
    cl_kernel scan_stage2_74914;
    cl_kernel scan_stage3_76382;
    cl_kernel scan_stage3_76655;
    cl_kernel scan_stage3_76881;
    cl_kernel scan_stage3_77132;
    cl_kernel segmap_72615;
    cl_kernel segmap_72689;
    cl_kernel segmap_72726;
    cl_kernel segmap_72738;
    cl_kernel segmap_72882;
    cl_kernel segmap_73054;
    cl_kernel segmap_73066;
    cl_kernel segmap_73199;
    cl_kernel segmap_73252;
    cl_kernel segmap_73289;
    cl_kernel segmap_73301;
    cl_kernel segmap_73360;
    cl_kernel segmap_73532;
    cl_kernel segmap_73544;
    cl_kernel segmap_73824;
    cl_kernel segmap_73898;
    cl_kernel segmap_73935;
    cl_kernel segmap_73947;
    cl_kernel segmap_74091;
    cl_kernel segmap_74263;
    cl_kernel segmap_74275;
    cl_kernel segmap_74344;
    cl_kernel segmap_74839;
    cl_kernel segmap_74892;
    cl_kernel segmap_74929;
    cl_kernel segmap_74941;
    cl_kernel segmap_75000;
    cl_kernel segmap_75172;
    cl_kernel segmap_75184;
    cl_kernel segmap_75247;
    cl_kernel segred_nonseg_72613;
    cl_kernel segred_nonseg_72724;
    cl_kernel segred_nonseg_73197;
    cl_kernel segred_nonseg_73287;
    cl_kernel segred_nonseg_73822;
    cl_kernel segred_nonseg_73933;
    cl_kernel segred_nonseg_74837;
    cl_kernel segred_nonseg_74927;
    int64_t copy_dev_to_dev_total_runtime;
    int copy_dev_to_dev_runs;
    int64_t copy_dev_to_host_total_runtime;
    int copy_dev_to_host_runs;
    int64_t copy_host_to_dev_total_runtime;
    int copy_host_to_dev_runs;
    int64_t copy_scalar_to_dev_total_runtime;
    int copy_scalar_to_dev_runs;
    int64_t copy_scalar_from_dev_total_runtime;
    int copy_scalar_from_dev_runs;
    int64_t iota_76309_total_runtime;
    int iota_76309_runs;
    int64_t iota_76582_total_runtime;
    int iota_76582_runs;
    int64_t iota_76808_total_runtime;
    int iota_76808_runs;
    int64_t iota_77059_total_runtime;
    int iota_77059_runs;
    int64_t replicate_76424_total_runtime;
    int replicate_76424_runs;
    int64_t replicate_76451_total_runtime;
    int replicate_76451_runs;
    int64_t scan_stage1_72711_total_runtime;
    int scan_stage1_72711_runs;
    int64_t scan_stage1_73274_total_runtime;
    int scan_stage1_73274_runs;
    int64_t scan_stage1_73920_total_runtime;
    int scan_stage1_73920_runs;
    int64_t scan_stage1_74914_total_runtime;
    int scan_stage1_74914_runs;
    int64_t scan_stage2_72711_total_runtime;
    int scan_stage2_72711_runs;
    int64_t scan_stage2_73274_total_runtime;
    int scan_stage2_73274_runs;
    int64_t scan_stage2_73920_total_runtime;
    int scan_stage2_73920_runs;
    int64_t scan_stage2_74914_total_runtime;
    int scan_stage2_74914_runs;
    int64_t scan_stage3_76382_total_runtime;
    int scan_stage3_76382_runs;
    int64_t scan_stage3_76655_total_runtime;
    int scan_stage3_76655_runs;
    int64_t scan_stage3_76881_total_runtime;
    int scan_stage3_76881_runs;
    int64_t scan_stage3_77132_total_runtime;
    int scan_stage3_77132_runs;
    int64_t segmap_72615_total_runtime;
    int segmap_72615_runs;
    int64_t segmap_72689_total_runtime;
    int segmap_72689_runs;
    int64_t segmap_72726_total_runtime;
    int segmap_72726_runs;
    int64_t segmap_72738_total_runtime;
    int segmap_72738_runs;
    int64_t segmap_72882_total_runtime;
    int segmap_72882_runs;
    int64_t segmap_73054_total_runtime;
    int segmap_73054_runs;
    int64_t segmap_73066_total_runtime;
    int segmap_73066_runs;
    int64_t segmap_73199_total_runtime;
    int segmap_73199_runs;
    int64_t segmap_73252_total_runtime;
    int segmap_73252_runs;
    int64_t segmap_73289_total_runtime;
    int segmap_73289_runs;
    int64_t segmap_73301_total_runtime;
    int segmap_73301_runs;
    int64_t segmap_73360_total_runtime;
    int segmap_73360_runs;
    int64_t segmap_73532_total_runtime;
    int segmap_73532_runs;
    int64_t segmap_73544_total_runtime;
    int segmap_73544_runs;
    int64_t segmap_73824_total_runtime;
    int segmap_73824_runs;
    int64_t segmap_73898_total_runtime;
    int segmap_73898_runs;
    int64_t segmap_73935_total_runtime;
    int segmap_73935_runs;
    int64_t segmap_73947_total_runtime;
    int segmap_73947_runs;
    int64_t segmap_74091_total_runtime;
    int segmap_74091_runs;
    int64_t segmap_74263_total_runtime;
    int segmap_74263_runs;
    int64_t segmap_74275_total_runtime;
    int segmap_74275_runs;
    int64_t segmap_74344_total_runtime;
    int segmap_74344_runs;
    int64_t segmap_74839_total_runtime;
    int segmap_74839_runs;
    int64_t segmap_74892_total_runtime;
    int segmap_74892_runs;
    int64_t segmap_74929_total_runtime;
    int segmap_74929_runs;
    int64_t segmap_74941_total_runtime;
    int segmap_74941_runs;
    int64_t segmap_75000_total_runtime;
    int segmap_75000_runs;
    int64_t segmap_75172_total_runtime;
    int segmap_75172_runs;
    int64_t segmap_75184_total_runtime;
    int segmap_75184_runs;
    int64_t segmap_75247_total_runtime;
    int segmap_75247_runs;
    int64_t segred_nonseg_72613_total_runtime;
    int segred_nonseg_72613_runs;
    int64_t segred_nonseg_72724_total_runtime;
    int segred_nonseg_72724_runs;
    int64_t segred_nonseg_73197_total_runtime;
    int segred_nonseg_73197_runs;
    int64_t segred_nonseg_73287_total_runtime;
    int segred_nonseg_73287_runs;
    int64_t segred_nonseg_73822_total_runtime;
    int segred_nonseg_73822_runs;
    int64_t segred_nonseg_73933_total_runtime;
    int segred_nonseg_73933_runs;
    int64_t segred_nonseg_74837_total_runtime;
    int segred_nonseg_74837_runs;
    int64_t segred_nonseg_74927_total_runtime;
    int segred_nonseg_74927_runs;
    cl_mem global_failure;
    cl_mem global_failure_args;
    struct opencl_context opencl;
    struct sizes sizes;
    cl_int failure_is_an_option;
} ;
void post_opencl_setup(struct opencl_context *ctx,
                       struct opencl_device_option *option)
{
    if ((ctx->lockstep_width == 0 && strstr(option->platform_name,
                                            "NVIDIA CUDA") != NULL) &&
        (option->device_type & CL_DEVICE_TYPE_GPU) == CL_DEVICE_TYPE_GPU)
        ctx->lockstep_width = 32;
    if ((ctx->lockstep_width == 0 && strstr(option->platform_name,
                                            "AMD Accelerated Parallel Processing") !=
         NULL) && (option->device_type & CL_DEVICE_TYPE_GPU) ==
        CL_DEVICE_TYPE_GPU)
        ctx->lockstep_width = 32;
    if ((ctx->lockstep_width == 0 && strstr(option->platform_name, "") !=
         NULL) && (option->device_type & CL_DEVICE_TYPE_GPU) ==
        CL_DEVICE_TYPE_GPU)
        ctx->lockstep_width = 1;
    if ((ctx->cfg.default_num_groups == 0 && strstr(option->platform_name,
                                                    "") != NULL) &&
        (option->device_type & CL_DEVICE_TYPE_GPU) == CL_DEVICE_TYPE_GPU)
        ctx->cfg.default_num_groups = 256;
    if ((ctx->cfg.default_group_size == 0 && strstr(option->platform_name,
                                                    "") != NULL) &&
        (option->device_type & CL_DEVICE_TYPE_GPU) == CL_DEVICE_TYPE_GPU)
        ctx->cfg.default_group_size = 256;
    if ((ctx->cfg.default_tile_size == 0 && strstr(option->platform_name, "") !=
         NULL) && (option->device_type & CL_DEVICE_TYPE_GPU) ==
        CL_DEVICE_TYPE_GPU)
        ctx->cfg.default_tile_size = 32;
    if ((ctx->cfg.default_threshold == 0 && strstr(option->platform_name, "") !=
         NULL) && (option->device_type & CL_DEVICE_TYPE_GPU) ==
        CL_DEVICE_TYPE_GPU)
        ctx->cfg.default_threshold = 32768;
    if ((ctx->lockstep_width == 0 && strstr(option->platform_name, "") !=
         NULL) && (option->device_type & CL_DEVICE_TYPE_CPU) ==
        CL_DEVICE_TYPE_CPU)
        ctx->lockstep_width = 1;
    if ((ctx->cfg.default_num_groups == 0 && strstr(option->platform_name,
                                                    "") != NULL) &&
        (option->device_type & CL_DEVICE_TYPE_CPU) == CL_DEVICE_TYPE_CPU)
        clGetDeviceInfo(ctx->device, CL_DEVICE_MAX_COMPUTE_UNITS,
                        sizeof(ctx->cfg.default_num_groups),
                        &ctx->cfg.default_num_groups, NULL);
    if ((ctx->cfg.default_group_size == 0 && strstr(option->platform_name,
                                                    "") != NULL) &&
        (option->device_type & CL_DEVICE_TYPE_CPU) == CL_DEVICE_TYPE_CPU)
        ctx->cfg.default_group_size = 32;
    if ((ctx->cfg.default_tile_size == 0 && strstr(option->platform_name, "") !=
         NULL) && (option->device_type & CL_DEVICE_TYPE_CPU) ==
        CL_DEVICE_TYPE_CPU)
        ctx->cfg.default_tile_size = 4;
    if ((ctx->cfg.default_threshold == 0 && strstr(option->platform_name, "") !=
         NULL) && (option->device_type & CL_DEVICE_TYPE_CPU) ==
        CL_DEVICE_TYPE_CPU)
        clGetDeviceInfo(ctx->device, CL_DEVICE_MAX_COMPUTE_UNITS,
                        sizeof(ctx->cfg.default_threshold),
                        &ctx->cfg.default_threshold, NULL);
}
static void init_context_early(struct futhark_context_config *cfg,
                               struct futhark_context *ctx)
{
    ctx->opencl.cfg = cfg->opencl;
    ctx->detail_memory = cfg->opencl.debugging;
    ctx->debugging = cfg->opencl.debugging;
    ctx->profiling = cfg->opencl.profiling;
    ctx->profiling_paused = 0;
    ctx->logging = cfg->opencl.logging;
    ctx->error = NULL;
    ctx->opencl.profiling_records_capacity = 200;
    ctx->opencl.profiling_records_used = 0;
    ctx->opencl.profiling_records =
        malloc(ctx->opencl.profiling_records_capacity *
        sizeof(struct profiling_record));
    create_lock(&ctx->lock);
    ctx->failure_is_an_option = 0;
    ctx->peak_mem_usage_device = 0;
    ctx->cur_mem_usage_device = 0;
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    ctx->total_runs = 0;
    ctx->total_runtime = 0;
    ctx->copy_dev_to_dev_total_runtime = 0;
    ctx->copy_dev_to_dev_runs = 0;
    ctx->copy_dev_to_host_total_runtime = 0;
    ctx->copy_dev_to_host_runs = 0;
    ctx->copy_host_to_dev_total_runtime = 0;
    ctx->copy_host_to_dev_runs = 0;
    ctx->copy_scalar_to_dev_total_runtime = 0;
    ctx->copy_scalar_to_dev_runs = 0;
    ctx->copy_scalar_from_dev_total_runtime = 0;
    ctx->copy_scalar_from_dev_runs = 0;
    ctx->iota_76309_total_runtime = 0;
    ctx->iota_76309_runs = 0;
    ctx->iota_76582_total_runtime = 0;
    ctx->iota_76582_runs = 0;
    ctx->iota_76808_total_runtime = 0;
    ctx->iota_76808_runs = 0;
    ctx->iota_77059_total_runtime = 0;
    ctx->iota_77059_runs = 0;
    ctx->replicate_76424_total_runtime = 0;
    ctx->replicate_76424_runs = 0;
    ctx->replicate_76451_total_runtime = 0;
    ctx->replicate_76451_runs = 0;
    ctx->scan_stage1_72711_total_runtime = 0;
    ctx->scan_stage1_72711_runs = 0;
    ctx->scan_stage1_73274_total_runtime = 0;
    ctx->scan_stage1_73274_runs = 0;
    ctx->scan_stage1_73920_total_runtime = 0;
    ctx->scan_stage1_73920_runs = 0;
    ctx->scan_stage1_74914_total_runtime = 0;
    ctx->scan_stage1_74914_runs = 0;
    ctx->scan_stage2_72711_total_runtime = 0;
    ctx->scan_stage2_72711_runs = 0;
    ctx->scan_stage2_73274_total_runtime = 0;
    ctx->scan_stage2_73274_runs = 0;
    ctx->scan_stage2_73920_total_runtime = 0;
    ctx->scan_stage2_73920_runs = 0;
    ctx->scan_stage2_74914_total_runtime = 0;
    ctx->scan_stage2_74914_runs = 0;
    ctx->scan_stage3_76382_total_runtime = 0;
    ctx->scan_stage3_76382_runs = 0;
    ctx->scan_stage3_76655_total_runtime = 0;
    ctx->scan_stage3_76655_runs = 0;
    ctx->scan_stage3_76881_total_runtime = 0;
    ctx->scan_stage3_76881_runs = 0;
    ctx->scan_stage3_77132_total_runtime = 0;
    ctx->scan_stage3_77132_runs = 0;
    ctx->segmap_72615_total_runtime = 0;
    ctx->segmap_72615_runs = 0;
    ctx->segmap_72689_total_runtime = 0;
    ctx->segmap_72689_runs = 0;
    ctx->segmap_72726_total_runtime = 0;
    ctx->segmap_72726_runs = 0;
    ctx->segmap_72738_total_runtime = 0;
    ctx->segmap_72738_runs = 0;
    ctx->segmap_72882_total_runtime = 0;
    ctx->segmap_72882_runs = 0;
    ctx->segmap_73054_total_runtime = 0;
    ctx->segmap_73054_runs = 0;
    ctx->segmap_73066_total_runtime = 0;
    ctx->segmap_73066_runs = 0;
    ctx->segmap_73199_total_runtime = 0;
    ctx->segmap_73199_runs = 0;
    ctx->segmap_73252_total_runtime = 0;
    ctx->segmap_73252_runs = 0;
    ctx->segmap_73289_total_runtime = 0;
    ctx->segmap_73289_runs = 0;
    ctx->segmap_73301_total_runtime = 0;
    ctx->segmap_73301_runs = 0;
    ctx->segmap_73360_total_runtime = 0;
    ctx->segmap_73360_runs = 0;
    ctx->segmap_73532_total_runtime = 0;
    ctx->segmap_73532_runs = 0;
    ctx->segmap_73544_total_runtime = 0;
    ctx->segmap_73544_runs = 0;
    ctx->segmap_73824_total_runtime = 0;
    ctx->segmap_73824_runs = 0;
    ctx->segmap_73898_total_runtime = 0;
    ctx->segmap_73898_runs = 0;
    ctx->segmap_73935_total_runtime = 0;
    ctx->segmap_73935_runs = 0;
    ctx->segmap_73947_total_runtime = 0;
    ctx->segmap_73947_runs = 0;
    ctx->segmap_74091_total_runtime = 0;
    ctx->segmap_74091_runs = 0;
    ctx->segmap_74263_total_runtime = 0;
    ctx->segmap_74263_runs = 0;
    ctx->segmap_74275_total_runtime = 0;
    ctx->segmap_74275_runs = 0;
    ctx->segmap_74344_total_runtime = 0;
    ctx->segmap_74344_runs = 0;
    ctx->segmap_74839_total_runtime = 0;
    ctx->segmap_74839_runs = 0;
    ctx->segmap_74892_total_runtime = 0;
    ctx->segmap_74892_runs = 0;
    ctx->segmap_74929_total_runtime = 0;
    ctx->segmap_74929_runs = 0;
    ctx->segmap_74941_total_runtime = 0;
    ctx->segmap_74941_runs = 0;
    ctx->segmap_75000_total_runtime = 0;
    ctx->segmap_75000_runs = 0;
    ctx->segmap_75172_total_runtime = 0;
    ctx->segmap_75172_runs = 0;
    ctx->segmap_75184_total_runtime = 0;
    ctx->segmap_75184_runs = 0;
    ctx->segmap_75247_total_runtime = 0;
    ctx->segmap_75247_runs = 0;
    ctx->segred_nonseg_72613_total_runtime = 0;
    ctx->segred_nonseg_72613_runs = 0;
    ctx->segred_nonseg_72724_total_runtime = 0;
    ctx->segred_nonseg_72724_runs = 0;
    ctx->segred_nonseg_73197_total_runtime = 0;
    ctx->segred_nonseg_73197_runs = 0;
    ctx->segred_nonseg_73287_total_runtime = 0;
    ctx->segred_nonseg_73287_runs = 0;
    ctx->segred_nonseg_73822_total_runtime = 0;
    ctx->segred_nonseg_73822_runs = 0;
    ctx->segred_nonseg_73933_total_runtime = 0;
    ctx->segred_nonseg_73933_runs = 0;
    ctx->segred_nonseg_74837_total_runtime = 0;
    ctx->segred_nonseg_74837_runs = 0;
    ctx->segred_nonseg_74927_total_runtime = 0;
    ctx->segred_nonseg_74927_runs = 0;
}
static int init_context_late(struct futhark_context_config *cfg,
                             struct futhark_context *ctx, cl_program prog)
{
    cl_int error;
    cl_int no_error = -1;
    
    ctx->global_failure = clCreateBuffer(ctx->opencl.ctx, CL_MEM_READ_WRITE |
                                         CL_MEM_COPY_HOST_PTR, sizeof(cl_int),
                                         &no_error, &error);
    OPENCL_SUCCEED_OR_RETURN(error);
    // The +1 is to avoid zero-byte allocations.
    ctx->global_failure_args = clCreateBuffer(ctx->opencl.ctx,
                                              CL_MEM_READ_WRITE,
                                              sizeof(cl_int) * (0 + 1), NULL,
                                              &error);
    OPENCL_SUCCEED_OR_RETURN(error);
    {
        ctx->iota_76309 = clCreateKernel(prog, "iota_76309", &error);
        OPENCL_SUCCEED_FATAL(error);
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "iota_76309");
    }
    {
        ctx->iota_76582 = clCreateKernel(prog, "iota_76582", &error);
        OPENCL_SUCCEED_FATAL(error);
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "iota_76582");
    }
    {
        ctx->iota_76808 = clCreateKernel(prog, "iota_76808", &error);
        OPENCL_SUCCEED_FATAL(error);
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "iota_76808");
    }
    {
        ctx->iota_77059 = clCreateKernel(prog, "iota_77059", &error);
        OPENCL_SUCCEED_FATAL(error);
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "iota_77059");
    }
    {
        ctx->replicate_76424 = clCreateKernel(prog, "replicate_76424", &error);
        OPENCL_SUCCEED_FATAL(error);
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "replicate_76424");
    }
    {
        ctx->replicate_76451 = clCreateKernel(prog, "replicate_76451", &error);
        OPENCL_SUCCEED_FATAL(error);
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "replicate_76451");
    }
    {
        ctx->scan_stage1_72711 = clCreateKernel(prog, "scan_stage1_72711",
                                                &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->scan_stage1_72711, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "scan_stage1_72711");
    }
    {
        ctx->scan_stage1_73274 = clCreateKernel(prog, "scan_stage1_73274",
                                                &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->scan_stage1_73274, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "scan_stage1_73274");
    }
    {
        ctx->scan_stage1_73920 = clCreateKernel(prog, "scan_stage1_73920",
                                                &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->scan_stage1_73920, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "scan_stage1_73920");
    }
    {
        ctx->scan_stage1_74914 = clCreateKernel(prog, "scan_stage1_74914",
                                                &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->scan_stage1_74914, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "scan_stage1_74914");
    }
    {
        ctx->scan_stage2_72711 = clCreateKernel(prog, "scan_stage2_72711",
                                                &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->scan_stage2_72711, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "scan_stage2_72711");
    }
    {
        ctx->scan_stage2_73274 = clCreateKernel(prog, "scan_stage2_73274",
                                                &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->scan_stage2_73274, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "scan_stage2_73274");
    }
    {
        ctx->scan_stage2_73920 = clCreateKernel(prog, "scan_stage2_73920",
                                                &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->scan_stage2_73920, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "scan_stage2_73920");
    }
    {
        ctx->scan_stage2_74914 = clCreateKernel(prog, "scan_stage2_74914",
                                                &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->scan_stage2_74914, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "scan_stage2_74914");
    }
    {
        ctx->scan_stage3_76382 = clCreateKernel(prog, "scan_stage3_76382",
                                                &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->scan_stage3_76382, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "scan_stage3_76382");
    }
    {
        ctx->scan_stage3_76655 = clCreateKernel(prog, "scan_stage3_76655",
                                                &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->scan_stage3_76655, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "scan_stage3_76655");
    }
    {
        ctx->scan_stage3_76881 = clCreateKernel(prog, "scan_stage3_76881",
                                                &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->scan_stage3_76881, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "scan_stage3_76881");
    }
    {
        ctx->scan_stage3_77132 = clCreateKernel(prog, "scan_stage3_77132",
                                                &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->scan_stage3_77132, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "scan_stage3_77132");
    }
    {
        ctx->segmap_72615 = clCreateKernel(prog, "segmap_72615", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_72615, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_72615");
    }
    {
        ctx->segmap_72689 = clCreateKernel(prog, "segmap_72689", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_72689, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_72689");
    }
    {
        ctx->segmap_72726 = clCreateKernel(prog, "segmap_72726", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_72726, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_72726");
    }
    {
        ctx->segmap_72738 = clCreateKernel(prog, "segmap_72738", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_72738, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_72738");
    }
    {
        ctx->segmap_72882 = clCreateKernel(prog, "segmap_72882", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_72882, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_72882, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_72882");
    }
    {
        ctx->segmap_73054 = clCreateKernel(prog, "segmap_73054", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_73054, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_73054");
    }
    {
        ctx->segmap_73066 = clCreateKernel(prog, "segmap_73066", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_73066, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_73066");
    }
    {
        ctx->segmap_73199 = clCreateKernel(prog, "segmap_73199", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_73199, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_73199");
    }
    {
        ctx->segmap_73252 = clCreateKernel(prog, "segmap_73252", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_73252, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_73252");
    }
    {
        ctx->segmap_73289 = clCreateKernel(prog, "segmap_73289", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_73289, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_73289");
    }
    {
        ctx->segmap_73301 = clCreateKernel(prog, "segmap_73301", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_73301, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_73301");
    }
    {
        ctx->segmap_73360 = clCreateKernel(prog, "segmap_73360", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_73360, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_73360, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_73360");
    }
    {
        ctx->segmap_73532 = clCreateKernel(prog, "segmap_73532", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_73532, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_73532");
    }
    {
        ctx->segmap_73544 = clCreateKernel(prog, "segmap_73544", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_73544, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_73544");
    }
    {
        ctx->segmap_73824 = clCreateKernel(prog, "segmap_73824", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_73824, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_73824");
    }
    {
        ctx->segmap_73898 = clCreateKernel(prog, "segmap_73898", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_73898, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_73898");
    }
    {
        ctx->segmap_73935 = clCreateKernel(prog, "segmap_73935", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_73935, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_73935");
    }
    {
        ctx->segmap_73947 = clCreateKernel(prog, "segmap_73947", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_73947, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_73947");
    }
    {
        ctx->segmap_74091 = clCreateKernel(prog, "segmap_74091", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_74091, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_74091, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_74091");
    }
    {
        ctx->segmap_74263 = clCreateKernel(prog, "segmap_74263", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_74263, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_74263");
    }
    {
        ctx->segmap_74275 = clCreateKernel(prog, "segmap_74275", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_74275, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_74275");
    }
    {
        ctx->segmap_74344 = clCreateKernel(prog, "segmap_74344", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_74344, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_74344");
    }
    {
        ctx->segmap_74839 = clCreateKernel(prog, "segmap_74839", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_74839, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_74839");
    }
    {
        ctx->segmap_74892 = clCreateKernel(prog, "segmap_74892", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_74892, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_74892");
    }
    {
        ctx->segmap_74929 = clCreateKernel(prog, "segmap_74929", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_74929, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_74929");
    }
    {
        ctx->segmap_74941 = clCreateKernel(prog, "segmap_74941", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_74941, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_74941");
    }
    {
        ctx->segmap_75000 = clCreateKernel(prog, "segmap_75000", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_75000, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_75000, 2,
                                            sizeof(cl_mem),
                                            &ctx->global_failure_args));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_75000");
    }
    {
        ctx->segmap_75172 = clCreateKernel(prog, "segmap_75172", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_75172, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_75172");
    }
    {
        ctx->segmap_75184 = clCreateKernel(prog, "segmap_75184", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_75184, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_75184");
    }
    {
        ctx->segmap_75247 = clCreateKernel(prog, "segmap_75247", &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segmap_75247, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segmap_75247");
    }
    {
        ctx->segred_nonseg_72613 = clCreateKernel(prog, "segred_nonseg_72613",
                                                  &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segred_nonseg_72613, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segred_nonseg_72613");
    }
    {
        ctx->segred_nonseg_72724 = clCreateKernel(prog, "segred_nonseg_72724",
                                                  &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segred_nonseg_72724, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segred_nonseg_72724");
    }
    {
        ctx->segred_nonseg_73197 = clCreateKernel(prog, "segred_nonseg_73197",
                                                  &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segred_nonseg_73197, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segred_nonseg_73197");
    }
    {
        ctx->segred_nonseg_73287 = clCreateKernel(prog, "segred_nonseg_73287",
                                                  &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segred_nonseg_73287, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segred_nonseg_73287");
    }
    {
        ctx->segred_nonseg_73822 = clCreateKernel(prog, "segred_nonseg_73822",
                                                  &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segred_nonseg_73822, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segred_nonseg_73822");
    }
    {
        ctx->segred_nonseg_73933 = clCreateKernel(prog, "segred_nonseg_73933",
                                                  &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segred_nonseg_73933, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segred_nonseg_73933");
    }
    {
        ctx->segred_nonseg_74837 = clCreateKernel(prog, "segred_nonseg_74837",
                                                  &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segred_nonseg_74837, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segred_nonseg_74837");
    }
    {
        ctx->segred_nonseg_74927 = clCreateKernel(prog, "segred_nonseg_74927",
                                                  &error);
        OPENCL_SUCCEED_FATAL(error);
        OPENCL_SUCCEED_FATAL(clSetKernelArg(ctx->segred_nonseg_74927, 0,
                                            sizeof(cl_mem),
                                            &ctx->global_failure));
        if (ctx->debugging)
            fprintf(stderr, "Created kernel %s.\n", "segred_nonseg_74927");
    }
    {
        cl_int success;
        
        ctx->counter_mem_76988.references = NULL;
        ctx->counter_mem_76988.size = 0;
        ctx->counter_mem_76988.mem = clCreateBuffer(ctx->opencl.ctx,
                                                    CL_MEM_READ_WRITE, (10 >
                                                                        0 ? 10 : 1) *
                                                    sizeof(int32_t), NULL,
                                                    &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->counter_mem_76988.mem,
                                                          CL_TRUE, 0, 10 *
                                                          sizeof(int32_t),
                                                          counter_mem_realtype_77238,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->counter_mem_77139.references = NULL;
        ctx->counter_mem_77139.size = 0;
        ctx->counter_mem_77139.mem = clCreateBuffer(ctx->opencl.ctx,
                                                    CL_MEM_READ_WRITE, (10 >
                                                                        0 ? 10 : 1) *
                                                    sizeof(int32_t), NULL,
                                                    &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->counter_mem_77139.mem,
                                                          CL_TRUE, 0, 10 *
                                                          sizeof(int32_t),
                                                          counter_mem_realtype_77280,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->counter_mem_76737.references = NULL;
        ctx->counter_mem_76737.size = 0;
        ctx->counter_mem_76737.mem = clCreateBuffer(ctx->opencl.ctx,
                                                    CL_MEM_READ_WRITE, (10 >
                                                                        0 ? 10 : 1) *
                                                    sizeof(int32_t), NULL,
                                                    &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->counter_mem_76737.mem,
                                                          CL_TRUE, 0, 10 *
                                                          sizeof(int32_t),
                                                          counter_mem_realtype_77322,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->counter_mem_76888.references = NULL;
        ctx->counter_mem_76888.size = 0;
        ctx->counter_mem_76888.mem = clCreateBuffer(ctx->opencl.ctx,
                                                    CL_MEM_READ_WRITE, (10 >
                                                                        0 ? 10 : 1) *
                                                    sizeof(int32_t), NULL,
                                                    &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->counter_mem_76888.mem,
                                                          CL_TRUE, 0, 10 *
                                                          sizeof(int32_t),
                                                          counter_mem_realtype_77364,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->counter_mem_76511.references = NULL;
        ctx->counter_mem_76511.size = 0;
        ctx->counter_mem_76511.mem = clCreateBuffer(ctx->opencl.ctx,
                                                    CL_MEM_READ_WRITE, (10 >
                                                                        0 ? 10 : 1) *
                                                    sizeof(int32_t), NULL,
                                                    &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->counter_mem_76511.mem,
                                                          CL_TRUE, 0, 10 *
                                                          sizeof(int32_t),
                                                          counter_mem_realtype_77435,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->counter_mem_76662.references = NULL;
        ctx->counter_mem_76662.size = 0;
        ctx->counter_mem_76662.mem = clCreateBuffer(ctx->opencl.ctx,
                                                    CL_MEM_READ_WRITE, (10 >
                                                                        0 ? 10 : 1) *
                                                    sizeof(int32_t), NULL,
                                                    &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->counter_mem_76662.mem,
                                                          CL_TRUE, 0, 10 *
                                                          sizeof(int32_t),
                                                          counter_mem_realtype_77477,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->counter_mem_76238.references = NULL;
        ctx->counter_mem_76238.size = 0;
        ctx->counter_mem_76238.mem = clCreateBuffer(ctx->opencl.ctx,
                                                    CL_MEM_READ_WRITE, (10 >
                                                                        0 ? 10 : 1) *
                                                    sizeof(int32_t), NULL,
                                                    &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->counter_mem_76238.mem,
                                                          CL_TRUE, 0, 10 *
                                                          sizeof(int32_t),
                                                          counter_mem_realtype_77548,
                                                          0, NULL, NULL));
    }
    {
        cl_int success;
        
        ctx->counter_mem_76389.references = NULL;
        ctx->counter_mem_76389.size = 0;
        ctx->counter_mem_76389.mem = clCreateBuffer(ctx->opencl.ctx,
                                                    CL_MEM_READ_WRITE, (10 >
                                                                        0 ? 10 : 1) *
                                                    sizeof(int32_t), NULL,
                                                    &success);
        OPENCL_SUCCEED_OR_RETURN(success);
        if (10 > 0)
            OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                          ctx->counter_mem_76389.mem,
                                                          CL_TRUE, 0, 10 *
                                                          sizeof(int32_t),
                                                          counter_mem_realtype_77590,
                                                          0, NULL, NULL));
    }
    ctx->sizes.bvh_irregzigroup_sizze_76585 = cfg->sizes[0];
    ctx->sizes.bvh_irregzigroup_sizze_76658 = cfg->sizes[1];
    ctx->sizes.bvh_irregzisegmap_group_sizze_73202 = cfg->sizes[2];
    ctx->sizes.bvh_irregzisegmap_group_sizze_73255 = cfg->sizes[3];
    ctx->sizes.bvh_irregzisegmap_group_sizze_73292 = cfg->sizes[4];
    ctx->sizes.bvh_irregzisegmap_group_sizze_73304 = cfg->sizes[5];
    ctx->sizes.bvh_irregzisegmap_group_sizze_73363 = cfg->sizes[6];
    ctx->sizes.bvh_irregzisegmap_group_sizze_73535 = cfg->sizes[7];
    ctx->sizes.bvh_irregzisegmap_group_sizze_73547 = cfg->sizes[8];
    ctx->sizes.bvh_irregzisegred_group_sizze_73184 = cfg->sizes[9];
    ctx->sizes.bvh_irregzisegred_group_sizze_73277 = cfg->sizes[10];
    ctx->sizes.bvh_irregzisegred_num_groups_73186 = cfg->sizes[11];
    ctx->sizes.bvh_irregzisegred_num_groups_73279 = cfg->sizes[12];
    ctx->sizes.bvh_irregzisegscan_group_sizze_73268 = cfg->sizes[13];
    ctx->sizes.bvh_irregzisegscan_num_groups_73270 = cfg->sizes[14];
    ctx->sizes.bvh_rgbboxzigroup_sizze_76312 = cfg->sizes[15];
    ctx->sizes.bvh_rgbboxzigroup_sizze_76385 = cfg->sizes[16];
    ctx->sizes.bvh_rgbboxzigroup_sizze_76427 = cfg->sizes[17];
    ctx->sizes.bvh_rgbboxzigroup_sizze_76454 = cfg->sizes[18];
    ctx->sizes.bvh_rgbboxzisegmap_group_sizze_72618 = cfg->sizes[19];
    ctx->sizes.bvh_rgbboxzisegmap_group_sizze_72692 = cfg->sizes[20];
    ctx->sizes.bvh_rgbboxzisegmap_group_sizze_72729 = cfg->sizes[21];
    ctx->sizes.bvh_rgbboxzisegmap_group_sizze_72741 = cfg->sizes[22];
    ctx->sizes.bvh_rgbboxzisegmap_group_sizze_72885 = cfg->sizes[23];
    ctx->sizes.bvh_rgbboxzisegmap_group_sizze_73057 = cfg->sizes[24];
    ctx->sizes.bvh_rgbboxzisegmap_group_sizze_73069 = cfg->sizes[25];
    ctx->sizes.bvh_rgbboxzisegred_group_sizze_72600 = cfg->sizes[26];
    ctx->sizes.bvh_rgbboxzisegred_group_sizze_72714 = cfg->sizes[27];
    ctx->sizes.bvh_rgbboxzisegred_num_groups_72602 = cfg->sizes[28];
    ctx->sizes.bvh_rgbboxzisegred_num_groups_72716 = cfg->sizes[29];
    ctx->sizes.bvh_rgbboxzisegscan_group_sizze_72705 = cfg->sizes[30];
    ctx->sizes.bvh_rgbboxzisegscan_num_groups_72707 = cfg->sizes[31];
    ctx->sizes.render_irregzigroup_sizze_77062 = cfg->sizes[32];
    ctx->sizes.render_irregzigroup_sizze_77135 = cfg->sizes[33];
    ctx->sizes.render_irregzisegmap_group_sizze_74842 = cfg->sizes[34];
    ctx->sizes.render_irregzisegmap_group_sizze_74895 = cfg->sizes[35];
    ctx->sizes.render_irregzisegmap_group_sizze_74932 = cfg->sizes[36];
    ctx->sizes.render_irregzisegmap_group_sizze_74944 = cfg->sizes[37];
    ctx->sizes.render_irregzisegmap_group_sizze_75003 = cfg->sizes[38];
    ctx->sizes.render_irregzisegmap_group_sizze_75175 = cfg->sizes[39];
    ctx->sizes.render_irregzisegmap_group_sizze_75187 = cfg->sizes[40];
    ctx->sizes.render_irregzisegmap_group_sizze_75252 = cfg->sizes[41];
    ctx->sizes.render_irregzisegred_group_sizze_74824 = cfg->sizes[42];
    ctx->sizes.render_irregzisegred_group_sizze_74917 = cfg->sizes[43];
    ctx->sizes.render_irregzisegred_num_groups_74826 = cfg->sizes[44];
    ctx->sizes.render_irregzisegred_num_groups_74919 = cfg->sizes[45];
    ctx->sizes.render_irregzisegscan_group_sizze_74908 = cfg->sizes[46];
    ctx->sizes.render_irregzisegscan_num_groups_74910 = cfg->sizes[47];
    ctx->sizes.render_rgbboxzigroup_sizze_76811 = cfg->sizes[48];
    ctx->sizes.render_rgbboxzigroup_sizze_76884 = cfg->sizes[49];
    ctx->sizes.render_rgbboxzisegmap_group_sizze_73827 = cfg->sizes[50];
    ctx->sizes.render_rgbboxzisegmap_group_sizze_73901 = cfg->sizes[51];
    ctx->sizes.render_rgbboxzisegmap_group_sizze_73938 = cfg->sizes[52];
    ctx->sizes.render_rgbboxzisegmap_group_sizze_73950 = cfg->sizes[53];
    ctx->sizes.render_rgbboxzisegmap_group_sizze_74094 = cfg->sizes[54];
    ctx->sizes.render_rgbboxzisegmap_group_sizze_74266 = cfg->sizes[55];
    ctx->sizes.render_rgbboxzisegmap_group_sizze_74278 = cfg->sizes[56];
    ctx->sizes.render_rgbboxzisegmap_group_sizze_74349 = cfg->sizes[57];
    ctx->sizes.render_rgbboxzisegred_group_sizze_73809 = cfg->sizes[58];
    ctx->sizes.render_rgbboxzisegred_group_sizze_73923 = cfg->sizes[59];
    ctx->sizes.render_rgbboxzisegred_num_groups_73811 = cfg->sizes[60];
    ctx->sizes.render_rgbboxzisegred_num_groups_73925 = cfg->sizes[61];
    ctx->sizes.render_rgbboxzisegscan_group_sizze_73914 = cfg->sizes[62];
    ctx->sizes.render_rgbboxzisegscan_num_groups_73916 = cfg->sizes[63];
    return 0;
}
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    
    int required_types = 0;
    
    init_context_early(cfg, ctx);
    
    cl_program prog = setup_opencl(&ctx->opencl, opencl_program, required_types,
                                   cfg->build_opts);
    
    if (init_context_late(cfg, ctx, prog) == 0)
        return ctx;
    else
        return NULL;
}
struct futhark_context *futhark_context_new_with_command_queue(struct futhark_context_config *cfg,
                                                               cl_command_queue queue)
{
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    
    int required_types = 0;
    
    init_context_early(cfg, ctx);
    
    cl_program prog = setup_opencl_with_command_queue(&ctx->opencl, queue,
                                                      opencl_program,
                                                      required_types,
                                                      cfg->build_opts);
    
    init_context_late(cfg, ctx, prog);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_lock(&ctx->lock);
    opencl_tally_profiling_records(&ctx->opencl);
    free(ctx->opencl.profiling_records);
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    cl_int failure_idx = -1;
    
    if (ctx->failure_is_an_option) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     ctx->global_failure,
                                                     CL_FALSE, 0,
                                                     sizeof(cl_int),
                                                     &failure_idx, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        ctx->failure_is_an_option = 0;
    }
    OPENCL_SUCCEED_OR_RETURN(clFinish(ctx->opencl.queue));
    if (failure_idx >= 0) {
        cl_int args[0 + 1];
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     ctx->global_failure_args,
                                                     CL_TRUE, 0, sizeof(args),
                                                     &args, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_dev_to_host_runs,
                                                                                               &ctx->copy_dev_to_host_total_runtime)));
        switch (failure_idx) {
            
          case 0:
            {
                ctx->error =
                    msgprintf("division by zero\n-> #0  radixtree.fut:4:39-53\n   #1  radixtree.fut:45:26-50\n   #2  /futlib/soacs.fut:48:3-10\n   #3  /futlib/array.fut:126:3-17\n   #4  radixtree.fut:64:40-58\n   #5  bvh.fut:46:32-60\n   #6  ray.fut:176:4-35\n   #7  ray.fut:255:21-40\n   #8  ray.fut:254:1-256:24\n");
                break;
            }
            
          case 1:
            {
                ctx->error =
                    msgprintf("division by zero\n-> #0  radixtree.fut:4:39-53\n   #1  radixtree.fut:45:26-50\n   #2  /futlib/soacs.fut:48:3-10\n   #3  /futlib/array.fut:126:3-17\n   #4  radixtree.fut:64:40-58\n   #5  bvh.fut:46:32-60\n   #6  ray.fut:176:4-35\n   #7  ray.fut:251:21-41\n   #8  ray.fut:250:1-252:24\n");
                break;
            }
            
          case 2:
            {
                ctx->error =
                    msgprintf("division by zero\n-> #0  radixtree.fut:4:39-53\n   #1  radixtree.fut:45:26-50\n   #2  /futlib/soacs.fut:48:3-10\n   #3  /futlib/array.fut:126:3-17\n   #4  radixtree.fut:64:40-58\n   #5  bvh.fut:46:32-60\n   #6  ray.fut:176:4-35\n   #7  ray.fut:248:23-42\n   #8  ray.fut:248:1-42\n");
                break;
            }
            
          case 3:
            {
                ctx->error =
                    msgprintf("division by zero\n-> #0  radixtree.fut:4:39-53\n   #1  radixtree.fut:45:26-50\n   #2  /futlib/soacs.fut:48:3-10\n   #3  /futlib/array.fut:126:3-17\n   #4  radixtree.fut:64:40-58\n   #5  bvh.fut:46:32-60\n   #6  ray.fut:176:4-35\n   #7  ray.fut:247:24-44\n   #8  ray.fut:247:1-44\n");
                break;
            }
        }
        return 1;
    }
    return 0;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    ctx->error = OPENCL_SUCCEED_NONFATAL(opencl_free_all(&ctx->opencl));
    return ctx->error != NULL;
}
cl_command_queue futhark_context_get_command_queue(struct futhark_context *ctx)
{
    return ctx->opencl.queue;
}
static int memblock_unref_device(struct futhark_context *ctx,
                                 struct memblock_device *block, const
                                 char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(stderr,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "space 'device'", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_device -= block->size;
            OPENCL_SUCCEED_OR_RETURN(opencl_free(&ctx->opencl, block->mem,
                                                 block->desc));
            free(block->references);
            if (ctx->detail_memory)
                fprintf(stderr,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_device);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc_device(struct futhark_context *ctx,
                                 struct memblock_device *block, int64_t size,
                                 const char *desc)
{
    if (size < 0)
        panic(1, "Negative allocation of %lld bytes attempted for %s in %s.\n",
              (long long) size, desc, "space 'device'",
              ctx->cur_mem_usage_device);
    
    int ret = memblock_unref_device(ctx, block, desc);
    
    ctx->cur_mem_usage_device += size;
    if (ctx->detail_memory)
        fprintf(stderr,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "space 'device'",
                (long long) ctx->cur_mem_usage_device);
    if (ctx->cur_mem_usage_device > ctx->peak_mem_usage_device) {
        ctx->peak_mem_usage_device = ctx->cur_mem_usage_device;
        if (ctx->detail_memory)
            fprintf(stderr, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(stderr, ".\n");
    OPENCL_SUCCEED_OR_RETURN(opencl_alloc(&ctx->opencl, size, desc,
                                          &block->mem));
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set_device(struct futhark_context *ctx,
                               struct memblock_device *lhs,
                               struct memblock_device *rhs, const
                               char *lhs_desc)
{
    int ret = memblock_unref_device(ctx, lhs, lhs_desc);
    
    (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(stderr,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(stderr,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        panic(1, "Negative allocation of %lld bytes attempted for %s in %s.\n",
              (long long) size, desc, "default space",
              ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(stderr,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(stderr, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(stderr, ".\n");
    block->mem = (char *) malloc(size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
void futhark_debugging_report(struct futhark_context *ctx)
{
    if (ctx->detail_memory || ctx->profiling) {
        fprintf(stderr, "Peak memory usage for space 'device': %lld bytes.\n",
                (long long) ctx->peak_mem_usage_device);
        fprintf(stderr, "Peak memory usage for default space: %lld bytes.\n",
                (long long) ctx->peak_mem_usage_default);
    }
    if (ctx->profiling) {
        OPENCL_SUCCEED_FATAL(opencl_tally_profiling_records(&ctx->opencl));
        fprintf(stderr,
                "copy_dev_to_dev      ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->copy_dev_to_dev_runs,
                (long) ctx->copy_dev_to_dev_total_runtime /
                (ctx->copy_dev_to_dev_runs !=
                 0 ? ctx->copy_dev_to_dev_runs : 1),
                (long) ctx->copy_dev_to_dev_total_runtime);
        ctx->total_runtime += ctx->copy_dev_to_dev_total_runtime;
        ctx->total_runs += ctx->copy_dev_to_dev_runs;
        fprintf(stderr,
                "copy_dev_to_host     ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->copy_dev_to_host_runs,
                (long) ctx->copy_dev_to_host_total_runtime /
                (ctx->copy_dev_to_host_runs !=
                 0 ? ctx->copy_dev_to_host_runs : 1),
                (long) ctx->copy_dev_to_host_total_runtime);
        ctx->total_runtime += ctx->copy_dev_to_host_total_runtime;
        ctx->total_runs += ctx->copy_dev_to_host_runs;
        fprintf(stderr,
                "copy_host_to_dev     ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->copy_host_to_dev_runs,
                (long) ctx->copy_host_to_dev_total_runtime /
                (ctx->copy_host_to_dev_runs !=
                 0 ? ctx->copy_host_to_dev_runs : 1),
                (long) ctx->copy_host_to_dev_total_runtime);
        ctx->total_runtime += ctx->copy_host_to_dev_total_runtime;
        ctx->total_runs += ctx->copy_host_to_dev_runs;
        fprintf(stderr,
                "copy_scalar_to_dev   ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->copy_scalar_to_dev_runs,
                (long) ctx->copy_scalar_to_dev_total_runtime /
                (ctx->copy_scalar_to_dev_runs !=
                 0 ? ctx->copy_scalar_to_dev_runs : 1),
                (long) ctx->copy_scalar_to_dev_total_runtime);
        ctx->total_runtime += ctx->copy_scalar_to_dev_total_runtime;
        ctx->total_runs += ctx->copy_scalar_to_dev_runs;
        fprintf(stderr,
                "copy_scalar_from_dev ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->copy_scalar_from_dev_runs,
                (long) ctx->copy_scalar_from_dev_total_runtime /
                (ctx->copy_scalar_from_dev_runs !=
                 0 ? ctx->copy_scalar_from_dev_runs : 1),
                (long) ctx->copy_scalar_from_dev_total_runtime);
        ctx->total_runtime += ctx->copy_scalar_from_dev_total_runtime;
        ctx->total_runs += ctx->copy_scalar_from_dev_runs;
        fprintf(stderr,
                "iota_76309           ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->iota_76309_runs, (long) ctx->iota_76309_total_runtime /
                (ctx->iota_76309_runs != 0 ? ctx->iota_76309_runs : 1),
                (long) ctx->iota_76309_total_runtime);
        ctx->total_runtime += ctx->iota_76309_total_runtime;
        ctx->total_runs += ctx->iota_76309_runs;
        fprintf(stderr,
                "iota_76582           ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->iota_76582_runs, (long) ctx->iota_76582_total_runtime /
                (ctx->iota_76582_runs != 0 ? ctx->iota_76582_runs : 1),
                (long) ctx->iota_76582_total_runtime);
        ctx->total_runtime += ctx->iota_76582_total_runtime;
        ctx->total_runs += ctx->iota_76582_runs;
        fprintf(stderr,
                "iota_76808           ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->iota_76808_runs, (long) ctx->iota_76808_total_runtime /
                (ctx->iota_76808_runs != 0 ? ctx->iota_76808_runs : 1),
                (long) ctx->iota_76808_total_runtime);
        ctx->total_runtime += ctx->iota_76808_total_runtime;
        ctx->total_runs += ctx->iota_76808_runs;
        fprintf(stderr,
                "iota_77059           ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->iota_77059_runs, (long) ctx->iota_77059_total_runtime /
                (ctx->iota_77059_runs != 0 ? ctx->iota_77059_runs : 1),
                (long) ctx->iota_77059_total_runtime);
        ctx->total_runtime += ctx->iota_77059_total_runtime;
        ctx->total_runs += ctx->iota_77059_runs;
        fprintf(stderr,
                "replicate_76424      ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->replicate_76424_runs,
                (long) ctx->replicate_76424_total_runtime /
                (ctx->replicate_76424_runs !=
                 0 ? ctx->replicate_76424_runs : 1),
                (long) ctx->replicate_76424_total_runtime);
        ctx->total_runtime += ctx->replicate_76424_total_runtime;
        ctx->total_runs += ctx->replicate_76424_runs;
        fprintf(stderr,
                "replicate_76451      ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->replicate_76451_runs,
                (long) ctx->replicate_76451_total_runtime /
                (ctx->replicate_76451_runs !=
                 0 ? ctx->replicate_76451_runs : 1),
                (long) ctx->replicate_76451_total_runtime);
        ctx->total_runtime += ctx->replicate_76451_total_runtime;
        ctx->total_runs += ctx->replicate_76451_runs;
        fprintf(stderr,
                "scan_stage1_72711    ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->scan_stage1_72711_runs,
                (long) ctx->scan_stage1_72711_total_runtime /
                (ctx->scan_stage1_72711_runs !=
                 0 ? ctx->scan_stage1_72711_runs : 1),
                (long) ctx->scan_stage1_72711_total_runtime);
        ctx->total_runtime += ctx->scan_stage1_72711_total_runtime;
        ctx->total_runs += ctx->scan_stage1_72711_runs;
        fprintf(stderr,
                "scan_stage1_73274    ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->scan_stage1_73274_runs,
                (long) ctx->scan_stage1_73274_total_runtime /
                (ctx->scan_stage1_73274_runs !=
                 0 ? ctx->scan_stage1_73274_runs : 1),
                (long) ctx->scan_stage1_73274_total_runtime);
        ctx->total_runtime += ctx->scan_stage1_73274_total_runtime;
        ctx->total_runs += ctx->scan_stage1_73274_runs;
        fprintf(stderr,
                "scan_stage1_73920    ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->scan_stage1_73920_runs,
                (long) ctx->scan_stage1_73920_total_runtime /
                (ctx->scan_stage1_73920_runs !=
                 0 ? ctx->scan_stage1_73920_runs : 1),
                (long) ctx->scan_stage1_73920_total_runtime);
        ctx->total_runtime += ctx->scan_stage1_73920_total_runtime;
        ctx->total_runs += ctx->scan_stage1_73920_runs;
        fprintf(stderr,
                "scan_stage1_74914    ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->scan_stage1_74914_runs,
                (long) ctx->scan_stage1_74914_total_runtime /
                (ctx->scan_stage1_74914_runs !=
                 0 ? ctx->scan_stage1_74914_runs : 1),
                (long) ctx->scan_stage1_74914_total_runtime);
        ctx->total_runtime += ctx->scan_stage1_74914_total_runtime;
        ctx->total_runs += ctx->scan_stage1_74914_runs;
        fprintf(stderr,
                "scan_stage2_72711    ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->scan_stage2_72711_runs,
                (long) ctx->scan_stage2_72711_total_runtime /
                (ctx->scan_stage2_72711_runs !=
                 0 ? ctx->scan_stage2_72711_runs : 1),
                (long) ctx->scan_stage2_72711_total_runtime);
        ctx->total_runtime += ctx->scan_stage2_72711_total_runtime;
        ctx->total_runs += ctx->scan_stage2_72711_runs;
        fprintf(stderr,
                "scan_stage2_73274    ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->scan_stage2_73274_runs,
                (long) ctx->scan_stage2_73274_total_runtime /
                (ctx->scan_stage2_73274_runs !=
                 0 ? ctx->scan_stage2_73274_runs : 1),
                (long) ctx->scan_stage2_73274_total_runtime);
        ctx->total_runtime += ctx->scan_stage2_73274_total_runtime;
        ctx->total_runs += ctx->scan_stage2_73274_runs;
        fprintf(stderr,
                "scan_stage2_73920    ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->scan_stage2_73920_runs,
                (long) ctx->scan_stage2_73920_total_runtime /
                (ctx->scan_stage2_73920_runs !=
                 0 ? ctx->scan_stage2_73920_runs : 1),
                (long) ctx->scan_stage2_73920_total_runtime);
        ctx->total_runtime += ctx->scan_stage2_73920_total_runtime;
        ctx->total_runs += ctx->scan_stage2_73920_runs;
        fprintf(stderr,
                "scan_stage2_74914    ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->scan_stage2_74914_runs,
                (long) ctx->scan_stage2_74914_total_runtime /
                (ctx->scan_stage2_74914_runs !=
                 0 ? ctx->scan_stage2_74914_runs : 1),
                (long) ctx->scan_stage2_74914_total_runtime);
        ctx->total_runtime += ctx->scan_stage2_74914_total_runtime;
        ctx->total_runs += ctx->scan_stage2_74914_runs;
        fprintf(stderr,
                "scan_stage3_76382    ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->scan_stage3_76382_runs,
                (long) ctx->scan_stage3_76382_total_runtime /
                (ctx->scan_stage3_76382_runs !=
                 0 ? ctx->scan_stage3_76382_runs : 1),
                (long) ctx->scan_stage3_76382_total_runtime);
        ctx->total_runtime += ctx->scan_stage3_76382_total_runtime;
        ctx->total_runs += ctx->scan_stage3_76382_runs;
        fprintf(stderr,
                "scan_stage3_76655    ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->scan_stage3_76655_runs,
                (long) ctx->scan_stage3_76655_total_runtime /
                (ctx->scan_stage3_76655_runs !=
                 0 ? ctx->scan_stage3_76655_runs : 1),
                (long) ctx->scan_stage3_76655_total_runtime);
        ctx->total_runtime += ctx->scan_stage3_76655_total_runtime;
        ctx->total_runs += ctx->scan_stage3_76655_runs;
        fprintf(stderr,
                "scan_stage3_76881    ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->scan_stage3_76881_runs,
                (long) ctx->scan_stage3_76881_total_runtime /
                (ctx->scan_stage3_76881_runs !=
                 0 ? ctx->scan_stage3_76881_runs : 1),
                (long) ctx->scan_stage3_76881_total_runtime);
        ctx->total_runtime += ctx->scan_stage3_76881_total_runtime;
        ctx->total_runs += ctx->scan_stage3_76881_runs;
        fprintf(stderr,
                "scan_stage3_77132    ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->scan_stage3_77132_runs,
                (long) ctx->scan_stage3_77132_total_runtime /
                (ctx->scan_stage3_77132_runs !=
                 0 ? ctx->scan_stage3_77132_runs : 1),
                (long) ctx->scan_stage3_77132_total_runtime);
        ctx->total_runtime += ctx->scan_stage3_77132_total_runtime;
        ctx->total_runs += ctx->scan_stage3_77132_runs;
        fprintf(stderr,
                "segmap_72615         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_72615_runs, (long) ctx->segmap_72615_total_runtime /
                (ctx->segmap_72615_runs != 0 ? ctx->segmap_72615_runs : 1),
                (long) ctx->segmap_72615_total_runtime);
        ctx->total_runtime += ctx->segmap_72615_total_runtime;
        ctx->total_runs += ctx->segmap_72615_runs;
        fprintf(stderr,
                "segmap_72689         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_72689_runs, (long) ctx->segmap_72689_total_runtime /
                (ctx->segmap_72689_runs != 0 ? ctx->segmap_72689_runs : 1),
                (long) ctx->segmap_72689_total_runtime);
        ctx->total_runtime += ctx->segmap_72689_total_runtime;
        ctx->total_runs += ctx->segmap_72689_runs;
        fprintf(stderr,
                "segmap_72726         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_72726_runs, (long) ctx->segmap_72726_total_runtime /
                (ctx->segmap_72726_runs != 0 ? ctx->segmap_72726_runs : 1),
                (long) ctx->segmap_72726_total_runtime);
        ctx->total_runtime += ctx->segmap_72726_total_runtime;
        ctx->total_runs += ctx->segmap_72726_runs;
        fprintf(stderr,
                "segmap_72738         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_72738_runs, (long) ctx->segmap_72738_total_runtime /
                (ctx->segmap_72738_runs != 0 ? ctx->segmap_72738_runs : 1),
                (long) ctx->segmap_72738_total_runtime);
        ctx->total_runtime += ctx->segmap_72738_total_runtime;
        ctx->total_runs += ctx->segmap_72738_runs;
        fprintf(stderr,
                "segmap_72882         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_72882_runs, (long) ctx->segmap_72882_total_runtime /
                (ctx->segmap_72882_runs != 0 ? ctx->segmap_72882_runs : 1),
                (long) ctx->segmap_72882_total_runtime);
        ctx->total_runtime += ctx->segmap_72882_total_runtime;
        ctx->total_runs += ctx->segmap_72882_runs;
        fprintf(stderr,
                "segmap_73054         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_73054_runs, (long) ctx->segmap_73054_total_runtime /
                (ctx->segmap_73054_runs != 0 ? ctx->segmap_73054_runs : 1),
                (long) ctx->segmap_73054_total_runtime);
        ctx->total_runtime += ctx->segmap_73054_total_runtime;
        ctx->total_runs += ctx->segmap_73054_runs;
        fprintf(stderr,
                "segmap_73066         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_73066_runs, (long) ctx->segmap_73066_total_runtime /
                (ctx->segmap_73066_runs != 0 ? ctx->segmap_73066_runs : 1),
                (long) ctx->segmap_73066_total_runtime);
        ctx->total_runtime += ctx->segmap_73066_total_runtime;
        ctx->total_runs += ctx->segmap_73066_runs;
        fprintf(stderr,
                "segmap_73199         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_73199_runs, (long) ctx->segmap_73199_total_runtime /
                (ctx->segmap_73199_runs != 0 ? ctx->segmap_73199_runs : 1),
                (long) ctx->segmap_73199_total_runtime);
        ctx->total_runtime += ctx->segmap_73199_total_runtime;
        ctx->total_runs += ctx->segmap_73199_runs;
        fprintf(stderr,
                "segmap_73252         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_73252_runs, (long) ctx->segmap_73252_total_runtime /
                (ctx->segmap_73252_runs != 0 ? ctx->segmap_73252_runs : 1),
                (long) ctx->segmap_73252_total_runtime);
        ctx->total_runtime += ctx->segmap_73252_total_runtime;
        ctx->total_runs += ctx->segmap_73252_runs;
        fprintf(stderr,
                "segmap_73289         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_73289_runs, (long) ctx->segmap_73289_total_runtime /
                (ctx->segmap_73289_runs != 0 ? ctx->segmap_73289_runs : 1),
                (long) ctx->segmap_73289_total_runtime);
        ctx->total_runtime += ctx->segmap_73289_total_runtime;
        ctx->total_runs += ctx->segmap_73289_runs;
        fprintf(stderr,
                "segmap_73301         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_73301_runs, (long) ctx->segmap_73301_total_runtime /
                (ctx->segmap_73301_runs != 0 ? ctx->segmap_73301_runs : 1),
                (long) ctx->segmap_73301_total_runtime);
        ctx->total_runtime += ctx->segmap_73301_total_runtime;
        ctx->total_runs += ctx->segmap_73301_runs;
        fprintf(stderr,
                "segmap_73360         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_73360_runs, (long) ctx->segmap_73360_total_runtime /
                (ctx->segmap_73360_runs != 0 ? ctx->segmap_73360_runs : 1),
                (long) ctx->segmap_73360_total_runtime);
        ctx->total_runtime += ctx->segmap_73360_total_runtime;
        ctx->total_runs += ctx->segmap_73360_runs;
        fprintf(stderr,
                "segmap_73532         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_73532_runs, (long) ctx->segmap_73532_total_runtime /
                (ctx->segmap_73532_runs != 0 ? ctx->segmap_73532_runs : 1),
                (long) ctx->segmap_73532_total_runtime);
        ctx->total_runtime += ctx->segmap_73532_total_runtime;
        ctx->total_runs += ctx->segmap_73532_runs;
        fprintf(stderr,
                "segmap_73544         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_73544_runs, (long) ctx->segmap_73544_total_runtime /
                (ctx->segmap_73544_runs != 0 ? ctx->segmap_73544_runs : 1),
                (long) ctx->segmap_73544_total_runtime);
        ctx->total_runtime += ctx->segmap_73544_total_runtime;
        ctx->total_runs += ctx->segmap_73544_runs;
        fprintf(stderr,
                "segmap_73824         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_73824_runs, (long) ctx->segmap_73824_total_runtime /
                (ctx->segmap_73824_runs != 0 ? ctx->segmap_73824_runs : 1),
                (long) ctx->segmap_73824_total_runtime);
        ctx->total_runtime += ctx->segmap_73824_total_runtime;
        ctx->total_runs += ctx->segmap_73824_runs;
        fprintf(stderr,
                "segmap_73898         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_73898_runs, (long) ctx->segmap_73898_total_runtime /
                (ctx->segmap_73898_runs != 0 ? ctx->segmap_73898_runs : 1),
                (long) ctx->segmap_73898_total_runtime);
        ctx->total_runtime += ctx->segmap_73898_total_runtime;
        ctx->total_runs += ctx->segmap_73898_runs;
        fprintf(stderr,
                "segmap_73935         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_73935_runs, (long) ctx->segmap_73935_total_runtime /
                (ctx->segmap_73935_runs != 0 ? ctx->segmap_73935_runs : 1),
                (long) ctx->segmap_73935_total_runtime);
        ctx->total_runtime += ctx->segmap_73935_total_runtime;
        ctx->total_runs += ctx->segmap_73935_runs;
        fprintf(stderr,
                "segmap_73947         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_73947_runs, (long) ctx->segmap_73947_total_runtime /
                (ctx->segmap_73947_runs != 0 ? ctx->segmap_73947_runs : 1),
                (long) ctx->segmap_73947_total_runtime);
        ctx->total_runtime += ctx->segmap_73947_total_runtime;
        ctx->total_runs += ctx->segmap_73947_runs;
        fprintf(stderr,
                "segmap_74091         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_74091_runs, (long) ctx->segmap_74091_total_runtime /
                (ctx->segmap_74091_runs != 0 ? ctx->segmap_74091_runs : 1),
                (long) ctx->segmap_74091_total_runtime);
        ctx->total_runtime += ctx->segmap_74091_total_runtime;
        ctx->total_runs += ctx->segmap_74091_runs;
        fprintf(stderr,
                "segmap_74263         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_74263_runs, (long) ctx->segmap_74263_total_runtime /
                (ctx->segmap_74263_runs != 0 ? ctx->segmap_74263_runs : 1),
                (long) ctx->segmap_74263_total_runtime);
        ctx->total_runtime += ctx->segmap_74263_total_runtime;
        ctx->total_runs += ctx->segmap_74263_runs;
        fprintf(stderr,
                "segmap_74275         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_74275_runs, (long) ctx->segmap_74275_total_runtime /
                (ctx->segmap_74275_runs != 0 ? ctx->segmap_74275_runs : 1),
                (long) ctx->segmap_74275_total_runtime);
        ctx->total_runtime += ctx->segmap_74275_total_runtime;
        ctx->total_runs += ctx->segmap_74275_runs;
        fprintf(stderr,
                "segmap_74344         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_74344_runs, (long) ctx->segmap_74344_total_runtime /
                (ctx->segmap_74344_runs != 0 ? ctx->segmap_74344_runs : 1),
                (long) ctx->segmap_74344_total_runtime);
        ctx->total_runtime += ctx->segmap_74344_total_runtime;
        ctx->total_runs += ctx->segmap_74344_runs;
        fprintf(stderr,
                "segmap_74839         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_74839_runs, (long) ctx->segmap_74839_total_runtime /
                (ctx->segmap_74839_runs != 0 ? ctx->segmap_74839_runs : 1),
                (long) ctx->segmap_74839_total_runtime);
        ctx->total_runtime += ctx->segmap_74839_total_runtime;
        ctx->total_runs += ctx->segmap_74839_runs;
        fprintf(stderr,
                "segmap_74892         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_74892_runs, (long) ctx->segmap_74892_total_runtime /
                (ctx->segmap_74892_runs != 0 ? ctx->segmap_74892_runs : 1),
                (long) ctx->segmap_74892_total_runtime);
        ctx->total_runtime += ctx->segmap_74892_total_runtime;
        ctx->total_runs += ctx->segmap_74892_runs;
        fprintf(stderr,
                "segmap_74929         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_74929_runs, (long) ctx->segmap_74929_total_runtime /
                (ctx->segmap_74929_runs != 0 ? ctx->segmap_74929_runs : 1),
                (long) ctx->segmap_74929_total_runtime);
        ctx->total_runtime += ctx->segmap_74929_total_runtime;
        ctx->total_runs += ctx->segmap_74929_runs;
        fprintf(stderr,
                "segmap_74941         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_74941_runs, (long) ctx->segmap_74941_total_runtime /
                (ctx->segmap_74941_runs != 0 ? ctx->segmap_74941_runs : 1),
                (long) ctx->segmap_74941_total_runtime);
        ctx->total_runtime += ctx->segmap_74941_total_runtime;
        ctx->total_runs += ctx->segmap_74941_runs;
        fprintf(stderr,
                "segmap_75000         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_75000_runs, (long) ctx->segmap_75000_total_runtime /
                (ctx->segmap_75000_runs != 0 ? ctx->segmap_75000_runs : 1),
                (long) ctx->segmap_75000_total_runtime);
        ctx->total_runtime += ctx->segmap_75000_total_runtime;
        ctx->total_runs += ctx->segmap_75000_runs;
        fprintf(stderr,
                "segmap_75172         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_75172_runs, (long) ctx->segmap_75172_total_runtime /
                (ctx->segmap_75172_runs != 0 ? ctx->segmap_75172_runs : 1),
                (long) ctx->segmap_75172_total_runtime);
        ctx->total_runtime += ctx->segmap_75172_total_runtime;
        ctx->total_runs += ctx->segmap_75172_runs;
        fprintf(stderr,
                "segmap_75184         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_75184_runs, (long) ctx->segmap_75184_total_runtime /
                (ctx->segmap_75184_runs != 0 ? ctx->segmap_75184_runs : 1),
                (long) ctx->segmap_75184_total_runtime);
        ctx->total_runtime += ctx->segmap_75184_total_runtime;
        ctx->total_runs += ctx->segmap_75184_runs;
        fprintf(stderr,
                "segmap_75247         ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segmap_75247_runs, (long) ctx->segmap_75247_total_runtime /
                (ctx->segmap_75247_runs != 0 ? ctx->segmap_75247_runs : 1),
                (long) ctx->segmap_75247_total_runtime);
        ctx->total_runtime += ctx->segmap_75247_total_runtime;
        ctx->total_runs += ctx->segmap_75247_runs;
        fprintf(stderr,
                "segred_nonseg_72613  ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segred_nonseg_72613_runs,
                (long) ctx->segred_nonseg_72613_total_runtime /
                (ctx->segred_nonseg_72613_runs !=
                 0 ? ctx->segred_nonseg_72613_runs : 1),
                (long) ctx->segred_nonseg_72613_total_runtime);
        ctx->total_runtime += ctx->segred_nonseg_72613_total_runtime;
        ctx->total_runs += ctx->segred_nonseg_72613_runs;
        fprintf(stderr,
                "segred_nonseg_72724  ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segred_nonseg_72724_runs,
                (long) ctx->segred_nonseg_72724_total_runtime /
                (ctx->segred_nonseg_72724_runs !=
                 0 ? ctx->segred_nonseg_72724_runs : 1),
                (long) ctx->segred_nonseg_72724_total_runtime);
        ctx->total_runtime += ctx->segred_nonseg_72724_total_runtime;
        ctx->total_runs += ctx->segred_nonseg_72724_runs;
        fprintf(stderr,
                "segred_nonseg_73197  ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segred_nonseg_73197_runs,
                (long) ctx->segred_nonseg_73197_total_runtime /
                (ctx->segred_nonseg_73197_runs !=
                 0 ? ctx->segred_nonseg_73197_runs : 1),
                (long) ctx->segred_nonseg_73197_total_runtime);
        ctx->total_runtime += ctx->segred_nonseg_73197_total_runtime;
        ctx->total_runs += ctx->segred_nonseg_73197_runs;
        fprintf(stderr,
                "segred_nonseg_73287  ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segred_nonseg_73287_runs,
                (long) ctx->segred_nonseg_73287_total_runtime /
                (ctx->segred_nonseg_73287_runs !=
                 0 ? ctx->segred_nonseg_73287_runs : 1),
                (long) ctx->segred_nonseg_73287_total_runtime);
        ctx->total_runtime += ctx->segred_nonseg_73287_total_runtime;
        ctx->total_runs += ctx->segred_nonseg_73287_runs;
        fprintf(stderr,
                "segred_nonseg_73822  ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segred_nonseg_73822_runs,
                (long) ctx->segred_nonseg_73822_total_runtime /
                (ctx->segred_nonseg_73822_runs !=
                 0 ? ctx->segred_nonseg_73822_runs : 1),
                (long) ctx->segred_nonseg_73822_total_runtime);
        ctx->total_runtime += ctx->segred_nonseg_73822_total_runtime;
        ctx->total_runs += ctx->segred_nonseg_73822_runs;
        fprintf(stderr,
                "segred_nonseg_73933  ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segred_nonseg_73933_runs,
                (long) ctx->segred_nonseg_73933_total_runtime /
                (ctx->segred_nonseg_73933_runs !=
                 0 ? ctx->segred_nonseg_73933_runs : 1),
                (long) ctx->segred_nonseg_73933_total_runtime);
        ctx->total_runtime += ctx->segred_nonseg_73933_total_runtime;
        ctx->total_runs += ctx->segred_nonseg_73933_runs;
        fprintf(stderr,
                "segred_nonseg_74837  ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segred_nonseg_74837_runs,
                (long) ctx->segred_nonseg_74837_total_runtime /
                (ctx->segred_nonseg_74837_runs !=
                 0 ? ctx->segred_nonseg_74837_runs : 1),
                (long) ctx->segred_nonseg_74837_total_runtime);
        ctx->total_runtime += ctx->segred_nonseg_74837_total_runtime;
        ctx->total_runs += ctx->segred_nonseg_74837_runs;
        fprintf(stderr,
                "segred_nonseg_74927  ran %5d times; avg: %8ldus; total: %8ldus\n",
                ctx->segred_nonseg_74927_runs,
                (long) ctx->segred_nonseg_74927_total_runtime /
                (ctx->segred_nonseg_74927_runs !=
                 0 ? ctx->segred_nonseg_74927_runs : 1),
                (long) ctx->segred_nonseg_74927_total_runtime);
        ctx->total_runtime += ctx->segred_nonseg_74927_total_runtime;
        ctx->total_runs += ctx->segred_nonseg_74927_runs;
        if (ctx->profiling)
            fprintf(stderr, "%d operations with cumulative runtime: %6ldus\n",
                    ctx->total_runs, ctx->total_runtime);
    }
}
static int futrts_render_irreg(struct futhark_context *ctx,
                               struct memblock_device *out_mem_p_77235,
                               int32_t *out_out_arrsizze_77236,
                               int32_t *out_out_arrsizze_77237, int32_t h_71517,
                               int32_t w_71518);
static int futrts_render_rgbbox(struct futhark_context *ctx,
                                struct memblock_device *out_mem_p_77319,
                                int32_t *out_out_arrsizze_77320,
                                int32_t *out_out_arrsizze_77321,
                                int32_t h_70471, int32_t w_70472);
static int futrts_bvh_irreg(struct futhark_context *ctx,
                            struct memblock_device *out_mem_p_77403,
                            int32_t *out_out_arrsizze_77404,
                            struct memblock_device *out_mem_p_77405,
                            struct memblock_device *out_mem_p_77406,
                            struct memblock_device *out_mem_p_77407,
                            struct memblock_device *out_mem_p_77408,
                            struct memblock_device *out_mem_p_77409,
                            struct memblock_device *out_mem_p_77410,
                            struct memblock_device *out_mem_p_77411,
                            struct memblock_device *out_mem_p_77412,
                            struct memblock_device *out_mem_p_77413,
                            struct memblock_device *out_mem_p_77414,
                            struct memblock_device *out_mem_p_77415,
                            int32_t *out_out_arrsizze_77416,
                            struct memblock_device *out_mem_p_77417,
                            struct memblock_device *out_mem_p_77418,
                            struct memblock_device *out_mem_p_77419,
                            struct memblock_device *out_mem_p_77420,
                            struct memblock_device *out_mem_p_77421,
                            struct memblock_device *out_mem_p_77422,
                            float *out_scalar_out_77423,
                            float *out_scalar_out_77424,
                            float *out_scalar_out_77425,
                            float *out_scalar_out_77426,
                            float *out_scalar_out_77427,
                            float *out_scalar_out_77428,
                            float *out_scalar_out_77429,
                            float *out_scalar_out_77430,
                            float *out_scalar_out_77431,
                            float *out_scalar_out_77432,
                            float *out_scalar_out_77433,
                            float *out_scalar_out_77434, int32_t h_69987,
                            int32_t w_69988);
static int futrts_bvh_rgbbox(struct futhark_context *ctx,
                             struct memblock_device *out_mem_p_77516,
                             int32_t *out_out_arrsizze_77517,
                             struct memblock_device *out_mem_p_77518,
                             struct memblock_device *out_mem_p_77519,
                             struct memblock_device *out_mem_p_77520,
                             struct memblock_device *out_mem_p_77521,
                             struct memblock_device *out_mem_p_77522,
                             struct memblock_device *out_mem_p_77523,
                             struct memblock_device *out_mem_p_77524,
                             struct memblock_device *out_mem_p_77525,
                             struct memblock_device *out_mem_p_77526,
                             struct memblock_device *out_mem_p_77527,
                             struct memblock_device *out_mem_p_77528,
                             int32_t *out_out_arrsizze_77529,
                             struct memblock_device *out_mem_p_77530,
                             struct memblock_device *out_mem_p_77531,
                             struct memblock_device *out_mem_p_77532,
                             struct memblock_device *out_mem_p_77533,
                             struct memblock_device *out_mem_p_77534,
                             struct memblock_device *out_mem_p_77535,
                             float *out_scalar_out_77536,
                             float *out_scalar_out_77537,
                             float *out_scalar_out_77538,
                             float *out_scalar_out_77539,
                             float *out_scalar_out_77540,
                             float *out_scalar_out_77541,
                             float *out_scalar_out_77542,
                             float *out_scalar_out_77543,
                             float *out_scalar_out_77544,
                             float *out_scalar_out_77545,
                             float *out_scalar_out_77546,
                             float *out_scalar_out_77547, int32_t h_69351,
                             int32_t w_69352);
static int futrts__replicate_i32(struct futhark_context *ctx,
                                 struct memblock_device mem_76447,
                                 int32_t num_elems_76448, int32_t val_76449);
static int futrts__replicate_f32(struct futhark_context *ctx,
                                 struct memblock_device mem_76420,
                                 int32_t num_elems_76421, float val_76422);
static inline uint8_t add8(uint8_t x, uint8_t y)
{
    return x + y;
}
static inline uint16_t add16(uint16_t x, uint16_t y)
{
    return x + y;
}
static inline uint32_t add32(uint32_t x, uint32_t y)
{
    return x + y;
}
static inline uint64_t add64(uint64_t x, uint64_t y)
{
    return x + y;
}
static inline uint8_t sub8(uint8_t x, uint8_t y)
{
    return x - y;
}
static inline uint16_t sub16(uint16_t x, uint16_t y)
{
    return x - y;
}
static inline uint32_t sub32(uint32_t x, uint32_t y)
{
    return x - y;
}
static inline uint64_t sub64(uint64_t x, uint64_t y)
{
    return x - y;
}
static inline uint8_t mul8(uint8_t x, uint8_t y)
{
    return x * y;
}
static inline uint16_t mul16(uint16_t x, uint16_t y)
{
    return x * y;
}
static inline uint32_t mul32(uint32_t x, uint32_t y)
{
    return x * y;
}
static inline uint64_t mul64(uint64_t x, uint64_t y)
{
    return x * y;
}
static inline uint8_t udiv8(uint8_t x, uint8_t y)
{
    return x / y;
}
static inline uint16_t udiv16(uint16_t x, uint16_t y)
{
    return x / y;
}
static inline uint32_t udiv32(uint32_t x, uint32_t y)
{
    return x / y;
}
static inline uint64_t udiv64(uint64_t x, uint64_t y)
{
    return x / y;
}
static inline uint8_t umod8(uint8_t x, uint8_t y)
{
    return x % y;
}
static inline uint16_t umod16(uint16_t x, uint16_t y)
{
    return x % y;
}
static inline uint32_t umod32(uint32_t x, uint32_t y)
{
    return x % y;
}
static inline uint64_t umod64(uint64_t x, uint64_t y)
{
    return x % y;
}
static inline int8_t sdiv8(int8_t x, int8_t y)
{
    int8_t q = x / y;
    int8_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int16_t sdiv16(int16_t x, int16_t y)
{
    int16_t q = x / y;
    int16_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int32_t sdiv32(int32_t x, int32_t y)
{
    int32_t q = x / y;
    int32_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int64_t sdiv64(int64_t x, int64_t y)
{
    int64_t q = x / y;
    int64_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int8_t smod8(int8_t x, int8_t y)
{
    int8_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int16_t smod16(int16_t x, int16_t y)
{
    int16_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int32_t smod32(int32_t x, int32_t y)
{
    int32_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int64_t smod64(int64_t x, int64_t y)
{
    int64_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int8_t squot8(int8_t x, int8_t y)
{
    return x / y;
}
static inline int16_t squot16(int16_t x, int16_t y)
{
    return x / y;
}
static inline int32_t squot32(int32_t x, int32_t y)
{
    return x / y;
}
static inline int64_t squot64(int64_t x, int64_t y)
{
    return x / y;
}
static inline int8_t srem8(int8_t x, int8_t y)
{
    return x % y;
}
static inline int16_t srem16(int16_t x, int16_t y)
{
    return x % y;
}
static inline int32_t srem32(int32_t x, int32_t y)
{
    return x % y;
}
static inline int64_t srem64(int64_t x, int64_t y)
{
    return x % y;
}
static inline int8_t smin8(int8_t x, int8_t y)
{
    return x < y ? x : y;
}
static inline int16_t smin16(int16_t x, int16_t y)
{
    return x < y ? x : y;
}
static inline int32_t smin32(int32_t x, int32_t y)
{
    return x < y ? x : y;
}
static inline int64_t smin64(int64_t x, int64_t y)
{
    return x < y ? x : y;
}
static inline uint8_t umin8(uint8_t x, uint8_t y)
{
    return x < y ? x : y;
}
static inline uint16_t umin16(uint16_t x, uint16_t y)
{
    return x < y ? x : y;
}
static inline uint32_t umin32(uint32_t x, uint32_t y)
{
    return x < y ? x : y;
}
static inline uint64_t umin64(uint64_t x, uint64_t y)
{
    return x < y ? x : y;
}
static inline int8_t smax8(int8_t x, int8_t y)
{
    return x < y ? y : x;
}
static inline int16_t smax16(int16_t x, int16_t y)
{
    return x < y ? y : x;
}
static inline int32_t smax32(int32_t x, int32_t y)
{
    return x < y ? y : x;
}
static inline int64_t smax64(int64_t x, int64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t umax8(uint8_t x, uint8_t y)
{
    return x < y ? y : x;
}
static inline uint16_t umax16(uint16_t x, uint16_t y)
{
    return x < y ? y : x;
}
static inline uint32_t umax32(uint32_t x, uint32_t y)
{
    return x < y ? y : x;
}
static inline uint64_t umax64(uint64_t x, uint64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t shl8(uint8_t x, uint8_t y)
{
    return x << y;
}
static inline uint16_t shl16(uint16_t x, uint16_t y)
{
    return x << y;
}
static inline uint32_t shl32(uint32_t x, uint32_t y)
{
    return x << y;
}
static inline uint64_t shl64(uint64_t x, uint64_t y)
{
    return x << y;
}
static inline uint8_t lshr8(uint8_t x, uint8_t y)
{
    return x >> y;
}
static inline uint16_t lshr16(uint16_t x, uint16_t y)
{
    return x >> y;
}
static inline uint32_t lshr32(uint32_t x, uint32_t y)
{
    return x >> y;
}
static inline uint64_t lshr64(uint64_t x, uint64_t y)
{
    return x >> y;
}
static inline int8_t ashr8(int8_t x, int8_t y)
{
    return x >> y;
}
static inline int16_t ashr16(int16_t x, int16_t y)
{
    return x >> y;
}
static inline int32_t ashr32(int32_t x, int32_t y)
{
    return x >> y;
}
static inline int64_t ashr64(int64_t x, int64_t y)
{
    return x >> y;
}
static inline uint8_t and8(uint8_t x, uint8_t y)
{
    return x & y;
}
static inline uint16_t and16(uint16_t x, uint16_t y)
{
    return x & y;
}
static inline uint32_t and32(uint32_t x, uint32_t y)
{
    return x & y;
}
static inline uint64_t and64(uint64_t x, uint64_t y)
{
    return x & y;
}
static inline uint8_t or8(uint8_t x, uint8_t y)
{
    return x | y;
}
static inline uint16_t or16(uint16_t x, uint16_t y)
{
    return x | y;
}
static inline uint32_t or32(uint32_t x, uint32_t y)
{
    return x | y;
}
static inline uint64_t or64(uint64_t x, uint64_t y)
{
    return x | y;
}
static inline uint8_t xor8(uint8_t x, uint8_t y)
{
    return x ^ y;
}
static inline uint16_t xor16(uint16_t x, uint16_t y)
{
    return x ^ y;
}
static inline uint32_t xor32(uint32_t x, uint32_t y)
{
    return x ^ y;
}
static inline uint64_t xor64(uint64_t x, uint64_t y)
{
    return x ^ y;
}
static inline bool ult8(uint8_t x, uint8_t y)
{
    return x < y;
}
static inline bool ult16(uint16_t x, uint16_t y)
{
    return x < y;
}
static inline bool ult32(uint32_t x, uint32_t y)
{
    return x < y;
}
static inline bool ult64(uint64_t x, uint64_t y)
{
    return x < y;
}
static inline bool ule8(uint8_t x, uint8_t y)
{
    return x <= y;
}
static inline bool ule16(uint16_t x, uint16_t y)
{
    return x <= y;
}
static inline bool ule32(uint32_t x, uint32_t y)
{
    return x <= y;
}
static inline bool ule64(uint64_t x, uint64_t y)
{
    return x <= y;
}
static inline bool slt8(int8_t x, int8_t y)
{
    return x < y;
}
static inline bool slt16(int16_t x, int16_t y)
{
    return x < y;
}
static inline bool slt32(int32_t x, int32_t y)
{
    return x < y;
}
static inline bool slt64(int64_t x, int64_t y)
{
    return x < y;
}
static inline bool sle8(int8_t x, int8_t y)
{
    return x <= y;
}
static inline bool sle16(int16_t x, int16_t y)
{
    return x <= y;
}
static inline bool sle32(int32_t x, int32_t y)
{
    return x <= y;
}
static inline bool sle64(int64_t x, int64_t y)
{
    return x <= y;
}
static inline int8_t pow8(int8_t x, int8_t y)
{
    int8_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int16_t pow16(int16_t x, int16_t y)
{
    int16_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int32_t pow32(int32_t x, int32_t y)
{
    int32_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int64_t pow64(int64_t x, int64_t y)
{
    int64_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline bool itob_i8_bool(int8_t x)
{
    return x;
}
static inline bool itob_i16_bool(int16_t x)
{
    return x;
}
static inline bool itob_i32_bool(int32_t x)
{
    return x;
}
static inline bool itob_i64_bool(int64_t x)
{
    return x;
}
static inline int8_t btoi_bool_i8(bool x)
{
    return x;
}
static inline int16_t btoi_bool_i16(bool x)
{
    return x;
}
static inline int32_t btoi_bool_i32(bool x)
{
    return x;
}
static inline int64_t btoi_bool_i64(bool x)
{
    return x;
}
#define sext_i8_i8(x) ((int8_t) (int8_t) x)
#define sext_i8_i16(x) ((int16_t) (int8_t) x)
#define sext_i8_i32(x) ((int32_t) (int8_t) x)
#define sext_i8_i64(x) ((int64_t) (int8_t) x)
#define sext_i16_i8(x) ((int8_t) (int16_t) x)
#define sext_i16_i16(x) ((int16_t) (int16_t) x)
#define sext_i16_i32(x) ((int32_t) (int16_t) x)
#define sext_i16_i64(x) ((int64_t) (int16_t) x)
#define sext_i32_i8(x) ((int8_t) (int32_t) x)
#define sext_i32_i16(x) ((int16_t) (int32_t) x)
#define sext_i32_i32(x) ((int32_t) (int32_t) x)
#define sext_i32_i64(x) ((int64_t) (int32_t) x)
#define sext_i64_i8(x) ((int8_t) (int64_t) x)
#define sext_i64_i16(x) ((int16_t) (int64_t) x)
#define sext_i64_i32(x) ((int32_t) (int64_t) x)
#define sext_i64_i64(x) ((int64_t) (int64_t) x)
#define zext_i8_i8(x) ((uint8_t) (uint8_t) x)
#define zext_i8_i16(x) ((uint16_t) (uint8_t) x)
#define zext_i8_i32(x) ((uint32_t) (uint8_t) x)
#define zext_i8_i64(x) ((uint64_t) (uint8_t) x)
#define zext_i16_i8(x) ((uint8_t) (uint16_t) x)
#define zext_i16_i16(x) ((uint16_t) (uint16_t) x)
#define zext_i16_i32(x) ((uint32_t) (uint16_t) x)
#define zext_i16_i64(x) ((uint64_t) (uint16_t) x)
#define zext_i32_i8(x) ((uint8_t) (uint32_t) x)
#define zext_i32_i16(x) ((uint16_t) (uint32_t) x)
#define zext_i32_i32(x) ((uint32_t) (uint32_t) x)
#define zext_i32_i64(x) ((uint64_t) (uint32_t) x)
#define zext_i64_i8(x) ((uint8_t) (uint64_t) x)
#define zext_i64_i16(x) ((uint16_t) (uint64_t) x)
#define zext_i64_i32(x) ((uint32_t) (uint64_t) x)
#define zext_i64_i64(x) ((uint64_t) (uint64_t) x)
#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x)
{
    return popcount(x);
}
static int32_t futrts_popc16(int16_t x)
{
    return popcount(x);
}
static int32_t futrts_popc32(int32_t x)
{
    return popcount(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return popcount(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_popc8(int8_t x)
{
    return __popc(zext_i8_i32(x));
}
static int32_t futrts_popc16(int16_t x)
{
    return __popc(zext_i16_i32(x));
}
static int32_t futrts_popc32(int32_t x)
{
    return __popc(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return __popcll(x);
}
#else
static int32_t futrts_popc8(int8_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc16(int16_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc32(int32_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc64(int64_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x)
{
    return clz(x);
}
static int32_t futrts_clzz16(int16_t x)
{
    return clz(x);
}
static int32_t futrts_clzz32(int32_t x)
{
    return clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return clz(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_clzz8(int8_t x)
{
    return __clz(zext_i8_i32(x)) - 24;
}
static int32_t futrts_clzz16(int16_t x)
{
    return __clz(zext_i16_i32(x)) - 16;
}
static int32_t futrts_clzz32(int32_t x)
{
    return __clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return __clzll(x);
}
#else
static int32_t futrts_clzz8(int8_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz16(int16_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz32(int32_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz64(int64_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
#endif
static inline float fdiv32(float x, float y)
{
    return x / y;
}
static inline float fadd32(float x, float y)
{
    return x + y;
}
static inline float fsub32(float x, float y)
{
    return x - y;
}
static inline float fmul32(float x, float y)
{
    return x * y;
}
static inline float fmin32(float x, float y)
{
    return fmin(x, y);
}
static inline float fmax32(float x, float y)
{
    return fmax(x, y);
}
static inline float fpow32(float x, float y)
{
    return pow(x, y);
}
static inline bool cmplt32(float x, float y)
{
    return x < y;
}
static inline bool cmple32(float x, float y)
{
    return x <= y;
}
static inline float sitofp_i8_f32(int8_t x)
{
    return (float) x;
}
static inline float sitofp_i16_f32(int16_t x)
{
    return (float) x;
}
static inline float sitofp_i32_f32(int32_t x)
{
    return (float) x;
}
static inline float sitofp_i64_f32(int64_t x)
{
    return (float) x;
}
static inline float uitofp_i8_f32(uint8_t x)
{
    return (float) x;
}
static inline float uitofp_i16_f32(uint16_t x)
{
    return (float) x;
}
static inline float uitofp_i32_f32(uint32_t x)
{
    return (float) x;
}
static inline float uitofp_i64_f32(uint64_t x)
{
    return (float) x;
}
static inline int8_t fptosi_f32_i8(float x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f32_i16(float x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f32_i32(float x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f32_i64(float x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f32_i8(float x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f32_i16(float x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f32_i32(float x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f32_i64(float x)
{
    return (uint64_t) x;
}
static inline double fdiv64(double x, double y)
{
    return x / y;
}
static inline double fadd64(double x, double y)
{
    return x + y;
}
static inline double fsub64(double x, double y)
{
    return x - y;
}
static inline double fmul64(double x, double y)
{
    return x * y;
}
static inline double fmin64(double x, double y)
{
    return fmin(x, y);
}
static inline double fmax64(double x, double y)
{
    return fmax(x, y);
}
static inline double fpow64(double x, double y)
{
    return pow(x, y);
}
static inline bool cmplt64(double x, double y)
{
    return x < y;
}
static inline bool cmple64(double x, double y)
{
    return x <= y;
}
static inline double sitofp_i8_f64(int8_t x)
{
    return (double) x;
}
static inline double sitofp_i16_f64(int16_t x)
{
    return (double) x;
}
static inline double sitofp_i32_f64(int32_t x)
{
    return (double) x;
}
static inline double sitofp_i64_f64(int64_t x)
{
    return (double) x;
}
static inline double uitofp_i8_f64(uint8_t x)
{
    return (double) x;
}
static inline double uitofp_i16_f64(uint16_t x)
{
    return (double) x;
}
static inline double uitofp_i32_f64(uint32_t x)
{
    return (double) x;
}
static inline double uitofp_i64_f64(uint64_t x)
{
    return (double) x;
}
static inline int8_t fptosi_f64_i8(double x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f64_i16(double x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f64_i32(double x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f64_i64(double x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f64_i8(double x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f64_i16(double x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f64_i32(double x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f64_i64(double x)
{
    return (uint64_t) x;
}
static inline float fpconv_f32_f32(float x)
{
    return (float) x;
}
static inline double fpconv_f32_f64(float x)
{
    return (double) x;
}
static inline float fpconv_f64_f32(double x)
{
    return (float) x;
}
static inline double fpconv_f64_f64(double x)
{
    return (double) x;
}
static inline float futrts_log32(float x)
{
    return log(x);
}
static inline float futrts_log2_32(float x)
{
    return log2(x);
}
static inline float futrts_log10_32(float x)
{
    return log10(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrt(x);
}
static inline float futrts_exp32(float x)
{
    return exp(x);
}
static inline float futrts_cos32(float x)
{
    return cos(x);
}
static inline float futrts_sin32(float x)
{
    return sin(x);
}
static inline float futrts_tan32(float x)
{
    return tan(x);
}
static inline float futrts_acos32(float x)
{
    return acos(x);
}
static inline float futrts_asin32(float x)
{
    return asin(x);
}
static inline float futrts_atan32(float x)
{
    return atan(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgamma(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgamma(x);
}
static inline bool futrts_isnan32(float x)
{
    return isnan(x);
}
static inline bool futrts_isinf32(float x)
{
    return isinf(x);
}
static inline int32_t futrts_to_bits32(float x)
{
    union {
        float f;
        int32_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float futrts_from_bits32(int32_t x)
{
    union {
        int32_t f;
        float t;
    } p;
    
    p.f = x;
    return p.t;
}
#ifdef __OPENCL_VERSION__
static inline float fmod32(float x, float y)
{
    return fmod(x, y);
}
static inline float futrts_round32(float x)
{
    return rint(x);
}
static inline float futrts_floor32(float x)
{
    return floor(x);
}
static inline float futrts_ceil32(float x)
{
    return ceil(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return mix(v0, v1, t);
}
#else
static inline float fmod32(float x, float y)
{
    return fmodf(x, y);
}
static inline float futrts_round32(float x)
{
    return rintf(x);
}
static inline float futrts_floor32(float x)
{
    return floorf(x);
}
static inline float futrts_ceil32(float x)
{
    return ceilf(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return v0 + (v1 - v0) * t;
}
#endif
static inline double futrts_log64(double x)
{
    return log(x);
}
static inline double futrts_log2_64(double x)
{
    return log2(x);
}
static inline double futrts_log10_64(double x)
{
    return log10(x);
}
static inline double futrts_sqrt64(double x)
{
    return sqrt(x);
}
static inline double futrts_exp64(double x)
{
    return exp(x);
}
static inline double futrts_cos64(double x)
{
    return cos(x);
}
static inline double futrts_sin64(double x)
{
    return sin(x);
}
static inline double futrts_tan64(double x)
{
    return tan(x);
}
static inline double futrts_acos64(double x)
{
    return acos(x);
}
static inline double futrts_asin64(double x)
{
    return asin(x);
}
static inline double futrts_atan64(double x)
{
    return atan(x);
}
static inline double futrts_atan2_64(double x, double y)
{
    return atan2(x, y);
}
static inline double futrts_gamma64(double x)
{
    return tgamma(x);
}
static inline double futrts_lgamma64(double x)
{
    return lgamma(x);
}
static inline double futrts_round64(double x)
{
    return rint(x);
}
static inline double futrts_ceil64(double x)
{
    return ceil(x);
}
static inline double futrts_floor64(double x)
{
    return floor(x);
}
static inline bool futrts_isnan64(double x)
{
    return isnan(x);
}
static inline bool futrts_isinf64(double x)
{
    return isinf(x);
}
static inline int64_t futrts_to_bits64(double x)
{
    union {
        double f;
        int64_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double futrts_from_bits64(int64_t x)
{
    union {
        int64_t f;
        double t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float fmod64(float x, float y)
{
    return fmod(x, y);
}
#ifdef __OPENCL_VERSION__
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return mix(v0, v1, t);
}
#else
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return v0 + (v1 - v0) * t;
}
#endif
static int futrts_render_irreg(struct futhark_context *ctx,
                               struct memblock_device *out_mem_p_77235,
                               int32_t *out_out_arrsizze_77236,
                               int32_t *out_out_arrsizze_77237, int32_t h_71517,
                               int32_t w_71518)
{
    struct memblock_device out_mem_76984;
    
    out_mem_76984.references = NULL;
    
    int32_t out_arrsizze_76985;
    int32_t out_arrsizze_76986;
    int32_t segred_group_sizze_74825;
    
    segred_group_sizze_74825 =
        ctx->sizes.render_irregzisegred_group_sizze_74824;
    
    int32_t num_groups_74827;
    int32_t max_num_groups_76987;
    
    max_num_groups_76987 = ctx->sizes.render_irregzisegred_num_groups_74826;
    num_groups_74827 = sext_i64_i32(smax64(1, smin64(squot64(sub64(add64(10000,
                                                                         sext_i32_i64(segred_group_sizze_74825)),
                                                                   1),
                                                             sext_i32_i64(segred_group_sizze_74825)),
                                                     sext_i32_i64(max_num_groups_76987))));
    
    struct memblock_device mem_75974;
    
    mem_75974.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75974, 4, "mem_75974"))
        return 1;
    
    struct memblock_device mem_75977;
    
    mem_75977.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75977, 4, "mem_75977"))
        return 1;
    
    struct memblock_device mem_75980;
    
    mem_75980.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75980, 4, "mem_75980"))
        return 1;
    
    struct memblock_device mem_75983;
    
    mem_75983.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75983, 4, "mem_75983"))
        return 1;
    
    struct memblock_device mem_75986;
    
    mem_75986.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75986, 4, "mem_75986"))
        return 1;
    
    struct memblock_device mem_75989;
    
    mem_75989.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75989, 4, "mem_75989"))
        return 1;
    
    struct memblock_device counter_mem_76988 = ctx->counter_mem_76988;
    struct memblock_device group_res_arr_mem_76990;
    
    group_res_arr_mem_76990.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76990,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_74825,
                                          num_groups_74827)),
                              "group_res_arr_mem_76990"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76992;
    
    group_res_arr_mem_76992.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76992,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_74825,
                                          num_groups_74827)),
                              "group_res_arr_mem_76992"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76994;
    
    group_res_arr_mem_76994.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76994,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_74825,
                                          num_groups_74827)),
                              "group_res_arr_mem_76994"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76996;
    
    group_res_arr_mem_76996.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76996,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_74825,
                                          num_groups_74827)),
                              "group_res_arr_mem_76996"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76998;
    
    group_res_arr_mem_76998.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76998,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_74825,
                                          num_groups_74827)),
                              "group_res_arr_mem_76998"))
        return 1;
    
    struct memblock_device group_res_arr_mem_77000;
    
    group_res_arr_mem_77000.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_77000,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_74825,
                                          num_groups_74827)),
                              "group_res_arr_mem_77000"))
        return 1;
    
    int32_t num_threads_77002 = mul32(num_groups_74827,
                                      segred_group_sizze_74825);
    
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 1,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_74825),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 2,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_74825),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 3,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_74825),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 4,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_74825),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 5,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_74825),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 6,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_74825),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 7,
                                            (int32_t) sizeof(bool), NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 8,
                                            sizeof(num_groups_74827),
                                            &num_groups_74827));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 9,
                                            sizeof(mem_75974.mem),
                                            &mem_75974.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 10,
                                            sizeof(mem_75977.mem),
                                            &mem_75977.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 11,
                                            sizeof(mem_75980.mem),
                                            &mem_75980.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 12,
                                            sizeof(mem_75983.mem),
                                            &mem_75983.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 13,
                                            sizeof(mem_75986.mem),
                                            &mem_75986.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 14,
                                            sizeof(mem_75989.mem),
                                            &mem_75989.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 15,
                                            sizeof(counter_mem_76988.mem),
                                            &counter_mem_76988.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 16,
                                            sizeof(group_res_arr_mem_76990.mem),
                                            &group_res_arr_mem_76990.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 17,
                                            sizeof(group_res_arr_mem_76992.mem),
                                            &group_res_arr_mem_76992.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 18,
                                            sizeof(group_res_arr_mem_76994.mem),
                                            &group_res_arr_mem_76994.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 19,
                                            sizeof(group_res_arr_mem_76996.mem),
                                            &group_res_arr_mem_76996.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 20,
                                            sizeof(group_res_arr_mem_76998.mem),
                                            &group_res_arr_mem_76998.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 21,
                                            sizeof(group_res_arr_mem_77000.mem),
                                            &group_res_arr_mem_77000.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74837, 22,
                                            sizeof(num_threads_77002),
                                            &num_threads_77002));
    if (1 * (num_groups_74827 * segred_group_sizze_74825) != 0) {
        const size_t global_work_sizze_77239[1] = {num_groups_74827 *
                     segred_group_sizze_74825};
        const size_t local_work_sizze_77243[1] = {segred_group_sizze_74825};
        int64_t time_start_77240 = 0, time_end_77241 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segred_nonseg_74837");
            fprintf(stderr, "%zu", global_work_sizze_77239[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77243[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) (0 + mul32((int32_t) sizeof(float),
                                     segred_group_sizze_74825) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_74825) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_74825) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_74825) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_74825) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_74825) +
                           (int32_t) sizeof(bool)));
            time_start_77240 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segred_nonseg_74837,
                                                        1, NULL,
                                                        global_work_sizze_77239,
                                                        local_work_sizze_77243,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segred_nonseg_74837_runs,
                                                                                                  &ctx->segred_nonseg_74837_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77241 = get_wall_time();
            
            long time_diff_77242 = time_end_77241 - time_start_77240;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segred_nonseg_74837",
                    time_diff_77242);
        }
    }
    
    float read_res_77244;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75974.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77244,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_71535 = read_res_77244;
    
    if (memblock_unref_device(ctx, &mem_75974, "mem_75974") != 0)
        return 1;
    
    float read_res_77245;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75977.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77245,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_71536 = read_res_77245;
    
    if (memblock_unref_device(ctx, &mem_75977, "mem_75977") != 0)
        return 1;
    
    float read_res_77246;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75980.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77246,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_71537 = read_res_77246;
    
    if (memblock_unref_device(ctx, &mem_75980, "mem_75980") != 0)
        return 1;
    
    float read_res_77247;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75983.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77247,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_71538 = read_res_77247;
    
    if (memblock_unref_device(ctx, &mem_75983, "mem_75983") != 0)
        return 1;
    
    float read_res_77248;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75986.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77248,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_71539 = read_res_77248;
    
    if (memblock_unref_device(ctx, &mem_75986, "mem_75986") != 0)
        return 1;
    
    float read_res_77249;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75989.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77249,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_71540 = read_res_77249;
    
    if (memblock_unref_device(ctx, &mem_75989, "mem_75989") != 0)
        return 1;
    
    float y_71570 = res_71535 - res_71538;
    float y_71571 = res_71536 - res_71539;
    float y_71572 = res_71537 - res_71540;
    float x_71573 = 3.0F - res_71539;
    float res_71574 = x_71573 / y_71571;
    float max_arg_71575 = 1024.0F * res_71574;
    float res_71576 = fmax32(0.0F, max_arg_71575);
    float res_71577 = fmin32(1023.0F, res_71576);
    int32_t unsign_arg_71578 = fptoui_f32_i32(res_71577);
    int32_t x_71579 = mul32(65537, unsign_arg_71578);
    int32_t v_71580 = -16776961 & x_71579;
    int32_t x_71581 = mul32(257, v_71580);
    int32_t v_71582 = 251719695 & x_71581;
    int32_t x_71583 = mul32(17, v_71582);
    int32_t v_71584 = -1022611261 & x_71583;
    int32_t x_71585 = mul32(5, v_71584);
    int32_t v_71586 = 1227133513 & x_71585;
    int32_t y_71587 = mul32(2, v_71586);
    int32_t segmap_group_sizze_74843;
    
    segmap_group_sizze_74843 =
        ctx->sizes.render_irregzisegmap_group_sizze_74842;
    
    int64_t segmap_group_sizze_74844 = sext_i32_i64(segmap_group_sizze_74843);
    int64_t y_74845 = sub64(segmap_group_sizze_74844, 1);
    int64_t x_74846 = add64(10000, y_74845);
    int64_t segmap_usable_groups_64_74848 = squot64(x_74846,
                                                    segmap_group_sizze_74844);
    int32_t segmap_usable_groups_74849 =
            sext_i64_i32(segmap_usable_groups_64_74848);
    struct memblock_device mem_75992;
    
    mem_75992.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75992, 40000, "mem_75992"))
        return 1;
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74839, 1,
                                            sizeof(res_71538), &res_71538));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74839, 2,
                                            sizeof(res_71540), &res_71540));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74839, 3,
                                            sizeof(y_71570), &y_71570));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74839, 4,
                                            sizeof(y_71572), &y_71572));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74839, 5,
                                            sizeof(y_71587), &y_71587));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74839, 6,
                                            sizeof(mem_75992.mem),
                                            &mem_75992.mem));
    if (1 * (segmap_usable_groups_74849 * segmap_group_sizze_74843) != 0) {
        const size_t global_work_sizze_77250[1] = {segmap_usable_groups_74849 *
                     segmap_group_sizze_74843};
        const size_t local_work_sizze_77254[1] = {segmap_group_sizze_74843};
        int64_t time_start_77251 = 0, time_end_77252 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_74839");
            fprintf(stderr, "%zu", global_work_sizze_77250[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77254[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77251 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_74839, 1,
                                                        NULL,
                                                        global_work_sizze_77250,
                                                        local_work_sizze_77254,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_74839_runs,
                                                                                                  &ctx->segmap_74839_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77252 = get_wall_time();
            
            long time_diff_77253 = time_end_77252 - time_start_77251;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_74839",
                    time_diff_77253);
        }
    }
    
    struct memblock_device mem_75995;
    
    mem_75995.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75995, 40000, "mem_75995"))
        return 1;
    
    int32_t group_sizze_77062;
    
    group_sizze_77062 = ctx->sizes.render_irregzigroup_sizze_77062;
    
    int32_t num_groups_77063;
    
    num_groups_77063 = squot32(sub32(add32(10000,
                                           sext_i32_i32(group_sizze_77062)), 1),
                               sext_i32_i32(group_sizze_77062));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->iota_77059, 0,
                                            sizeof(mem_75995.mem),
                                            &mem_75995.mem));
    if (1 * (num_groups_77063 * group_sizze_77062) != 0) {
        const size_t global_work_sizze_77255[1] = {num_groups_77063 *
                     group_sizze_77062};
        const size_t local_work_sizze_77259[1] = {group_sizze_77062};
        int64_t time_start_77256 = 0, time_end_77257 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "iota_77059");
            fprintf(stderr, "%zu", global_work_sizze_77255[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77259[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77256 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->iota_77059, 1,
                                                        NULL,
                                                        global_work_sizze_77255,
                                                        local_work_sizze_77259,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->iota_77059_runs,
                                                                                                  &ctx->iota_77059_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77257 = get_wall_time();
            
            long time_diff_77258 = time_end_77257 - time_start_77256;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "iota_77059",
                    time_diff_77258);
        }
    }
    
    int32_t segmap_group_sizze_74896;
    
    segmap_group_sizze_74896 =
        ctx->sizes.render_irregzisegmap_group_sizze_74895;
    
    int64_t segmap_group_sizze_74897 = sext_i32_i64(segmap_group_sizze_74896);
    int64_t y_74898 = sub64(segmap_group_sizze_74897, 1);
    int64_t x_74899 = add64(10000, y_74898);
    int64_t x_75680 = squot64(x_74899, segmap_group_sizze_74897);
    int32_t segmap_usable_groups_74902 = sext_i64_i32(x_75680);
    int32_t segscan_group_sizze_74909;
    
    segscan_group_sizze_74909 =
        ctx->sizes.render_irregzisegscan_group_sizze_74908;
    
    int32_t num_groups_74911;
    int32_t max_num_groups_77064;
    
    max_num_groups_77064 = ctx->sizes.render_irregzisegscan_num_groups_74910;
    num_groups_74911 = sext_i64_i32(smax64(1, smin64(squot64(sub64(add64(10000,
                                                                         sext_i32_i64(segscan_group_sizze_74909)),
                                                                   1),
                                                             sext_i32_i64(segscan_group_sizze_74909)),
                                                     sext_i32_i64(max_num_groups_77064))));
    
    int32_t segred_group_sizze_74918;
    
    segred_group_sizze_74918 =
        ctx->sizes.render_irregzisegred_group_sizze_74917;
    
    int32_t num_groups_74920;
    int32_t max_num_groups_77065;
    
    max_num_groups_77065 = ctx->sizes.render_irregzisegred_num_groups_74919;
    num_groups_74920 = sext_i64_i32(smax64(1, smin64(squot64(sub64(add64(10000,
                                                                         sext_i32_i64(segred_group_sizze_74918)),
                                                                   1),
                                                             sext_i32_i64(segred_group_sizze_74918)),
                                                     sext_i32_i64(max_num_groups_77065))));
    
    int32_t segmap_group_sizze_74933;
    
    segmap_group_sizze_74933 =
        ctx->sizes.render_irregzisegmap_group_sizze_74932;
    
    int64_t segmap_group_sizze_74934 = sext_i32_i64(segmap_group_sizze_74933);
    int64_t y_74935 = sub64(segmap_group_sizze_74934, 1);
    int64_t x_74936 = add64(10000, y_74935);
    int64_t x_75682 = squot64(x_74936, segmap_group_sizze_74934);
    int32_t segmap_usable_groups_74939 = sext_i64_i32(x_75682);
    struct memblock_device mem_76000;
    
    mem_76000.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76000, 40000, "mem_76000"))
        return 1;
    
    struct memblock_device mem_76004;
    
    mem_76004.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76004, 40000, "mem_76004"))
        return 1;
    
    struct memblock_device mem_76007;
    
    mem_76007.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76007, 40000, "mem_76007"))
        return 1;
    
    struct memblock_device mem_76010;
    
    mem_76010.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76010, 40000, "mem_76010"))
        return 1;
    
    struct memblock_device mem_76014;
    
    mem_76014.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76014, 4, "mem_76014"))
        return 1;
    
    struct memblock_device mem_76019;
    
    mem_76019.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76019, 40000, "mem_76019"))
        return 1;
    
    struct memblock_device mem_76024;
    
    mem_76024.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76024, 40000, "mem_76024"))
        return 1;
    
    struct memblock_device res_mem_76033;
    
    res_mem_76033.references = NULL;
    
    struct memblock_device res_mem_76034;
    
    res_mem_76034.references = NULL;
    
    struct memblock_device xs_mem_75996;
    
    xs_mem_75996.references = NULL;
    
    struct memblock_device xs_mem_75997;
    
    xs_mem_75997.references = NULL;
    if (memblock_set_device(ctx, &xs_mem_75996, &mem_75992, "mem_75992") != 0)
        return 1;
    if (memblock_set_device(ctx, &xs_mem_75997, &mem_75995, "mem_75995") != 0)
        return 1;
    for (int32_t i_71635 = 0; i_71635 < 32; i_71635++) {
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74892, 1,
                                                sizeof(i_71635), &i_71635));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74892, 2,
                                                sizeof(xs_mem_75996.mem),
                                                &xs_mem_75996.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74892, 3,
                                                sizeof(mem_76000.mem),
                                                &mem_76000.mem));
        if (1 * (segmap_usable_groups_74902 * segmap_group_sizze_74896) != 0) {
            const size_t global_work_sizze_77260[1] =
                         {segmap_usable_groups_74902 *
                         segmap_group_sizze_74896};
            const size_t local_work_sizze_77264[1] = {segmap_group_sizze_74896};
            int64_t time_start_77261 = 0, time_end_77262 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "segmap_74892");
                fprintf(stderr, "%zu", global_work_sizze_77260[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77264[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_77261 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->segmap_74892,
                                                            1, NULL,
                                                            global_work_sizze_77260,
                                                            local_work_sizze_77264,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->segmap_74892_runs,
                                                                                                      &ctx->segmap_74892_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77262 = get_wall_time();
                
                long time_diff_77263 = time_end_77262 - time_start_77261;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_74892",
                        time_diff_77263);
            }
        }
        
        int32_t num_threads_77075 = mul32(num_groups_74911,
                                          segscan_group_sizze_74909);
        
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_74914, 1,
                                                mul32((int32_t) sizeof(int32_t),
                                                      segscan_group_sizze_74909),
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_74914, 2,
                                                mul32((int32_t) sizeof(int32_t),
                                                      segscan_group_sizze_74909),
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_74914, 3,
                                                sizeof(mem_76000.mem),
                                                &mem_76000.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_74914, 4,
                                                sizeof(mem_76004.mem),
                                                &mem_76004.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_74914, 5,
                                                sizeof(mem_76007.mem),
                                                &mem_76007.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_74914, 6,
                                                sizeof(mem_76010.mem),
                                                &mem_76010.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_74914, 7,
                                                sizeof(num_threads_77075),
                                                &num_threads_77075));
        if (1 * (num_groups_74911 * segscan_group_sizze_74909) != 0) {
            const size_t global_work_sizze_77265[1] = {num_groups_74911 *
                         segscan_group_sizze_74909};
            const size_t local_work_sizze_77269[1] =
                         {segscan_group_sizze_74909};
            int64_t time_start_77266 = 0, time_end_77267 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "scan_stage1_74914");
                fprintf(stderr, "%zu", global_work_sizze_77265[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77269[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) (0 + mul32((int32_t) sizeof(int32_t),
                                         segscan_group_sizze_74909) +
                               mul32((int32_t) sizeof(int32_t),
                                     segscan_group_sizze_74909)));
                time_start_77266 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->scan_stage1_74914,
                                                            1, NULL,
                                                            global_work_sizze_77265,
                                                            local_work_sizze_77269,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->scan_stage1_74914_runs,
                                                                                                      &ctx->scan_stage1_74914_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77267 = get_wall_time();
                
                long time_diff_77268 = time_end_77267 - time_start_77266;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "scan_stage1_74914", time_diff_77268);
            }
        }
        if (ctx->debugging)
            fprintf(stderr, "%s\n", "\n# SegScan");
        if (ctx->debugging)
            fprintf(stderr, "%s: %llu%c", "elems_per_group",
                    (long long) mul32(segscan_group_sizze_74909,
                                      squot32(sub32(add32(10000,
                                                          num_threads_77075),
                                                    1), num_threads_77075)),
                    '\n');
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_74914, 1,
                                                mul32((int32_t) sizeof(int32_t),
                                                      num_groups_74911), NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_74914, 2,
                                                mul32((int32_t) sizeof(int32_t),
                                                      num_groups_74911), NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_74914, 3,
                                                sizeof(num_groups_74911),
                                                &num_groups_74911));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_74914, 4,
                                                sizeof(mem_76004.mem),
                                                &mem_76004.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_74914, 5,
                                                sizeof(mem_76007.mem),
                                                &mem_76007.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_74914, 6,
                                                sizeof(num_threads_77075),
                                                &num_threads_77075));
        if (1 * (1 * num_groups_74911) != 0) {
            const size_t global_work_sizze_77270[1] = {1 * num_groups_74911};
            const size_t local_work_sizze_77274[1] = {num_groups_74911};
            int64_t time_start_77271 = 0, time_end_77272 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "scan_stage2_74914");
                fprintf(stderr, "%zu", global_work_sizze_77270[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77274[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) (0 + mul32((int32_t) sizeof(int32_t),
                                         num_groups_74911) +
                               mul32((int32_t) sizeof(int32_t),
                                     num_groups_74911)));
                time_start_77271 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->scan_stage2_74914,
                                                            1, NULL,
                                                            global_work_sizze_77270,
                                                            local_work_sizze_77274,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->scan_stage2_74914_runs,
                                                                                                      &ctx->scan_stage2_74914_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77272 = get_wall_time();
                
                long time_diff_77273 = time_end_77272 - time_start_77271;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "scan_stage2_74914", time_diff_77273);
            }
        }
        
        int32_t group_sizze_77135;
        
        group_sizze_77135 = ctx->sizes.render_irregzigroup_sizze_77135;
        
        int32_t num_groups_77136;
        
        num_groups_77136 = squot32(sub32(add32(10000,
                                               sext_i32_i32(group_sizze_77135)),
                                         1), sext_i32_i32(group_sizze_77135));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage3_77132, 1,
                                                sizeof(mem_76004.mem),
                                                &mem_76004.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage3_77132, 2,
                                                sizeof(mem_76007.mem),
                                                &mem_76007.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage3_77132, 3,
                                                sizeof(num_threads_77075),
                                                &num_threads_77075));
        if (1 * (num_groups_77136 * group_sizze_77135) != 0) {
            const size_t global_work_sizze_77275[1] = {num_groups_77136 *
                         group_sizze_77135};
            const size_t local_work_sizze_77279[1] = {group_sizze_77135};
            int64_t time_start_77276 = 0, time_end_77277 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "scan_stage3_77132");
                fprintf(stderr, "%zu", global_work_sizze_77275[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77279[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_77276 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->scan_stage3_77132,
                                                            1, NULL,
                                                            global_work_sizze_77275,
                                                            local_work_sizze_77279,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->scan_stage3_77132_runs,
                                                                                                      &ctx->scan_stage3_77132_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77277 = get_wall_time();
                
                long time_diff_77278 = time_end_77277 - time_start_77276;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "scan_stage3_77132", time_diff_77278);
            }
        }
        
        struct memblock_device counter_mem_77139 = ctx->counter_mem_77139;
        struct memblock_device group_res_arr_mem_77141;
        
        group_res_arr_mem_77141.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_77141,
                                  mul32((int32_t) sizeof(int32_t),
                                        mul32(segred_group_sizze_74918,
                                              num_groups_74920)),
                                  "group_res_arr_mem_77141"))
            return 1;
        
        int32_t num_threads_77143 = mul32(num_groups_74920,
                                          segred_group_sizze_74918);
        
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74927, 1,
                                                mul32((int32_t) sizeof(int32_t),
                                                      segred_group_sizze_74918),
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74927, 2,
                                                (int32_t) sizeof(bool), NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74927, 3,
                                                sizeof(num_groups_74920),
                                                &num_groups_74920));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74927, 4,
                                                sizeof(xs_mem_75996.mem),
                                                &xs_mem_75996.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74927, 5,
                                                sizeof(xs_mem_75997.mem),
                                                &xs_mem_75997.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74927, 6,
                                                sizeof(mem_76010.mem),
                                                &mem_76010.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74927, 7,
                                                sizeof(mem_76014.mem),
                                                &mem_76014.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74927, 8,
                                                sizeof(mem_76019.mem),
                                                &mem_76019.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74927, 9,
                                                sizeof(mem_76024.mem),
                                                &mem_76024.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74927, 10,
                                                sizeof(counter_mem_77139.mem),
                                                &counter_mem_77139.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74927, 11,
                                                sizeof(group_res_arr_mem_77141.mem),
                                                &group_res_arr_mem_77141.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_74927, 12,
                                                sizeof(num_threads_77143),
                                                &num_threads_77143));
        if (1 * (num_groups_74920 * segred_group_sizze_74918) != 0) {
            const size_t global_work_sizze_77281[1] = {num_groups_74920 *
                         segred_group_sizze_74918};
            const size_t local_work_sizze_77285[1] = {segred_group_sizze_74918};
            int64_t time_start_77282 = 0, time_end_77283 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "segred_nonseg_74927");
                fprintf(stderr, "%zu", global_work_sizze_77281[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77285[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) (0 + mul32((int32_t) sizeof(int32_t),
                                         segred_group_sizze_74918) +
                               (int32_t) sizeof(bool)));
                time_start_77282 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->segred_nonseg_74927,
                                                            1, NULL,
                                                            global_work_sizze_77281,
                                                            local_work_sizze_77285,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->segred_nonseg_74927_runs,
                                                                                                      &ctx->segred_nonseg_74927_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77283 = get_wall_time();
                
                long time_diff_77284 = time_end_77283 - time_start_77282;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "segred_nonseg_74927", time_diff_77284);
            }
        }
        
        int32_t read_res_77286;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_76014.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int32_t),
                                                     sizeof(int32_t),
                                                     &read_res_77286, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int32_t res_71667 = read_res_77286;
        
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74929, 1,
                                                sizeof(res_71667), &res_71667));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74929, 2,
                                                sizeof(xs_mem_75996.mem),
                                                &xs_mem_75996.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74929, 3,
                                                sizeof(xs_mem_75997.mem),
                                                &xs_mem_75997.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74929, 4,
                                                sizeof(mem_76000.mem),
                                                &mem_76000.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74929, 5,
                                                sizeof(mem_76004.mem),
                                                &mem_76004.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74929, 6,
                                                sizeof(mem_76007.mem),
                                                &mem_76007.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74929, 7,
                                                sizeof(mem_76010.mem),
                                                &mem_76010.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74929, 8,
                                                sizeof(mem_76019.mem),
                                                &mem_76019.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74929, 9,
                                                sizeof(mem_76024.mem),
                                                &mem_76024.mem));
        if (1 * (segmap_usable_groups_74939 * segmap_group_sizze_74933) != 0) {
            const size_t global_work_sizze_77287[1] =
                         {segmap_usable_groups_74939 *
                         segmap_group_sizze_74933};
            const size_t local_work_sizze_77291[1] = {segmap_group_sizze_74933};
            int64_t time_start_77288 = 0, time_end_77289 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "segmap_74929");
                fprintf(stderr, "%zu", global_work_sizze_77287[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77291[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_77288 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->segmap_74929,
                                                            1, NULL,
                                                            global_work_sizze_77287,
                                                            local_work_sizze_77291,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->segmap_74929_runs,
                                                                                                      &ctx->segmap_74929_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77289 = get_wall_time();
                
                long time_diff_77290 = time_end_77289 - time_start_77288;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_74929",
                        time_diff_77290);
            }
        }
        
        struct memblock_device mem_76027;
        
        mem_76027.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76027, 40000, "mem_76027"))
            return 1;
        if (mul64(sext_i32_i64(10000), (int32_t) sizeof(int32_t)) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         mem_76024.mem,
                                                         mem_76027.mem, 0, 0,
                                                         mul64(sext_i32_i64(10000),
                                                               (int32_t) sizeof(int32_t)),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device mem_76031;
        
        mem_76031.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76031, 40000, "mem_76031"))
            return 1;
        if (mul64(sext_i32_i64(10000), (int32_t) sizeof(int32_t)) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         mem_76019.mem,
                                                         mem_76031.mem, 0, 0,
                                                         mul64(sext_i32_i64(10000),
                                                               (int32_t) sizeof(int32_t)),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device xs_mem_tmp_77066;
        
        xs_mem_tmp_77066.references = NULL;
        if (memblock_set_device(ctx, &xs_mem_tmp_77066, &mem_76027,
                                "mem_76027") != 0)
            return 1;
        
        struct memblock_device xs_mem_tmp_77067;
        
        xs_mem_tmp_77067.references = NULL;
        if (memblock_set_device(ctx, &xs_mem_tmp_77067, &mem_76031,
                                "mem_76031") != 0)
            return 1;
        if (memblock_set_device(ctx, &xs_mem_75996, &xs_mem_tmp_77066,
                                "xs_mem_tmp_77066") != 0)
            return 1;
        if (memblock_set_device(ctx, &xs_mem_75997, &xs_mem_tmp_77067,
                                "xs_mem_tmp_77067") != 0)
            return 1;
        if (memblock_unref_device(ctx, &xs_mem_tmp_77067, "xs_mem_tmp_77067") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &xs_mem_tmp_77066, "xs_mem_tmp_77066") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76031, "mem_76031") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76027, "mem_76027") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_77141,
                                  "group_res_arr_mem_77141") != 0)
            return 1;
    }
    if (memblock_set_device(ctx, &res_mem_76033, &xs_mem_75996,
                            "xs_mem_75996") != 0)
        return 1;
    if (memblock_set_device(ctx, &res_mem_76034, &xs_mem_75997,
                            "xs_mem_75997") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75992, "mem_75992") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75995, "mem_75995") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76000, "mem_76000") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76004, "mem_76004") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76007, "mem_76007") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76010, "mem_76010") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76014, "mem_76014") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76019, "mem_76019") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76024, "mem_76024") != 0)
        return 1;
    
    int32_t segmap_group_sizze_74945;
    
    segmap_group_sizze_74945 =
        ctx->sizes.render_irregzisegmap_group_sizze_74944;
    
    int64_t segmap_group_sizze_74946 = sext_i32_i64(segmap_group_sizze_74945);
    int64_t y_74947 = sub64(segmap_group_sizze_74946, 1);
    int64_t x_74948 = add64(10000, y_74947);
    int64_t segmap_usable_groups_64_74950 = squot64(x_74948,
                                                    segmap_group_sizze_74946);
    int32_t segmap_usable_groups_74951 =
            sext_i64_i32(segmap_usable_groups_64_74950);
    struct memblock_device mem_76037;
    
    mem_76037.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76037, 40000, "mem_76037"))
        return 1;
    
    struct memblock_device mem_76040;
    
    mem_76040.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76040, 40000, "mem_76040"))
        return 1;
    
    struct memblock_device mem_76043;
    
    mem_76043.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76043, 40000, "mem_76043"))
        return 1;
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74941, 1,
                                            sizeof(res_71538), &res_71538));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74941, 2,
                                            sizeof(res_71540), &res_71540));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74941, 3,
                                            sizeof(y_71570), &y_71570));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74941, 4,
                                            sizeof(y_71572), &y_71572));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74941, 5,
                                            sizeof(y_71587), &y_71587));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74941, 6,
                                            sizeof(res_mem_76034.mem),
                                            &res_mem_76034.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74941, 7,
                                            sizeof(mem_76037.mem),
                                            &mem_76037.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74941, 8,
                                            sizeof(mem_76040.mem),
                                            &mem_76040.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74941, 9,
                                            sizeof(mem_76043.mem),
                                            &mem_76043.mem));
    if (1 * (segmap_usable_groups_74951 * segmap_group_sizze_74945) != 0) {
        const size_t global_work_sizze_77292[1] = {segmap_usable_groups_74951 *
                     segmap_group_sizze_74945};
        const size_t local_work_sizze_77296[1] = {segmap_group_sizze_74945};
        int64_t time_start_77293 = 0, time_end_77294 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_74941");
            fprintf(stderr, "%zu", global_work_sizze_77292[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77296[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77293 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_74941, 1,
                                                        NULL,
                                                        global_work_sizze_77292,
                                                        local_work_sizze_77296,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_74941_runs,
                                                                                                  &ctx->segmap_74941_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77294 = get_wall_time();
            
            long time_diff_77295 = time_end_77294 - time_start_77293;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_74941",
                    time_diff_77295);
        }
    }
    if (memblock_unref_device(ctx, &res_mem_76034, "res_mem_76034") != 0)
        return 1;
    
    int32_t segmap_group_sizze_75004;
    
    segmap_group_sizze_75004 =
        ctx->sizes.render_irregzisegmap_group_sizze_75003;
    
    int64_t segmap_group_sizze_75005 = sext_i32_i64(segmap_group_sizze_75004);
    int64_t y_75006 = sub64(segmap_group_sizze_75005, 1);
    int64_t x_75007 = add64(9999, y_75006);
    int64_t segmap_usable_groups_64_75009 = squot64(x_75007,
                                                    segmap_group_sizze_75005);
    int32_t segmap_usable_groups_75010 =
            sext_i64_i32(segmap_usable_groups_64_75009);
    struct memblock_device mem_76045;
    
    mem_76045.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76045, 9999, "mem_76045"))
        return 1;
    
    struct memblock_device mem_76048;
    
    mem_76048.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76048, 39996, "mem_76048"))
        return 1;
    
    struct memblock_device mem_76050;
    
    mem_76050.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76050, 9999, "mem_76050"))
        return 1;
    
    struct memblock_device mem_76053;
    
    mem_76053.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76053, 39996, "mem_76053"))
        return 1;
    
    struct memblock_device mem_76056;
    
    mem_76056.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76056, 39996, "mem_76056"))
        return 1;
    
    struct memblock_device mem_76059;
    
    mem_76059.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76059, 39996, "mem_76059"))
        return 1;
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75000, 1,
                                            sizeof(ctx->failure_is_an_option),
                                            &ctx->failure_is_an_option));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75000, 3,
                                            sizeof(mem_76037.mem),
                                            &mem_76037.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75000, 4,
                                            sizeof(mem_76045.mem),
                                            &mem_76045.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75000, 5,
                                            sizeof(mem_76048.mem),
                                            &mem_76048.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75000, 6,
                                            sizeof(mem_76050.mem),
                                            &mem_76050.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75000, 7,
                                            sizeof(mem_76053.mem),
                                            &mem_76053.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75000, 8,
                                            sizeof(mem_76056.mem),
                                            &mem_76056.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75000, 9,
                                            sizeof(mem_76059.mem),
                                            &mem_76059.mem));
    if (1 * (segmap_usable_groups_75010 * segmap_group_sizze_75004) != 0) {
        const size_t global_work_sizze_77297[1] = {segmap_usable_groups_75010 *
                     segmap_group_sizze_75004};
        const size_t local_work_sizze_77301[1] = {segmap_group_sizze_75004};
        int64_t time_start_77298 = 0, time_end_77299 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_75000");
            fprintf(stderr, "%zu", global_work_sizze_77297[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77301[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77298 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_75000, 1,
                                                        NULL,
                                                        global_work_sizze_77297,
                                                        local_work_sizze_77301,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_75000_runs,
                                                                                                  &ctx->segmap_75000_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77299 = get_wall_time();
            
            long time_diff_77300 = time_end_77299 - time_start_77298;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_75000",
                    time_diff_77300);
        }
    }
    ctx->failure_is_an_option = 1;
    if (memblock_unref_device(ctx, &mem_76037, "mem_76037") != 0)
        return 1;
    
    struct memblock_device mem_76062;
    
    mem_76062.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76062, 39996, "mem_76062"))
        return 1;
    
    int call_ret_77302 = futrts__replicate_i32(ctx, mem_76062, 9999, -1);
    
    assert(call_ret_77302 == 0);
    
    int32_t segmap_group_sizze_75176;
    
    segmap_group_sizze_75176 =
        ctx->sizes.render_irregzisegmap_group_sizze_75175;
    
    int64_t segmap_group_sizze_75177 = sext_i32_i64(segmap_group_sizze_75176);
    int64_t y_75178 = sub64(segmap_group_sizze_75177, 1);
    int64_t x_75179 = add64(9999, y_75178);
    int64_t segmap_usable_groups_64_75181 = squot64(x_75179,
                                                    segmap_group_sizze_75177);
    int32_t segmap_usable_groups_75182 =
            sext_i64_i32(segmap_usable_groups_64_75181);
    
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75172, 1,
                                            sizeof(mem_76056.mem),
                                            &mem_76056.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75172, 2,
                                            sizeof(mem_76059.mem),
                                            &mem_76059.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75172, 3,
                                            sizeof(mem_76062.mem),
                                            &mem_76062.mem));
    if (1 * (segmap_usable_groups_75182 * segmap_group_sizze_75176) != 0) {
        const size_t global_work_sizze_77303[1] = {segmap_usable_groups_75182 *
                     segmap_group_sizze_75176};
        const size_t local_work_sizze_77307[1] = {segmap_group_sizze_75176};
        int64_t time_start_77304 = 0, time_end_77305 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_75172");
            fprintf(stderr, "%zu", global_work_sizze_77303[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77307[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77304 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_75172, 1,
                                                        NULL,
                                                        global_work_sizze_77303,
                                                        local_work_sizze_77307,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_75172_runs,
                                                                                                  &ctx->segmap_75172_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77305 = get_wall_time();
            
            long time_diff_77306 = time_end_77305 - time_start_77304;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_75172",
                    time_diff_77306);
        }
    }
    if (memblock_unref_device(ctx, &mem_76056, "mem_76056") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76059, "mem_76059") != 0)
        return 1;
    
    struct memblock_device mem_76065;
    
    mem_76065.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76065, 39996, "mem_76065"))
        return 1;
    
    int call_ret_77308 = futrts__replicate_f32(ctx, mem_76065, 9999, 0.0F);
    
    assert(call_ret_77308 == 0);
    
    int32_t segmap_group_sizze_75188;
    
    segmap_group_sizze_75188 =
        ctx->sizes.render_irregzisegmap_group_sizze_75187;
    
    int64_t segmap_group_sizze_75189 = sext_i32_i64(segmap_group_sizze_75188);
    int64_t y_75190 = sub64(segmap_group_sizze_75189, 1);
    int64_t x_75191 = add64(9999, y_75190);
    int64_t x_75690 = squot64(x_75191, segmap_group_sizze_75189);
    int32_t segmap_usable_groups_75194 = sext_i64_i32(x_75690);
    struct memblock_device inners_mem_76090;
    
    inners_mem_76090.references = NULL;
    
    struct memblock_device inners_mem_76091;
    
    inners_mem_76091.references = NULL;
    
    struct memblock_device inners_mem_76092;
    
    inners_mem_76092.references = NULL;
    
    struct memblock_device inners_mem_76093;
    
    inners_mem_76093.references = NULL;
    
    struct memblock_device inners_mem_76094;
    
    inners_mem_76094.references = NULL;
    
    struct memblock_device inners_mem_76095;
    
    inners_mem_76095.references = NULL;
    
    struct memblock_device inners_mem_76066;
    
    inners_mem_76066.references = NULL;
    
    struct memblock_device inners_mem_76067;
    
    inners_mem_76067.references = NULL;
    
    struct memblock_device inners_mem_76068;
    
    inners_mem_76068.references = NULL;
    
    struct memblock_device inners_mem_76069;
    
    inners_mem_76069.references = NULL;
    
    struct memblock_device inners_mem_76070;
    
    inners_mem_76070.references = NULL;
    
    struct memblock_device inners_mem_76071;
    
    inners_mem_76071.references = NULL;
    if (memblock_set_device(ctx, &inners_mem_76066, &mem_76065, "mem_76065") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76067, &mem_76065, "mem_76065") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76068, &mem_76065, "mem_76065") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76069, &mem_76065, "mem_76065") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76070, &mem_76065, "mem_76065") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76071, &mem_76065, "mem_76065") !=
        0)
        return 1;
    for (int32_t _i_71935 = 0; _i_71935 < 15; _i_71935++) {
        struct memblock_device mem_76074;
        
        mem_76074.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76074, 39996, "mem_76074"))
            return 1;
        
        struct memblock_device mem_76077;
        
        mem_76077.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76077, 39996, "mem_76077"))
            return 1;
        
        struct memblock_device mem_76080;
        
        mem_76080.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76080, 39996, "mem_76080"))
            return 1;
        
        struct memblock_device mem_76083;
        
        mem_76083.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76083, 39996, "mem_76083"))
            return 1;
        
        struct memblock_device mem_76086;
        
        mem_76086.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76086, 39996, "mem_76086"))
            return 1;
        
        struct memblock_device mem_76089;
        
        mem_76089.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76089, 39996, "mem_76089"))
            return 1;
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 1,
                                                sizeof(mem_76040.mem),
                                                &mem_76040.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 2,
                                                sizeof(mem_76043.mem),
                                                &mem_76043.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 3,
                                                sizeof(mem_76045.mem),
                                                &mem_76045.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 4,
                                                sizeof(mem_76048.mem),
                                                &mem_76048.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 5,
                                                sizeof(mem_76050.mem),
                                                &mem_76050.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 6,
                                                sizeof(mem_76053.mem),
                                                &mem_76053.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 7,
                                                sizeof(inners_mem_76066.mem),
                                                &inners_mem_76066.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 8,
                                                sizeof(inners_mem_76067.mem),
                                                &inners_mem_76067.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 9,
                                                sizeof(inners_mem_76068.mem),
                                                &inners_mem_76068.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 10,
                                                sizeof(inners_mem_76069.mem),
                                                &inners_mem_76069.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 11,
                                                sizeof(inners_mem_76070.mem),
                                                &inners_mem_76070.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 12,
                                                sizeof(inners_mem_76071.mem),
                                                &inners_mem_76071.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 13,
                                                sizeof(mem_76074.mem),
                                                &mem_76074.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 14,
                                                sizeof(mem_76077.mem),
                                                &mem_76077.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 15,
                                                sizeof(mem_76080.mem),
                                                &mem_76080.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 16,
                                                sizeof(mem_76083.mem),
                                                &mem_76083.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 17,
                                                sizeof(mem_76086.mem),
                                                &mem_76086.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75184, 18,
                                                sizeof(mem_76089.mem),
                                                &mem_76089.mem));
        if (1 * (segmap_usable_groups_75194 * segmap_group_sizze_75188) != 0) {
            const size_t global_work_sizze_77309[1] =
                         {segmap_usable_groups_75194 *
                         segmap_group_sizze_75188};
            const size_t local_work_sizze_77313[1] = {segmap_group_sizze_75188};
            int64_t time_start_77310 = 0, time_end_77311 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "segmap_75184");
                fprintf(stderr, "%zu", global_work_sizze_77309[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77313[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_77310 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->segmap_75184,
                                                            1, NULL,
                                                            global_work_sizze_77309,
                                                            local_work_sizze_77313,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->segmap_75184_runs,
                                                                                                      &ctx->segmap_75184_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77311 = get_wall_time();
                
                long time_diff_77312 = time_end_77311 - time_start_77310;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_75184",
                        time_diff_77312);
            }
        }
        
        struct memblock_device inners_mem_tmp_77193;
        
        inners_mem_tmp_77193.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_77193, &mem_76074,
                                "mem_76074") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_77194;
        
        inners_mem_tmp_77194.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_77194, &mem_76077,
                                "mem_76077") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_77195;
        
        inners_mem_tmp_77195.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_77195, &mem_76080,
                                "mem_76080") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_77196;
        
        inners_mem_tmp_77196.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_77196, &mem_76083,
                                "mem_76083") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_77197;
        
        inners_mem_tmp_77197.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_77197, &mem_76086,
                                "mem_76086") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_77198;
        
        inners_mem_tmp_77198.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_77198, &mem_76089,
                                "mem_76089") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76066, &inners_mem_tmp_77193,
                                "inners_mem_tmp_77193") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76067, &inners_mem_tmp_77194,
                                "inners_mem_tmp_77194") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76068, &inners_mem_tmp_77195,
                                "inners_mem_tmp_77195") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76069, &inners_mem_tmp_77196,
                                "inners_mem_tmp_77196") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76070, &inners_mem_tmp_77197,
                                "inners_mem_tmp_77197") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76071, &inners_mem_tmp_77198,
                                "inners_mem_tmp_77198") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_77198,
                                  "inners_mem_tmp_77198") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_77197,
                                  "inners_mem_tmp_77197") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_77196,
                                  "inners_mem_tmp_77196") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_77195,
                                  "inners_mem_tmp_77195") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_77194,
                                  "inners_mem_tmp_77194") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_77193,
                                  "inners_mem_tmp_77193") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76089, "mem_76089") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76086, "mem_76086") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76083, "mem_76083") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76080, "mem_76080") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76077, "mem_76077") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76074, "mem_76074") != 0)
            return 1;
    }
    if (memblock_set_device(ctx, &inners_mem_76090, &inners_mem_76066,
                            "inners_mem_76066") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76091, &inners_mem_76067,
                            "inners_mem_76067") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76092, &inners_mem_76068,
                            "inners_mem_76068") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76093, &inners_mem_76069,
                            "inners_mem_76069") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76094, &inners_mem_76070,
                            "inners_mem_76070") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76095, &inners_mem_76071,
                            "inners_mem_76071") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76065, "mem_76065") != 0)
        return 1;
    
    float res_71990 = sitofp_i32_f32(w_71518);
    float res_71991 = sitofp_i32_f32(h_71517);
    float camera_arg_71992 = res_71990 / res_71991;
    float half_width_71993 = 0.7673271F * camera_arg_71992;
    float res_71994 = 0.0F - half_width_71993;
    float scale_arg_71995 = 2.0F * half_width_71993;
    bool bounds_invalid_upwards_71996 = slt32(h_71517, 0);
    bool valid_71997 = !bounds_invalid_upwards_71996;
    bool range_valid_c_71998;
    
    if (!valid_71997) {
        ctx->error = msgprintf("Error: %s%d%s%d%s%d%s\n\nBacktrace:\n%s",
                               "Range ", 0, "..", 1, "..<", h_71517,
                               " is invalid.",
                               "-> #0  /futlib/math.fut:413:23-30\n   #1  /futlib/array.fut:60:3-12\n   #2  /futlib/array.fut:130:28-33\n   #3  ray.fut:168:6-35\n   #4  ray.fut:256:6-24\n   #5  ray.fut:254:1-256:24\n");
        if (memblock_unref_device(ctx, &inners_mem_76071, "inners_mem_76071") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76070, "inners_mem_76070") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76069, "inners_mem_76069") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76068, "inners_mem_76068") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76067, "inners_mem_76067") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76066, "inners_mem_76066") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76095, "inners_mem_76095") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76094, "inners_mem_76094") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76093, "inners_mem_76093") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76092, "inners_mem_76092") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76091, "inners_mem_76091") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76090, "inners_mem_76090") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76065, "mem_76065") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76062, "mem_76062") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76059, "mem_76059") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76056, "mem_76056") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76053, "mem_76053") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76050, "mem_76050") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76048, "mem_76048") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76045, "mem_76045") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76043, "mem_76043") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76040, "mem_76040") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76037, "mem_76037") != 0)
            return 1;
        if (memblock_unref_device(ctx, &xs_mem_75997, "xs_mem_75997") != 0)
            return 1;
        if (memblock_unref_device(ctx, &xs_mem_75996, "xs_mem_75996") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_76034, "res_mem_76034") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_76033, "res_mem_76033") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76024, "mem_76024") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76019, "mem_76019") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76014, "mem_76014") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76010, "mem_76010") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76007, "mem_76007") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76004, "mem_76004") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76000, "mem_76000") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75995, "mem_75995") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75992, "mem_75992") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_77000,
                                  "group_res_arr_mem_77000") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76998,
                                  "group_res_arr_mem_76998") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76996,
                                  "group_res_arr_mem_76996") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76994,
                                  "group_res_arr_mem_76994") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76992,
                                  "group_res_arr_mem_76992") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76990,
                                  "group_res_arr_mem_76990") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75989, "mem_75989") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75986, "mem_75986") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75983, "mem_75983") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75980, "mem_75980") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75977, "mem_75977") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75974, "mem_75974") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_76984, "out_mem_76984") != 0)
            return 1;
        return 1;
    }
    
    bool bounds_invalid_upwards_72000 = slt32(w_71518, 0);
    bool valid_72001 = !bounds_invalid_upwards_72000;
    bool range_valid_c_72002;
    
    if (!valid_72001) {
        ctx->error = msgprintf("Error: %s%d%s%d%s%d%s\n\nBacktrace:\n%s",
                               "Range ", 0, "..", 1, "..<", w_71518,
                               " is invalid.",
                               "-> #0  /futlib/math.fut:413:23-30\n   #1  /futlib/array.fut:60:3-12\n   #2  /futlib/array.fut:126:11-16\n   #3  /futlib/functional.fut:15:59-65\n   #4  /futlib/soacs.fut:48:3-10\n   #5  /futlib/array.fut:130:3-34\n   #6  ray.fut:168:6-35\n   #7  ray.fut:256:6-24\n   #8  ray.fut:254:1-256:24\n");
        if (memblock_unref_device(ctx, &inners_mem_76071, "inners_mem_76071") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76070, "inners_mem_76070") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76069, "inners_mem_76069") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76068, "inners_mem_76068") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76067, "inners_mem_76067") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76066, "inners_mem_76066") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76095, "inners_mem_76095") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76094, "inners_mem_76094") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76093, "inners_mem_76093") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76092, "inners_mem_76092") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76091, "inners_mem_76091") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76090, "inners_mem_76090") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76065, "mem_76065") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76062, "mem_76062") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76059, "mem_76059") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76056, "mem_76056") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76053, "mem_76053") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76050, "mem_76050") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76048, "mem_76048") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76045, "mem_76045") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76043, "mem_76043") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76040, "mem_76040") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76037, "mem_76037") != 0)
            return 1;
        if (memblock_unref_device(ctx, &xs_mem_75997, "xs_mem_75997") != 0)
            return 1;
        if (memblock_unref_device(ctx, &xs_mem_75996, "xs_mem_75996") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_76034, "res_mem_76034") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_76033, "res_mem_76033") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76024, "mem_76024") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76019, "mem_76019") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76014, "mem_76014") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76010, "mem_76010") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76007, "mem_76007") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76004, "mem_76004") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76000, "mem_76000") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75995, "mem_75995") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75992, "mem_75992") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_77000,
                                  "group_res_arr_mem_77000") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76998,
                                  "group_res_arr_mem_76998") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76996,
                                  "group_res_arr_mem_76996") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76994,
                                  "group_res_arr_mem_76994") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76992,
                                  "group_res_arr_mem_76992") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76990,
                                  "group_res_arr_mem_76990") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75989, "mem_75989") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75986, "mem_75986") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75983, "mem_75983") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75980, "mem_75980") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75977, "mem_75977") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75974, "mem_75974") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_76984, "out_mem_76984") != 0)
            return 1;
        return 1;
    }
    
    int64_t h_75248 = sext_i32_i64(h_71517);
    int64_t w_75249 = sext_i32_i64(w_71518);
    int64_t nest_sizze_75251 = mul64(h_75248, w_75249);
    int32_t segmap_group_sizze_75253;
    
    segmap_group_sizze_75253 =
        ctx->sizes.render_irregzisegmap_group_sizze_75252;
    
    int64_t segmap_group_sizze_75254 = sext_i32_i64(segmap_group_sizze_75253);
    int64_t y_75255 = sub64(segmap_group_sizze_75254, 1);
    int64_t x_75256 = add64(nest_sizze_75251, y_75255);
    int64_t segmap_usable_groups_64_75258 = squot64(x_75256,
                                                    segmap_group_sizze_75254);
    int32_t segmap_usable_groups_75259 =
            sext_i64_i32(segmap_usable_groups_64_75258);
    int64_t bytes_76096 = mul64(4, nest_sizze_75251);
    struct memblock_device mem_76100;
    
    mem_76100.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76100, bytes_76096, "mem_76100"))
        return 1;
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 1,
                                            sizeof(h_71517), &h_71517));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 2,
                                            sizeof(w_71518), &w_71518));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 3,
                                            sizeof(res_71990), &res_71990));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 4,
                                            sizeof(res_71991), &res_71991));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 5,
                                            sizeof(res_71994), &res_71994));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 6,
                                            sizeof(scale_arg_71995),
                                            &scale_arg_71995));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 7,
                                            sizeof(mem_76040.mem),
                                            &mem_76040.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 8,
                                            sizeof(mem_76043.mem),
                                            &mem_76043.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 9,
                                            sizeof(mem_76045.mem),
                                            &mem_76045.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 10,
                                            sizeof(mem_76048.mem),
                                            &mem_76048.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 11,
                                            sizeof(mem_76050.mem),
                                            &mem_76050.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 12,
                                            sizeof(mem_76053.mem),
                                            &mem_76053.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 13,
                                            sizeof(mem_76062.mem),
                                            &mem_76062.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 14,
                                            sizeof(inners_mem_76090.mem),
                                            &inners_mem_76090.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 15,
                                            sizeof(inners_mem_76091.mem),
                                            &inners_mem_76091.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 16,
                                            sizeof(inners_mem_76092.mem),
                                            &inners_mem_76092.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 17,
                                            sizeof(inners_mem_76093.mem),
                                            &inners_mem_76093.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 18,
                                            sizeof(inners_mem_76094.mem),
                                            &inners_mem_76094.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 19,
                                            sizeof(inners_mem_76095.mem),
                                            &inners_mem_76095.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_75247, 20,
                                            sizeof(mem_76100.mem),
                                            &mem_76100.mem));
    if (1 * (segmap_usable_groups_75259 * segmap_group_sizze_75253) != 0) {
        const size_t global_work_sizze_77314[1] = {segmap_usable_groups_75259 *
                     segmap_group_sizze_75253};
        const size_t local_work_sizze_77318[1] = {segmap_group_sizze_75253};
        int64_t time_start_77315 = 0, time_end_77316 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_75247");
            fprintf(stderr, "%zu", global_work_sizze_77314[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77318[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77315 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_75247, 1,
                                                        NULL,
                                                        global_work_sizze_77314,
                                                        local_work_sizze_77318,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_75247_runs,
                                                                                                  &ctx->segmap_75247_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77316 = get_wall_time();
            
            long time_diff_77317 = time_end_77316 - time_start_77315;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_75247",
                    time_diff_77317);
        }
    }
    if (memblock_unref_device(ctx, &mem_76040, "mem_76040") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76043, "mem_76043") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76045, "mem_76045") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76048, "mem_76048") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76050, "mem_76050") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76053, "mem_76053") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76062, "mem_76062") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76090, "inners_mem_76090") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76091, "inners_mem_76091") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76092, "inners_mem_76092") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76093, "inners_mem_76093") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76094, "inners_mem_76094") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76095, "inners_mem_76095") != 0)
        return 1;
    out_arrsizze_76985 = h_71517;
    out_arrsizze_76986 = w_71518;
    if (memblock_set_device(ctx, &out_mem_76984, &mem_76100, "mem_76100") != 0)
        return 1;
    (*out_mem_p_77235).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77235, &out_mem_76984,
                            "out_mem_76984") != 0)
        return 1;
    *out_out_arrsizze_77236 = out_arrsizze_76985;
    *out_out_arrsizze_77237 = out_arrsizze_76986;
    if (memblock_unref_device(ctx, &mem_76100, "mem_76100") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76071, "inners_mem_76071") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76070, "inners_mem_76070") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76069, "inners_mem_76069") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76068, "inners_mem_76068") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76067, "inners_mem_76067") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76066, "inners_mem_76066") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76095, "inners_mem_76095") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76094, "inners_mem_76094") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76093, "inners_mem_76093") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76092, "inners_mem_76092") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76091, "inners_mem_76091") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76090, "inners_mem_76090") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76065, "mem_76065") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76062, "mem_76062") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76059, "mem_76059") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76056, "mem_76056") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76053, "mem_76053") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76050, "mem_76050") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76048, "mem_76048") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76045, "mem_76045") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76043, "mem_76043") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76040, "mem_76040") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76037, "mem_76037") != 0)
        return 1;
    if (memblock_unref_device(ctx, &xs_mem_75997, "xs_mem_75997") != 0)
        return 1;
    if (memblock_unref_device(ctx, &xs_mem_75996, "xs_mem_75996") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_76034, "res_mem_76034") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_76033, "res_mem_76033") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76024, "mem_76024") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76019, "mem_76019") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76014, "mem_76014") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76010, "mem_76010") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76007, "mem_76007") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76004, "mem_76004") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76000, "mem_76000") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75995, "mem_75995") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75992, "mem_75992") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_77000,
                              "group_res_arr_mem_77000") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76998,
                              "group_res_arr_mem_76998") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76996,
                              "group_res_arr_mem_76996") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76994,
                              "group_res_arr_mem_76994") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76992,
                              "group_res_arr_mem_76992") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76990,
                              "group_res_arr_mem_76990") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75989, "mem_75989") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75986, "mem_75986") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75983, "mem_75983") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75980, "mem_75980") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75977, "mem_75977") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75974, "mem_75974") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76984, "out_mem_76984") != 0)
        return 1;
    return 0;
}
static int futrts_render_rgbbox(struct futhark_context *ctx,
                                struct memblock_device *out_mem_p_77319,
                                int32_t *out_out_arrsizze_77320,
                                int32_t *out_out_arrsizze_77321,
                                int32_t h_70471, int32_t w_70472)
{
    struct memblock_device out_mem_76733;
    
    out_mem_76733.references = NULL;
    
    int32_t out_arrsizze_76734;
    int32_t out_arrsizze_76735;
    int32_t segred_group_sizze_73810;
    
    segred_group_sizze_73810 =
        ctx->sizes.render_rgbboxzisegred_group_sizze_73809;
    
    int32_t num_groups_73812;
    int32_t max_num_groups_76736;
    
    max_num_groups_76736 = ctx->sizes.render_rgbboxzisegred_num_groups_73811;
    num_groups_73812 = sext_i64_i32(smax64(1, smin64(squot64(sub64(add64(400,
                                                                         sext_i32_i64(segred_group_sizze_73810)),
                                                                   1),
                                                             sext_i32_i64(segred_group_sizze_73810)),
                                                     sext_i32_i64(max_num_groups_76736))));
    
    struct memblock_device mem_75974;
    
    mem_75974.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75974, 4, "mem_75974"))
        return 1;
    
    struct memblock_device mem_75977;
    
    mem_75977.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75977, 4, "mem_75977"))
        return 1;
    
    struct memblock_device mem_75980;
    
    mem_75980.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75980, 4, "mem_75980"))
        return 1;
    
    struct memblock_device mem_75983;
    
    mem_75983.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75983, 4, "mem_75983"))
        return 1;
    
    struct memblock_device mem_75986;
    
    mem_75986.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75986, 4, "mem_75986"))
        return 1;
    
    struct memblock_device mem_75989;
    
    mem_75989.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75989, 4, "mem_75989"))
        return 1;
    
    struct memblock_device counter_mem_76737 = ctx->counter_mem_76737;
    struct memblock_device group_res_arr_mem_76739;
    
    group_res_arr_mem_76739.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76739,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_73810,
                                          num_groups_73812)),
                              "group_res_arr_mem_76739"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76741;
    
    group_res_arr_mem_76741.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76741,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_73810,
                                          num_groups_73812)),
                              "group_res_arr_mem_76741"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76743;
    
    group_res_arr_mem_76743.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76743,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_73810,
                                          num_groups_73812)),
                              "group_res_arr_mem_76743"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76745;
    
    group_res_arr_mem_76745.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76745,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_73810,
                                          num_groups_73812)),
                              "group_res_arr_mem_76745"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76747;
    
    group_res_arr_mem_76747.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76747,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_73810,
                                          num_groups_73812)),
                              "group_res_arr_mem_76747"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76749;
    
    group_res_arr_mem_76749.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76749,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_73810,
                                          num_groups_73812)),
                              "group_res_arr_mem_76749"))
        return 1;
    
    int32_t num_threads_76751 = mul32(num_groups_73812,
                                      segred_group_sizze_73810);
    
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 1,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_73810),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 2,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_73810),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 3,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_73810),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 4,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_73810),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 5,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_73810),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 6,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_73810),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 7,
                                            (int32_t) sizeof(bool), NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 8,
                                            sizeof(num_groups_73812),
                                            &num_groups_73812));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 9,
                                            sizeof(mem_75974.mem),
                                            &mem_75974.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 10,
                                            sizeof(mem_75977.mem),
                                            &mem_75977.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 11,
                                            sizeof(mem_75980.mem),
                                            &mem_75980.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 12,
                                            sizeof(mem_75983.mem),
                                            &mem_75983.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 13,
                                            sizeof(mem_75986.mem),
                                            &mem_75986.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 14,
                                            sizeof(mem_75989.mem),
                                            &mem_75989.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 15,
                                            sizeof(counter_mem_76737.mem),
                                            &counter_mem_76737.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 16,
                                            sizeof(group_res_arr_mem_76739.mem),
                                            &group_res_arr_mem_76739.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 17,
                                            sizeof(group_res_arr_mem_76741.mem),
                                            &group_res_arr_mem_76741.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 18,
                                            sizeof(group_res_arr_mem_76743.mem),
                                            &group_res_arr_mem_76743.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 19,
                                            sizeof(group_res_arr_mem_76745.mem),
                                            &group_res_arr_mem_76745.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 20,
                                            sizeof(group_res_arr_mem_76747.mem),
                                            &group_res_arr_mem_76747.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 21,
                                            sizeof(group_res_arr_mem_76749.mem),
                                            &group_res_arr_mem_76749.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73822, 22,
                                            sizeof(num_threads_76751),
                                            &num_threads_76751));
    if (1 * (num_groups_73812 * segred_group_sizze_73810) != 0) {
        const size_t global_work_sizze_77323[1] = {num_groups_73812 *
                     segred_group_sizze_73810};
        const size_t local_work_sizze_77327[1] = {segred_group_sizze_73810};
        int64_t time_start_77324 = 0, time_end_77325 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segred_nonseg_73822");
            fprintf(stderr, "%zu", global_work_sizze_77323[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77327[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) (0 + mul32((int32_t) sizeof(float),
                                     segred_group_sizze_73810) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_73810) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_73810) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_73810) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_73810) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_73810) +
                           (int32_t) sizeof(bool)));
            time_start_77324 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segred_nonseg_73822,
                                                        1, NULL,
                                                        global_work_sizze_77323,
                                                        local_work_sizze_77327,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segred_nonseg_73822_runs,
                                                                                                  &ctx->segred_nonseg_73822_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77325 = get_wall_time();
            
            long time_diff_77326 = time_end_77325 - time_start_77324;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segred_nonseg_73822",
                    time_diff_77326);
        }
    }
    
    float read_res_77328;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75974.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77328,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_70537 = read_res_77328;
    
    if (memblock_unref_device(ctx, &mem_75974, "mem_75974") != 0)
        return 1;
    
    float read_res_77329;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75977.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77329,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_70538 = read_res_77329;
    
    if (memblock_unref_device(ctx, &mem_75977, "mem_75977") != 0)
        return 1;
    
    float read_res_77330;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75980.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77330,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_70539 = read_res_77330;
    
    if (memblock_unref_device(ctx, &mem_75980, "mem_75980") != 0)
        return 1;
    
    float read_res_77331;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75983.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77331,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_70540 = read_res_77331;
    
    if (memblock_unref_device(ctx, &mem_75983, "mem_75983") != 0)
        return 1;
    
    float read_res_77332;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75986.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77332,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_70541 = read_res_77332;
    
    if (memblock_unref_device(ctx, &mem_75986, "mem_75986") != 0)
        return 1;
    
    float read_res_77333;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75989.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77333,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_70542 = read_res_77333;
    
    if (memblock_unref_device(ctx, &mem_75989, "mem_75989") != 0)
        return 1;
    
    float y_70577 = res_70537 - res_70540;
    float y_70578 = res_70538 - res_70541;
    float y_70579 = res_70539 - res_70542;
    int32_t segmap_group_sizze_73828;
    
    segmap_group_sizze_73828 =
        ctx->sizes.render_rgbboxzisegmap_group_sizze_73827;
    
    int64_t segmap_group_sizze_73829 = sext_i32_i64(segmap_group_sizze_73828);
    int64_t y_73830 = sub64(segmap_group_sizze_73829, 1);
    int64_t x_73831 = add64(400, y_73830);
    int64_t segmap_usable_groups_64_73833 = squot64(x_73831,
                                                    segmap_group_sizze_73829);
    int32_t segmap_usable_groups_73834 =
            sext_i64_i32(segmap_usable_groups_64_73833);
    struct memblock_device mem_75992;
    
    mem_75992.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75992, 1600, "mem_75992"))
        return 1;
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73824, 1,
                                            sizeof(res_70540), &res_70540));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73824, 2,
                                            sizeof(res_70541), &res_70541));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73824, 3,
                                            sizeof(res_70542), &res_70542));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73824, 4,
                                            sizeof(y_70577), &y_70577));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73824, 5,
                                            sizeof(y_70578), &y_70578));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73824, 6,
                                            sizeof(y_70579), &y_70579));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73824, 7,
                                            sizeof(mem_75992.mem),
                                            &mem_75992.mem));
    if (1 * (segmap_usable_groups_73834 * segmap_group_sizze_73828) != 0) {
        const size_t global_work_sizze_77334[1] = {segmap_usable_groups_73834 *
                     segmap_group_sizze_73828};
        const size_t local_work_sizze_77338[1] = {segmap_group_sizze_73828};
        int64_t time_start_77335 = 0, time_end_77336 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_73824");
            fprintf(stderr, "%zu", global_work_sizze_77334[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77338[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77335 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_73824, 1,
                                                        NULL,
                                                        global_work_sizze_77334,
                                                        local_work_sizze_77338,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_73824_runs,
                                                                                                  &ctx->segmap_73824_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77336 = get_wall_time();
            
            long time_diff_77337 = time_end_77336 - time_start_77335;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_73824",
                    time_diff_77337);
        }
    }
    
    struct memblock_device mem_75995;
    
    mem_75995.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75995, 1600, "mem_75995"))
        return 1;
    
    int32_t group_sizze_76811;
    
    group_sizze_76811 = ctx->sizes.render_rgbboxzigroup_sizze_76811;
    
    int32_t num_groups_76812;
    
    num_groups_76812 = squot32(sub32(add32(400,
                                           sext_i32_i32(group_sizze_76811)), 1),
                               sext_i32_i32(group_sizze_76811));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->iota_76808, 0,
                                            sizeof(mem_75995.mem),
                                            &mem_75995.mem));
    if (1 * (num_groups_76812 * group_sizze_76811) != 0) {
        const size_t global_work_sizze_77339[1] = {num_groups_76812 *
                     group_sizze_76811};
        const size_t local_work_sizze_77343[1] = {group_sizze_76811};
        int64_t time_start_77340 = 0, time_end_77341 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "iota_76808");
            fprintf(stderr, "%zu", global_work_sizze_77339[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77343[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77340 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->iota_76808, 1,
                                                        NULL,
                                                        global_work_sizze_77339,
                                                        local_work_sizze_77343,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->iota_76808_runs,
                                                                                                  &ctx->iota_76808_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77341 = get_wall_time();
            
            long time_diff_77342 = time_end_77341 - time_start_77340;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "iota_76808",
                    time_diff_77342);
        }
    }
    
    int32_t segmap_group_sizze_73902;
    
    segmap_group_sizze_73902 =
        ctx->sizes.render_rgbboxzisegmap_group_sizze_73901;
    
    int64_t segmap_group_sizze_73903 = sext_i32_i64(segmap_group_sizze_73902);
    int64_t y_73904 = sub64(segmap_group_sizze_73903, 1);
    int64_t x_73905 = add64(400, y_73904);
    int64_t x_75798 = squot64(x_73905, segmap_group_sizze_73903);
    int32_t segmap_usable_groups_73908 = sext_i64_i32(x_75798);
    int32_t segscan_group_sizze_73915;
    
    segscan_group_sizze_73915 =
        ctx->sizes.render_rgbboxzisegscan_group_sizze_73914;
    
    int32_t num_groups_73917;
    int32_t max_num_groups_76813;
    
    max_num_groups_76813 = ctx->sizes.render_rgbboxzisegscan_num_groups_73916;
    num_groups_73917 = sext_i64_i32(smax64(1, smin64(squot64(sub64(add64(400,
                                                                         sext_i32_i64(segscan_group_sizze_73915)),
                                                                   1),
                                                             sext_i32_i64(segscan_group_sizze_73915)),
                                                     sext_i32_i64(max_num_groups_76813))));
    
    int32_t segred_group_sizze_73924;
    
    segred_group_sizze_73924 =
        ctx->sizes.render_rgbboxzisegred_group_sizze_73923;
    
    int32_t num_groups_73926;
    int32_t max_num_groups_76814;
    
    max_num_groups_76814 = ctx->sizes.render_rgbboxzisegred_num_groups_73925;
    num_groups_73926 = sext_i64_i32(smax64(1, smin64(squot64(sub64(add64(400,
                                                                         sext_i32_i64(segred_group_sizze_73924)),
                                                                   1),
                                                             sext_i32_i64(segred_group_sizze_73924)),
                                                     sext_i32_i64(max_num_groups_76814))));
    
    int32_t segmap_group_sizze_73939;
    
    segmap_group_sizze_73939 =
        ctx->sizes.render_rgbboxzisegmap_group_sizze_73938;
    
    int64_t segmap_group_sizze_73940 = sext_i32_i64(segmap_group_sizze_73939);
    int64_t y_73941 = sub64(segmap_group_sizze_73940, 1);
    int64_t x_73942 = add64(400, y_73941);
    int64_t x_75800 = squot64(x_73942, segmap_group_sizze_73940);
    int32_t segmap_usable_groups_73945 = sext_i64_i32(x_75800);
    struct memblock_device mem_76000;
    
    mem_76000.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76000, 1600, "mem_76000"))
        return 1;
    
    struct memblock_device mem_76004;
    
    mem_76004.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76004, 1600, "mem_76004"))
        return 1;
    
    struct memblock_device mem_76007;
    
    mem_76007.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76007, 1600, "mem_76007"))
        return 1;
    
    struct memblock_device mem_76010;
    
    mem_76010.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76010, 1600, "mem_76010"))
        return 1;
    
    struct memblock_device mem_76014;
    
    mem_76014.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76014, 4, "mem_76014"))
        return 1;
    
    struct memblock_device mem_76019;
    
    mem_76019.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76019, 1600, "mem_76019"))
        return 1;
    
    struct memblock_device mem_76024;
    
    mem_76024.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76024, 1600, "mem_76024"))
        return 1;
    
    struct memblock_device res_mem_76033;
    
    res_mem_76033.references = NULL;
    
    struct memblock_device res_mem_76034;
    
    res_mem_76034.references = NULL;
    
    struct memblock_device xs_mem_75996;
    
    xs_mem_75996.references = NULL;
    
    struct memblock_device xs_mem_75997;
    
    xs_mem_75997.references = NULL;
    if (memblock_set_device(ctx, &xs_mem_75996, &mem_75992, "mem_75992") != 0)
        return 1;
    if (memblock_set_device(ctx, &xs_mem_75997, &mem_75995, "mem_75995") != 0)
        return 1;
    for (int32_t i_70648 = 0; i_70648 < 32; i_70648++) {
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73898, 1,
                                                sizeof(i_70648), &i_70648));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73898, 2,
                                                sizeof(xs_mem_75996.mem),
                                                &xs_mem_75996.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73898, 3,
                                                sizeof(mem_76000.mem),
                                                &mem_76000.mem));
        if (1 * (segmap_usable_groups_73908 * segmap_group_sizze_73902) != 0) {
            const size_t global_work_sizze_77344[1] =
                         {segmap_usable_groups_73908 *
                         segmap_group_sizze_73902};
            const size_t local_work_sizze_77348[1] = {segmap_group_sizze_73902};
            int64_t time_start_77345 = 0, time_end_77346 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "segmap_73898");
                fprintf(stderr, "%zu", global_work_sizze_77344[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77348[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_77345 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->segmap_73898,
                                                            1, NULL,
                                                            global_work_sizze_77344,
                                                            local_work_sizze_77348,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->segmap_73898_runs,
                                                                                                      &ctx->segmap_73898_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77346 = get_wall_time();
                
                long time_diff_77347 = time_end_77346 - time_start_77345;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_73898",
                        time_diff_77347);
            }
        }
        
        int32_t num_threads_76824 = mul32(num_groups_73917,
                                          segscan_group_sizze_73915);
        
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_73920, 1,
                                                mul32((int32_t) sizeof(int32_t),
                                                      segscan_group_sizze_73915),
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_73920, 2,
                                                mul32((int32_t) sizeof(int32_t),
                                                      segscan_group_sizze_73915),
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_73920, 3,
                                                sizeof(mem_76000.mem),
                                                &mem_76000.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_73920, 4,
                                                sizeof(mem_76004.mem),
                                                &mem_76004.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_73920, 5,
                                                sizeof(mem_76007.mem),
                                                &mem_76007.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_73920, 6,
                                                sizeof(mem_76010.mem),
                                                &mem_76010.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_73920, 7,
                                                sizeof(num_threads_76824),
                                                &num_threads_76824));
        if (1 * (num_groups_73917 * segscan_group_sizze_73915) != 0) {
            const size_t global_work_sizze_77349[1] = {num_groups_73917 *
                         segscan_group_sizze_73915};
            const size_t local_work_sizze_77353[1] =
                         {segscan_group_sizze_73915};
            int64_t time_start_77350 = 0, time_end_77351 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "scan_stage1_73920");
                fprintf(stderr, "%zu", global_work_sizze_77349[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77353[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) (0 + mul32((int32_t) sizeof(int32_t),
                                         segscan_group_sizze_73915) +
                               mul32((int32_t) sizeof(int32_t),
                                     segscan_group_sizze_73915)));
                time_start_77350 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->scan_stage1_73920,
                                                            1, NULL,
                                                            global_work_sizze_77349,
                                                            local_work_sizze_77353,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->scan_stage1_73920_runs,
                                                                                                      &ctx->scan_stage1_73920_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77351 = get_wall_time();
                
                long time_diff_77352 = time_end_77351 - time_start_77350;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "scan_stage1_73920", time_diff_77352);
            }
        }
        if (ctx->debugging)
            fprintf(stderr, "%s\n", "\n# SegScan");
        if (ctx->debugging)
            fprintf(stderr, "%s: %llu%c", "elems_per_group",
                    (long long) mul32(segscan_group_sizze_73915,
                                      squot32(sub32(add32(400,
                                                          num_threads_76824),
                                                    1), num_threads_76824)),
                    '\n');
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_73920, 1,
                                                mul32((int32_t) sizeof(int32_t),
                                                      num_groups_73917), NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_73920, 2,
                                                mul32((int32_t) sizeof(int32_t),
                                                      num_groups_73917), NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_73920, 3,
                                                sizeof(num_groups_73917),
                                                &num_groups_73917));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_73920, 4,
                                                sizeof(mem_76004.mem),
                                                &mem_76004.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_73920, 5,
                                                sizeof(mem_76007.mem),
                                                &mem_76007.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_73920, 6,
                                                sizeof(num_threads_76824),
                                                &num_threads_76824));
        if (1 * (1 * num_groups_73917) != 0) {
            const size_t global_work_sizze_77354[1] = {1 * num_groups_73917};
            const size_t local_work_sizze_77358[1] = {num_groups_73917};
            int64_t time_start_77355 = 0, time_end_77356 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "scan_stage2_73920");
                fprintf(stderr, "%zu", global_work_sizze_77354[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77358[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) (0 + mul32((int32_t) sizeof(int32_t),
                                         num_groups_73917) +
                               mul32((int32_t) sizeof(int32_t),
                                     num_groups_73917)));
                time_start_77355 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->scan_stage2_73920,
                                                            1, NULL,
                                                            global_work_sizze_77354,
                                                            local_work_sizze_77358,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->scan_stage2_73920_runs,
                                                                                                      &ctx->scan_stage2_73920_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77356 = get_wall_time();
                
                long time_diff_77357 = time_end_77356 - time_start_77355;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "scan_stage2_73920", time_diff_77357);
            }
        }
        
        int32_t group_sizze_76884;
        
        group_sizze_76884 = ctx->sizes.render_rgbboxzigroup_sizze_76884;
        
        int32_t num_groups_76885;
        
        num_groups_76885 = squot32(sub32(add32(400,
                                               sext_i32_i32(group_sizze_76884)),
                                         1), sext_i32_i32(group_sizze_76884));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage3_76881, 1,
                                                sizeof(mem_76004.mem),
                                                &mem_76004.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage3_76881, 2,
                                                sizeof(mem_76007.mem),
                                                &mem_76007.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage3_76881, 3,
                                                sizeof(num_threads_76824),
                                                &num_threads_76824));
        if (1 * (num_groups_76885 * group_sizze_76884) != 0) {
            const size_t global_work_sizze_77359[1] = {num_groups_76885 *
                         group_sizze_76884};
            const size_t local_work_sizze_77363[1] = {group_sizze_76884};
            int64_t time_start_77360 = 0, time_end_77361 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "scan_stage3_76881");
                fprintf(stderr, "%zu", global_work_sizze_77359[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77363[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_77360 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->scan_stage3_76881,
                                                            1, NULL,
                                                            global_work_sizze_77359,
                                                            local_work_sizze_77363,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->scan_stage3_76881_runs,
                                                                                                      &ctx->scan_stage3_76881_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77361 = get_wall_time();
                
                long time_diff_77362 = time_end_77361 - time_start_77360;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "scan_stage3_76881", time_diff_77362);
            }
        }
        
        struct memblock_device counter_mem_76888 = ctx->counter_mem_76888;
        struct memblock_device group_res_arr_mem_76890;
        
        group_res_arr_mem_76890.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_76890,
                                  mul32((int32_t) sizeof(int32_t),
                                        mul32(segred_group_sizze_73924,
                                              num_groups_73926)),
                                  "group_res_arr_mem_76890"))
            return 1;
        
        int32_t num_threads_76892 = mul32(num_groups_73926,
                                          segred_group_sizze_73924);
        
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73933, 1,
                                                mul32((int32_t) sizeof(int32_t),
                                                      segred_group_sizze_73924),
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73933, 2,
                                                (int32_t) sizeof(bool), NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73933, 3,
                                                sizeof(num_groups_73926),
                                                &num_groups_73926));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73933, 4,
                                                sizeof(xs_mem_75996.mem),
                                                &xs_mem_75996.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73933, 5,
                                                sizeof(xs_mem_75997.mem),
                                                &xs_mem_75997.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73933, 6,
                                                sizeof(mem_76010.mem),
                                                &mem_76010.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73933, 7,
                                                sizeof(mem_76014.mem),
                                                &mem_76014.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73933, 8,
                                                sizeof(mem_76019.mem),
                                                &mem_76019.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73933, 9,
                                                sizeof(mem_76024.mem),
                                                &mem_76024.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73933, 10,
                                                sizeof(counter_mem_76888.mem),
                                                &counter_mem_76888.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73933, 11,
                                                sizeof(group_res_arr_mem_76890.mem),
                                                &group_res_arr_mem_76890.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73933, 12,
                                                sizeof(num_threads_76892),
                                                &num_threads_76892));
        if (1 * (num_groups_73926 * segred_group_sizze_73924) != 0) {
            const size_t global_work_sizze_77365[1] = {num_groups_73926 *
                         segred_group_sizze_73924};
            const size_t local_work_sizze_77369[1] = {segred_group_sizze_73924};
            int64_t time_start_77366 = 0, time_end_77367 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "segred_nonseg_73933");
                fprintf(stderr, "%zu", global_work_sizze_77365[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77369[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) (0 + mul32((int32_t) sizeof(int32_t),
                                         segred_group_sizze_73924) +
                               (int32_t) sizeof(bool)));
                time_start_77366 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->segred_nonseg_73933,
                                                            1, NULL,
                                                            global_work_sizze_77365,
                                                            local_work_sizze_77369,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->segred_nonseg_73933_runs,
                                                                                                      &ctx->segred_nonseg_73933_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77367 = get_wall_time();
                
                long time_diff_77368 = time_end_77367 - time_start_77366;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "segred_nonseg_73933", time_diff_77368);
            }
        }
        
        int32_t read_res_77370;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_76014.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int32_t),
                                                     sizeof(int32_t),
                                                     &read_res_77370, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int32_t res_70680 = read_res_77370;
        
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73935, 1,
                                                sizeof(res_70680), &res_70680));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73935, 2,
                                                sizeof(xs_mem_75996.mem),
                                                &xs_mem_75996.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73935, 3,
                                                sizeof(xs_mem_75997.mem),
                                                &xs_mem_75997.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73935, 4,
                                                sizeof(mem_76000.mem),
                                                &mem_76000.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73935, 5,
                                                sizeof(mem_76004.mem),
                                                &mem_76004.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73935, 6,
                                                sizeof(mem_76007.mem),
                                                &mem_76007.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73935, 7,
                                                sizeof(mem_76010.mem),
                                                &mem_76010.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73935, 8,
                                                sizeof(mem_76019.mem),
                                                &mem_76019.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73935, 9,
                                                sizeof(mem_76024.mem),
                                                &mem_76024.mem));
        if (1 * (segmap_usable_groups_73945 * segmap_group_sizze_73939) != 0) {
            const size_t global_work_sizze_77371[1] =
                         {segmap_usable_groups_73945 *
                         segmap_group_sizze_73939};
            const size_t local_work_sizze_77375[1] = {segmap_group_sizze_73939};
            int64_t time_start_77372 = 0, time_end_77373 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "segmap_73935");
                fprintf(stderr, "%zu", global_work_sizze_77371[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77375[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_77372 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->segmap_73935,
                                                            1, NULL,
                                                            global_work_sizze_77371,
                                                            local_work_sizze_77375,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->segmap_73935_runs,
                                                                                                      &ctx->segmap_73935_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77373 = get_wall_time();
                
                long time_diff_77374 = time_end_77373 - time_start_77372;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_73935",
                        time_diff_77374);
            }
        }
        
        struct memblock_device mem_76027;
        
        mem_76027.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76027, 1600, "mem_76027"))
            return 1;
        if (mul64(sext_i32_i64(400), (int32_t) sizeof(int32_t)) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         mem_76024.mem,
                                                         mem_76027.mem, 0, 0,
                                                         mul64(sext_i32_i64(400),
                                                               (int32_t) sizeof(int32_t)),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device mem_76031;
        
        mem_76031.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76031, 1600, "mem_76031"))
            return 1;
        if (mul64(sext_i32_i64(400), (int32_t) sizeof(int32_t)) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         mem_76019.mem,
                                                         mem_76031.mem, 0, 0,
                                                         mul64(sext_i32_i64(400),
                                                               (int32_t) sizeof(int32_t)),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device xs_mem_tmp_76815;
        
        xs_mem_tmp_76815.references = NULL;
        if (memblock_set_device(ctx, &xs_mem_tmp_76815, &mem_76027,
                                "mem_76027") != 0)
            return 1;
        
        struct memblock_device xs_mem_tmp_76816;
        
        xs_mem_tmp_76816.references = NULL;
        if (memblock_set_device(ctx, &xs_mem_tmp_76816, &mem_76031,
                                "mem_76031") != 0)
            return 1;
        if (memblock_set_device(ctx, &xs_mem_75996, &xs_mem_tmp_76815,
                                "xs_mem_tmp_76815") != 0)
            return 1;
        if (memblock_set_device(ctx, &xs_mem_75997, &xs_mem_tmp_76816,
                                "xs_mem_tmp_76816") != 0)
            return 1;
        if (memblock_unref_device(ctx, &xs_mem_tmp_76816, "xs_mem_tmp_76816") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &xs_mem_tmp_76815, "xs_mem_tmp_76815") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76031, "mem_76031") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76027, "mem_76027") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76890,
                                  "group_res_arr_mem_76890") != 0)
            return 1;
    }
    if (memblock_set_device(ctx, &res_mem_76033, &xs_mem_75996,
                            "xs_mem_75996") != 0)
        return 1;
    if (memblock_set_device(ctx, &res_mem_76034, &xs_mem_75997,
                            "xs_mem_75997") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75992, "mem_75992") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75995, "mem_75995") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76000, "mem_76000") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76004, "mem_76004") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76007, "mem_76007") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76010, "mem_76010") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76014, "mem_76014") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76019, "mem_76019") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76024, "mem_76024") != 0)
        return 1;
    
    int32_t segmap_group_sizze_73951;
    
    segmap_group_sizze_73951 =
        ctx->sizes.render_rgbboxzisegmap_group_sizze_73950;
    
    int64_t segmap_group_sizze_73952 = sext_i32_i64(segmap_group_sizze_73951);
    int64_t y_73953 = sub64(segmap_group_sizze_73952, 1);
    int64_t x_73954 = add64(400, y_73953);
    int64_t segmap_usable_groups_64_73956 = squot64(x_73954,
                                                    segmap_group_sizze_73952);
    int32_t segmap_usable_groups_73957 =
            sext_i64_i32(segmap_usable_groups_64_73956);
    struct memblock_device mem_76037;
    
    mem_76037.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76037, 1600, "mem_76037"))
        return 1;
    
    struct memblock_device mem_76040;
    
    mem_76040.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76040, 1600, "mem_76040"))
        return 1;
    
    struct memblock_device mem_76043;
    
    mem_76043.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76043, 1600, "mem_76043"))
        return 1;
    
    struct memblock_device mem_76046;
    
    mem_76046.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76046, 1600, "mem_76046"))
        return 1;
    
    struct memblock_device mem_76049;
    
    mem_76049.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76049, 1600, "mem_76049"))
        return 1;
    
    struct memblock_device mem_76052;
    
    mem_76052.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76052, 1600, "mem_76052"))
        return 1;
    
    struct memblock_device mem_76055;
    
    mem_76055.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76055, 1600, "mem_76055"))
        return 1;
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73947, 1,
                                            sizeof(res_70540), &res_70540));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73947, 2,
                                            sizeof(res_70541), &res_70541));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73947, 3,
                                            sizeof(res_70542), &res_70542));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73947, 4,
                                            sizeof(y_70577), &y_70577));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73947, 5,
                                            sizeof(y_70578), &y_70578));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73947, 6,
                                            sizeof(y_70579), &y_70579));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73947, 7,
                                            sizeof(res_mem_76034.mem),
                                            &res_mem_76034.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73947, 8,
                                            sizeof(mem_76037.mem),
                                            &mem_76037.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73947, 9,
                                            sizeof(mem_76040.mem),
                                            &mem_76040.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73947, 10,
                                            sizeof(mem_76043.mem),
                                            &mem_76043.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73947, 11,
                                            sizeof(mem_76046.mem),
                                            &mem_76046.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73947, 12,
                                            sizeof(mem_76049.mem),
                                            &mem_76049.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73947, 13,
                                            sizeof(mem_76052.mem),
                                            &mem_76052.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73947, 14,
                                            sizeof(mem_76055.mem),
                                            &mem_76055.mem));
    if (1 * (segmap_usable_groups_73957 * segmap_group_sizze_73951) != 0) {
        const size_t global_work_sizze_77376[1] = {segmap_usable_groups_73957 *
                     segmap_group_sizze_73951};
        const size_t local_work_sizze_77380[1] = {segmap_group_sizze_73951};
        int64_t time_start_77377 = 0, time_end_77378 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_73947");
            fprintf(stderr, "%zu", global_work_sizze_77376[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77380[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77377 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_73947, 1,
                                                        NULL,
                                                        global_work_sizze_77376,
                                                        local_work_sizze_77380,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_73947_runs,
                                                                                                  &ctx->segmap_73947_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77378 = get_wall_time();
            
            long time_diff_77379 = time_end_77378 - time_start_77377;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_73947",
                    time_diff_77379);
        }
    }
    if (memblock_unref_device(ctx, &res_mem_76034, "res_mem_76034") != 0)
        return 1;
    
    int32_t segmap_group_sizze_74095;
    
    segmap_group_sizze_74095 =
        ctx->sizes.render_rgbboxzisegmap_group_sizze_74094;
    
    int64_t segmap_group_sizze_74096 = sext_i32_i64(segmap_group_sizze_74095);
    int64_t y_74097 = sub64(segmap_group_sizze_74096, 1);
    int64_t x_74098 = add64(399, y_74097);
    int64_t segmap_usable_groups_64_74100 = squot64(x_74098,
                                                    segmap_group_sizze_74096);
    int32_t segmap_usable_groups_74101 =
            sext_i64_i32(segmap_usable_groups_64_74100);
    struct memblock_device mem_76057;
    
    mem_76057.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76057, 399, "mem_76057"))
        return 1;
    
    struct memblock_device mem_76060;
    
    mem_76060.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76060, 1596, "mem_76060"))
        return 1;
    
    struct memblock_device mem_76062;
    
    mem_76062.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76062, 399, "mem_76062"))
        return 1;
    
    struct memblock_device mem_76065;
    
    mem_76065.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76065, 1596, "mem_76065"))
        return 1;
    
    struct memblock_device mem_76068;
    
    mem_76068.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76068, 1596, "mem_76068"))
        return 1;
    
    struct memblock_device mem_76071;
    
    mem_76071.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76071, 1596, "mem_76071"))
        return 1;
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74091, 1,
                                            sizeof(ctx->failure_is_an_option),
                                            &ctx->failure_is_an_option));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74091, 3,
                                            sizeof(mem_76037.mem),
                                            &mem_76037.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74091, 4,
                                            sizeof(mem_76057.mem),
                                            &mem_76057.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74091, 5,
                                            sizeof(mem_76060.mem),
                                            &mem_76060.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74091, 6,
                                            sizeof(mem_76062.mem),
                                            &mem_76062.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74091, 7,
                                            sizeof(mem_76065.mem),
                                            &mem_76065.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74091, 8,
                                            sizeof(mem_76068.mem),
                                            &mem_76068.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74091, 9,
                                            sizeof(mem_76071.mem),
                                            &mem_76071.mem));
    if (1 * (segmap_usable_groups_74101 * segmap_group_sizze_74095) != 0) {
        const size_t global_work_sizze_77381[1] = {segmap_usable_groups_74101 *
                     segmap_group_sizze_74095};
        const size_t local_work_sizze_77385[1] = {segmap_group_sizze_74095};
        int64_t time_start_77382 = 0, time_end_77383 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_74091");
            fprintf(stderr, "%zu", global_work_sizze_77381[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77385[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77382 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_74091, 1,
                                                        NULL,
                                                        global_work_sizze_77381,
                                                        local_work_sizze_77385,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_74091_runs,
                                                                                                  &ctx->segmap_74091_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77383 = get_wall_time();
            
            long time_diff_77384 = time_end_77383 - time_start_77382;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_74091",
                    time_diff_77384);
        }
    }
    ctx->failure_is_an_option = 1;
    if (memblock_unref_device(ctx, &mem_76037, "mem_76037") != 0)
        return 1;
    
    struct memblock_device mem_76074;
    
    mem_76074.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76074, 1596, "mem_76074"))
        return 1;
    
    int call_ret_77386 = futrts__replicate_i32(ctx, mem_76074, 399, -1);
    
    assert(call_ret_77386 == 0);
    
    int32_t segmap_group_sizze_74267;
    
    segmap_group_sizze_74267 =
        ctx->sizes.render_rgbboxzisegmap_group_sizze_74266;
    
    int64_t segmap_group_sizze_74268 = sext_i32_i64(segmap_group_sizze_74267);
    int64_t y_74269 = sub64(segmap_group_sizze_74268, 1);
    int64_t x_74270 = add64(399, y_74269);
    int64_t segmap_usable_groups_64_74272 = squot64(x_74270,
                                                    segmap_group_sizze_74268);
    int32_t segmap_usable_groups_74273 =
            sext_i64_i32(segmap_usable_groups_64_74272);
    
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74263, 1,
                                            sizeof(mem_76068.mem),
                                            &mem_76068.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74263, 2,
                                            sizeof(mem_76071.mem),
                                            &mem_76071.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74263, 3,
                                            sizeof(mem_76074.mem),
                                            &mem_76074.mem));
    if (1 * (segmap_usable_groups_74273 * segmap_group_sizze_74267) != 0) {
        const size_t global_work_sizze_77387[1] = {segmap_usable_groups_74273 *
                     segmap_group_sizze_74267};
        const size_t local_work_sizze_77391[1] = {segmap_group_sizze_74267};
        int64_t time_start_77388 = 0, time_end_77389 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_74263");
            fprintf(stderr, "%zu", global_work_sizze_77387[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77391[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77388 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_74263, 1,
                                                        NULL,
                                                        global_work_sizze_77387,
                                                        local_work_sizze_77391,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_74263_runs,
                                                                                                  &ctx->segmap_74263_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77389 = get_wall_time();
            
            long time_diff_77390 = time_end_77389 - time_start_77388;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_74263",
                    time_diff_77390);
        }
    }
    if (memblock_unref_device(ctx, &mem_76068, "mem_76068") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76071, "mem_76071") != 0)
        return 1;
    
    struct memblock_device mem_76077;
    
    mem_76077.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76077, 1596, "mem_76077"))
        return 1;
    
    int call_ret_77392 = futrts__replicate_f32(ctx, mem_76077, 399, 0.0F);
    
    assert(call_ret_77392 == 0);
    
    int32_t segmap_group_sizze_74279;
    
    segmap_group_sizze_74279 =
        ctx->sizes.render_rgbboxzisegmap_group_sizze_74278;
    
    int64_t segmap_group_sizze_74280 = sext_i32_i64(segmap_group_sizze_74279);
    int64_t y_74281 = sub64(segmap_group_sizze_74280, 1);
    int64_t x_74282 = add64(399, y_74281);
    int64_t x_75808 = squot64(x_74282, segmap_group_sizze_74280);
    int32_t segmap_usable_groups_74285 = sext_i64_i32(x_75808);
    struct memblock_device inners_mem_76102;
    
    inners_mem_76102.references = NULL;
    
    struct memblock_device inners_mem_76103;
    
    inners_mem_76103.references = NULL;
    
    struct memblock_device inners_mem_76104;
    
    inners_mem_76104.references = NULL;
    
    struct memblock_device inners_mem_76105;
    
    inners_mem_76105.references = NULL;
    
    struct memblock_device inners_mem_76106;
    
    inners_mem_76106.references = NULL;
    
    struct memblock_device inners_mem_76107;
    
    inners_mem_76107.references = NULL;
    
    struct memblock_device inners_mem_76078;
    
    inners_mem_76078.references = NULL;
    
    struct memblock_device inners_mem_76079;
    
    inners_mem_76079.references = NULL;
    
    struct memblock_device inners_mem_76080;
    
    inners_mem_76080.references = NULL;
    
    struct memblock_device inners_mem_76081;
    
    inners_mem_76081.references = NULL;
    
    struct memblock_device inners_mem_76082;
    
    inners_mem_76082.references = NULL;
    
    struct memblock_device inners_mem_76083;
    
    inners_mem_76083.references = NULL;
    if (memblock_set_device(ctx, &inners_mem_76078, &mem_76077, "mem_76077") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76079, &mem_76077, "mem_76077") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76080, &mem_76077, "mem_76077") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76081, &mem_76077, "mem_76077") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76082, &mem_76077, "mem_76077") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76083, &mem_76077, "mem_76077") !=
        0)
        return 1;
    for (int32_t _i_71037 = 0; _i_71037 < 10; _i_71037++) {
        struct memblock_device mem_76086;
        
        mem_76086.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76086, 1596, "mem_76086"))
            return 1;
        
        struct memblock_device mem_76089;
        
        mem_76089.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76089, 1596, "mem_76089"))
            return 1;
        
        struct memblock_device mem_76092;
        
        mem_76092.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76092, 1596, "mem_76092"))
            return 1;
        
        struct memblock_device mem_76095;
        
        mem_76095.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76095, 1596, "mem_76095"))
            return 1;
        
        struct memblock_device mem_76098;
        
        mem_76098.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76098, 1596, "mem_76098"))
            return 1;
        
        struct memblock_device mem_76101;
        
        mem_76101.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76101, 1596, "mem_76101"))
            return 1;
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 1,
                                                sizeof(mem_76049.mem),
                                                &mem_76049.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 2,
                                                sizeof(mem_76052.mem),
                                                &mem_76052.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 3,
                                                sizeof(mem_76055.mem),
                                                &mem_76055.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 4,
                                                sizeof(mem_76057.mem),
                                                &mem_76057.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 5,
                                                sizeof(mem_76060.mem),
                                                &mem_76060.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 6,
                                                sizeof(mem_76062.mem),
                                                &mem_76062.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 7,
                                                sizeof(mem_76065.mem),
                                                &mem_76065.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 8,
                                                sizeof(inners_mem_76078.mem),
                                                &inners_mem_76078.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 9,
                                                sizeof(inners_mem_76079.mem),
                                                &inners_mem_76079.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 10,
                                                sizeof(inners_mem_76080.mem),
                                                &inners_mem_76080.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 11,
                                                sizeof(inners_mem_76081.mem),
                                                &inners_mem_76081.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 12,
                                                sizeof(inners_mem_76082.mem),
                                                &inners_mem_76082.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 13,
                                                sizeof(inners_mem_76083.mem),
                                                &inners_mem_76083.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 14,
                                                sizeof(mem_76086.mem),
                                                &mem_76086.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 15,
                                                sizeof(mem_76089.mem),
                                                &mem_76089.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 16,
                                                sizeof(mem_76092.mem),
                                                &mem_76092.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 17,
                                                sizeof(mem_76095.mem),
                                                &mem_76095.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 18,
                                                sizeof(mem_76098.mem),
                                                &mem_76098.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74275, 19,
                                                sizeof(mem_76101.mem),
                                                &mem_76101.mem));
        if (1 * (segmap_usable_groups_74285 * segmap_group_sizze_74279) != 0) {
            const size_t global_work_sizze_77393[1] =
                         {segmap_usable_groups_74285 *
                         segmap_group_sizze_74279};
            const size_t local_work_sizze_77397[1] = {segmap_group_sizze_74279};
            int64_t time_start_77394 = 0, time_end_77395 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "segmap_74275");
                fprintf(stderr, "%zu", global_work_sizze_77393[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77397[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_77394 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->segmap_74275,
                                                            1, NULL,
                                                            global_work_sizze_77393,
                                                            local_work_sizze_77397,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->segmap_74275_runs,
                                                                                                      &ctx->segmap_74275_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77395 = get_wall_time();
                
                long time_diff_77396 = time_end_77395 - time_start_77394;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_74275",
                        time_diff_77396);
            }
        }
        
        struct memblock_device inners_mem_tmp_76942;
        
        inners_mem_tmp_76942.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76942, &mem_76086,
                                "mem_76086") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_76943;
        
        inners_mem_tmp_76943.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76943, &mem_76089,
                                "mem_76089") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_76944;
        
        inners_mem_tmp_76944.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76944, &mem_76092,
                                "mem_76092") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_76945;
        
        inners_mem_tmp_76945.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76945, &mem_76095,
                                "mem_76095") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_76946;
        
        inners_mem_tmp_76946.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76946, &mem_76098,
                                "mem_76098") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_76947;
        
        inners_mem_tmp_76947.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76947, &mem_76101,
                                "mem_76101") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76078, &inners_mem_tmp_76942,
                                "inners_mem_tmp_76942") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76079, &inners_mem_tmp_76943,
                                "inners_mem_tmp_76943") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76080, &inners_mem_tmp_76944,
                                "inners_mem_tmp_76944") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76081, &inners_mem_tmp_76945,
                                "inners_mem_tmp_76945") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76082, &inners_mem_tmp_76946,
                                "inners_mem_tmp_76946") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76083, &inners_mem_tmp_76947,
                                "inners_mem_tmp_76947") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76947,
                                  "inners_mem_tmp_76947") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76946,
                                  "inners_mem_tmp_76946") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76945,
                                  "inners_mem_tmp_76945") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76944,
                                  "inners_mem_tmp_76944") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76943,
                                  "inners_mem_tmp_76943") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76942,
                                  "inners_mem_tmp_76942") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76101, "mem_76101") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76098, "mem_76098") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76095, "mem_76095") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76092, "mem_76092") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76089, "mem_76089") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76086, "mem_76086") != 0)
            return 1;
    }
    if (memblock_set_device(ctx, &inners_mem_76102, &inners_mem_76078,
                            "inners_mem_76078") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76103, &inners_mem_76079,
                            "inners_mem_76079") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76104, &inners_mem_76080,
                            "inners_mem_76080") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76105, &inners_mem_76081,
                            "inners_mem_76081") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76106, &inners_mem_76082,
                            "inners_mem_76082") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76107, &inners_mem_76083,
                            "inners_mem_76083") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76077, "mem_76077") != 0)
        return 1;
    
    float res_71098 = sitofp_i32_f32(w_70472);
    float res_71099 = sitofp_i32_f32(h_70471);
    float camera_arg_71100 = res_71098 / res_71099;
    float half_width_71101 = 0.7673271F * camera_arg_71100;
    float res_71102 = 0.99999994F * half_width_71101;
    float res_71103 = 0.0F - res_71102;
    float scale_arg_71104 = 2.0F * half_width_71101;
    float res_71105 = 0.99999994F * scale_arg_71104;
    bool bounds_invalid_upwards_71106 = slt32(h_70471, 0);
    bool valid_71107 = !bounds_invalid_upwards_71106;
    bool range_valid_c_71108;
    
    if (!valid_71107) {
        ctx->error = msgprintf("Error: %s%d%s%d%s%d%s\n\nBacktrace:\n%s",
                               "Range ", 0, "..", 1, "..<", h_70471,
                               " is invalid.",
                               "-> #0  /futlib/math.fut:413:23-30\n   #1  /futlib/array.fut:60:3-12\n   #2  /futlib/array.fut:130:28-33\n   #3  ray.fut:168:6-35\n   #4  ray.fut:252:6-24\n   #5  ray.fut:250:1-252:24\n");
        if (memblock_unref_device(ctx, &inners_mem_76083, "inners_mem_76083") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76082, "inners_mem_76082") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76081, "inners_mem_76081") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76080, "inners_mem_76080") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76079, "inners_mem_76079") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76078, "inners_mem_76078") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76107, "inners_mem_76107") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76106, "inners_mem_76106") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76105, "inners_mem_76105") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76104, "inners_mem_76104") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76103, "inners_mem_76103") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76102, "inners_mem_76102") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76077, "mem_76077") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76074, "mem_76074") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76071, "mem_76071") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76068, "mem_76068") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76065, "mem_76065") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76062, "mem_76062") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76060, "mem_76060") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76057, "mem_76057") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76055, "mem_76055") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76052, "mem_76052") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76049, "mem_76049") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76046, "mem_76046") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76043, "mem_76043") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76040, "mem_76040") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76037, "mem_76037") != 0)
            return 1;
        if (memblock_unref_device(ctx, &xs_mem_75997, "xs_mem_75997") != 0)
            return 1;
        if (memblock_unref_device(ctx, &xs_mem_75996, "xs_mem_75996") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_76034, "res_mem_76034") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_76033, "res_mem_76033") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76024, "mem_76024") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76019, "mem_76019") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76014, "mem_76014") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76010, "mem_76010") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76007, "mem_76007") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76004, "mem_76004") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76000, "mem_76000") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75995, "mem_75995") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75992, "mem_75992") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76749,
                                  "group_res_arr_mem_76749") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76747,
                                  "group_res_arr_mem_76747") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76745,
                                  "group_res_arr_mem_76745") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76743,
                                  "group_res_arr_mem_76743") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76741,
                                  "group_res_arr_mem_76741") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76739,
                                  "group_res_arr_mem_76739") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75989, "mem_75989") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75986, "mem_75986") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75983, "mem_75983") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75980, "mem_75980") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75977, "mem_75977") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75974, "mem_75974") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_76733, "out_mem_76733") != 0)
            return 1;
        return 1;
    }
    
    bool bounds_invalid_upwards_71110 = slt32(w_70472, 0);
    bool valid_71111 = !bounds_invalid_upwards_71110;
    bool range_valid_c_71112;
    
    if (!valid_71111) {
        ctx->error = msgprintf("Error: %s%d%s%d%s%d%s\n\nBacktrace:\n%s",
                               "Range ", 0, "..", 1, "..<", w_70472,
                               " is invalid.",
                               "-> #0  /futlib/math.fut:413:23-30\n   #1  /futlib/array.fut:60:3-12\n   #2  /futlib/array.fut:126:11-16\n   #3  /futlib/functional.fut:15:59-65\n   #4  /futlib/soacs.fut:48:3-10\n   #5  /futlib/array.fut:130:3-34\n   #6  ray.fut:168:6-35\n   #7  ray.fut:252:6-24\n   #8  ray.fut:250:1-252:24\n");
        if (memblock_unref_device(ctx, &inners_mem_76083, "inners_mem_76083") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76082, "inners_mem_76082") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76081, "inners_mem_76081") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76080, "inners_mem_76080") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76079, "inners_mem_76079") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76078, "inners_mem_76078") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76107, "inners_mem_76107") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76106, "inners_mem_76106") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76105, "inners_mem_76105") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76104, "inners_mem_76104") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76103, "inners_mem_76103") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_76102, "inners_mem_76102") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76077, "mem_76077") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76074, "mem_76074") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76071, "mem_76071") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76068, "mem_76068") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76065, "mem_76065") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76062, "mem_76062") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76060, "mem_76060") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76057, "mem_76057") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76055, "mem_76055") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76052, "mem_76052") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76049, "mem_76049") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76046, "mem_76046") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76043, "mem_76043") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76040, "mem_76040") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76037, "mem_76037") != 0)
            return 1;
        if (memblock_unref_device(ctx, &xs_mem_75997, "xs_mem_75997") != 0)
            return 1;
        if (memblock_unref_device(ctx, &xs_mem_75996, "xs_mem_75996") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_76034, "res_mem_76034") != 0)
            return 1;
        if (memblock_unref_device(ctx, &res_mem_76033, "res_mem_76033") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76024, "mem_76024") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76019, "mem_76019") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76014, "mem_76014") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76010, "mem_76010") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76007, "mem_76007") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76004, "mem_76004") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76000, "mem_76000") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75995, "mem_75995") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75992, "mem_75992") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76749,
                                  "group_res_arr_mem_76749") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76747,
                                  "group_res_arr_mem_76747") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76745,
                                  "group_res_arr_mem_76745") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76743,
                                  "group_res_arr_mem_76743") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76741,
                                  "group_res_arr_mem_76741") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76739,
                                  "group_res_arr_mem_76739") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75989, "mem_75989") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75986, "mem_75986") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75983, "mem_75983") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75980, "mem_75980") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75977, "mem_75977") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_75974, "mem_75974") != 0)
            return 1;
        if (memblock_unref_device(ctx, &out_mem_76733, "out_mem_76733") != 0)
            return 1;
        return 1;
    }
    
    int64_t h_74345 = sext_i32_i64(h_70471);
    int64_t w_74346 = sext_i32_i64(w_70472);
    int64_t nest_sizze_74348 = mul64(h_74345, w_74346);
    int32_t segmap_group_sizze_74350;
    
    segmap_group_sizze_74350 =
        ctx->sizes.render_rgbboxzisegmap_group_sizze_74349;
    
    int64_t segmap_group_sizze_74351 = sext_i32_i64(segmap_group_sizze_74350);
    int64_t y_74352 = sub64(segmap_group_sizze_74351, 1);
    int64_t x_74353 = add64(nest_sizze_74348, y_74352);
    int64_t segmap_usable_groups_64_74355 = squot64(x_74353,
                                                    segmap_group_sizze_74351);
    int32_t segmap_usable_groups_74356 =
            sext_i64_i32(segmap_usable_groups_64_74355);
    int64_t bytes_76108 = mul64(4, nest_sizze_74348);
    struct memblock_device mem_76112;
    
    mem_76112.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76112, bytes_76108, "mem_76112"))
        return 1;
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 1,
                                            sizeof(h_70471), &h_70471));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 2,
                                            sizeof(w_70472), &w_70472));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 3,
                                            sizeof(res_71098), &res_71098));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 4,
                                            sizeof(res_71099), &res_71099));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 5,
                                            sizeof(res_71103), &res_71103));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 6,
                                            sizeof(res_71105), &res_71105));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 7,
                                            sizeof(mem_76040.mem),
                                            &mem_76040.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 8,
                                            sizeof(mem_76043.mem),
                                            &mem_76043.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 9,
                                            sizeof(mem_76046.mem),
                                            &mem_76046.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 10,
                                            sizeof(mem_76049.mem),
                                            &mem_76049.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 11,
                                            sizeof(mem_76052.mem),
                                            &mem_76052.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 12,
                                            sizeof(mem_76055.mem),
                                            &mem_76055.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 13,
                                            sizeof(mem_76057.mem),
                                            &mem_76057.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 14,
                                            sizeof(mem_76060.mem),
                                            &mem_76060.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 15,
                                            sizeof(mem_76062.mem),
                                            &mem_76062.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 16,
                                            sizeof(mem_76065.mem),
                                            &mem_76065.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 17,
                                            sizeof(mem_76074.mem),
                                            &mem_76074.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 18,
                                            sizeof(inners_mem_76102.mem),
                                            &inners_mem_76102.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 19,
                                            sizeof(inners_mem_76103.mem),
                                            &inners_mem_76103.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 20,
                                            sizeof(inners_mem_76104.mem),
                                            &inners_mem_76104.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 21,
                                            sizeof(inners_mem_76105.mem),
                                            &inners_mem_76105.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 22,
                                            sizeof(inners_mem_76106.mem),
                                            &inners_mem_76106.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 23,
                                            sizeof(inners_mem_76107.mem),
                                            &inners_mem_76107.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_74344, 24,
                                            sizeof(mem_76112.mem),
                                            &mem_76112.mem));
    if (1 * (segmap_usable_groups_74356 * segmap_group_sizze_74350) != 0) {
        const size_t global_work_sizze_77398[1] = {segmap_usable_groups_74356 *
                     segmap_group_sizze_74350};
        const size_t local_work_sizze_77402[1] = {segmap_group_sizze_74350};
        int64_t time_start_77399 = 0, time_end_77400 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_74344");
            fprintf(stderr, "%zu", global_work_sizze_77398[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77402[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77399 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_74344, 1,
                                                        NULL,
                                                        global_work_sizze_77398,
                                                        local_work_sizze_77402,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_74344_runs,
                                                                                                  &ctx->segmap_74344_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77400 = get_wall_time();
            
            long time_diff_77401 = time_end_77400 - time_start_77399;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_74344",
                    time_diff_77401);
        }
    }
    if (memblock_unref_device(ctx, &mem_76040, "mem_76040") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76043, "mem_76043") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76046, "mem_76046") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76049, "mem_76049") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76052, "mem_76052") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76055, "mem_76055") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76057, "mem_76057") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76060, "mem_76060") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76062, "mem_76062") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76065, "mem_76065") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76074, "mem_76074") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76102, "inners_mem_76102") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76103, "inners_mem_76103") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76104, "inners_mem_76104") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76105, "inners_mem_76105") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76106, "inners_mem_76106") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76107, "inners_mem_76107") != 0)
        return 1;
    out_arrsizze_76734 = h_70471;
    out_arrsizze_76735 = w_70472;
    if (memblock_set_device(ctx, &out_mem_76733, &mem_76112, "mem_76112") != 0)
        return 1;
    (*out_mem_p_77319).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77319, &out_mem_76733,
                            "out_mem_76733") != 0)
        return 1;
    *out_out_arrsizze_77320 = out_arrsizze_76734;
    *out_out_arrsizze_77321 = out_arrsizze_76735;
    if (memblock_unref_device(ctx, &mem_76112, "mem_76112") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76083, "inners_mem_76083") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76082, "inners_mem_76082") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76081, "inners_mem_76081") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76080, "inners_mem_76080") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76079, "inners_mem_76079") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76078, "inners_mem_76078") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76107, "inners_mem_76107") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76106, "inners_mem_76106") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76105, "inners_mem_76105") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76104, "inners_mem_76104") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76103, "inners_mem_76103") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76102, "inners_mem_76102") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76077, "mem_76077") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76074, "mem_76074") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76071, "mem_76071") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76068, "mem_76068") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76065, "mem_76065") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76062, "mem_76062") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76060, "mem_76060") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76057, "mem_76057") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76055, "mem_76055") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76052, "mem_76052") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76049, "mem_76049") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76046, "mem_76046") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76043, "mem_76043") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76040, "mem_76040") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76037, "mem_76037") != 0)
        return 1;
    if (memblock_unref_device(ctx, &xs_mem_75997, "xs_mem_75997") != 0)
        return 1;
    if (memblock_unref_device(ctx, &xs_mem_75996, "xs_mem_75996") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_76034, "res_mem_76034") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_76033, "res_mem_76033") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76024, "mem_76024") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76019, "mem_76019") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76014, "mem_76014") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76010, "mem_76010") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76007, "mem_76007") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76004, "mem_76004") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76000, "mem_76000") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75995, "mem_75995") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75992, "mem_75992") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76749,
                              "group_res_arr_mem_76749") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76747,
                              "group_res_arr_mem_76747") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76745,
                              "group_res_arr_mem_76745") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76743,
                              "group_res_arr_mem_76743") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76741,
                              "group_res_arr_mem_76741") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76739,
                              "group_res_arr_mem_76739") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75989, "mem_75989") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75986, "mem_75986") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75983, "mem_75983") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75980, "mem_75980") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75977, "mem_75977") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75974, "mem_75974") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76733, "out_mem_76733") != 0)
        return 1;
    return 0;
}
static int futrts_bvh_irreg(struct futhark_context *ctx,
                            struct memblock_device *out_mem_p_77403,
                            int32_t *out_out_arrsizze_77404,
                            struct memblock_device *out_mem_p_77405,
                            struct memblock_device *out_mem_p_77406,
                            struct memblock_device *out_mem_p_77407,
                            struct memblock_device *out_mem_p_77408,
                            struct memblock_device *out_mem_p_77409,
                            struct memblock_device *out_mem_p_77410,
                            struct memblock_device *out_mem_p_77411,
                            struct memblock_device *out_mem_p_77412,
                            struct memblock_device *out_mem_p_77413,
                            struct memblock_device *out_mem_p_77414,
                            struct memblock_device *out_mem_p_77415,
                            int32_t *out_out_arrsizze_77416,
                            struct memblock_device *out_mem_p_77417,
                            struct memblock_device *out_mem_p_77418,
                            struct memblock_device *out_mem_p_77419,
                            struct memblock_device *out_mem_p_77420,
                            struct memblock_device *out_mem_p_77421,
                            struct memblock_device *out_mem_p_77422,
                            float *out_scalar_out_77423,
                            float *out_scalar_out_77424,
                            float *out_scalar_out_77425,
                            float *out_scalar_out_77426,
                            float *out_scalar_out_77427,
                            float *out_scalar_out_77428,
                            float *out_scalar_out_77429,
                            float *out_scalar_out_77430,
                            float *out_scalar_out_77431,
                            float *out_scalar_out_77432,
                            float *out_scalar_out_77433,
                            float *out_scalar_out_77434, int32_t h_69987,
                            int32_t w_69988)
{
    struct memblock_device out_mem_76478;
    
    out_mem_76478.references = NULL;
    
    int32_t out_arrsizze_76479;
    struct memblock_device out_mem_76480;
    
    out_mem_76480.references = NULL;
    
    struct memblock_device out_mem_76481;
    
    out_mem_76481.references = NULL;
    
    struct memblock_device out_mem_76482;
    
    out_mem_76482.references = NULL;
    
    struct memblock_device out_mem_76483;
    
    out_mem_76483.references = NULL;
    
    struct memblock_device out_mem_76484;
    
    out_mem_76484.references = NULL;
    
    struct memblock_device out_mem_76485;
    
    out_mem_76485.references = NULL;
    
    struct memblock_device out_mem_76486;
    
    out_mem_76486.references = NULL;
    
    struct memblock_device out_mem_76487;
    
    out_mem_76487.references = NULL;
    
    struct memblock_device out_mem_76488;
    
    out_mem_76488.references = NULL;
    
    struct memblock_device out_mem_76489;
    
    out_mem_76489.references = NULL;
    
    struct memblock_device out_mem_76490;
    
    out_mem_76490.references = NULL;
    
    int32_t out_arrsizze_76491;
    struct memblock_device out_mem_76492;
    
    out_mem_76492.references = NULL;
    
    struct memblock_device out_mem_76493;
    
    out_mem_76493.references = NULL;
    
    struct memblock_device out_mem_76494;
    
    out_mem_76494.references = NULL;
    
    struct memblock_device out_mem_76495;
    
    out_mem_76495.references = NULL;
    
    struct memblock_device out_mem_76496;
    
    out_mem_76496.references = NULL;
    
    struct memblock_device out_mem_76497;
    
    out_mem_76497.references = NULL;
    
    float scalar_out_76498;
    float scalar_out_76499;
    float scalar_out_76500;
    float scalar_out_76501;
    float scalar_out_76502;
    float scalar_out_76503;
    float scalar_out_76504;
    float scalar_out_76505;
    float scalar_out_76506;
    float scalar_out_76507;
    float scalar_out_76508;
    float scalar_out_76509;
    int32_t segred_group_sizze_73185;
    
    segred_group_sizze_73185 = ctx->sizes.bvh_irregzisegred_group_sizze_73184;
    
    int32_t num_groups_73187;
    int32_t max_num_groups_76510;
    
    max_num_groups_76510 = ctx->sizes.bvh_irregzisegred_num_groups_73186;
    num_groups_73187 = sext_i64_i32(smax64(1, smin64(squot64(sub64(add64(10000,
                                                                         sext_i32_i64(segred_group_sizze_73185)),
                                                                   1),
                                                             sext_i32_i64(segred_group_sizze_73185)),
                                                     sext_i32_i64(max_num_groups_76510))));
    
    struct memblock_device mem_75974;
    
    mem_75974.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75974, 4, "mem_75974"))
        return 1;
    
    struct memblock_device mem_75977;
    
    mem_75977.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75977, 4, "mem_75977"))
        return 1;
    
    struct memblock_device mem_75980;
    
    mem_75980.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75980, 4, "mem_75980"))
        return 1;
    
    struct memblock_device mem_75983;
    
    mem_75983.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75983, 4, "mem_75983"))
        return 1;
    
    struct memblock_device mem_75986;
    
    mem_75986.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75986, 4, "mem_75986"))
        return 1;
    
    struct memblock_device mem_75989;
    
    mem_75989.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75989, 4, "mem_75989"))
        return 1;
    
    struct memblock_device counter_mem_76511 = ctx->counter_mem_76511;
    struct memblock_device group_res_arr_mem_76513;
    
    group_res_arr_mem_76513.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76513,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_73185,
                                          num_groups_73187)),
                              "group_res_arr_mem_76513"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76515;
    
    group_res_arr_mem_76515.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76515,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_73185,
                                          num_groups_73187)),
                              "group_res_arr_mem_76515"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76517;
    
    group_res_arr_mem_76517.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76517,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_73185,
                                          num_groups_73187)),
                              "group_res_arr_mem_76517"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76519;
    
    group_res_arr_mem_76519.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76519,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_73185,
                                          num_groups_73187)),
                              "group_res_arr_mem_76519"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76521;
    
    group_res_arr_mem_76521.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76521,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_73185,
                                          num_groups_73187)),
                              "group_res_arr_mem_76521"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76523;
    
    group_res_arr_mem_76523.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76523,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_73185,
                                          num_groups_73187)),
                              "group_res_arr_mem_76523"))
        return 1;
    
    int32_t num_threads_76525 = mul32(num_groups_73187,
                                      segred_group_sizze_73185);
    
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 1,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_73185),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 2,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_73185),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 3,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_73185),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 4,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_73185),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 5,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_73185),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 6,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_73185),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 7,
                                            (int32_t) sizeof(bool), NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 8,
                                            sizeof(num_groups_73187),
                                            &num_groups_73187));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 9,
                                            sizeof(mem_75974.mem),
                                            &mem_75974.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 10,
                                            sizeof(mem_75977.mem),
                                            &mem_75977.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 11,
                                            sizeof(mem_75980.mem),
                                            &mem_75980.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 12,
                                            sizeof(mem_75983.mem),
                                            &mem_75983.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 13,
                                            sizeof(mem_75986.mem),
                                            &mem_75986.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 14,
                                            sizeof(mem_75989.mem),
                                            &mem_75989.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 15,
                                            sizeof(counter_mem_76511.mem),
                                            &counter_mem_76511.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 16,
                                            sizeof(group_res_arr_mem_76513.mem),
                                            &group_res_arr_mem_76513.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 17,
                                            sizeof(group_res_arr_mem_76515.mem),
                                            &group_res_arr_mem_76515.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 18,
                                            sizeof(group_res_arr_mem_76517.mem),
                                            &group_res_arr_mem_76517.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 19,
                                            sizeof(group_res_arr_mem_76519.mem),
                                            &group_res_arr_mem_76519.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 20,
                                            sizeof(group_res_arr_mem_76521.mem),
                                            &group_res_arr_mem_76521.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 21,
                                            sizeof(group_res_arr_mem_76523.mem),
                                            &group_res_arr_mem_76523.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73197, 22,
                                            sizeof(num_threads_76525),
                                            &num_threads_76525));
    if (1 * (num_groups_73187 * segred_group_sizze_73185) != 0) {
        const size_t global_work_sizze_77436[1] = {num_groups_73187 *
                     segred_group_sizze_73185};
        const size_t local_work_sizze_77440[1] = {segred_group_sizze_73185};
        int64_t time_start_77437 = 0, time_end_77438 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segred_nonseg_73197");
            fprintf(stderr, "%zu", global_work_sizze_77436[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77440[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) (0 + mul32((int32_t) sizeof(float),
                                     segred_group_sizze_73185) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_73185) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_73185) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_73185) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_73185) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_73185) +
                           (int32_t) sizeof(bool)));
            time_start_77437 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segred_nonseg_73197,
                                                        1, NULL,
                                                        global_work_sizze_77436,
                                                        local_work_sizze_77440,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segred_nonseg_73197_runs,
                                                                                                  &ctx->segred_nonseg_73197_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77438 = get_wall_time();
            
            long time_diff_77439 = time_end_77438 - time_start_77437;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segred_nonseg_73197",
                    time_diff_77439);
        }
    }
    
    float read_res_77441;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75974.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77441,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_70005 = read_res_77441;
    
    if (memblock_unref_device(ctx, &mem_75974, "mem_75974") != 0)
        return 1;
    
    float read_res_77442;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75977.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77442,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_70006 = read_res_77442;
    
    if (memblock_unref_device(ctx, &mem_75977, "mem_75977") != 0)
        return 1;
    
    float read_res_77443;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75980.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77443,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_70007 = read_res_77443;
    
    if (memblock_unref_device(ctx, &mem_75980, "mem_75980") != 0)
        return 1;
    
    float read_res_77444;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75983.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77444,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_70008 = read_res_77444;
    
    if (memblock_unref_device(ctx, &mem_75983, "mem_75983") != 0)
        return 1;
    
    float read_res_77445;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75986.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77445,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_70009 = read_res_77445;
    
    if (memblock_unref_device(ctx, &mem_75986, "mem_75986") != 0)
        return 1;
    
    float read_res_77446;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75989.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77446,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_70010 = read_res_77446;
    
    if (memblock_unref_device(ctx, &mem_75989, "mem_75989") != 0)
        return 1;
    
    float y_70040 = res_70005 - res_70008;
    float y_70041 = res_70006 - res_70009;
    float y_70042 = res_70007 - res_70010;
    float x_70043 = 3.0F - res_70009;
    float res_70044 = x_70043 / y_70041;
    float max_arg_70045 = 1024.0F * res_70044;
    float res_70046 = fmax32(0.0F, max_arg_70045);
    float res_70047 = fmin32(1023.0F, res_70046);
    int32_t unsign_arg_70048 = fptoui_f32_i32(res_70047);
    int32_t x_70049 = mul32(65537, unsign_arg_70048);
    int32_t v_70050 = -16776961 & x_70049;
    int32_t x_70051 = mul32(257, v_70050);
    int32_t v_70052 = 251719695 & x_70051;
    int32_t x_70053 = mul32(17, v_70052);
    int32_t v_70054 = -1022611261 & x_70053;
    int32_t x_70055 = mul32(5, v_70054);
    int32_t v_70056 = 1227133513 & x_70055;
    int32_t y_70057 = mul32(2, v_70056);
    int32_t segmap_group_sizze_73203;
    
    segmap_group_sizze_73203 = ctx->sizes.bvh_irregzisegmap_group_sizze_73202;
    
    int64_t segmap_group_sizze_73204 = sext_i32_i64(segmap_group_sizze_73203);
    int64_t y_73205 = sub64(segmap_group_sizze_73204, 1);
    int64_t x_73206 = add64(10000, y_73205);
    int64_t segmap_usable_groups_64_73208 = squot64(x_73206,
                                                    segmap_group_sizze_73204);
    int32_t segmap_usable_groups_73209 =
            sext_i64_i32(segmap_usable_groups_64_73208);
    struct memblock_device mem_75992;
    
    mem_75992.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75992, 40000, "mem_75992"))
        return 1;
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73199, 1,
                                            sizeof(res_70008), &res_70008));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73199, 2,
                                            sizeof(res_70010), &res_70010));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73199, 3,
                                            sizeof(y_70040), &y_70040));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73199, 4,
                                            sizeof(y_70042), &y_70042));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73199, 5,
                                            sizeof(y_70057), &y_70057));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73199, 6,
                                            sizeof(mem_75992.mem),
                                            &mem_75992.mem));
    if (1 * (segmap_usable_groups_73209 * segmap_group_sizze_73203) != 0) {
        const size_t global_work_sizze_77447[1] = {segmap_usable_groups_73209 *
                     segmap_group_sizze_73203};
        const size_t local_work_sizze_77451[1] = {segmap_group_sizze_73203};
        int64_t time_start_77448 = 0, time_end_77449 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_73199");
            fprintf(stderr, "%zu", global_work_sizze_77447[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77451[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77448 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_73199, 1,
                                                        NULL,
                                                        global_work_sizze_77447,
                                                        local_work_sizze_77451,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_73199_runs,
                                                                                                  &ctx->segmap_73199_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77449 = get_wall_time();
            
            long time_diff_77450 = time_end_77449 - time_start_77448;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_73199",
                    time_diff_77450);
        }
    }
    
    struct memblock_device mem_75995;
    
    mem_75995.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75995, 40000, "mem_75995"))
        return 1;
    
    int32_t group_sizze_76585;
    
    group_sizze_76585 = ctx->sizes.bvh_irregzigroup_sizze_76585;
    
    int32_t num_groups_76586;
    
    num_groups_76586 = squot32(sub32(add32(10000,
                                           sext_i32_i32(group_sizze_76585)), 1),
                               sext_i32_i32(group_sizze_76585));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->iota_76582, 0,
                                            sizeof(mem_75995.mem),
                                            &mem_75995.mem));
    if (1 * (num_groups_76586 * group_sizze_76585) != 0) {
        const size_t global_work_sizze_77452[1] = {num_groups_76586 *
                     group_sizze_76585};
        const size_t local_work_sizze_77456[1] = {group_sizze_76585};
        int64_t time_start_77453 = 0, time_end_77454 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "iota_76582");
            fprintf(stderr, "%zu", global_work_sizze_77452[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77456[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77453 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->iota_76582, 1,
                                                        NULL,
                                                        global_work_sizze_77452,
                                                        local_work_sizze_77456,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->iota_76582_runs,
                                                                                                  &ctx->iota_76582_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77454 = get_wall_time();
            
            long time_diff_77455 = time_end_77454 - time_start_77453;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "iota_76582",
                    time_diff_77455);
        }
    }
    
    int32_t segmap_group_sizze_73256;
    
    segmap_group_sizze_73256 = ctx->sizes.bvh_irregzisegmap_group_sizze_73255;
    
    int64_t segmap_group_sizze_73257 = sext_i32_i64(segmap_group_sizze_73256);
    int64_t y_73258 = sub64(segmap_group_sizze_73257, 1);
    int64_t x_73259 = add64(10000, y_73258);
    int64_t x_75680 = squot64(x_73259, segmap_group_sizze_73257);
    int32_t segmap_usable_groups_73262 = sext_i64_i32(x_75680);
    int32_t segscan_group_sizze_73269;
    
    segscan_group_sizze_73269 = ctx->sizes.bvh_irregzisegscan_group_sizze_73268;
    
    int32_t num_groups_73271;
    int32_t max_num_groups_76587;
    
    max_num_groups_76587 = ctx->sizes.bvh_irregzisegscan_num_groups_73270;
    num_groups_73271 = sext_i64_i32(smax64(1, smin64(squot64(sub64(add64(10000,
                                                                         sext_i32_i64(segscan_group_sizze_73269)),
                                                                   1),
                                                             sext_i32_i64(segscan_group_sizze_73269)),
                                                     sext_i32_i64(max_num_groups_76587))));
    
    int32_t segred_group_sizze_73278;
    
    segred_group_sizze_73278 = ctx->sizes.bvh_irregzisegred_group_sizze_73277;
    
    int32_t num_groups_73280;
    int32_t max_num_groups_76588;
    
    max_num_groups_76588 = ctx->sizes.bvh_irregzisegred_num_groups_73279;
    num_groups_73280 = sext_i64_i32(smax64(1, smin64(squot64(sub64(add64(10000,
                                                                         sext_i32_i64(segred_group_sizze_73278)),
                                                                   1),
                                                             sext_i32_i64(segred_group_sizze_73278)),
                                                     sext_i32_i64(max_num_groups_76588))));
    
    int32_t segmap_group_sizze_73293;
    
    segmap_group_sizze_73293 = ctx->sizes.bvh_irregzisegmap_group_sizze_73292;
    
    int64_t segmap_group_sizze_73294 = sext_i32_i64(segmap_group_sizze_73293);
    int64_t y_73295 = sub64(segmap_group_sizze_73294, 1);
    int64_t x_73296 = add64(10000, y_73295);
    int64_t x_75682 = squot64(x_73296, segmap_group_sizze_73294);
    int32_t segmap_usable_groups_73299 = sext_i64_i32(x_75682);
    struct memblock_device mem_76000;
    
    mem_76000.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76000, 40000, "mem_76000"))
        return 1;
    
    struct memblock_device mem_76004;
    
    mem_76004.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76004, 40000, "mem_76004"))
        return 1;
    
    struct memblock_device mem_76007;
    
    mem_76007.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76007, 40000, "mem_76007"))
        return 1;
    
    struct memblock_device mem_76010;
    
    mem_76010.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76010, 40000, "mem_76010"))
        return 1;
    
    struct memblock_device mem_76014;
    
    mem_76014.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76014, 4, "mem_76014"))
        return 1;
    
    struct memblock_device mem_76019;
    
    mem_76019.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76019, 40000, "mem_76019"))
        return 1;
    
    struct memblock_device mem_76024;
    
    mem_76024.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76024, 40000, "mem_76024"))
        return 1;
    
    struct memblock_device res_mem_76033;
    
    res_mem_76033.references = NULL;
    
    struct memblock_device res_mem_76034;
    
    res_mem_76034.references = NULL;
    
    struct memblock_device xs_mem_75996;
    
    xs_mem_75996.references = NULL;
    
    struct memblock_device xs_mem_75997;
    
    xs_mem_75997.references = NULL;
    if (memblock_set_device(ctx, &xs_mem_75996, &mem_75992, "mem_75992") != 0)
        return 1;
    if (memblock_set_device(ctx, &xs_mem_75997, &mem_75995, "mem_75995") != 0)
        return 1;
    for (int32_t i_70105 = 0; i_70105 < 32; i_70105++) {
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73252, 1,
                                                sizeof(i_70105), &i_70105));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73252, 2,
                                                sizeof(xs_mem_75996.mem),
                                                &xs_mem_75996.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73252, 3,
                                                sizeof(mem_76000.mem),
                                                &mem_76000.mem));
        if (1 * (segmap_usable_groups_73262 * segmap_group_sizze_73256) != 0) {
            const size_t global_work_sizze_77457[1] =
                         {segmap_usable_groups_73262 *
                         segmap_group_sizze_73256};
            const size_t local_work_sizze_77461[1] = {segmap_group_sizze_73256};
            int64_t time_start_77458 = 0, time_end_77459 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "segmap_73252");
                fprintf(stderr, "%zu", global_work_sizze_77457[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77461[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_77458 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->segmap_73252,
                                                            1, NULL,
                                                            global_work_sizze_77457,
                                                            local_work_sizze_77461,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->segmap_73252_runs,
                                                                                                      &ctx->segmap_73252_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77459 = get_wall_time();
                
                long time_diff_77460 = time_end_77459 - time_start_77458;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_73252",
                        time_diff_77460);
            }
        }
        
        int32_t num_threads_76598 = mul32(num_groups_73271,
                                          segscan_group_sizze_73269);
        
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_73274, 1,
                                                mul32((int32_t) sizeof(int32_t),
                                                      segscan_group_sizze_73269),
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_73274, 2,
                                                mul32((int32_t) sizeof(int32_t),
                                                      segscan_group_sizze_73269),
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_73274, 3,
                                                sizeof(mem_76000.mem),
                                                &mem_76000.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_73274, 4,
                                                sizeof(mem_76004.mem),
                                                &mem_76004.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_73274, 5,
                                                sizeof(mem_76007.mem),
                                                &mem_76007.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_73274, 6,
                                                sizeof(mem_76010.mem),
                                                &mem_76010.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_73274, 7,
                                                sizeof(num_threads_76598),
                                                &num_threads_76598));
        if (1 * (num_groups_73271 * segscan_group_sizze_73269) != 0) {
            const size_t global_work_sizze_77462[1] = {num_groups_73271 *
                         segscan_group_sizze_73269};
            const size_t local_work_sizze_77466[1] =
                         {segscan_group_sizze_73269};
            int64_t time_start_77463 = 0, time_end_77464 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "scan_stage1_73274");
                fprintf(stderr, "%zu", global_work_sizze_77462[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77466[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) (0 + mul32((int32_t) sizeof(int32_t),
                                         segscan_group_sizze_73269) +
                               mul32((int32_t) sizeof(int32_t),
                                     segscan_group_sizze_73269)));
                time_start_77463 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->scan_stage1_73274,
                                                            1, NULL,
                                                            global_work_sizze_77462,
                                                            local_work_sizze_77466,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->scan_stage1_73274_runs,
                                                                                                      &ctx->scan_stage1_73274_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77464 = get_wall_time();
                
                long time_diff_77465 = time_end_77464 - time_start_77463;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "scan_stage1_73274", time_diff_77465);
            }
        }
        if (ctx->debugging)
            fprintf(stderr, "%s\n", "\n# SegScan");
        if (ctx->debugging)
            fprintf(stderr, "%s: %llu%c", "elems_per_group",
                    (long long) mul32(segscan_group_sizze_73269,
                                      squot32(sub32(add32(10000,
                                                          num_threads_76598),
                                                    1), num_threads_76598)),
                    '\n');
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_73274, 1,
                                                mul32((int32_t) sizeof(int32_t),
                                                      num_groups_73271), NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_73274, 2,
                                                mul32((int32_t) sizeof(int32_t),
                                                      num_groups_73271), NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_73274, 3,
                                                sizeof(num_groups_73271),
                                                &num_groups_73271));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_73274, 4,
                                                sizeof(mem_76004.mem),
                                                &mem_76004.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_73274, 5,
                                                sizeof(mem_76007.mem),
                                                &mem_76007.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_73274, 6,
                                                sizeof(num_threads_76598),
                                                &num_threads_76598));
        if (1 * (1 * num_groups_73271) != 0) {
            const size_t global_work_sizze_77467[1] = {1 * num_groups_73271};
            const size_t local_work_sizze_77471[1] = {num_groups_73271};
            int64_t time_start_77468 = 0, time_end_77469 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "scan_stage2_73274");
                fprintf(stderr, "%zu", global_work_sizze_77467[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77471[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) (0 + mul32((int32_t) sizeof(int32_t),
                                         num_groups_73271) +
                               mul32((int32_t) sizeof(int32_t),
                                     num_groups_73271)));
                time_start_77468 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->scan_stage2_73274,
                                                            1, NULL,
                                                            global_work_sizze_77467,
                                                            local_work_sizze_77471,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->scan_stage2_73274_runs,
                                                                                                      &ctx->scan_stage2_73274_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77469 = get_wall_time();
                
                long time_diff_77470 = time_end_77469 - time_start_77468;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "scan_stage2_73274", time_diff_77470);
            }
        }
        
        int32_t group_sizze_76658;
        
        group_sizze_76658 = ctx->sizes.bvh_irregzigroup_sizze_76658;
        
        int32_t num_groups_76659;
        
        num_groups_76659 = squot32(sub32(add32(10000,
                                               sext_i32_i32(group_sizze_76658)),
                                         1), sext_i32_i32(group_sizze_76658));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage3_76655, 1,
                                                sizeof(mem_76004.mem),
                                                &mem_76004.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage3_76655, 2,
                                                sizeof(mem_76007.mem),
                                                &mem_76007.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage3_76655, 3,
                                                sizeof(num_threads_76598),
                                                &num_threads_76598));
        if (1 * (num_groups_76659 * group_sizze_76658) != 0) {
            const size_t global_work_sizze_77472[1] = {num_groups_76659 *
                         group_sizze_76658};
            const size_t local_work_sizze_77476[1] = {group_sizze_76658};
            int64_t time_start_77473 = 0, time_end_77474 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "scan_stage3_76655");
                fprintf(stderr, "%zu", global_work_sizze_77472[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77476[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_77473 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->scan_stage3_76655,
                                                            1, NULL,
                                                            global_work_sizze_77472,
                                                            local_work_sizze_77476,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->scan_stage3_76655_runs,
                                                                                                      &ctx->scan_stage3_76655_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77474 = get_wall_time();
                
                long time_diff_77475 = time_end_77474 - time_start_77473;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "scan_stage3_76655", time_diff_77475);
            }
        }
        
        struct memblock_device counter_mem_76662 = ctx->counter_mem_76662;
        struct memblock_device group_res_arr_mem_76664;
        
        group_res_arr_mem_76664.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_76664,
                                  mul32((int32_t) sizeof(int32_t),
                                        mul32(segred_group_sizze_73278,
                                              num_groups_73280)),
                                  "group_res_arr_mem_76664"))
            return 1;
        
        int32_t num_threads_76666 = mul32(num_groups_73280,
                                          segred_group_sizze_73278);
        
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73287, 1,
                                                mul32((int32_t) sizeof(int32_t),
                                                      segred_group_sizze_73278),
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73287, 2,
                                                (int32_t) sizeof(bool), NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73287, 3,
                                                sizeof(num_groups_73280),
                                                &num_groups_73280));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73287, 4,
                                                sizeof(xs_mem_75996.mem),
                                                &xs_mem_75996.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73287, 5,
                                                sizeof(xs_mem_75997.mem),
                                                &xs_mem_75997.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73287, 6,
                                                sizeof(mem_76010.mem),
                                                &mem_76010.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73287, 7,
                                                sizeof(mem_76014.mem),
                                                &mem_76014.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73287, 8,
                                                sizeof(mem_76019.mem),
                                                &mem_76019.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73287, 9,
                                                sizeof(mem_76024.mem),
                                                &mem_76024.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73287, 10,
                                                sizeof(counter_mem_76662.mem),
                                                &counter_mem_76662.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73287, 11,
                                                sizeof(group_res_arr_mem_76664.mem),
                                                &group_res_arr_mem_76664.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_73287, 12,
                                                sizeof(num_threads_76666),
                                                &num_threads_76666));
        if (1 * (num_groups_73280 * segred_group_sizze_73278) != 0) {
            const size_t global_work_sizze_77478[1] = {num_groups_73280 *
                         segred_group_sizze_73278};
            const size_t local_work_sizze_77482[1] = {segred_group_sizze_73278};
            int64_t time_start_77479 = 0, time_end_77480 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "segred_nonseg_73287");
                fprintf(stderr, "%zu", global_work_sizze_77478[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77482[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) (0 + mul32((int32_t) sizeof(int32_t),
                                         segred_group_sizze_73278) +
                               (int32_t) sizeof(bool)));
                time_start_77479 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->segred_nonseg_73287,
                                                            1, NULL,
                                                            global_work_sizze_77478,
                                                            local_work_sizze_77482,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->segred_nonseg_73287_runs,
                                                                                                      &ctx->segred_nonseg_73287_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77480 = get_wall_time();
                
                long time_diff_77481 = time_end_77480 - time_start_77479;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "segred_nonseg_73287", time_diff_77481);
            }
        }
        
        int32_t read_res_77483;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_76014.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int32_t),
                                                     sizeof(int32_t),
                                                     &read_res_77483, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int32_t res_70137 = read_res_77483;
        
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73289, 1,
                                                sizeof(res_70137), &res_70137));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73289, 2,
                                                sizeof(xs_mem_75996.mem),
                                                &xs_mem_75996.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73289, 3,
                                                sizeof(xs_mem_75997.mem),
                                                &xs_mem_75997.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73289, 4,
                                                sizeof(mem_76000.mem),
                                                &mem_76000.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73289, 5,
                                                sizeof(mem_76004.mem),
                                                &mem_76004.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73289, 6,
                                                sizeof(mem_76007.mem),
                                                &mem_76007.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73289, 7,
                                                sizeof(mem_76010.mem),
                                                &mem_76010.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73289, 8,
                                                sizeof(mem_76019.mem),
                                                &mem_76019.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73289, 9,
                                                sizeof(mem_76024.mem),
                                                &mem_76024.mem));
        if (1 * (segmap_usable_groups_73299 * segmap_group_sizze_73293) != 0) {
            const size_t global_work_sizze_77484[1] =
                         {segmap_usable_groups_73299 *
                         segmap_group_sizze_73293};
            const size_t local_work_sizze_77488[1] = {segmap_group_sizze_73293};
            int64_t time_start_77485 = 0, time_end_77486 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "segmap_73289");
                fprintf(stderr, "%zu", global_work_sizze_77484[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77488[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_77485 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->segmap_73289,
                                                            1, NULL,
                                                            global_work_sizze_77484,
                                                            local_work_sizze_77488,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->segmap_73289_runs,
                                                                                                      &ctx->segmap_73289_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77486 = get_wall_time();
                
                long time_diff_77487 = time_end_77486 - time_start_77485;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_73289",
                        time_diff_77487);
            }
        }
        
        struct memblock_device mem_76027;
        
        mem_76027.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76027, 40000, "mem_76027"))
            return 1;
        if (mul64(sext_i32_i64(10000), (int32_t) sizeof(int32_t)) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         mem_76024.mem,
                                                         mem_76027.mem, 0, 0,
                                                         mul64(sext_i32_i64(10000),
                                                               (int32_t) sizeof(int32_t)),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device mem_76031;
        
        mem_76031.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76031, 40000, "mem_76031"))
            return 1;
        if (mul64(sext_i32_i64(10000), (int32_t) sizeof(int32_t)) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         mem_76019.mem,
                                                         mem_76031.mem, 0, 0,
                                                         mul64(sext_i32_i64(10000),
                                                               (int32_t) sizeof(int32_t)),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device xs_mem_tmp_76589;
        
        xs_mem_tmp_76589.references = NULL;
        if (memblock_set_device(ctx, &xs_mem_tmp_76589, &mem_76027,
                                "mem_76027") != 0)
            return 1;
        
        struct memblock_device xs_mem_tmp_76590;
        
        xs_mem_tmp_76590.references = NULL;
        if (memblock_set_device(ctx, &xs_mem_tmp_76590, &mem_76031,
                                "mem_76031") != 0)
            return 1;
        if (memblock_set_device(ctx, &xs_mem_75996, &xs_mem_tmp_76589,
                                "xs_mem_tmp_76589") != 0)
            return 1;
        if (memblock_set_device(ctx, &xs_mem_75997, &xs_mem_tmp_76590,
                                "xs_mem_tmp_76590") != 0)
            return 1;
        if (memblock_unref_device(ctx, &xs_mem_tmp_76590, "xs_mem_tmp_76590") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &xs_mem_tmp_76589, "xs_mem_tmp_76589") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76031, "mem_76031") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76027, "mem_76027") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76664,
                                  "group_res_arr_mem_76664") != 0)
            return 1;
    }
    if (memblock_set_device(ctx, &res_mem_76033, &xs_mem_75996,
                            "xs_mem_75996") != 0)
        return 1;
    if (memblock_set_device(ctx, &res_mem_76034, &xs_mem_75997,
                            "xs_mem_75997") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75992, "mem_75992") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75995, "mem_75995") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76000, "mem_76000") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76004, "mem_76004") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76007, "mem_76007") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76010, "mem_76010") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76014, "mem_76014") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76019, "mem_76019") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76024, "mem_76024") != 0)
        return 1;
    
    struct memblock_device mem_76037;
    
    mem_76037.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76037, 40000, "mem_76037"))
        return 1;
    
    int call_ret_77489 = futrts__replicate_f32(ctx, mem_76037, 10000, 1.0F);
    
    assert(call_ret_77489 == 0);
    
    struct memblock_device mem_76040;
    
    mem_76040.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76040, 40000, "mem_76040"))
        return 1;
    
    int call_ret_77490 = futrts__replicate_f32(ctx, mem_76040, 10000, 1.0F);
    
    assert(call_ret_77490 == 0);
    
    struct memblock_device mem_76043;
    
    mem_76043.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76043, 40000, "mem_76043"))
        return 1;
    
    int call_ret_77491 = futrts__replicate_f32(ctx, mem_76043, 10000, 1.0F);
    
    assert(call_ret_77491 == 0);
    
    struct memblock_device mem_76046;
    
    mem_76046.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76046, 40000, "mem_76046"))
        return 1;
    
    int call_ret_77492 = futrts__replicate_f32(ctx, mem_76046, 10000, 0.0F);
    
    assert(call_ret_77492 == 0);
    
    struct memblock_device mem_76049;
    
    mem_76049.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76049, 40000, "mem_76049"))
        return 1;
    
    int call_ret_77493 = futrts__replicate_f32(ctx, mem_76049, 10000, 3.0F);
    
    assert(call_ret_77493 == 0);
    
    int32_t segmap_group_sizze_73305;
    
    segmap_group_sizze_73305 = ctx->sizes.bvh_irregzisegmap_group_sizze_73304;
    
    int64_t segmap_group_sizze_73306 = sext_i32_i64(segmap_group_sizze_73305);
    int64_t y_73307 = sub64(segmap_group_sizze_73306, 1);
    int64_t x_73308 = add64(10000, y_73307);
    int64_t segmap_usable_groups_64_73310 = squot64(x_73308,
                                                    segmap_group_sizze_73306);
    int32_t segmap_usable_groups_73311 =
            sext_i64_i32(segmap_usable_groups_64_73310);
    struct memblock_device mem_76052;
    
    mem_76052.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76052, 40000, "mem_76052"))
        return 1;
    
    struct memblock_device mem_76055;
    
    mem_76055.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76055, 40000, "mem_76055"))
        return 1;
    
    struct memblock_device mem_76058;
    
    mem_76058.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76058, 40000, "mem_76058"))
        return 1;
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73301, 1,
                                            sizeof(res_70008), &res_70008));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73301, 2,
                                            sizeof(res_70010), &res_70010));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73301, 3,
                                            sizeof(y_70040), &y_70040));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73301, 4,
                                            sizeof(y_70042), &y_70042));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73301, 5,
                                            sizeof(y_70057), &y_70057));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73301, 6,
                                            sizeof(res_mem_76034.mem),
                                            &res_mem_76034.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73301, 7,
                                            sizeof(mem_76052.mem),
                                            &mem_76052.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73301, 8,
                                            sizeof(mem_76055.mem),
                                            &mem_76055.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73301, 9,
                                            sizeof(mem_76058.mem),
                                            &mem_76058.mem));
    if (1 * (segmap_usable_groups_73311 * segmap_group_sizze_73305) != 0) {
        const size_t global_work_sizze_77494[1] = {segmap_usable_groups_73311 *
                     segmap_group_sizze_73305};
        const size_t local_work_sizze_77498[1] = {segmap_group_sizze_73305};
        int64_t time_start_77495 = 0, time_end_77496 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_73301");
            fprintf(stderr, "%zu", global_work_sizze_77494[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77498[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77495 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_73301, 1,
                                                        NULL,
                                                        global_work_sizze_77494,
                                                        local_work_sizze_77498,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_73301_runs,
                                                                                                  &ctx->segmap_73301_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77496 = get_wall_time();
            
            long time_diff_77497 = time_end_77496 - time_start_77495;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_73301",
                    time_diff_77497);
        }
    }
    if (memblock_unref_device(ctx, &res_mem_76034, "res_mem_76034") != 0)
        return 1;
    
    int32_t segmap_group_sizze_73364;
    
    segmap_group_sizze_73364 = ctx->sizes.bvh_irregzisegmap_group_sizze_73363;
    
    int64_t segmap_group_sizze_73365 = sext_i32_i64(segmap_group_sizze_73364);
    int64_t y_73366 = sub64(segmap_group_sizze_73365, 1);
    int64_t x_73367 = add64(9999, y_73366);
    int64_t segmap_usable_groups_64_73369 = squot64(x_73367,
                                                    segmap_group_sizze_73365);
    int32_t segmap_usable_groups_73370 =
            sext_i64_i32(segmap_usable_groups_64_73369);
    struct memblock_device mem_76060;
    
    mem_76060.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76060, 9999, "mem_76060"))
        return 1;
    
    struct memblock_device mem_76063;
    
    mem_76063.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76063, 39996, "mem_76063"))
        return 1;
    
    struct memblock_device mem_76065;
    
    mem_76065.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76065, 9999, "mem_76065"))
        return 1;
    
    struct memblock_device mem_76068;
    
    mem_76068.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76068, 39996, "mem_76068"))
        return 1;
    
    struct memblock_device mem_76071;
    
    mem_76071.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76071, 39996, "mem_76071"))
        return 1;
    
    struct memblock_device mem_76074;
    
    mem_76074.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76074, 39996, "mem_76074"))
        return 1;
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73360, 1,
                                            sizeof(ctx->failure_is_an_option),
                                            &ctx->failure_is_an_option));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73360, 3,
                                            sizeof(mem_76052.mem),
                                            &mem_76052.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73360, 4,
                                            sizeof(mem_76060.mem),
                                            &mem_76060.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73360, 5,
                                            sizeof(mem_76063.mem),
                                            &mem_76063.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73360, 6,
                                            sizeof(mem_76065.mem),
                                            &mem_76065.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73360, 7,
                                            sizeof(mem_76068.mem),
                                            &mem_76068.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73360, 8,
                                            sizeof(mem_76071.mem),
                                            &mem_76071.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73360, 9,
                                            sizeof(mem_76074.mem),
                                            &mem_76074.mem));
    if (1 * (segmap_usable_groups_73370 * segmap_group_sizze_73364) != 0) {
        const size_t global_work_sizze_77499[1] = {segmap_usable_groups_73370 *
                     segmap_group_sizze_73364};
        const size_t local_work_sizze_77503[1] = {segmap_group_sizze_73364};
        int64_t time_start_77500 = 0, time_end_77501 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_73360");
            fprintf(stderr, "%zu", global_work_sizze_77499[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77503[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77500 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_73360, 1,
                                                        NULL,
                                                        global_work_sizze_77499,
                                                        local_work_sizze_77503,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_73360_runs,
                                                                                                  &ctx->segmap_73360_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77501 = get_wall_time();
            
            long time_diff_77502 = time_end_77501 - time_start_77500;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_73360",
                    time_diff_77502);
        }
    }
    ctx->failure_is_an_option = 1;
    if (memblock_unref_device(ctx, &mem_76052, "mem_76052") != 0)
        return 1;
    
    struct memblock_device mem_76077;
    
    mem_76077.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76077, 39996, "mem_76077"))
        return 1;
    
    int call_ret_77504 = futrts__replicate_i32(ctx, mem_76077, 9999, -1);
    
    assert(call_ret_77504 == 0);
    
    int32_t segmap_group_sizze_73536;
    
    segmap_group_sizze_73536 = ctx->sizes.bvh_irregzisegmap_group_sizze_73535;
    
    int64_t segmap_group_sizze_73537 = sext_i32_i64(segmap_group_sizze_73536);
    int64_t y_73538 = sub64(segmap_group_sizze_73537, 1);
    int64_t x_73539 = add64(9999, y_73538);
    int64_t segmap_usable_groups_64_73541 = squot64(x_73539,
                                                    segmap_group_sizze_73537);
    int32_t segmap_usable_groups_73542 =
            sext_i64_i32(segmap_usable_groups_64_73541);
    
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73532, 1,
                                            sizeof(mem_76071.mem),
                                            &mem_76071.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73532, 2,
                                            sizeof(mem_76074.mem),
                                            &mem_76074.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73532, 3,
                                            sizeof(mem_76077.mem),
                                            &mem_76077.mem));
    if (1 * (segmap_usable_groups_73542 * segmap_group_sizze_73536) != 0) {
        const size_t global_work_sizze_77505[1] = {segmap_usable_groups_73542 *
                     segmap_group_sizze_73536};
        const size_t local_work_sizze_77509[1] = {segmap_group_sizze_73536};
        int64_t time_start_77506 = 0, time_end_77507 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_73532");
            fprintf(stderr, "%zu", global_work_sizze_77505[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77509[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77506 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_73532, 1,
                                                        NULL,
                                                        global_work_sizze_77505,
                                                        local_work_sizze_77509,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_73532_runs,
                                                                                                  &ctx->segmap_73532_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77507 = get_wall_time();
            
            long time_diff_77508 = time_end_77507 - time_start_77506;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_73532",
                    time_diff_77508);
        }
    }
    if (memblock_unref_device(ctx, &mem_76071, "mem_76071") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76074, "mem_76074") != 0)
        return 1;
    
    struct memblock_device mem_76080;
    
    mem_76080.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76080, 39996, "mem_76080"))
        return 1;
    
    int call_ret_77510 = futrts__replicate_f32(ctx, mem_76080, 9999, 0.0F);
    
    assert(call_ret_77510 == 0);
    
    int32_t segmap_group_sizze_73548;
    
    segmap_group_sizze_73548 = ctx->sizes.bvh_irregzisegmap_group_sizze_73547;
    
    int64_t segmap_group_sizze_73549 = sext_i32_i64(segmap_group_sizze_73548);
    int64_t y_73550 = sub64(segmap_group_sizze_73549, 1);
    int64_t x_73551 = add64(9999, y_73550);
    int64_t x_75690 = squot64(x_73551, segmap_group_sizze_73549);
    int32_t segmap_usable_groups_73554 = sext_i64_i32(x_75690);
    struct memblock_device inners_mem_76105;
    
    inners_mem_76105.references = NULL;
    
    struct memblock_device inners_mem_76106;
    
    inners_mem_76106.references = NULL;
    
    struct memblock_device inners_mem_76107;
    
    inners_mem_76107.references = NULL;
    
    struct memblock_device inners_mem_76108;
    
    inners_mem_76108.references = NULL;
    
    struct memblock_device inners_mem_76109;
    
    inners_mem_76109.references = NULL;
    
    struct memblock_device inners_mem_76110;
    
    inners_mem_76110.references = NULL;
    
    struct memblock_device inners_mem_76081;
    
    inners_mem_76081.references = NULL;
    
    struct memblock_device inners_mem_76082;
    
    inners_mem_76082.references = NULL;
    
    struct memblock_device inners_mem_76083;
    
    inners_mem_76083.references = NULL;
    
    struct memblock_device inners_mem_76084;
    
    inners_mem_76084.references = NULL;
    
    struct memblock_device inners_mem_76085;
    
    inners_mem_76085.references = NULL;
    
    struct memblock_device inners_mem_76086;
    
    inners_mem_76086.references = NULL;
    if (memblock_set_device(ctx, &inners_mem_76081, &mem_76080, "mem_76080") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76082, &mem_76080, "mem_76080") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76083, &mem_76080, "mem_76080") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76084, &mem_76080, "mem_76080") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76085, &mem_76080, "mem_76080") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76086, &mem_76080, "mem_76080") !=
        0)
        return 1;
    for (int32_t _i_70410 = 0; _i_70410 < 15; _i_70410++) {
        struct memblock_device mem_76089;
        
        mem_76089.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76089, 39996, "mem_76089"))
            return 1;
        
        struct memblock_device mem_76092;
        
        mem_76092.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76092, 39996, "mem_76092"))
            return 1;
        
        struct memblock_device mem_76095;
        
        mem_76095.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76095, 39996, "mem_76095"))
            return 1;
        
        struct memblock_device mem_76098;
        
        mem_76098.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76098, 39996, "mem_76098"))
            return 1;
        
        struct memblock_device mem_76101;
        
        mem_76101.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76101, 39996, "mem_76101"))
            return 1;
        
        struct memblock_device mem_76104;
        
        mem_76104.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76104, 39996, "mem_76104"))
            return 1;
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 1,
                                                sizeof(mem_76055.mem),
                                                &mem_76055.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 2,
                                                sizeof(mem_76058.mem),
                                                &mem_76058.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 3,
                                                sizeof(mem_76060.mem),
                                                &mem_76060.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 4,
                                                sizeof(mem_76063.mem),
                                                &mem_76063.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 5,
                                                sizeof(mem_76065.mem),
                                                &mem_76065.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 6,
                                                sizeof(mem_76068.mem),
                                                &mem_76068.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 7,
                                                sizeof(inners_mem_76081.mem),
                                                &inners_mem_76081.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 8,
                                                sizeof(inners_mem_76082.mem),
                                                &inners_mem_76082.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 9,
                                                sizeof(inners_mem_76083.mem),
                                                &inners_mem_76083.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 10,
                                                sizeof(inners_mem_76084.mem),
                                                &inners_mem_76084.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 11,
                                                sizeof(inners_mem_76085.mem),
                                                &inners_mem_76085.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 12,
                                                sizeof(inners_mem_76086.mem),
                                                &inners_mem_76086.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 13,
                                                sizeof(mem_76089.mem),
                                                &mem_76089.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 14,
                                                sizeof(mem_76092.mem),
                                                &mem_76092.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 15,
                                                sizeof(mem_76095.mem),
                                                &mem_76095.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 16,
                                                sizeof(mem_76098.mem),
                                                &mem_76098.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 17,
                                                sizeof(mem_76101.mem),
                                                &mem_76101.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73544, 18,
                                                sizeof(mem_76104.mem),
                                                &mem_76104.mem));
        if (1 * (segmap_usable_groups_73554 * segmap_group_sizze_73548) != 0) {
            const size_t global_work_sizze_77511[1] =
                         {segmap_usable_groups_73554 *
                         segmap_group_sizze_73548};
            const size_t local_work_sizze_77515[1] = {segmap_group_sizze_73548};
            int64_t time_start_77512 = 0, time_end_77513 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "segmap_73544");
                fprintf(stderr, "%zu", global_work_sizze_77511[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77515[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_77512 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->segmap_73544,
                                                            1, NULL,
                                                            global_work_sizze_77511,
                                                            local_work_sizze_77515,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->segmap_73544_runs,
                                                                                                      &ctx->segmap_73544_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77513 = get_wall_time();
                
                long time_diff_77514 = time_end_77513 - time_start_77512;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_73544",
                        time_diff_77514);
            }
        }
        
        struct memblock_device inners_mem_tmp_76716;
        
        inners_mem_tmp_76716.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76716, &mem_76089,
                                "mem_76089") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_76717;
        
        inners_mem_tmp_76717.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76717, &mem_76092,
                                "mem_76092") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_76718;
        
        inners_mem_tmp_76718.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76718, &mem_76095,
                                "mem_76095") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_76719;
        
        inners_mem_tmp_76719.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76719, &mem_76098,
                                "mem_76098") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_76720;
        
        inners_mem_tmp_76720.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76720, &mem_76101,
                                "mem_76101") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_76721;
        
        inners_mem_tmp_76721.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76721, &mem_76104,
                                "mem_76104") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76081, &inners_mem_tmp_76716,
                                "inners_mem_tmp_76716") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76082, &inners_mem_tmp_76717,
                                "inners_mem_tmp_76717") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76083, &inners_mem_tmp_76718,
                                "inners_mem_tmp_76718") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76084, &inners_mem_tmp_76719,
                                "inners_mem_tmp_76719") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76085, &inners_mem_tmp_76720,
                                "inners_mem_tmp_76720") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76086, &inners_mem_tmp_76721,
                                "inners_mem_tmp_76721") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76721,
                                  "inners_mem_tmp_76721") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76720,
                                  "inners_mem_tmp_76720") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76719,
                                  "inners_mem_tmp_76719") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76718,
                                  "inners_mem_tmp_76718") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76717,
                                  "inners_mem_tmp_76717") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76716,
                                  "inners_mem_tmp_76716") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76104, "mem_76104") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76101, "mem_76101") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76098, "mem_76098") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76095, "mem_76095") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76092, "mem_76092") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76089, "mem_76089") != 0)
            return 1;
    }
    if (memblock_set_device(ctx, &inners_mem_76105, &inners_mem_76081,
                            "inners_mem_76081") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76106, &inners_mem_76082,
                            "inners_mem_76082") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76107, &inners_mem_76083,
                            "inners_mem_76083") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76108, &inners_mem_76084,
                            "inners_mem_76084") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76109, &inners_mem_76085,
                            "inners_mem_76085") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76110, &inners_mem_76086,
                            "inners_mem_76086") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76080, "mem_76080") != 0)
        return 1;
    
    float res_70465 = sitofp_i32_f32(h_69987);
    float res_70466 = sitofp_i32_f32(w_69988);
    float camera_arg_70467 = res_70465 / res_70466;
    float half_width_70468 = 0.7673271F * camera_arg_70467;
    float res_70469 = 0.0F - half_width_70468;
    float scale_arg_70470 = 2.0F * half_width_70468;
    
    out_arrsizze_76479 = 9999;
    out_arrsizze_76491 = 10000;
    if (memblock_set_device(ctx, &out_mem_76478, &inners_mem_76105,
                            "inners_mem_76105") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76480, &inners_mem_76106,
                            "inners_mem_76106") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76481, &inners_mem_76107,
                            "inners_mem_76107") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76482, &inners_mem_76108,
                            "inners_mem_76108") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76483, &inners_mem_76109,
                            "inners_mem_76109") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76484, &inners_mem_76110,
                            "inners_mem_76110") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76485, &mem_76060, "mem_76060") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76486, &mem_76063, "mem_76063") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76487, &mem_76077, "mem_76077") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76488, &mem_76065, "mem_76065") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76489, &mem_76068, "mem_76068") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76490, &mem_76037, "mem_76037") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76492, &mem_76040, "mem_76040") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76493, &mem_76043, "mem_76043") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76494, &mem_76055, "mem_76055") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76495, &mem_76046, "mem_76046") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76496, &mem_76058, "mem_76058") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76497, &mem_76049, "mem_76049") != 0)
        return 1;
    scalar_out_76498 = scale_arg_70470;
    scalar_out_76499 = 0.0F;
    scalar_out_76500 = 0.0F;
    scalar_out_76501 = res_70469;
    scalar_out_76502 = 11.169883F;
    scalar_out_76503 = 29.051477F;
    scalar_out_76504 = 0.0F;
    scalar_out_76505 = 12.0F;
    scalar_out_76506 = 30.0F;
    scalar_out_76507 = 0.0F;
    scalar_out_76508 = 1.5314702F;
    scalar_out_76509 = -9.8804526e-2F;
    (*out_mem_p_77403).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77403, &out_mem_76478,
                            "out_mem_76478") != 0)
        return 1;
    *out_out_arrsizze_77404 = out_arrsizze_76479;
    (*out_mem_p_77405).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77405, &out_mem_76480,
                            "out_mem_76480") != 0)
        return 1;
    (*out_mem_p_77406).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77406, &out_mem_76481,
                            "out_mem_76481") != 0)
        return 1;
    (*out_mem_p_77407).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77407, &out_mem_76482,
                            "out_mem_76482") != 0)
        return 1;
    (*out_mem_p_77408).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77408, &out_mem_76483,
                            "out_mem_76483") != 0)
        return 1;
    (*out_mem_p_77409).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77409, &out_mem_76484,
                            "out_mem_76484") != 0)
        return 1;
    (*out_mem_p_77410).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77410, &out_mem_76485,
                            "out_mem_76485") != 0)
        return 1;
    (*out_mem_p_77411).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77411, &out_mem_76486,
                            "out_mem_76486") != 0)
        return 1;
    (*out_mem_p_77412).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77412, &out_mem_76487,
                            "out_mem_76487") != 0)
        return 1;
    (*out_mem_p_77413).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77413, &out_mem_76488,
                            "out_mem_76488") != 0)
        return 1;
    (*out_mem_p_77414).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77414, &out_mem_76489,
                            "out_mem_76489") != 0)
        return 1;
    (*out_mem_p_77415).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77415, &out_mem_76490,
                            "out_mem_76490") != 0)
        return 1;
    *out_out_arrsizze_77416 = out_arrsizze_76491;
    (*out_mem_p_77417).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77417, &out_mem_76492,
                            "out_mem_76492") != 0)
        return 1;
    (*out_mem_p_77418).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77418, &out_mem_76493,
                            "out_mem_76493") != 0)
        return 1;
    (*out_mem_p_77419).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77419, &out_mem_76494,
                            "out_mem_76494") != 0)
        return 1;
    (*out_mem_p_77420).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77420, &out_mem_76495,
                            "out_mem_76495") != 0)
        return 1;
    (*out_mem_p_77421).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77421, &out_mem_76496,
                            "out_mem_76496") != 0)
        return 1;
    (*out_mem_p_77422).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77422, &out_mem_76497,
                            "out_mem_76497") != 0)
        return 1;
    *out_scalar_out_77423 = scalar_out_76498;
    *out_scalar_out_77424 = scalar_out_76499;
    *out_scalar_out_77425 = scalar_out_76500;
    *out_scalar_out_77426 = scalar_out_76501;
    *out_scalar_out_77427 = scalar_out_76502;
    *out_scalar_out_77428 = scalar_out_76503;
    *out_scalar_out_77429 = scalar_out_76504;
    *out_scalar_out_77430 = scalar_out_76505;
    *out_scalar_out_77431 = scalar_out_76506;
    *out_scalar_out_77432 = scalar_out_76507;
    *out_scalar_out_77433 = scalar_out_76508;
    *out_scalar_out_77434 = scalar_out_76509;
    if (memblock_unref_device(ctx, &inners_mem_76086, "inners_mem_76086") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76085, "inners_mem_76085") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76084, "inners_mem_76084") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76083, "inners_mem_76083") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76082, "inners_mem_76082") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76081, "inners_mem_76081") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76110, "inners_mem_76110") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76109, "inners_mem_76109") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76108, "inners_mem_76108") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76107, "inners_mem_76107") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76106, "inners_mem_76106") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76105, "inners_mem_76105") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76080, "mem_76080") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76077, "mem_76077") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76074, "mem_76074") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76071, "mem_76071") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76068, "mem_76068") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76065, "mem_76065") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76063, "mem_76063") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76060, "mem_76060") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76058, "mem_76058") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76055, "mem_76055") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76052, "mem_76052") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76049, "mem_76049") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76046, "mem_76046") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76043, "mem_76043") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76040, "mem_76040") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76037, "mem_76037") != 0)
        return 1;
    if (memblock_unref_device(ctx, &xs_mem_75997, "xs_mem_75997") != 0)
        return 1;
    if (memblock_unref_device(ctx, &xs_mem_75996, "xs_mem_75996") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_76034, "res_mem_76034") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_76033, "res_mem_76033") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76024, "mem_76024") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76019, "mem_76019") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76014, "mem_76014") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76010, "mem_76010") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76007, "mem_76007") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76004, "mem_76004") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76000, "mem_76000") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75995, "mem_75995") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75992, "mem_75992") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76523,
                              "group_res_arr_mem_76523") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76521,
                              "group_res_arr_mem_76521") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76519,
                              "group_res_arr_mem_76519") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76517,
                              "group_res_arr_mem_76517") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76515,
                              "group_res_arr_mem_76515") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76513,
                              "group_res_arr_mem_76513") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75989, "mem_75989") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75986, "mem_75986") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75983, "mem_75983") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75980, "mem_75980") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75977, "mem_75977") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75974, "mem_75974") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76497, "out_mem_76497") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76496, "out_mem_76496") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76495, "out_mem_76495") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76494, "out_mem_76494") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76493, "out_mem_76493") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76492, "out_mem_76492") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76490, "out_mem_76490") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76489, "out_mem_76489") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76488, "out_mem_76488") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76487, "out_mem_76487") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76486, "out_mem_76486") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76485, "out_mem_76485") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76484, "out_mem_76484") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76483, "out_mem_76483") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76482, "out_mem_76482") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76481, "out_mem_76481") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76480, "out_mem_76480") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76478, "out_mem_76478") != 0)
        return 1;
    return 0;
}
static int futrts_bvh_rgbbox(struct futhark_context *ctx,
                             struct memblock_device *out_mem_p_77516,
                             int32_t *out_out_arrsizze_77517,
                             struct memblock_device *out_mem_p_77518,
                             struct memblock_device *out_mem_p_77519,
                             struct memblock_device *out_mem_p_77520,
                             struct memblock_device *out_mem_p_77521,
                             struct memblock_device *out_mem_p_77522,
                             struct memblock_device *out_mem_p_77523,
                             struct memblock_device *out_mem_p_77524,
                             struct memblock_device *out_mem_p_77525,
                             struct memblock_device *out_mem_p_77526,
                             struct memblock_device *out_mem_p_77527,
                             struct memblock_device *out_mem_p_77528,
                             int32_t *out_out_arrsizze_77529,
                             struct memblock_device *out_mem_p_77530,
                             struct memblock_device *out_mem_p_77531,
                             struct memblock_device *out_mem_p_77532,
                             struct memblock_device *out_mem_p_77533,
                             struct memblock_device *out_mem_p_77534,
                             struct memblock_device *out_mem_p_77535,
                             float *out_scalar_out_77536,
                             float *out_scalar_out_77537,
                             float *out_scalar_out_77538,
                             float *out_scalar_out_77539,
                             float *out_scalar_out_77540,
                             float *out_scalar_out_77541,
                             float *out_scalar_out_77542,
                             float *out_scalar_out_77543,
                             float *out_scalar_out_77544,
                             float *out_scalar_out_77545,
                             float *out_scalar_out_77546,
                             float *out_scalar_out_77547, int32_t h_69351,
                             int32_t w_69352)
{
    struct memblock_device out_mem_76205;
    
    out_mem_76205.references = NULL;
    
    int32_t out_arrsizze_76206;
    struct memblock_device out_mem_76207;
    
    out_mem_76207.references = NULL;
    
    struct memblock_device out_mem_76208;
    
    out_mem_76208.references = NULL;
    
    struct memblock_device out_mem_76209;
    
    out_mem_76209.references = NULL;
    
    struct memblock_device out_mem_76210;
    
    out_mem_76210.references = NULL;
    
    struct memblock_device out_mem_76211;
    
    out_mem_76211.references = NULL;
    
    struct memblock_device out_mem_76212;
    
    out_mem_76212.references = NULL;
    
    struct memblock_device out_mem_76213;
    
    out_mem_76213.references = NULL;
    
    struct memblock_device out_mem_76214;
    
    out_mem_76214.references = NULL;
    
    struct memblock_device out_mem_76215;
    
    out_mem_76215.references = NULL;
    
    struct memblock_device out_mem_76216;
    
    out_mem_76216.references = NULL;
    
    struct memblock_device out_mem_76217;
    
    out_mem_76217.references = NULL;
    
    int32_t out_arrsizze_76218;
    struct memblock_device out_mem_76219;
    
    out_mem_76219.references = NULL;
    
    struct memblock_device out_mem_76220;
    
    out_mem_76220.references = NULL;
    
    struct memblock_device out_mem_76221;
    
    out_mem_76221.references = NULL;
    
    struct memblock_device out_mem_76222;
    
    out_mem_76222.references = NULL;
    
    struct memblock_device out_mem_76223;
    
    out_mem_76223.references = NULL;
    
    struct memblock_device out_mem_76224;
    
    out_mem_76224.references = NULL;
    
    float scalar_out_76225;
    float scalar_out_76226;
    float scalar_out_76227;
    float scalar_out_76228;
    float scalar_out_76229;
    float scalar_out_76230;
    float scalar_out_76231;
    float scalar_out_76232;
    float scalar_out_76233;
    float scalar_out_76234;
    float scalar_out_76235;
    float scalar_out_76236;
    int32_t segred_group_sizze_72601;
    
    segred_group_sizze_72601 = ctx->sizes.bvh_rgbboxzisegred_group_sizze_72600;
    
    int32_t num_groups_72603;
    int32_t max_num_groups_76237;
    
    max_num_groups_76237 = ctx->sizes.bvh_rgbboxzisegred_num_groups_72602;
    num_groups_72603 = sext_i64_i32(smax64(1, smin64(squot64(sub64(add64(400,
                                                                         sext_i32_i64(segred_group_sizze_72601)),
                                                                   1),
                                                             sext_i32_i64(segred_group_sizze_72601)),
                                                     sext_i32_i64(max_num_groups_76237))));
    
    struct memblock_device mem_75974;
    
    mem_75974.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75974, 4, "mem_75974"))
        return 1;
    
    struct memblock_device mem_75977;
    
    mem_75977.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75977, 4, "mem_75977"))
        return 1;
    
    struct memblock_device mem_75980;
    
    mem_75980.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75980, 4, "mem_75980"))
        return 1;
    
    struct memblock_device mem_75983;
    
    mem_75983.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75983, 4, "mem_75983"))
        return 1;
    
    struct memblock_device mem_75986;
    
    mem_75986.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75986, 4, "mem_75986"))
        return 1;
    
    struct memblock_device mem_75989;
    
    mem_75989.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75989, 4, "mem_75989"))
        return 1;
    
    struct memblock_device counter_mem_76238 = ctx->counter_mem_76238;
    struct memblock_device group_res_arr_mem_76240;
    
    group_res_arr_mem_76240.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76240,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_72601,
                                          num_groups_72603)),
                              "group_res_arr_mem_76240"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76242;
    
    group_res_arr_mem_76242.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76242,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_72601,
                                          num_groups_72603)),
                              "group_res_arr_mem_76242"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76244;
    
    group_res_arr_mem_76244.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76244,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_72601,
                                          num_groups_72603)),
                              "group_res_arr_mem_76244"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76246;
    
    group_res_arr_mem_76246.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76246,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_72601,
                                          num_groups_72603)),
                              "group_res_arr_mem_76246"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76248;
    
    group_res_arr_mem_76248.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76248,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_72601,
                                          num_groups_72603)),
                              "group_res_arr_mem_76248"))
        return 1;
    
    struct memblock_device group_res_arr_mem_76250;
    
    group_res_arr_mem_76250.references = NULL;
    if (memblock_alloc_device(ctx, &group_res_arr_mem_76250,
                              mul32((int32_t) sizeof(float),
                                    mul32(segred_group_sizze_72601,
                                          num_groups_72603)),
                              "group_res_arr_mem_76250"))
        return 1;
    
    int32_t num_threads_76252 = mul32(num_groups_72603,
                                      segred_group_sizze_72601);
    
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 1,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_72601),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 2,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_72601),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 3,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_72601),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 4,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_72601),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 5,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_72601),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 6,
                                            mul32((int32_t) sizeof(float),
                                                  segred_group_sizze_72601),
                                            NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 7,
                                            (int32_t) sizeof(bool), NULL));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 8,
                                            sizeof(num_groups_72603),
                                            &num_groups_72603));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 9,
                                            sizeof(mem_75974.mem),
                                            &mem_75974.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 10,
                                            sizeof(mem_75977.mem),
                                            &mem_75977.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 11,
                                            sizeof(mem_75980.mem),
                                            &mem_75980.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 12,
                                            sizeof(mem_75983.mem),
                                            &mem_75983.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 13,
                                            sizeof(mem_75986.mem),
                                            &mem_75986.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 14,
                                            sizeof(mem_75989.mem),
                                            &mem_75989.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 15,
                                            sizeof(counter_mem_76238.mem),
                                            &counter_mem_76238.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 16,
                                            sizeof(group_res_arr_mem_76240.mem),
                                            &group_res_arr_mem_76240.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 17,
                                            sizeof(group_res_arr_mem_76242.mem),
                                            &group_res_arr_mem_76242.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 18,
                                            sizeof(group_res_arr_mem_76244.mem),
                                            &group_res_arr_mem_76244.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 19,
                                            sizeof(group_res_arr_mem_76246.mem),
                                            &group_res_arr_mem_76246.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 20,
                                            sizeof(group_res_arr_mem_76248.mem),
                                            &group_res_arr_mem_76248.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 21,
                                            sizeof(group_res_arr_mem_76250.mem),
                                            &group_res_arr_mem_76250.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72613, 22,
                                            sizeof(num_threads_76252),
                                            &num_threads_76252));
    if (1 * (num_groups_72603 * segred_group_sizze_72601) != 0) {
        const size_t global_work_sizze_77549[1] = {num_groups_72603 *
                     segred_group_sizze_72601};
        const size_t local_work_sizze_77553[1] = {segred_group_sizze_72601};
        int64_t time_start_77550 = 0, time_end_77551 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segred_nonseg_72613");
            fprintf(stderr, "%zu", global_work_sizze_77549[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77553[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) (0 + mul32((int32_t) sizeof(float),
                                     segred_group_sizze_72601) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_72601) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_72601) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_72601) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_72601) +
                           mul32((int32_t) sizeof(float),
                                 segred_group_sizze_72601) +
                           (int32_t) sizeof(bool)));
            time_start_77550 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segred_nonseg_72613,
                                                        1, NULL,
                                                        global_work_sizze_77549,
                                                        local_work_sizze_77553,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segred_nonseg_72613_runs,
                                                                                                  &ctx->segred_nonseg_72613_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77551 = get_wall_time();
            
            long time_diff_77552 = time_end_77551 - time_start_77550;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segred_nonseg_72613",
                    time_diff_77552);
        }
    }
    
    float read_res_77554;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75974.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77554,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_69417 = read_res_77554;
    
    if (memblock_unref_device(ctx, &mem_75974, "mem_75974") != 0)
        return 1;
    
    float read_res_77555;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75977.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77555,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_69418 = read_res_77555;
    
    if (memblock_unref_device(ctx, &mem_75977, "mem_75977") != 0)
        return 1;
    
    float read_res_77556;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75980.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77556,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_69419 = read_res_77556;
    
    if (memblock_unref_device(ctx, &mem_75980, "mem_75980") != 0)
        return 1;
    
    float read_res_77557;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75983.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77557,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_69420 = read_res_77557;
    
    if (memblock_unref_device(ctx, &mem_75983, "mem_75983") != 0)
        return 1;
    
    float read_res_77558;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75986.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77558,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_69421 = read_res_77558;
    
    if (memblock_unref_device(ctx, &mem_75986, "mem_75986") != 0)
        return 1;
    
    float read_res_77559;
    
    OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                 mem_75989.mem,
                                                 ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                 0 * sizeof(float),
                                                 sizeof(float), &read_res_77559,
                                                 0, NULL,
                                                 ctx->profiling_paused ||
                                                 !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                           &ctx->copy_scalar_from_dev_runs,
                                                                                           &ctx->copy_scalar_from_dev_total_runtime)));
    if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
        return 1;
    
    float res_69422 = read_res_77559;
    
    if (memblock_unref_device(ctx, &mem_75989, "mem_75989") != 0)
        return 1;
    
    float y_69457 = res_69417 - res_69420;
    float y_69458 = res_69418 - res_69421;
    float y_69459 = res_69419 - res_69422;
    int32_t segmap_group_sizze_72619;
    
    segmap_group_sizze_72619 = ctx->sizes.bvh_rgbboxzisegmap_group_sizze_72618;
    
    int64_t segmap_group_sizze_72620 = sext_i32_i64(segmap_group_sizze_72619);
    int64_t y_72621 = sub64(segmap_group_sizze_72620, 1);
    int64_t x_72622 = add64(400, y_72621);
    int64_t segmap_usable_groups_64_72624 = squot64(x_72622,
                                                    segmap_group_sizze_72620);
    int32_t segmap_usable_groups_72625 =
            sext_i64_i32(segmap_usable_groups_64_72624);
    struct memblock_device mem_75992;
    
    mem_75992.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75992, 1600, "mem_75992"))
        return 1;
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72615, 1,
                                            sizeof(res_69420), &res_69420));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72615, 2,
                                            sizeof(res_69421), &res_69421));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72615, 3,
                                            sizeof(res_69422), &res_69422));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72615, 4,
                                            sizeof(y_69457), &y_69457));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72615, 5,
                                            sizeof(y_69458), &y_69458));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72615, 6,
                                            sizeof(y_69459), &y_69459));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72615, 7,
                                            sizeof(mem_75992.mem),
                                            &mem_75992.mem));
    if (1 * (segmap_usable_groups_72625 * segmap_group_sizze_72619) != 0) {
        const size_t global_work_sizze_77560[1] = {segmap_usable_groups_72625 *
                     segmap_group_sizze_72619};
        const size_t local_work_sizze_77564[1] = {segmap_group_sizze_72619};
        int64_t time_start_77561 = 0, time_end_77562 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_72615");
            fprintf(stderr, "%zu", global_work_sizze_77560[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77564[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77561 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_72615, 1,
                                                        NULL,
                                                        global_work_sizze_77560,
                                                        local_work_sizze_77564,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_72615_runs,
                                                                                                  &ctx->segmap_72615_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77562 = get_wall_time();
            
            long time_diff_77563 = time_end_77562 - time_start_77561;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_72615",
                    time_diff_77563);
        }
    }
    
    struct memblock_device mem_75995;
    
    mem_75995.references = NULL;
    if (memblock_alloc_device(ctx, &mem_75995, 1600, "mem_75995"))
        return 1;
    
    int32_t group_sizze_76312;
    
    group_sizze_76312 = ctx->sizes.bvh_rgbboxzigroup_sizze_76312;
    
    int32_t num_groups_76313;
    
    num_groups_76313 = squot32(sub32(add32(400,
                                           sext_i32_i32(group_sizze_76312)), 1),
                               sext_i32_i32(group_sizze_76312));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->iota_76309, 0,
                                            sizeof(mem_75995.mem),
                                            &mem_75995.mem));
    if (1 * (num_groups_76313 * group_sizze_76312) != 0) {
        const size_t global_work_sizze_77565[1] = {num_groups_76313 *
                     group_sizze_76312};
        const size_t local_work_sizze_77569[1] = {group_sizze_76312};
        int64_t time_start_77566 = 0, time_end_77567 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "iota_76309");
            fprintf(stderr, "%zu", global_work_sizze_77565[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77569[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77566 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->iota_76309, 1,
                                                        NULL,
                                                        global_work_sizze_77565,
                                                        local_work_sizze_77569,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->iota_76309_runs,
                                                                                                  &ctx->iota_76309_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77567 = get_wall_time();
            
            long time_diff_77568 = time_end_77567 - time_start_77566;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "iota_76309",
                    time_diff_77568);
        }
    }
    
    int32_t segmap_group_sizze_72693;
    
    segmap_group_sizze_72693 = ctx->sizes.bvh_rgbboxzisegmap_group_sizze_72692;
    
    int64_t segmap_group_sizze_72694 = sext_i32_i64(segmap_group_sizze_72693);
    int64_t y_72695 = sub64(segmap_group_sizze_72694, 1);
    int64_t x_72696 = add64(400, y_72695);
    int64_t x_75798 = squot64(x_72696, segmap_group_sizze_72694);
    int32_t segmap_usable_groups_72699 = sext_i64_i32(x_75798);
    int32_t segscan_group_sizze_72706;
    
    segscan_group_sizze_72706 =
        ctx->sizes.bvh_rgbboxzisegscan_group_sizze_72705;
    
    int32_t num_groups_72708;
    int32_t max_num_groups_76314;
    
    max_num_groups_76314 = ctx->sizes.bvh_rgbboxzisegscan_num_groups_72707;
    num_groups_72708 = sext_i64_i32(smax64(1, smin64(squot64(sub64(add64(400,
                                                                         sext_i32_i64(segscan_group_sizze_72706)),
                                                                   1),
                                                             sext_i32_i64(segscan_group_sizze_72706)),
                                                     sext_i32_i64(max_num_groups_76314))));
    
    int32_t segred_group_sizze_72715;
    
    segred_group_sizze_72715 = ctx->sizes.bvh_rgbboxzisegred_group_sizze_72714;
    
    int32_t num_groups_72717;
    int32_t max_num_groups_76315;
    
    max_num_groups_76315 = ctx->sizes.bvh_rgbboxzisegred_num_groups_72716;
    num_groups_72717 = sext_i64_i32(smax64(1, smin64(squot64(sub64(add64(400,
                                                                         sext_i32_i64(segred_group_sizze_72715)),
                                                                   1),
                                                             sext_i32_i64(segred_group_sizze_72715)),
                                                     sext_i32_i64(max_num_groups_76315))));
    
    int32_t segmap_group_sizze_72730;
    
    segmap_group_sizze_72730 = ctx->sizes.bvh_rgbboxzisegmap_group_sizze_72729;
    
    int64_t segmap_group_sizze_72731 = sext_i32_i64(segmap_group_sizze_72730);
    int64_t y_72732 = sub64(segmap_group_sizze_72731, 1);
    int64_t x_72733 = add64(400, y_72732);
    int64_t x_75800 = squot64(x_72733, segmap_group_sizze_72731);
    int32_t segmap_usable_groups_72736 = sext_i64_i32(x_75800);
    struct memblock_device mem_76000;
    
    mem_76000.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76000, 1600, "mem_76000"))
        return 1;
    
    struct memblock_device mem_76004;
    
    mem_76004.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76004, 1600, "mem_76004"))
        return 1;
    
    struct memblock_device mem_76007;
    
    mem_76007.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76007, 1600, "mem_76007"))
        return 1;
    
    struct memblock_device mem_76010;
    
    mem_76010.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76010, 1600, "mem_76010"))
        return 1;
    
    struct memblock_device mem_76014;
    
    mem_76014.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76014, 4, "mem_76014"))
        return 1;
    
    struct memblock_device mem_76019;
    
    mem_76019.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76019, 1600, "mem_76019"))
        return 1;
    
    struct memblock_device mem_76024;
    
    mem_76024.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76024, 1600, "mem_76024"))
        return 1;
    
    struct memblock_device res_mem_76033;
    
    res_mem_76033.references = NULL;
    
    struct memblock_device res_mem_76034;
    
    res_mem_76034.references = NULL;
    
    struct memblock_device xs_mem_75996;
    
    xs_mem_75996.references = NULL;
    
    struct memblock_device xs_mem_75997;
    
    xs_mem_75997.references = NULL;
    if (memblock_set_device(ctx, &xs_mem_75996, &mem_75992, "mem_75992") != 0)
        return 1;
    if (memblock_set_device(ctx, &xs_mem_75997, &mem_75995, "mem_75995") != 0)
        return 1;
    for (int32_t i_69528 = 0; i_69528 < 32; i_69528++) {
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72689, 1,
                                                sizeof(i_69528), &i_69528));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72689, 2,
                                                sizeof(xs_mem_75996.mem),
                                                &xs_mem_75996.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72689, 3,
                                                sizeof(mem_76000.mem),
                                                &mem_76000.mem));
        if (1 * (segmap_usable_groups_72699 * segmap_group_sizze_72693) != 0) {
            const size_t global_work_sizze_77570[1] =
                         {segmap_usable_groups_72699 *
                         segmap_group_sizze_72693};
            const size_t local_work_sizze_77574[1] = {segmap_group_sizze_72693};
            int64_t time_start_77571 = 0, time_end_77572 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "segmap_72689");
                fprintf(stderr, "%zu", global_work_sizze_77570[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77574[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_77571 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->segmap_72689,
                                                            1, NULL,
                                                            global_work_sizze_77570,
                                                            local_work_sizze_77574,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->segmap_72689_runs,
                                                                                                      &ctx->segmap_72689_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77572 = get_wall_time();
                
                long time_diff_77573 = time_end_77572 - time_start_77571;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_72689",
                        time_diff_77573);
            }
        }
        
        int32_t num_threads_76325 = mul32(num_groups_72708,
                                          segscan_group_sizze_72706);
        
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_72711, 1,
                                                mul32((int32_t) sizeof(int32_t),
                                                      segscan_group_sizze_72706),
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_72711, 2,
                                                mul32((int32_t) sizeof(int32_t),
                                                      segscan_group_sizze_72706),
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_72711, 3,
                                                sizeof(mem_76000.mem),
                                                &mem_76000.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_72711, 4,
                                                sizeof(mem_76004.mem),
                                                &mem_76004.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_72711, 5,
                                                sizeof(mem_76007.mem),
                                                &mem_76007.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_72711, 6,
                                                sizeof(mem_76010.mem),
                                                &mem_76010.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage1_72711, 7,
                                                sizeof(num_threads_76325),
                                                &num_threads_76325));
        if (1 * (num_groups_72708 * segscan_group_sizze_72706) != 0) {
            const size_t global_work_sizze_77575[1] = {num_groups_72708 *
                         segscan_group_sizze_72706};
            const size_t local_work_sizze_77579[1] =
                         {segscan_group_sizze_72706};
            int64_t time_start_77576 = 0, time_end_77577 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "scan_stage1_72711");
                fprintf(stderr, "%zu", global_work_sizze_77575[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77579[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) (0 + mul32((int32_t) sizeof(int32_t),
                                         segscan_group_sizze_72706) +
                               mul32((int32_t) sizeof(int32_t),
                                     segscan_group_sizze_72706)));
                time_start_77576 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->scan_stage1_72711,
                                                            1, NULL,
                                                            global_work_sizze_77575,
                                                            local_work_sizze_77579,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->scan_stage1_72711_runs,
                                                                                                      &ctx->scan_stage1_72711_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77577 = get_wall_time();
                
                long time_diff_77578 = time_end_77577 - time_start_77576;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "scan_stage1_72711", time_diff_77578);
            }
        }
        if (ctx->debugging)
            fprintf(stderr, "%s\n", "\n# SegScan");
        if (ctx->debugging)
            fprintf(stderr, "%s: %llu%c", "elems_per_group",
                    (long long) mul32(segscan_group_sizze_72706,
                                      squot32(sub32(add32(400,
                                                          num_threads_76325),
                                                    1), num_threads_76325)),
                    '\n');
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_72711, 1,
                                                mul32((int32_t) sizeof(int32_t),
                                                      num_groups_72708), NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_72711, 2,
                                                mul32((int32_t) sizeof(int32_t),
                                                      num_groups_72708), NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_72711, 3,
                                                sizeof(num_groups_72708),
                                                &num_groups_72708));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_72711, 4,
                                                sizeof(mem_76004.mem),
                                                &mem_76004.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_72711, 5,
                                                sizeof(mem_76007.mem),
                                                &mem_76007.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage2_72711, 6,
                                                sizeof(num_threads_76325),
                                                &num_threads_76325));
        if (1 * (1 * num_groups_72708) != 0) {
            const size_t global_work_sizze_77580[1] = {1 * num_groups_72708};
            const size_t local_work_sizze_77584[1] = {num_groups_72708};
            int64_t time_start_77581 = 0, time_end_77582 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "scan_stage2_72711");
                fprintf(stderr, "%zu", global_work_sizze_77580[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77584[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) (0 + mul32((int32_t) sizeof(int32_t),
                                         num_groups_72708) +
                               mul32((int32_t) sizeof(int32_t),
                                     num_groups_72708)));
                time_start_77581 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->scan_stage2_72711,
                                                            1, NULL,
                                                            global_work_sizze_77580,
                                                            local_work_sizze_77584,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->scan_stage2_72711_runs,
                                                                                                      &ctx->scan_stage2_72711_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77582 = get_wall_time();
                
                long time_diff_77583 = time_end_77582 - time_start_77581;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "scan_stage2_72711", time_diff_77583);
            }
        }
        
        int32_t group_sizze_76385;
        
        group_sizze_76385 = ctx->sizes.bvh_rgbboxzigroup_sizze_76385;
        
        int32_t num_groups_76386;
        
        num_groups_76386 = squot32(sub32(add32(400,
                                               sext_i32_i32(group_sizze_76385)),
                                         1), sext_i32_i32(group_sizze_76385));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage3_76382, 1,
                                                sizeof(mem_76004.mem),
                                                &mem_76004.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage3_76382, 2,
                                                sizeof(mem_76007.mem),
                                                &mem_76007.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->scan_stage3_76382, 3,
                                                sizeof(num_threads_76325),
                                                &num_threads_76325));
        if (1 * (num_groups_76386 * group_sizze_76385) != 0) {
            const size_t global_work_sizze_77585[1] = {num_groups_76386 *
                         group_sizze_76385};
            const size_t local_work_sizze_77589[1] = {group_sizze_76385};
            int64_t time_start_77586 = 0, time_end_77587 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "scan_stage3_76382");
                fprintf(stderr, "%zu", global_work_sizze_77585[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77589[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_77586 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->scan_stage3_76382,
                                                            1, NULL,
                                                            global_work_sizze_77585,
                                                            local_work_sizze_77589,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->scan_stage3_76382_runs,
                                                                                                      &ctx->scan_stage3_76382_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77587 = get_wall_time();
                
                long time_diff_77588 = time_end_77587 - time_start_77586;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "scan_stage3_76382", time_diff_77588);
            }
        }
        
        struct memblock_device counter_mem_76389 = ctx->counter_mem_76389;
        struct memblock_device group_res_arr_mem_76391;
        
        group_res_arr_mem_76391.references = NULL;
        if (memblock_alloc_device(ctx, &group_res_arr_mem_76391,
                                  mul32((int32_t) sizeof(int32_t),
                                        mul32(segred_group_sizze_72715,
                                              num_groups_72717)),
                                  "group_res_arr_mem_76391"))
            return 1;
        
        int32_t num_threads_76393 = mul32(num_groups_72717,
                                          segred_group_sizze_72715);
        
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72724, 1,
                                                mul32((int32_t) sizeof(int32_t),
                                                      segred_group_sizze_72715),
                                                NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72724, 2,
                                                (int32_t) sizeof(bool), NULL));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72724, 3,
                                                sizeof(num_groups_72717),
                                                &num_groups_72717));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72724, 4,
                                                sizeof(xs_mem_75996.mem),
                                                &xs_mem_75996.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72724, 5,
                                                sizeof(xs_mem_75997.mem),
                                                &xs_mem_75997.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72724, 6,
                                                sizeof(mem_76010.mem),
                                                &mem_76010.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72724, 7,
                                                sizeof(mem_76014.mem),
                                                &mem_76014.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72724, 8,
                                                sizeof(mem_76019.mem),
                                                &mem_76019.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72724, 9,
                                                sizeof(mem_76024.mem),
                                                &mem_76024.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72724, 10,
                                                sizeof(counter_mem_76389.mem),
                                                &counter_mem_76389.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72724, 11,
                                                sizeof(group_res_arr_mem_76391.mem),
                                                &group_res_arr_mem_76391.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segred_nonseg_72724, 12,
                                                sizeof(num_threads_76393),
                                                &num_threads_76393));
        if (1 * (num_groups_72717 * segred_group_sizze_72715) != 0) {
            const size_t global_work_sizze_77591[1] = {num_groups_72717 *
                         segred_group_sizze_72715};
            const size_t local_work_sizze_77595[1] = {segred_group_sizze_72715};
            int64_t time_start_77592 = 0, time_end_77593 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "segred_nonseg_72724");
                fprintf(stderr, "%zu", global_work_sizze_77591[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77595[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) (0 + mul32((int32_t) sizeof(int32_t),
                                         segred_group_sizze_72715) +
                               (int32_t) sizeof(bool)));
                time_start_77592 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->segred_nonseg_72724,
                                                            1, NULL,
                                                            global_work_sizze_77591,
                                                            local_work_sizze_77595,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->segred_nonseg_72724_runs,
                                                                                                      &ctx->segred_nonseg_72724_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77593 = get_wall_time();
                
                long time_diff_77594 = time_end_77593 - time_start_77592;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n",
                        "segred_nonseg_72724", time_diff_77594);
            }
        }
        
        int32_t read_res_77596;
        
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     mem_76014.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0 * sizeof(int32_t),
                                                     sizeof(int32_t),
                                                     &read_res_77596, 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_scalar_from_dev_runs,
                                                                                               &ctx->copy_scalar_from_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
        
        int32_t res_69560 = read_res_77596;
        
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72726, 1,
                                                sizeof(res_69560), &res_69560));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72726, 2,
                                                sizeof(xs_mem_75996.mem),
                                                &xs_mem_75996.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72726, 3,
                                                sizeof(xs_mem_75997.mem),
                                                &xs_mem_75997.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72726, 4,
                                                sizeof(mem_76000.mem),
                                                &mem_76000.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72726, 5,
                                                sizeof(mem_76004.mem),
                                                &mem_76004.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72726, 6,
                                                sizeof(mem_76007.mem),
                                                &mem_76007.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72726, 7,
                                                sizeof(mem_76010.mem),
                                                &mem_76010.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72726, 8,
                                                sizeof(mem_76019.mem),
                                                &mem_76019.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72726, 9,
                                                sizeof(mem_76024.mem),
                                                &mem_76024.mem));
        if (1 * (segmap_usable_groups_72736 * segmap_group_sizze_72730) != 0) {
            const size_t global_work_sizze_77597[1] =
                         {segmap_usable_groups_72736 *
                         segmap_group_sizze_72730};
            const size_t local_work_sizze_77601[1] = {segmap_group_sizze_72730};
            int64_t time_start_77598 = 0, time_end_77599 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "segmap_72726");
                fprintf(stderr, "%zu", global_work_sizze_77597[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77601[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_77598 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->segmap_72726,
                                                            1, NULL,
                                                            global_work_sizze_77597,
                                                            local_work_sizze_77601,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->segmap_72726_runs,
                                                                                                      &ctx->segmap_72726_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77599 = get_wall_time();
                
                long time_diff_77600 = time_end_77599 - time_start_77598;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_72726",
                        time_diff_77600);
            }
        }
        
        struct memblock_device mem_76027;
        
        mem_76027.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76027, 1600, "mem_76027"))
            return 1;
        if (mul64(sext_i32_i64(400), (int32_t) sizeof(int32_t)) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         mem_76024.mem,
                                                         mem_76027.mem, 0, 0,
                                                         mul64(sext_i32_i64(400),
                                                               (int32_t) sizeof(int32_t)),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device mem_76031;
        
        mem_76031.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76031, 1600, "mem_76031"))
            return 1;
        if (mul64(sext_i32_i64(400), (int32_t) sizeof(int32_t)) > 0) {
            OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue,
                                                         mem_76019.mem,
                                                         mem_76031.mem, 0, 0,
                                                         mul64(sext_i32_i64(400),
                                                               (int32_t) sizeof(int32_t)),
                                                         0, NULL,
                                                         ctx->profiling_paused ||
                                                         !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                   &ctx->copy_dev_to_dev_runs,
                                                                                                   &ctx->copy_dev_to_dev_total_runtime)));
            if (ctx->debugging)
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
        }
        
        struct memblock_device xs_mem_tmp_76316;
        
        xs_mem_tmp_76316.references = NULL;
        if (memblock_set_device(ctx, &xs_mem_tmp_76316, &mem_76027,
                                "mem_76027") != 0)
            return 1;
        
        struct memblock_device xs_mem_tmp_76317;
        
        xs_mem_tmp_76317.references = NULL;
        if (memblock_set_device(ctx, &xs_mem_tmp_76317, &mem_76031,
                                "mem_76031") != 0)
            return 1;
        if (memblock_set_device(ctx, &xs_mem_75996, &xs_mem_tmp_76316,
                                "xs_mem_tmp_76316") != 0)
            return 1;
        if (memblock_set_device(ctx, &xs_mem_75997, &xs_mem_tmp_76317,
                                "xs_mem_tmp_76317") != 0)
            return 1;
        if (memblock_unref_device(ctx, &xs_mem_tmp_76317, "xs_mem_tmp_76317") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &xs_mem_tmp_76316, "xs_mem_tmp_76316") !=
            0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76031, "mem_76031") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76027, "mem_76027") != 0)
            return 1;
        if (memblock_unref_device(ctx, &group_res_arr_mem_76391,
                                  "group_res_arr_mem_76391") != 0)
            return 1;
    }
    if (memblock_set_device(ctx, &res_mem_76033, &xs_mem_75996,
                            "xs_mem_75996") != 0)
        return 1;
    if (memblock_set_device(ctx, &res_mem_76034, &xs_mem_75997,
                            "xs_mem_75997") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75992, "mem_75992") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75995, "mem_75995") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76000, "mem_76000") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76004, "mem_76004") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76007, "mem_76007") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76010, "mem_76010") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76014, "mem_76014") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76019, "mem_76019") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76024, "mem_76024") != 0)
        return 1;
    
    struct memblock_device mem_76037;
    
    mem_76037.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76037, 1600, "mem_76037"))
        return 1;
    
    int call_ret_77602 = futrts__replicate_f32(ctx, mem_76037, 400, 3.0F);
    
    assert(call_ret_77602 == 0);
    
    int32_t segmap_group_sizze_72742;
    
    segmap_group_sizze_72742 = ctx->sizes.bvh_rgbboxzisegmap_group_sizze_72741;
    
    int64_t segmap_group_sizze_72743 = sext_i32_i64(segmap_group_sizze_72742);
    int64_t y_72744 = sub64(segmap_group_sizze_72743, 1);
    int64_t x_72745 = add64(400, y_72744);
    int64_t segmap_usable_groups_64_72747 = squot64(x_72745,
                                                    segmap_group_sizze_72743);
    int32_t segmap_usable_groups_72748 =
            sext_i64_i32(segmap_usable_groups_64_72747);
    struct memblock_device mem_76040;
    
    mem_76040.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76040, 1600, "mem_76040"))
        return 1;
    
    struct memblock_device mem_76043;
    
    mem_76043.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76043, 1600, "mem_76043"))
        return 1;
    
    struct memblock_device mem_76046;
    
    mem_76046.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76046, 1600, "mem_76046"))
        return 1;
    
    struct memblock_device mem_76049;
    
    mem_76049.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76049, 1600, "mem_76049"))
        return 1;
    
    struct memblock_device mem_76052;
    
    mem_76052.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76052, 1600, "mem_76052"))
        return 1;
    
    struct memblock_device mem_76055;
    
    mem_76055.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76055, 1600, "mem_76055"))
        return 1;
    
    struct memblock_device mem_76058;
    
    mem_76058.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76058, 1600, "mem_76058"))
        return 1;
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72738, 1,
                                            sizeof(res_69420), &res_69420));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72738, 2,
                                            sizeof(res_69421), &res_69421));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72738, 3,
                                            sizeof(res_69422), &res_69422));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72738, 4,
                                            sizeof(y_69457), &y_69457));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72738, 5,
                                            sizeof(y_69458), &y_69458));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72738, 6,
                                            sizeof(y_69459), &y_69459));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72738, 7,
                                            sizeof(res_mem_76034.mem),
                                            &res_mem_76034.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72738, 8,
                                            sizeof(mem_76040.mem),
                                            &mem_76040.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72738, 9,
                                            sizeof(mem_76043.mem),
                                            &mem_76043.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72738, 10,
                                            sizeof(mem_76046.mem),
                                            &mem_76046.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72738, 11,
                                            sizeof(mem_76049.mem),
                                            &mem_76049.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72738, 12,
                                            sizeof(mem_76052.mem),
                                            &mem_76052.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72738, 13,
                                            sizeof(mem_76055.mem),
                                            &mem_76055.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72738, 14,
                                            sizeof(mem_76058.mem),
                                            &mem_76058.mem));
    if (1 * (segmap_usable_groups_72748 * segmap_group_sizze_72742) != 0) {
        const size_t global_work_sizze_77603[1] = {segmap_usable_groups_72748 *
                     segmap_group_sizze_72742};
        const size_t local_work_sizze_77607[1] = {segmap_group_sizze_72742};
        int64_t time_start_77604 = 0, time_end_77605 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_72738");
            fprintf(stderr, "%zu", global_work_sizze_77603[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77607[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77604 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_72738, 1,
                                                        NULL,
                                                        global_work_sizze_77603,
                                                        local_work_sizze_77607,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_72738_runs,
                                                                                                  &ctx->segmap_72738_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77605 = get_wall_time();
            
            long time_diff_77606 = time_end_77605 - time_start_77604;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_72738",
                    time_diff_77606);
        }
    }
    if (memblock_unref_device(ctx, &res_mem_76034, "res_mem_76034") != 0)
        return 1;
    
    int32_t segmap_group_sizze_72886;
    
    segmap_group_sizze_72886 = ctx->sizes.bvh_rgbboxzisegmap_group_sizze_72885;
    
    int64_t segmap_group_sizze_72887 = sext_i32_i64(segmap_group_sizze_72886);
    int64_t y_72888 = sub64(segmap_group_sizze_72887, 1);
    int64_t x_72889 = add64(399, y_72888);
    int64_t segmap_usable_groups_64_72891 = squot64(x_72889,
                                                    segmap_group_sizze_72887);
    int32_t segmap_usable_groups_72892 =
            sext_i64_i32(segmap_usable_groups_64_72891);
    struct memblock_device mem_76060;
    
    mem_76060.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76060, 399, "mem_76060"))
        return 1;
    
    struct memblock_device mem_76063;
    
    mem_76063.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76063, 1596, "mem_76063"))
        return 1;
    
    struct memblock_device mem_76065;
    
    mem_76065.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76065, 399, "mem_76065"))
        return 1;
    
    struct memblock_device mem_76068;
    
    mem_76068.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76068, 1596, "mem_76068"))
        return 1;
    
    struct memblock_device mem_76071;
    
    mem_76071.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76071, 1596, "mem_76071"))
        return 1;
    
    struct memblock_device mem_76074;
    
    mem_76074.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76074, 1596, "mem_76074"))
        return 1;
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72882, 1,
                                            sizeof(ctx->failure_is_an_option),
                                            &ctx->failure_is_an_option));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72882, 3,
                                            sizeof(mem_76040.mem),
                                            &mem_76040.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72882, 4,
                                            sizeof(mem_76060.mem),
                                            &mem_76060.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72882, 5,
                                            sizeof(mem_76063.mem),
                                            &mem_76063.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72882, 6,
                                            sizeof(mem_76065.mem),
                                            &mem_76065.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72882, 7,
                                            sizeof(mem_76068.mem),
                                            &mem_76068.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72882, 8,
                                            sizeof(mem_76071.mem),
                                            &mem_76071.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_72882, 9,
                                            sizeof(mem_76074.mem),
                                            &mem_76074.mem));
    if (1 * (segmap_usable_groups_72892 * segmap_group_sizze_72886) != 0) {
        const size_t global_work_sizze_77608[1] = {segmap_usable_groups_72892 *
                     segmap_group_sizze_72886};
        const size_t local_work_sizze_77612[1] = {segmap_group_sizze_72886};
        int64_t time_start_77609 = 0, time_end_77610 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_72882");
            fprintf(stderr, "%zu", global_work_sizze_77608[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77612[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77609 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_72882, 1,
                                                        NULL,
                                                        global_work_sizze_77608,
                                                        local_work_sizze_77612,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_72882_runs,
                                                                                                  &ctx->segmap_72882_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77610 = get_wall_time();
            
            long time_diff_77611 = time_end_77610 - time_start_77609;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_72882",
                    time_diff_77611);
        }
    }
    ctx->failure_is_an_option = 1;
    if (memblock_unref_device(ctx, &mem_76040, "mem_76040") != 0)
        return 1;
    
    struct memblock_device mem_76077;
    
    mem_76077.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76077, 1596, "mem_76077"))
        return 1;
    
    int call_ret_77613 = futrts__replicate_i32(ctx, mem_76077, 399, -1);
    
    assert(call_ret_77613 == 0);
    
    int32_t segmap_group_sizze_73058;
    
    segmap_group_sizze_73058 = ctx->sizes.bvh_rgbboxzisegmap_group_sizze_73057;
    
    int64_t segmap_group_sizze_73059 = sext_i32_i64(segmap_group_sizze_73058);
    int64_t y_73060 = sub64(segmap_group_sizze_73059, 1);
    int64_t x_73061 = add64(399, y_73060);
    int64_t segmap_usable_groups_64_73063 = squot64(x_73061,
                                                    segmap_group_sizze_73059);
    int32_t segmap_usable_groups_73064 =
            sext_i64_i32(segmap_usable_groups_64_73063);
    
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73054, 1,
                                            sizeof(mem_76071.mem),
                                            &mem_76071.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73054, 2,
                                            sizeof(mem_76074.mem),
                                            &mem_76074.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73054, 3,
                                            sizeof(mem_76077.mem),
                                            &mem_76077.mem));
    if (1 * (segmap_usable_groups_73064 * segmap_group_sizze_73058) != 0) {
        const size_t global_work_sizze_77614[1] = {segmap_usable_groups_73064 *
                     segmap_group_sizze_73058};
        const size_t local_work_sizze_77618[1] = {segmap_group_sizze_73058};
        int64_t time_start_77615 = 0, time_end_77616 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "segmap_73054");
            fprintf(stderr, "%zu", global_work_sizze_77614[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77618[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77615 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->segmap_73054, 1,
                                                        NULL,
                                                        global_work_sizze_77614,
                                                        local_work_sizze_77618,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->segmap_73054_runs,
                                                                                                  &ctx->segmap_73054_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77616 = get_wall_time();
            
            long time_diff_77617 = time_end_77616 - time_start_77615;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_73054",
                    time_diff_77617);
        }
    }
    if (memblock_unref_device(ctx, &mem_76071, "mem_76071") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76074, "mem_76074") != 0)
        return 1;
    
    struct memblock_device mem_76080;
    
    mem_76080.references = NULL;
    if (memblock_alloc_device(ctx, &mem_76080, 1596, "mem_76080"))
        return 1;
    
    int call_ret_77619 = futrts__replicate_f32(ctx, mem_76080, 399, 0.0F);
    
    assert(call_ret_77619 == 0);
    
    int32_t segmap_group_sizze_73070;
    
    segmap_group_sizze_73070 = ctx->sizes.bvh_rgbboxzisegmap_group_sizze_73069;
    
    int64_t segmap_group_sizze_73071 = sext_i32_i64(segmap_group_sizze_73070);
    int64_t y_73072 = sub64(segmap_group_sizze_73071, 1);
    int64_t x_73073 = add64(399, y_73072);
    int64_t x_75808 = squot64(x_73073, segmap_group_sizze_73071);
    int32_t segmap_usable_groups_73076 = sext_i64_i32(x_75808);
    struct memblock_device inners_mem_76105;
    
    inners_mem_76105.references = NULL;
    
    struct memblock_device inners_mem_76106;
    
    inners_mem_76106.references = NULL;
    
    struct memblock_device inners_mem_76107;
    
    inners_mem_76107.references = NULL;
    
    struct memblock_device inners_mem_76108;
    
    inners_mem_76108.references = NULL;
    
    struct memblock_device inners_mem_76109;
    
    inners_mem_76109.references = NULL;
    
    struct memblock_device inners_mem_76110;
    
    inners_mem_76110.references = NULL;
    
    struct memblock_device inners_mem_76081;
    
    inners_mem_76081.references = NULL;
    
    struct memblock_device inners_mem_76082;
    
    inners_mem_76082.references = NULL;
    
    struct memblock_device inners_mem_76083;
    
    inners_mem_76083.references = NULL;
    
    struct memblock_device inners_mem_76084;
    
    inners_mem_76084.references = NULL;
    
    struct memblock_device inners_mem_76085;
    
    inners_mem_76085.references = NULL;
    
    struct memblock_device inners_mem_76086;
    
    inners_mem_76086.references = NULL;
    if (memblock_set_device(ctx, &inners_mem_76081, &mem_76080, "mem_76080") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76082, &mem_76080, "mem_76080") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76083, &mem_76080, "mem_76080") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76084, &mem_76080, "mem_76080") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76085, &mem_76080, "mem_76080") !=
        0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76086, &mem_76080, "mem_76080") !=
        0)
        return 1;
    for (int32_t _i_69918 = 0; _i_69918 < 10; _i_69918++) {
        struct memblock_device mem_76089;
        
        mem_76089.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76089, 1596, "mem_76089"))
            return 1;
        
        struct memblock_device mem_76092;
        
        mem_76092.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76092, 1596, "mem_76092"))
            return 1;
        
        struct memblock_device mem_76095;
        
        mem_76095.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76095, 1596, "mem_76095"))
            return 1;
        
        struct memblock_device mem_76098;
        
        mem_76098.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76098, 1596, "mem_76098"))
            return 1;
        
        struct memblock_device mem_76101;
        
        mem_76101.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76101, 1596, "mem_76101"))
            return 1;
        
        struct memblock_device mem_76104;
        
        mem_76104.references = NULL;
        if (memblock_alloc_device(ctx, &mem_76104, 1596, "mem_76104"))
            return 1;
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 1,
                                                sizeof(mem_76052.mem),
                                                &mem_76052.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 2,
                                                sizeof(mem_76055.mem),
                                                &mem_76055.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 3,
                                                sizeof(mem_76058.mem),
                                                &mem_76058.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 4,
                                                sizeof(mem_76060.mem),
                                                &mem_76060.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 5,
                                                sizeof(mem_76063.mem),
                                                &mem_76063.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 6,
                                                sizeof(mem_76065.mem),
                                                &mem_76065.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 7,
                                                sizeof(mem_76068.mem),
                                                &mem_76068.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 8,
                                                sizeof(inners_mem_76081.mem),
                                                &inners_mem_76081.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 9,
                                                sizeof(inners_mem_76082.mem),
                                                &inners_mem_76082.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 10,
                                                sizeof(inners_mem_76083.mem),
                                                &inners_mem_76083.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 11,
                                                sizeof(inners_mem_76084.mem),
                                                &inners_mem_76084.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 12,
                                                sizeof(inners_mem_76085.mem),
                                                &inners_mem_76085.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 13,
                                                sizeof(inners_mem_76086.mem),
                                                &inners_mem_76086.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 14,
                                                sizeof(mem_76089.mem),
                                                &mem_76089.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 15,
                                                sizeof(mem_76092.mem),
                                                &mem_76092.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 16,
                                                sizeof(mem_76095.mem),
                                                &mem_76095.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 17,
                                                sizeof(mem_76098.mem),
                                                &mem_76098.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 18,
                                                sizeof(mem_76101.mem),
                                                &mem_76101.mem));
        OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->segmap_73066, 19,
                                                sizeof(mem_76104.mem),
                                                &mem_76104.mem));
        if (1 * (segmap_usable_groups_73076 * segmap_group_sizze_73070) != 0) {
            const size_t global_work_sizze_77620[1] =
                         {segmap_usable_groups_73076 *
                         segmap_group_sizze_73070};
            const size_t local_work_sizze_77624[1] = {segmap_group_sizze_73070};
            int64_t time_start_77621 = 0, time_end_77622 = 0;
            
            if (ctx->debugging) {
                fprintf(stderr, "Launching %s with global work size [",
                        "segmap_73066");
                fprintf(stderr, "%zu", global_work_sizze_77620[0]);
                fprintf(stderr, "] and local work size [");
                fprintf(stderr, "%zu", local_work_sizze_77624[0]);
                fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                        (int) 0);
                time_start_77621 = get_wall_time();
            }
            OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                            ctx->segmap_73066,
                                                            1, NULL,
                                                            global_work_sizze_77620,
                                                            local_work_sizze_77624,
                                                            0, NULL,
                                                            ctx->profiling_paused ||
                                                            !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                      &ctx->segmap_73066_runs,
                                                                                                      &ctx->segmap_73066_total_runtime)));
            if (ctx->debugging) {
                OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
                time_end_77622 = get_wall_time();
                
                long time_diff_77623 = time_end_77622 - time_start_77621;
                
                fprintf(stderr, "kernel %s runtime: %ldus\n", "segmap_73066",
                        time_diff_77623);
            }
        }
        
        struct memblock_device inners_mem_tmp_76461;
        
        inners_mem_tmp_76461.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76461, &mem_76089,
                                "mem_76089") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_76462;
        
        inners_mem_tmp_76462.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76462, &mem_76092,
                                "mem_76092") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_76463;
        
        inners_mem_tmp_76463.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76463, &mem_76095,
                                "mem_76095") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_76464;
        
        inners_mem_tmp_76464.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76464, &mem_76098,
                                "mem_76098") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_76465;
        
        inners_mem_tmp_76465.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76465, &mem_76101,
                                "mem_76101") != 0)
            return 1;
        
        struct memblock_device inners_mem_tmp_76466;
        
        inners_mem_tmp_76466.references = NULL;
        if (memblock_set_device(ctx, &inners_mem_tmp_76466, &mem_76104,
                                "mem_76104") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76081, &inners_mem_tmp_76461,
                                "inners_mem_tmp_76461") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76082, &inners_mem_tmp_76462,
                                "inners_mem_tmp_76462") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76083, &inners_mem_tmp_76463,
                                "inners_mem_tmp_76463") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76084, &inners_mem_tmp_76464,
                                "inners_mem_tmp_76464") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76085, &inners_mem_tmp_76465,
                                "inners_mem_tmp_76465") != 0)
            return 1;
        if (memblock_set_device(ctx, &inners_mem_76086, &inners_mem_tmp_76466,
                                "inners_mem_tmp_76466") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76466,
                                  "inners_mem_tmp_76466") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76465,
                                  "inners_mem_tmp_76465") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76464,
                                  "inners_mem_tmp_76464") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76463,
                                  "inners_mem_tmp_76463") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76462,
                                  "inners_mem_tmp_76462") != 0)
            return 1;
        if (memblock_unref_device(ctx, &inners_mem_tmp_76461,
                                  "inners_mem_tmp_76461") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76104, "mem_76104") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76101, "mem_76101") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76098, "mem_76098") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76095, "mem_76095") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76092, "mem_76092") != 0)
            return 1;
        if (memblock_unref_device(ctx, &mem_76089, "mem_76089") != 0)
            return 1;
    }
    if (memblock_set_device(ctx, &inners_mem_76105, &inners_mem_76081,
                            "inners_mem_76081") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76106, &inners_mem_76082,
                            "inners_mem_76082") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76107, &inners_mem_76083,
                            "inners_mem_76083") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76108, &inners_mem_76084,
                            "inners_mem_76084") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76109, &inners_mem_76085,
                            "inners_mem_76085") != 0)
        return 1;
    if (memblock_set_device(ctx, &inners_mem_76110, &inners_mem_76086,
                            "inners_mem_76086") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76080, "mem_76080") != 0)
        return 1;
    
    float res_69979 = sitofp_i32_f32(h_69351);
    float res_69980 = sitofp_i32_f32(w_69352);
    float camera_arg_69981 = res_69979 / res_69980;
    float half_width_69982 = 0.7673271F * camera_arg_69981;
    float res_69983 = 0.99999994F * half_width_69982;
    float res_69984 = 0.0F - res_69983;
    float scale_arg_69985 = 2.0F * half_width_69982;
    float res_69986 = 0.99999994F * scale_arg_69985;
    
    out_arrsizze_76206 = 399;
    out_arrsizze_76218 = 400;
    if (memblock_set_device(ctx, &out_mem_76205, &inners_mem_76105,
                            "inners_mem_76105") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76207, &inners_mem_76106,
                            "inners_mem_76106") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76208, &inners_mem_76107,
                            "inners_mem_76107") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76209, &inners_mem_76108,
                            "inners_mem_76108") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76210, &inners_mem_76109,
                            "inners_mem_76109") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76211, &inners_mem_76110,
                            "inners_mem_76110") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76212, &mem_76060, "mem_76060") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76213, &mem_76063, "mem_76063") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76214, &mem_76077, "mem_76077") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76215, &mem_76065, "mem_76065") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76216, &mem_76068, "mem_76068") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76217, &mem_76043, "mem_76043") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76219, &mem_76046, "mem_76046") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76220, &mem_76049, "mem_76049") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76221, &mem_76052, "mem_76052") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76222, &mem_76055, "mem_76055") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76223, &mem_76058, "mem_76058") != 0)
        return 1;
    if (memblock_set_device(ctx, &out_mem_76224, &mem_76037, "mem_76037") != 0)
        return 1;
    scalar_out_76225 = res_69986;
    scalar_out_76226 = 0.0F;
    scalar_out_76227 = 0.0F;
    scalar_out_76228 = res_69984;
    scalar_out_76229 = 28.75031F;
    scalar_out_76230 = 29.835474F;
    scalar_out_76231 = 0.0F;
    scalar_out_76232 = 30.0F;
    scalar_out_76233 = 30.0F;
    scalar_out_76234 = 0.0F;
    scalar_out_76235 = 1.0851642F;
    scalar_out_76236 = -1.0851642F;
    (*out_mem_p_77516).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77516, &out_mem_76205,
                            "out_mem_76205") != 0)
        return 1;
    *out_out_arrsizze_77517 = out_arrsizze_76206;
    (*out_mem_p_77518).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77518, &out_mem_76207,
                            "out_mem_76207") != 0)
        return 1;
    (*out_mem_p_77519).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77519, &out_mem_76208,
                            "out_mem_76208") != 0)
        return 1;
    (*out_mem_p_77520).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77520, &out_mem_76209,
                            "out_mem_76209") != 0)
        return 1;
    (*out_mem_p_77521).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77521, &out_mem_76210,
                            "out_mem_76210") != 0)
        return 1;
    (*out_mem_p_77522).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77522, &out_mem_76211,
                            "out_mem_76211") != 0)
        return 1;
    (*out_mem_p_77523).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77523, &out_mem_76212,
                            "out_mem_76212") != 0)
        return 1;
    (*out_mem_p_77524).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77524, &out_mem_76213,
                            "out_mem_76213") != 0)
        return 1;
    (*out_mem_p_77525).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77525, &out_mem_76214,
                            "out_mem_76214") != 0)
        return 1;
    (*out_mem_p_77526).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77526, &out_mem_76215,
                            "out_mem_76215") != 0)
        return 1;
    (*out_mem_p_77527).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77527, &out_mem_76216,
                            "out_mem_76216") != 0)
        return 1;
    (*out_mem_p_77528).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77528, &out_mem_76217,
                            "out_mem_76217") != 0)
        return 1;
    *out_out_arrsizze_77529 = out_arrsizze_76218;
    (*out_mem_p_77530).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77530, &out_mem_76219,
                            "out_mem_76219") != 0)
        return 1;
    (*out_mem_p_77531).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77531, &out_mem_76220,
                            "out_mem_76220") != 0)
        return 1;
    (*out_mem_p_77532).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77532, &out_mem_76221,
                            "out_mem_76221") != 0)
        return 1;
    (*out_mem_p_77533).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77533, &out_mem_76222,
                            "out_mem_76222") != 0)
        return 1;
    (*out_mem_p_77534).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77534, &out_mem_76223,
                            "out_mem_76223") != 0)
        return 1;
    (*out_mem_p_77535).references = NULL;
    if (memblock_set_device(ctx, &*out_mem_p_77535, &out_mem_76224,
                            "out_mem_76224") != 0)
        return 1;
    *out_scalar_out_77536 = scalar_out_76225;
    *out_scalar_out_77537 = scalar_out_76226;
    *out_scalar_out_77538 = scalar_out_76227;
    *out_scalar_out_77539 = scalar_out_76228;
    *out_scalar_out_77540 = scalar_out_76229;
    *out_scalar_out_77541 = scalar_out_76230;
    *out_scalar_out_77542 = scalar_out_76231;
    *out_scalar_out_77543 = scalar_out_76232;
    *out_scalar_out_77544 = scalar_out_76233;
    *out_scalar_out_77545 = scalar_out_76234;
    *out_scalar_out_77546 = scalar_out_76235;
    *out_scalar_out_77547 = scalar_out_76236;
    if (memblock_unref_device(ctx, &inners_mem_76086, "inners_mem_76086") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76085, "inners_mem_76085") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76084, "inners_mem_76084") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76083, "inners_mem_76083") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76082, "inners_mem_76082") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76081, "inners_mem_76081") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76110, "inners_mem_76110") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76109, "inners_mem_76109") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76108, "inners_mem_76108") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76107, "inners_mem_76107") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76106, "inners_mem_76106") != 0)
        return 1;
    if (memblock_unref_device(ctx, &inners_mem_76105, "inners_mem_76105") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76080, "mem_76080") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76077, "mem_76077") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76074, "mem_76074") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76071, "mem_76071") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76068, "mem_76068") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76065, "mem_76065") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76063, "mem_76063") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76060, "mem_76060") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76058, "mem_76058") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76055, "mem_76055") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76052, "mem_76052") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76049, "mem_76049") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76046, "mem_76046") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76043, "mem_76043") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76040, "mem_76040") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76037, "mem_76037") != 0)
        return 1;
    if (memblock_unref_device(ctx, &xs_mem_75997, "xs_mem_75997") != 0)
        return 1;
    if (memblock_unref_device(ctx, &xs_mem_75996, "xs_mem_75996") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_76034, "res_mem_76034") != 0)
        return 1;
    if (memblock_unref_device(ctx, &res_mem_76033, "res_mem_76033") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76024, "mem_76024") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76019, "mem_76019") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76014, "mem_76014") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76010, "mem_76010") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76007, "mem_76007") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76004, "mem_76004") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_76000, "mem_76000") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75995, "mem_75995") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75992, "mem_75992") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76250,
                              "group_res_arr_mem_76250") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76248,
                              "group_res_arr_mem_76248") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76246,
                              "group_res_arr_mem_76246") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76244,
                              "group_res_arr_mem_76244") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76242,
                              "group_res_arr_mem_76242") != 0)
        return 1;
    if (memblock_unref_device(ctx, &group_res_arr_mem_76240,
                              "group_res_arr_mem_76240") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75989, "mem_75989") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75986, "mem_75986") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75983, "mem_75983") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75980, "mem_75980") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75977, "mem_75977") != 0)
        return 1;
    if (memblock_unref_device(ctx, &mem_75974, "mem_75974") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76224, "out_mem_76224") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76223, "out_mem_76223") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76222, "out_mem_76222") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76221, "out_mem_76221") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76220, "out_mem_76220") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76219, "out_mem_76219") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76217, "out_mem_76217") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76216, "out_mem_76216") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76215, "out_mem_76215") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76214, "out_mem_76214") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76213, "out_mem_76213") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76212, "out_mem_76212") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76211, "out_mem_76211") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76210, "out_mem_76210") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76209, "out_mem_76209") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76208, "out_mem_76208") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76207, "out_mem_76207") != 0)
        return 1;
    if (memblock_unref_device(ctx, &out_mem_76205, "out_mem_76205") != 0)
        return 1;
    return 0;
}
static int futrts__replicate_i32(struct futhark_context *ctx,
                                 struct memblock_device mem_76447,
                                 int32_t num_elems_76448, int32_t val_76449)
{
    int32_t group_sizze_76454;
    
    group_sizze_76454 = ctx->sizes.bvh_rgbboxzigroup_sizze_76454;
    
    int32_t num_groups_76455;
    
    num_groups_76455 = squot32(sub32(add32(num_elems_76448,
                                           sext_i32_i32(group_sizze_76454)), 1),
                               sext_i32_i32(group_sizze_76454));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->replicate_76451, 0,
                                            sizeof(mem_76447.mem),
                                            &mem_76447.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->replicate_76451, 1,
                                            sizeof(num_elems_76448),
                                            &num_elems_76448));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->replicate_76451, 2,
                                            sizeof(val_76449), &val_76449));
    if (1 * (num_groups_76455 * group_sizze_76454) != 0) {
        const size_t global_work_sizze_77625[1] = {num_groups_76455 *
                     group_sizze_76454};
        const size_t local_work_sizze_77629[1] = {group_sizze_76454};
        int64_t time_start_77626 = 0, time_end_77627 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "replicate_76451");
            fprintf(stderr, "%zu", global_work_sizze_77625[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77629[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77626 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->replicate_76451, 1,
                                                        NULL,
                                                        global_work_sizze_77625,
                                                        local_work_sizze_77629,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->replicate_76451_runs,
                                                                                                  &ctx->replicate_76451_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77627 = get_wall_time();
            
            long time_diff_77628 = time_end_77627 - time_start_77626;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "replicate_76451",
                    time_diff_77628);
        }
    }
    return 0;
}
static int futrts__replicate_f32(struct futhark_context *ctx,
                                 struct memblock_device mem_76420,
                                 int32_t num_elems_76421, float val_76422)
{
    int32_t group_sizze_76427;
    
    group_sizze_76427 = ctx->sizes.bvh_rgbboxzigroup_sizze_76427;
    
    int32_t num_groups_76428;
    
    num_groups_76428 = squot32(sub32(add32(num_elems_76421,
                                           sext_i32_i32(group_sizze_76427)), 1),
                               sext_i32_i32(group_sizze_76427));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->replicate_76424, 0,
                                            sizeof(mem_76420.mem),
                                            &mem_76420.mem));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->replicate_76424, 1,
                                            sizeof(num_elems_76421),
                                            &num_elems_76421));
    OPENCL_SUCCEED_OR_RETURN(clSetKernelArg(ctx->replicate_76424, 2,
                                            sizeof(val_76422), &val_76422));
    if (1 * (num_groups_76428 * group_sizze_76427) != 0) {
        const size_t global_work_sizze_77630[1] = {num_groups_76428 *
                     group_sizze_76427};
        const size_t local_work_sizze_77634[1] = {group_sizze_76427};
        int64_t time_start_77631 = 0, time_end_77632 = 0;
        
        if (ctx->debugging) {
            fprintf(stderr, "Launching %s with global work size [",
                    "replicate_76424");
            fprintf(stderr, "%zu", global_work_sizze_77630[0]);
            fprintf(stderr, "] and local work size [");
            fprintf(stderr, "%zu", local_work_sizze_77634[0]);
            fprintf(stderr, "]; local memory parameters sum to %d bytes.\n",
                    (int) 0);
            time_start_77631 = get_wall_time();
        }
        OPENCL_SUCCEED_OR_RETURN(clEnqueueNDRangeKernel(ctx->opencl.queue,
                                                        ctx->replicate_76424, 1,
                                                        NULL,
                                                        global_work_sizze_77630,
                                                        local_work_sizze_77634,
                                                        0, NULL,
                                                        ctx->profiling_paused ||
                                                        !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                  &ctx->replicate_76424_runs,
                                                                                                  &ctx->replicate_76424_total_runtime)));
        if (ctx->debugging) {
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
            time_end_77632 = get_wall_time();
            
            long time_diff_77633 = time_end_77632 - time_start_77631;
            
            fprintf(stderr, "kernel %s runtime: %ldus\n", "replicate_76424",
                    time_diff_77633);
        }
    }
    return 0;
}
struct futhark_i32_1d {
    struct memblock_device mem;
    int64_t shape[1];
} ;
struct futhark_i32_1d *futhark_new_i32_1d(struct futhark_context *ctx,
                                          int32_t *data, int64_t dim0)
{
    struct futhark_i32_1d *bad = NULL;
    struct futhark_i32_1d *arr =
                          (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) dim0 * sizeof(int32_t),
                              "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * sizeof(int32_t) > 0)
        OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                      arr->mem.mem, CL_TRUE, 0,
                                                      (size_t) dim0 *
                                                      sizeof(int32_t), data + 0,
                                                      0, NULL,
                                                      ctx->profiling_paused ||
                                                      !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                &ctx->copy_dev_to_host_runs,
                                                                                                &ctx->copy_dev_to_host_total_runtime)));
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_i32_1d *futhark_new_raw_i32_1d(struct futhark_context *ctx,
                                              cl_mem data, int offset,
                                              int64_t dim0)
{
    struct futhark_i32_1d *bad = NULL;
    struct futhark_i32_1d *arr =
                          (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) dim0 * sizeof(int32_t),
                              "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * sizeof(int32_t) > 0) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue, data,
                                                     arr->mem.mem, offset, 0,
                                                     (size_t) dim0 *
                                                     sizeof(int32_t), 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_dev_to_dev_runs,
                                                                                               &ctx->copy_dev_to_dev_total_runtime)));
        if (ctx->debugging)
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
    }
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_i32_1d(struct futhark_context *ctx, struct futhark_i32_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref_device(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_i32_1d(struct futhark_context *ctx,
                          struct futhark_i32_1d *arr, int32_t *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * sizeof(int32_t) > 0) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     arr->mem.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0, (size_t) arr->shape[0] *
                                                     sizeof(int32_t), data + 0,
                                                     0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_host_to_dev_runs,
                                                                                               &ctx->copy_host_to_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
    }
    lock_unlock(&ctx->lock);
    return 0;
}
cl_mem futhark_values_raw_i32_1d(struct futhark_context *ctx,
                                 struct futhark_i32_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
int64_t *futhark_shape_i32_1d(struct futhark_context *ctx,
                              struct futhark_i32_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_i8_1d {
    struct memblock_device mem;
    int64_t shape[1];
} ;
struct futhark_i8_1d *futhark_new_i8_1d(struct futhark_context *ctx,
                                        int8_t *data, int64_t dim0)
{
    struct futhark_i8_1d *bad = NULL;
    struct futhark_i8_1d *arr =
                         (struct futhark_i8_1d *) malloc(sizeof(struct futhark_i8_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) dim0 * sizeof(int8_t),
                              "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * sizeof(int8_t) > 0)
        OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                      arr->mem.mem, CL_TRUE, 0,
                                                      (size_t) dim0 *
                                                      sizeof(int8_t), data + 0,
                                                      0, NULL,
                                                      ctx->profiling_paused ||
                                                      !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                &ctx->copy_dev_to_host_runs,
                                                                                                &ctx->copy_dev_to_host_total_runtime)));
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_i8_1d *futhark_new_raw_i8_1d(struct futhark_context *ctx,
                                            cl_mem data, int offset,
                                            int64_t dim0)
{
    struct futhark_i8_1d *bad = NULL;
    struct futhark_i8_1d *arr =
                         (struct futhark_i8_1d *) malloc(sizeof(struct futhark_i8_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) dim0 * sizeof(int8_t),
                              "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * sizeof(int8_t) > 0) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue, data,
                                                     arr->mem.mem, offset, 0,
                                                     (size_t) dim0 *
                                                     sizeof(int8_t), 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_dev_to_dev_runs,
                                                                                               &ctx->copy_dev_to_dev_total_runtime)));
        if (ctx->debugging)
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
    }
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_i8_1d(struct futhark_context *ctx, struct futhark_i8_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref_device(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_i8_1d(struct futhark_context *ctx, struct futhark_i8_1d *arr,
                         int8_t *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * sizeof(int8_t) > 0) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     arr->mem.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0, (size_t) arr->shape[0] *
                                                     sizeof(int8_t), data + 0,
                                                     0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_host_to_dev_runs,
                                                                                               &ctx->copy_host_to_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
    }
    lock_unlock(&ctx->lock);
    return 0;
}
cl_mem futhark_values_raw_i8_1d(struct futhark_context *ctx,
                                struct futhark_i8_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
int64_t *futhark_shape_i8_1d(struct futhark_context *ctx,
                             struct futhark_i8_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_f32_1d {
    struct memblock_device mem;
    int64_t shape[1];
} ;
struct futhark_f32_1d *futhark_new_f32_1d(struct futhark_context *ctx,
                                          float *data, int64_t dim0)
{
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr =
                          (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) dim0 * sizeof(float),
                              "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * sizeof(float) > 0)
        OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                      arr->mem.mem, CL_TRUE, 0,
                                                      (size_t) dim0 *
                                                      sizeof(float), data + 0,
                                                      0, NULL,
                                                      ctx->profiling_paused ||
                                                      !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                &ctx->copy_dev_to_host_runs,
                                                                                                &ctx->copy_dev_to_host_total_runtime)));
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_1d *futhark_new_raw_f32_1d(struct futhark_context *ctx,
                                              cl_mem data, int offset,
                                              int64_t dim0)
{
    struct futhark_f32_1d *bad = NULL;
    struct futhark_f32_1d *arr =
                          (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) dim0 * sizeof(float),
                              "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    if ((size_t) dim0 * sizeof(float) > 0) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue, data,
                                                     arr->mem.mem, offset, 0,
                                                     (size_t) dim0 *
                                                     sizeof(float), 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_dev_to_dev_runs,
                                                                                               &ctx->copy_dev_to_dev_total_runtime)));
        if (ctx->debugging)
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
    }
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_1d(struct futhark_context *ctx, struct futhark_f32_1d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref_device(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_1d(struct futhark_context *ctx,
                          struct futhark_f32_1d *arr, float *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) arr->shape[0] * sizeof(float) > 0) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     arr->mem.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0, (size_t) arr->shape[0] *
                                                     sizeof(float), data + 0, 0,
                                                     NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_host_to_dev_runs,
                                                                                               &ctx->copy_host_to_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
    }
    lock_unlock(&ctx->lock);
    return 0;
}
cl_mem futhark_values_raw_f32_1d(struct futhark_context *ctx,
                                 struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
int64_t *futhark_shape_f32_1d(struct futhark_context *ctx,
                              struct futhark_f32_1d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_i32_2d {
    struct memblock_device mem;
    int64_t shape[2];
} ;
struct futhark_i32_2d *futhark_new_i32_2d(struct futhark_context *ctx,
                                          int32_t *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_i32_2d *bad = NULL;
    struct futhark_i32_2d *arr =
                          (struct futhark_i32_2d *) malloc(sizeof(struct futhark_i32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) (dim0 * dim1) *
                              sizeof(int32_t), "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * sizeof(int32_t) > 0)
        OPENCL_SUCCEED_OR_RETURN(clEnqueueWriteBuffer(ctx->opencl.queue,
                                                      arr->mem.mem, CL_TRUE, 0,
                                                      (size_t) (dim0 * dim1) *
                                                      sizeof(int32_t), data + 0,
                                                      0, NULL,
                                                      ctx->profiling_paused ||
                                                      !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                                &ctx->copy_dev_to_host_runs,
                                                                                                &ctx->copy_dev_to_host_total_runtime)));
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_i32_2d *futhark_new_raw_i32_2d(struct futhark_context *ctx,
                                              cl_mem data, int offset,
                                              int64_t dim0, int64_t dim1)
{
    struct futhark_i32_2d *bad = NULL;
    struct futhark_i32_2d *arr =
                          (struct futhark_i32_2d *) malloc(sizeof(struct futhark_i32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    arr->mem.references = NULL;
    if (memblock_alloc_device(ctx, &arr->mem, (size_t) (dim0 * dim1) *
                              sizeof(int32_t), "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    if ((size_t) (dim0 * dim1) * sizeof(int32_t) > 0) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueCopyBuffer(ctx->opencl.queue, data,
                                                     arr->mem.mem, offset, 0,
                                                     (size_t) (dim0 * dim1) *
                                                     sizeof(int32_t), 0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_dev_to_dev_runs,
                                                                                               &ctx->copy_dev_to_dev_total_runtime)));
        if (ctx->debugging)
            OPENCL_SUCCEED_FATAL(clFinish(ctx->opencl.queue));
    }
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_i32_2d(struct futhark_context *ctx, struct futhark_i32_2d *arr)
{
    lock_lock(&ctx->lock);
    if (memblock_unref_device(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_i32_2d(struct futhark_context *ctx,
                          struct futhark_i32_2d *arr, int32_t *data)
{
    lock_lock(&ctx->lock);
    if ((size_t) (arr->shape[0] * arr->shape[1]) * sizeof(int32_t) > 0) {
        OPENCL_SUCCEED_OR_RETURN(clEnqueueReadBuffer(ctx->opencl.queue,
                                                     arr->mem.mem,
                                                     ctx->failure_is_an_option ? CL_FALSE : CL_TRUE,
                                                     0,
                                                     (size_t) (arr->shape[0] *
                                                               arr->shape[1]) *
                                                     sizeof(int32_t), data + 0,
                                                     0, NULL,
                                                     ctx->profiling_paused ||
                                                     !ctx->profiling ? NULL : opencl_get_event(&ctx->opencl,
                                                                                               &ctx->copy_host_to_dev_runs,
                                                                                               &ctx->copy_host_to_dev_total_runtime)));
        if (ctx->failure_is_an_option && futhark_context_sync(ctx) != 0)
            return 1;
    }
    lock_unlock(&ctx->lock);
    return 0;
}
cl_mem futhark_values_raw_i32_2d(struct futhark_context *ctx,
                                 struct futhark_i32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
int64_t *futhark_shape_i32_2d(struct futhark_context *ctx,
                              struct futhark_i32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}
struct futhark_opaque_4bbff2b2 {
    float v0;
    float v1;
    float v2;
    float v3;
    float v4;
    float v5;
    float v6;
    float v7;
    float v8;
    float v9;
    float v10;
    float v11;
} ;
int futhark_free_opaque_4bbff2b2(struct futhark_context *ctx,
                                 struct futhark_opaque_4bbff2b2 *obj)
{
    int ret = 0, tmp;
    
    free(obj);
    return ret;
}
struct futhark_opaque_74b00dd0 {
    struct futhark_f32_1d *v0;
    struct futhark_f32_1d *v1;
    struct futhark_f32_1d *v2;
    struct futhark_f32_1d *v3;
    struct futhark_f32_1d *v4;
    struct futhark_f32_1d *v5;
    struct futhark_i8_1d *v6;
    struct futhark_i32_1d *v7;
    struct futhark_i32_1d *v8;
    struct futhark_i8_1d *v9;
    struct futhark_i32_1d *v10;
    struct futhark_f32_1d *v11;
    struct futhark_f32_1d *v12;
    struct futhark_f32_1d *v13;
    struct futhark_f32_1d *v14;
    struct futhark_f32_1d *v15;
    struct futhark_f32_1d *v16;
    struct futhark_f32_1d *v17;
} ;
int futhark_free_opaque_74b00dd0(struct futhark_context *ctx,
                                 struct futhark_opaque_74b00dd0 *obj)
{
    int ret = 0, tmp;
    
    if ((tmp = futhark_free_f32_1d(ctx, obj->v0)) != 0)
        ret = tmp;
    if ((tmp = futhark_free_f32_1d(ctx, obj->v1)) != 0)
        ret = tmp;
    if ((tmp = futhark_free_f32_1d(ctx, obj->v2)) != 0)
        ret = tmp;
    if ((tmp = futhark_free_f32_1d(ctx, obj->v3)) != 0)
        ret = tmp;
    if ((tmp = futhark_free_f32_1d(ctx, obj->v4)) != 0)
        ret = tmp;
    if ((tmp = futhark_free_f32_1d(ctx, obj->v5)) != 0)
        ret = tmp;
    if ((tmp = futhark_free_i8_1d(ctx, obj->v6)) != 0)
        ret = tmp;
    if ((tmp = futhark_free_i32_1d(ctx, obj->v7)) != 0)
        ret = tmp;
    if ((tmp = futhark_free_i32_1d(ctx, obj->v8)) != 0)
        ret = tmp;
    if ((tmp = futhark_free_i8_1d(ctx, obj->v9)) != 0)
        ret = tmp;
    if ((tmp = futhark_free_i32_1d(ctx, obj->v10)) != 0)
        ret = tmp;
    if ((tmp = futhark_free_f32_1d(ctx, obj->v11)) != 0)
        ret = tmp;
    if ((tmp = futhark_free_f32_1d(ctx, obj->v12)) != 0)
        ret = tmp;
    if ((tmp = futhark_free_f32_1d(ctx, obj->v13)) != 0)
        ret = tmp;
    if ((tmp = futhark_free_f32_1d(ctx, obj->v14)) != 0)
        ret = tmp;
    if ((tmp = futhark_free_f32_1d(ctx, obj->v15)) != 0)
        ret = tmp;
    if ((tmp = futhark_free_f32_1d(ctx, obj->v16)) != 0)
        ret = tmp;
    if ((tmp = futhark_free_f32_1d(ctx, obj->v17)) != 0)
        ret = tmp;
    free(obj);
    return ret;
}
int futhark_entry_render_irreg(struct futhark_context *ctx,
                               struct futhark_i32_2d **out0, const int32_t in0,
                               const int32_t in1)
{
    int32_t h_71517;
    int32_t w_71518;
    struct memblock_device out_mem_76984;
    
    out_mem_76984.references = NULL;
    
    int32_t out_arrsizze_76985;
    int32_t out_arrsizze_76986;
    
    lock_lock(&ctx->lock);
    h_71517 = in0;
    w_71518 = in1;
    
    int ret = futrts_render_irreg(ctx, &out_mem_76984, &out_arrsizze_76985,
                                  &out_arrsizze_76986, h_71517, w_71518);
    
    if (ret == 0) {
        assert((*out0 =
                (struct futhark_i32_2d *) malloc(sizeof(struct futhark_i32_2d))) !=
            NULL);
        (*out0)->mem = out_mem_76984;
        (*out0)->shape[0] = out_arrsizze_76985;
        (*out0)->shape[1] = out_arrsizze_76986;
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_render_rgbbox(struct futhark_context *ctx,
                                struct futhark_i32_2d **out0, const int32_t in0,
                                const int32_t in1)
{
    int32_t h_70471;
    int32_t w_70472;
    struct memblock_device out_mem_76733;
    
    out_mem_76733.references = NULL;
    
    int32_t out_arrsizze_76734;
    int32_t out_arrsizze_76735;
    
    lock_lock(&ctx->lock);
    h_70471 = in0;
    w_70472 = in1;
    
    int ret = futrts_render_rgbbox(ctx, &out_mem_76733, &out_arrsizze_76734,
                                   &out_arrsizze_76735, h_70471, w_70472);
    
    if (ret == 0) {
        assert((*out0 =
                (struct futhark_i32_2d *) malloc(sizeof(struct futhark_i32_2d))) !=
            NULL);
        (*out0)->mem = out_mem_76733;
        (*out0)->shape[0] = out_arrsizze_76734;
        (*out0)->shape[1] = out_arrsizze_76735;
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_bvh_irreg(struct futhark_context *ctx,
                            struct futhark_opaque_74b00dd0 **out0,
                            struct futhark_opaque_4bbff2b2 **out1, const
                            int32_t in0, const int32_t in1)
{
    int32_t h_69987;
    int32_t w_69988;
    struct memblock_device out_mem_76478;
    
    out_mem_76478.references = NULL;
    
    int32_t out_arrsizze_76479;
    struct memblock_device out_mem_76480;
    
    out_mem_76480.references = NULL;
    
    struct memblock_device out_mem_76481;
    
    out_mem_76481.references = NULL;
    
    struct memblock_device out_mem_76482;
    
    out_mem_76482.references = NULL;
    
    struct memblock_device out_mem_76483;
    
    out_mem_76483.references = NULL;
    
    struct memblock_device out_mem_76484;
    
    out_mem_76484.references = NULL;
    
    struct memblock_device out_mem_76485;
    
    out_mem_76485.references = NULL;
    
    struct memblock_device out_mem_76486;
    
    out_mem_76486.references = NULL;
    
    struct memblock_device out_mem_76487;
    
    out_mem_76487.references = NULL;
    
    struct memblock_device out_mem_76488;
    
    out_mem_76488.references = NULL;
    
    struct memblock_device out_mem_76489;
    
    out_mem_76489.references = NULL;
    
    struct memblock_device out_mem_76490;
    
    out_mem_76490.references = NULL;
    
    int32_t out_arrsizze_76491;
    struct memblock_device out_mem_76492;
    
    out_mem_76492.references = NULL;
    
    struct memblock_device out_mem_76493;
    
    out_mem_76493.references = NULL;
    
    struct memblock_device out_mem_76494;
    
    out_mem_76494.references = NULL;
    
    struct memblock_device out_mem_76495;
    
    out_mem_76495.references = NULL;
    
    struct memblock_device out_mem_76496;
    
    out_mem_76496.references = NULL;
    
    struct memblock_device out_mem_76497;
    
    out_mem_76497.references = NULL;
    
    float scalar_out_76498;
    float scalar_out_76499;
    float scalar_out_76500;
    float scalar_out_76501;
    float scalar_out_76502;
    float scalar_out_76503;
    float scalar_out_76504;
    float scalar_out_76505;
    float scalar_out_76506;
    float scalar_out_76507;
    float scalar_out_76508;
    float scalar_out_76509;
    
    lock_lock(&ctx->lock);
    h_69987 = in0;
    w_69988 = in1;
    
    int ret = futrts_bvh_irreg(ctx, &out_mem_76478, &out_arrsizze_76479,
                               &out_mem_76480, &out_mem_76481, &out_mem_76482,
                               &out_mem_76483, &out_mem_76484, &out_mem_76485,
                               &out_mem_76486, &out_mem_76487, &out_mem_76488,
                               &out_mem_76489, &out_mem_76490,
                               &out_arrsizze_76491, &out_mem_76492,
                               &out_mem_76493, &out_mem_76494, &out_mem_76495,
                               &out_mem_76496, &out_mem_76497,
                               &scalar_out_76498, &scalar_out_76499,
                               &scalar_out_76500, &scalar_out_76501,
                               &scalar_out_76502, &scalar_out_76503,
                               &scalar_out_76504, &scalar_out_76505,
                               &scalar_out_76506, &scalar_out_76507,
                               &scalar_out_76508, &scalar_out_76509, h_69987,
                               w_69988);
    
    if (ret == 0) {
        assert((*out0 =
                (struct futhark_opaque_74b00dd0 *) malloc(sizeof(struct futhark_opaque_74b00dd0))) !=
            NULL);
        assert(((*out0)->v0 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v0->mem = out_mem_76478;
        (*out0)->v0->shape[0] = out_arrsizze_76479;
        assert(((*out0)->v1 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v1->mem = out_mem_76480;
        (*out0)->v1->shape[0] = out_arrsizze_76479;
        assert(((*out0)->v2 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v2->mem = out_mem_76481;
        (*out0)->v2->shape[0] = out_arrsizze_76479;
        assert(((*out0)->v3 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v3->mem = out_mem_76482;
        (*out0)->v3->shape[0] = out_arrsizze_76479;
        assert(((*out0)->v4 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v4->mem = out_mem_76483;
        (*out0)->v4->shape[0] = out_arrsizze_76479;
        assert(((*out0)->v5 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v5->mem = out_mem_76484;
        (*out0)->v5->shape[0] = out_arrsizze_76479;
        assert(((*out0)->v6 =
                (struct futhark_i8_1d *) malloc(sizeof(struct futhark_i8_1d))) !=
            NULL);
        (*out0)->v6->mem = out_mem_76485;
        (*out0)->v6->shape[0] = out_arrsizze_76479;
        assert(((*out0)->v7 =
                (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) !=
            NULL);
        (*out0)->v7->mem = out_mem_76486;
        (*out0)->v7->shape[0] = out_arrsizze_76479;
        assert(((*out0)->v8 =
                (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) !=
            NULL);
        (*out0)->v8->mem = out_mem_76487;
        (*out0)->v8->shape[0] = out_arrsizze_76479;
        assert(((*out0)->v9 =
                (struct futhark_i8_1d *) malloc(sizeof(struct futhark_i8_1d))) !=
            NULL);
        (*out0)->v9->mem = out_mem_76488;
        (*out0)->v9->shape[0] = out_arrsizze_76479;
        assert(((*out0)->v10 =
                (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) !=
            NULL);
        (*out0)->v10->mem = out_mem_76489;
        (*out0)->v10->shape[0] = out_arrsizze_76479;
        assert(((*out0)->v11 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v11->mem = out_mem_76490;
        (*out0)->v11->shape[0] = out_arrsizze_76491;
        assert(((*out0)->v12 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v12->mem = out_mem_76492;
        (*out0)->v12->shape[0] = out_arrsizze_76491;
        assert(((*out0)->v13 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v13->mem = out_mem_76493;
        (*out0)->v13->shape[0] = out_arrsizze_76491;
        assert(((*out0)->v14 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v14->mem = out_mem_76494;
        (*out0)->v14->shape[0] = out_arrsizze_76491;
        assert(((*out0)->v15 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v15->mem = out_mem_76495;
        (*out0)->v15->shape[0] = out_arrsizze_76491;
        assert(((*out0)->v16 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v16->mem = out_mem_76496;
        (*out0)->v16->shape[0] = out_arrsizze_76491;
        assert(((*out0)->v17 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v17->mem = out_mem_76497;
        (*out0)->v17->shape[0] = out_arrsizze_76491;
        assert((*out1 =
                (struct futhark_opaque_4bbff2b2 *) malloc(sizeof(struct futhark_opaque_4bbff2b2))) !=
            NULL);
        (*out1)->v0 = scalar_out_76498;
        (*out1)->v1 = scalar_out_76499;
        (*out1)->v2 = scalar_out_76500;
        (*out1)->v3 = scalar_out_76501;
        (*out1)->v4 = scalar_out_76502;
        (*out1)->v5 = scalar_out_76503;
        (*out1)->v6 = scalar_out_76504;
        (*out1)->v7 = scalar_out_76505;
        (*out1)->v8 = scalar_out_76506;
        (*out1)->v9 = scalar_out_76507;
        (*out1)->v10 = scalar_out_76508;
        (*out1)->v11 = scalar_out_76509;
    }
    lock_unlock(&ctx->lock);
    return ret;
}
int futhark_entry_bvh_rgbbox(struct futhark_context *ctx,
                             struct futhark_opaque_74b00dd0 **out0,
                             struct futhark_opaque_4bbff2b2 **out1, const
                             int32_t in0, const int32_t in1)
{
    int32_t h_69351;
    int32_t w_69352;
    struct memblock_device out_mem_76205;
    
    out_mem_76205.references = NULL;
    
    int32_t out_arrsizze_76206;
    struct memblock_device out_mem_76207;
    
    out_mem_76207.references = NULL;
    
    struct memblock_device out_mem_76208;
    
    out_mem_76208.references = NULL;
    
    struct memblock_device out_mem_76209;
    
    out_mem_76209.references = NULL;
    
    struct memblock_device out_mem_76210;
    
    out_mem_76210.references = NULL;
    
    struct memblock_device out_mem_76211;
    
    out_mem_76211.references = NULL;
    
    struct memblock_device out_mem_76212;
    
    out_mem_76212.references = NULL;
    
    struct memblock_device out_mem_76213;
    
    out_mem_76213.references = NULL;
    
    struct memblock_device out_mem_76214;
    
    out_mem_76214.references = NULL;
    
    struct memblock_device out_mem_76215;
    
    out_mem_76215.references = NULL;
    
    struct memblock_device out_mem_76216;
    
    out_mem_76216.references = NULL;
    
    struct memblock_device out_mem_76217;
    
    out_mem_76217.references = NULL;
    
    int32_t out_arrsizze_76218;
    struct memblock_device out_mem_76219;
    
    out_mem_76219.references = NULL;
    
    struct memblock_device out_mem_76220;
    
    out_mem_76220.references = NULL;
    
    struct memblock_device out_mem_76221;
    
    out_mem_76221.references = NULL;
    
    struct memblock_device out_mem_76222;
    
    out_mem_76222.references = NULL;
    
    struct memblock_device out_mem_76223;
    
    out_mem_76223.references = NULL;
    
    struct memblock_device out_mem_76224;
    
    out_mem_76224.references = NULL;
    
    float scalar_out_76225;
    float scalar_out_76226;
    float scalar_out_76227;
    float scalar_out_76228;
    float scalar_out_76229;
    float scalar_out_76230;
    float scalar_out_76231;
    float scalar_out_76232;
    float scalar_out_76233;
    float scalar_out_76234;
    float scalar_out_76235;
    float scalar_out_76236;
    
    lock_lock(&ctx->lock);
    h_69351 = in0;
    w_69352 = in1;
    
    int ret = futrts_bvh_rgbbox(ctx, &out_mem_76205, &out_arrsizze_76206,
                                &out_mem_76207, &out_mem_76208, &out_mem_76209,
                                &out_mem_76210, &out_mem_76211, &out_mem_76212,
                                &out_mem_76213, &out_mem_76214, &out_mem_76215,
                                &out_mem_76216, &out_mem_76217,
                                &out_arrsizze_76218, &out_mem_76219,
                                &out_mem_76220, &out_mem_76221, &out_mem_76222,
                                &out_mem_76223, &out_mem_76224,
                                &scalar_out_76225, &scalar_out_76226,
                                &scalar_out_76227, &scalar_out_76228,
                                &scalar_out_76229, &scalar_out_76230,
                                &scalar_out_76231, &scalar_out_76232,
                                &scalar_out_76233, &scalar_out_76234,
                                &scalar_out_76235, &scalar_out_76236, h_69351,
                                w_69352);
    
    if (ret == 0) {
        assert((*out0 =
                (struct futhark_opaque_74b00dd0 *) malloc(sizeof(struct futhark_opaque_74b00dd0))) !=
            NULL);
        assert(((*out0)->v0 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v0->mem = out_mem_76205;
        (*out0)->v0->shape[0] = out_arrsizze_76206;
        assert(((*out0)->v1 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v1->mem = out_mem_76207;
        (*out0)->v1->shape[0] = out_arrsizze_76206;
        assert(((*out0)->v2 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v2->mem = out_mem_76208;
        (*out0)->v2->shape[0] = out_arrsizze_76206;
        assert(((*out0)->v3 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v3->mem = out_mem_76209;
        (*out0)->v3->shape[0] = out_arrsizze_76206;
        assert(((*out0)->v4 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v4->mem = out_mem_76210;
        (*out0)->v4->shape[0] = out_arrsizze_76206;
        assert(((*out0)->v5 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v5->mem = out_mem_76211;
        (*out0)->v5->shape[0] = out_arrsizze_76206;
        assert(((*out0)->v6 =
                (struct futhark_i8_1d *) malloc(sizeof(struct futhark_i8_1d))) !=
            NULL);
        (*out0)->v6->mem = out_mem_76212;
        (*out0)->v6->shape[0] = out_arrsizze_76206;
        assert(((*out0)->v7 =
                (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) !=
            NULL);
        (*out0)->v7->mem = out_mem_76213;
        (*out0)->v7->shape[0] = out_arrsizze_76206;
        assert(((*out0)->v8 =
                (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) !=
            NULL);
        (*out0)->v8->mem = out_mem_76214;
        (*out0)->v8->shape[0] = out_arrsizze_76206;
        assert(((*out0)->v9 =
                (struct futhark_i8_1d *) malloc(sizeof(struct futhark_i8_1d))) !=
            NULL);
        (*out0)->v9->mem = out_mem_76215;
        (*out0)->v9->shape[0] = out_arrsizze_76206;
        assert(((*out0)->v10 =
                (struct futhark_i32_1d *) malloc(sizeof(struct futhark_i32_1d))) !=
            NULL);
        (*out0)->v10->mem = out_mem_76216;
        (*out0)->v10->shape[0] = out_arrsizze_76206;
        assert(((*out0)->v11 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v11->mem = out_mem_76217;
        (*out0)->v11->shape[0] = out_arrsizze_76218;
        assert(((*out0)->v12 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v12->mem = out_mem_76219;
        (*out0)->v12->shape[0] = out_arrsizze_76218;
        assert(((*out0)->v13 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v13->mem = out_mem_76220;
        (*out0)->v13->shape[0] = out_arrsizze_76218;
        assert(((*out0)->v14 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v14->mem = out_mem_76221;
        (*out0)->v14->shape[0] = out_arrsizze_76218;
        assert(((*out0)->v15 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v15->mem = out_mem_76222;
        (*out0)->v15->shape[0] = out_arrsizze_76218;
        assert(((*out0)->v16 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v16->mem = out_mem_76223;
        (*out0)->v16->shape[0] = out_arrsizze_76218;
        assert(((*out0)->v17 =
                (struct futhark_f32_1d *) malloc(sizeof(struct futhark_f32_1d))) !=
            NULL);
        (*out0)->v17->mem = out_mem_76224;
        (*out0)->v17->shape[0] = out_arrsizze_76218;
        assert((*out1 =
                (struct futhark_opaque_4bbff2b2 *) malloc(sizeof(struct futhark_opaque_4bbff2b2))) !=
            NULL);
        (*out1)->v0 = scalar_out_76225;
        (*out1)->v1 = scalar_out_76226;
        (*out1)->v2 = scalar_out_76227;
        (*out1)->v3 = scalar_out_76228;
        (*out1)->v4 = scalar_out_76229;
        (*out1)->v5 = scalar_out_76230;
        (*out1)->v6 = scalar_out_76231;
        (*out1)->v7 = scalar_out_76232;
        (*out1)->v8 = scalar_out_76233;
        (*out1)->v9 = scalar_out_76234;
        (*out1)->v10 = scalar_out_76235;
        (*out1)->v11 = scalar_out_76236;
    }
    lock_unlock(&ctx->lock);
    return ret;
}
